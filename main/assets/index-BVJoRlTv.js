(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var J2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bi(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var qw={exports:{}},eg={},Xw={exports:{}},vn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z2;function R4(){if(Z2)return vn;Z2=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),d=Symbol.iterator;function h(L){return L===null||typeof L!="object"?null:(L=d&&L[d]||L["@@iterator"],typeof L=="function"?L:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,E={};function _(L,z,Y){this.props=L,this.context=z,this.refs=E,this.updater=Y||g}_.prototype.isReactComponent={},_.prototype.setState=function(L,z){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,z,"setState")},_.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function m(){}m.prototype=_.prototype;function v(L,z,Y){this.props=L,this.context=z,this.refs=E,this.updater=Y||g}var S=v.prototype=new m;S.constructor=v,y(S,_.prototype),S.isPureReactComponent=!0;var T=Array.isArray,M=Object.prototype.hasOwnProperty,A={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function O(L,z,Y){var B,J={},le=null,pe=null;if(z!=null)for(B in z.ref!==void 0&&(pe=z.ref),z.key!==void 0&&(le=""+z.key),z)M.call(z,B)&&!R.hasOwnProperty(B)&&(J[B]=z[B]);var he=arguments.length-2;if(he===1)J.children=Y;else if(1<he){for(var Ee=Array(he),_e=0;_e<he;_e++)Ee[_e]=arguments[_e+2];J.children=Ee}if(L&&L.defaultProps)for(B in he=L.defaultProps,he)J[B]===void 0&&(J[B]=he[B]);return{$$typeof:n,type:L,key:le,ref:pe,props:J,_owner:A.current}}function I(L,z){return{$$typeof:n,type:L.type,key:z,ref:L.ref,props:L.props,_owner:L._owner}}function k(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function G(L){var z={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(Y){return z[Y]})}var $=/\/+/g;function U(L,z){return typeof L=="object"&&L!==null&&L.key!=null?G(""+L.key):z.toString(36)}function ee(L,z,Y,B,J){var le=typeof L;(le==="undefined"||le==="boolean")&&(L=null);var pe=!1;if(L===null)pe=!0;else switch(le){case"string":case"number":pe=!0;break;case"object":switch(L.$$typeof){case n:case e:pe=!0}}if(pe)return pe=L,J=J(pe),L=B===""?"."+U(pe,0):B,T(J)?(Y="",L!=null&&(Y=L.replace($,"$&/")+"/"),ee(J,z,Y,"",function(_e){return _e})):J!=null&&(k(J)&&(J=I(J,Y+(!J.key||pe&&pe.key===J.key?"":(""+J.key).replace($,"$&/")+"/")+L)),z.push(J)),1;if(pe=0,B=B===""?".":B+":",T(L))for(var he=0;he<L.length;he++){le=L[he];var Ee=B+U(le,he);pe+=ee(le,z,Y,Ee,J)}else if(Ee=h(L),typeof Ee=="function")for(L=Ee.call(L),he=0;!(le=L.next()).done;)le=le.value,Ee=B+U(le,he++),pe+=ee(le,z,Y,Ee,J);else if(le==="object")throw z=String(L),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return pe}function re(L,z,Y){if(L==null)return L;var B=[],J=0;return ee(L,B,"","",function(le){return z.call(Y,le,J++)}),B}function ne(L){if(L._status===-1){var z=L._result;z=z(),z.then(function(Y){(L._status===0||L._status===-1)&&(L._status=1,L._result=Y)},function(Y){(L._status===0||L._status===-1)&&(L._status=2,L._result=Y)}),L._status===-1&&(L._status=0,L._result=z)}if(L._status===1)return L._result.default;throw L._result}var X={current:null},q={transition:null},K={ReactCurrentDispatcher:X,ReactCurrentBatchConfig:q,ReactCurrentOwner:A};function F(){throw Error("act(...) is not supported in production builds of React.")}return vn.Children={map:re,forEach:function(L,z,Y){re(L,function(){z.apply(this,arguments)},Y)},count:function(L){var z=0;return re(L,function(){z++}),z},toArray:function(L){return re(L,function(z){return z})||[]},only:function(L){if(!k(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},vn.Component=_,vn.Fragment=t,vn.Profiler=i,vn.PureComponent=v,vn.StrictMode=r,vn.Suspense=l,vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,vn.act=F,vn.cloneElement=function(L,z,Y){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var B=y({},L.props),J=L.key,le=L.ref,pe=L._owner;if(z!=null){if(z.ref!==void 0&&(le=z.ref,pe=A.current),z.key!==void 0&&(J=""+z.key),L.type&&L.type.defaultProps)var he=L.type.defaultProps;for(Ee in z)M.call(z,Ee)&&!R.hasOwnProperty(Ee)&&(B[Ee]=z[Ee]===void 0&&he!==void 0?he[Ee]:z[Ee])}var Ee=arguments.length-2;if(Ee===1)B.children=Y;else if(1<Ee){he=Array(Ee);for(var _e=0;_e<Ee;_e++)he[_e]=arguments[_e+2];B.children=he}return{$$typeof:n,type:L.type,key:J,ref:le,props:B,_owner:pe}},vn.createContext=function(L){return L={$$typeof:o,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:s,_context:L},L.Consumer=L},vn.createElement=O,vn.createFactory=function(L){var z=O.bind(null,L);return z.type=L,z},vn.createRef=function(){return{current:null}},vn.forwardRef=function(L){return{$$typeof:a,render:L}},vn.isValidElement=k,vn.lazy=function(L){return{$$typeof:c,_payload:{_status:-1,_result:L},_init:ne}},vn.memo=function(L,z){return{$$typeof:u,type:L,compare:z===void 0?null:z}},vn.startTransition=function(L){var z=q.transition;q.transition={};try{L()}finally{q.transition=z}},vn.unstable_act=F,vn.useCallback=function(L,z){return X.current.useCallback(L,z)},vn.useContext=function(L){return X.current.useContext(L)},vn.useDebugValue=function(){},vn.useDeferredValue=function(L){return X.current.useDeferredValue(L)},vn.useEffect=function(L,z){return X.current.useEffect(L,z)},vn.useId=function(){return X.current.useId()},vn.useImperativeHandle=function(L,z,Y){return X.current.useImperativeHandle(L,z,Y)},vn.useInsertionEffect=function(L,z){return X.current.useInsertionEffect(L,z)},vn.useLayoutEffect=function(L,z){return X.current.useLayoutEffect(L,z)},vn.useMemo=function(L,z){return X.current.useMemo(L,z)},vn.useReducer=function(L,z,Y){return X.current.useReducer(L,z,Y)},vn.useRef=function(L){return X.current.useRef(L)},vn.useState=function(L){return X.current.useState(L)},vn.useSyncExternalStore=function(L,z,Y){return X.current.useSyncExternalStore(L,z,Y)},vn.useTransition=function(){return X.current.useTransition()},vn.version="18.3.1",vn}var Q2;function kd(){return Q2||(Q2=1,Xw.exports=R4()),Xw.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eC;function P4(){if(eC)return eg;eC=1;var n=kd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,u){var c,d={},h=null,g=null;u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(g=l.ref);for(c in l)r.call(l,c)&&!s.hasOwnProperty(c)&&(d[c]=l[c]);if(a&&a.defaultProps)for(c in l=a.defaultProps,l)d[c]===void 0&&(d[c]=l[c]);return{$$typeof:e,type:a,key:h,ref:g,props:d,_owner:i.current}}return eg.Fragment=t,eg.jsx=o,eg.jsxs=o,eg}var tC;function I4(){return tC||(tC=1,qw.exports=P4()),qw.exports}var W=I4(),Z=kd();const hx=Bi(Z);var d0={},Yw={exports:{}},Ys={},Kw={exports:{}},Jw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nC;function L4(){return nC||(nC=1,function(n){function e(q,K){var F=q.length;q.push(K);e:for(;0<F;){var L=F-1>>>1,z=q[L];if(0<i(z,K))q[L]=K,q[F]=z,F=L;else break e}}function t(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var K=q[0],F=q.pop();if(F!==K){q[0]=F;e:for(var L=0,z=q.length,Y=z>>>1;L<Y;){var B=2*(L+1)-1,J=q[B],le=B+1,pe=q[le];if(0>i(J,F))le<z&&0>i(pe,J)?(q[L]=pe,q[le]=F,L=le):(q[L]=J,q[B]=F,L=B);else if(le<z&&0>i(pe,F))q[L]=pe,q[le]=F,L=le;else break e}}return K}function i(q,K){var F=q.sortIndex-K.sortIndex;return F!==0?F:q.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,g=!1,y=!1,E=!1,_=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(q){for(var K=t(u);K!==null;){if(K.callback===null)r(u);else if(K.startTime<=q)r(u),K.sortIndex=K.expirationTime,e(l,K);else break;K=t(u)}}function T(q){if(E=!1,S(q),!y)if(t(l)!==null)y=!0,ne(M);else{var K=t(u);K!==null&&X(T,K.startTime-q)}}function M(q,K){y=!1,E&&(E=!1,m(O),O=-1),g=!0;var F=h;try{for(S(K),d=t(l);d!==null&&(!(d.expirationTime>K)||q&&!G());){var L=d.callback;if(typeof L=="function"){d.callback=null,h=d.priorityLevel;var z=L(d.expirationTime<=K);K=n.unstable_now(),typeof z=="function"?d.callback=z:d===t(l)&&r(l),S(K)}else r(l);d=t(l)}if(d!==null)var Y=!0;else{var B=t(u);B!==null&&X(T,B.startTime-K),Y=!1}return Y}finally{d=null,h=F,g=!1}}var A=!1,R=null,O=-1,I=5,k=-1;function G(){return!(n.unstable_now()-k<I)}function $(){if(R!==null){var q=n.unstable_now();k=q;var K=!0;try{K=R(!0,q)}finally{K?U():(A=!1,R=null)}}else A=!1}var U;if(typeof v=="function")U=function(){v($)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,re=ee.port2;ee.port1.onmessage=$,U=function(){re.postMessage(null)}}else U=function(){_($,0)};function ne(q){R=q,A||(A=!0,U())}function X(q,K){O=_(function(){q(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_continueExecution=function(){y||g||(y=!0,ne(M))},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(q){switch(h){case 1:case 2:case 3:var K=3;break;default:K=h}var F=h;h=K;try{return q()}finally{h=F}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(q,K){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var F=h;h=q;try{return K()}finally{h=F}},n.unstable_scheduleCallback=function(q,K,F){var L=n.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?L+F:L):F=L,q){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=F+z,q={id:c++,callback:K,priorityLevel:q,startTime:F,expirationTime:z,sortIndex:-1},F>L?(q.sortIndex=F,e(u,q),t(l)===null&&q===t(u)&&(E?(m(O),O=-1):E=!0,X(T,F-L))):(q.sortIndex=z,e(l,q),y||g||(y=!0,ne(M))),q},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(q){var K=h;return function(){var F=h;h=K;try{return q.apply(this,arguments)}finally{h=F}}}}(Jw)),Jw}var rC;function N4(){return rC||(rC=1,Kw.exports=L4()),Kw.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iC;function O4(){if(iC)return Ys;iC=1;var n=kd(),e=N4();function t(f){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+f,b=1;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(f,p){o(f,p),o(f+"Capture",p)}function o(f,p){for(i[f]=p,f=0;f<p.length;f++)r.add(p[f])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},d={};function h(f){return l.call(d,f)?!0:l.call(c,f)?!1:u.test(f)?d[f]=!0:(c[f]=!0,!1)}function g(f,p,b,P){if(b!==null&&b.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return P?!1:b!==null?!b.acceptsBooleans:(f=f.toLowerCase().slice(0,5),f!=="data-"&&f!=="aria-");default:return!1}}function y(f,p,b,P){if(p===null||typeof p>"u"||g(f,p,b,P))return!0;if(P)return!1;if(b!==null)switch(b.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function E(f,p,b,P,D,V,ae){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=P,this.attributeNamespace=D,this.mustUseProperty=b,this.propertyName=f,this.type=p,this.sanitizeURL=V,this.removeEmptyString=ae}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(f){_[f]=new E(f,0,!1,f,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(f){var p=f[0];_[p]=new E(p,1,!1,f[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(f){_[f]=new E(f,2,!1,f.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(f){_[f]=new E(f,2,!1,f,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(f){_[f]=new E(f,3,!1,f.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(f){_[f]=new E(f,3,!0,f,null,!1,!1)}),["capture","download"].forEach(function(f){_[f]=new E(f,4,!1,f,null,!1,!1)}),["cols","rows","size","span"].forEach(function(f){_[f]=new E(f,6,!1,f,null,!1,!1)}),["rowSpan","start"].forEach(function(f){_[f]=new E(f,5,!1,f.toLowerCase(),null,!1,!1)});var m=/[\-:]([a-z])/g;function v(f){return f[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(f){var p=f.replace(m,v);_[p]=new E(p,1,!1,f,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(f){var p=f.replace(m,v);_[p]=new E(p,1,!1,f,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(f){var p=f.replace(m,v);_[p]=new E(p,1,!1,f,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(f){_[f]=new E(f,1,!1,f.toLowerCase(),null,!1,!1)}),_.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(f){_[f]=new E(f,1,!1,f.toLowerCase(),null,!0,!0)});function S(f,p,b,P){var D=_.hasOwnProperty(p)?_[p]:null;(D!==null?D.type!==0:P||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(y(p,b,D,P)&&(b=null),P||D===null?h(p)&&(b===null?f.removeAttribute(p):f.setAttribute(p,""+b)):D.mustUseProperty?f[D.propertyName]=b===null?D.type===3?!1:"":b:(p=D.attributeName,P=D.attributeNamespace,b===null?f.removeAttribute(p):(D=D.type,b=D===3||D===4&&b===!0?"":""+b,P?f.setAttributeNS(P,p,b):f.setAttribute(p,b))))}var T=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),A=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),G=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),X=Symbol.for("react.offscreen"),q=Symbol.iterator;function K(f){return f===null||typeof f!="object"?null:(f=q&&f[q]||f["@@iterator"],typeof f=="function"?f:null)}var F=Object.assign,L;function z(f){if(L===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);L=p&&p[1]||""}return`
`+L+f}var Y=!1;function B(f,p){if(!f||Y)return"";Y=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(Be){var P=Be}Reflect.construct(f,[],p)}else{try{p.call()}catch(Be){P=Be}f.call(p.prototype)}else{try{throw Error()}catch(Be){P=Be}f()}}catch(Be){if(Be&&P&&typeof Be.stack=="string"){for(var D=Be.stack.split(`
`),V=P.stack.split(`
`),ae=D.length-1,ve=V.length-1;1<=ae&&0<=ve&&D[ae]!==V[ve];)ve--;for(;1<=ae&&0<=ve;ae--,ve--)if(D[ae]!==V[ve]){if(ae!==1||ve!==1)do if(ae--,ve--,0>ve||D[ae]!==V[ve]){var Se=`
`+D[ae].replace(" at new "," at ");return f.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",f.displayName)),Se}while(1<=ae&&0<=ve);break}}}finally{Y=!1,Error.prepareStackTrace=b}return(f=f?f.displayName||f.name:"")?z(f):""}function J(f){switch(f.tag){case 5:return z(f.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return f=B(f.type,!1),f;case 11:return f=B(f.type.render,!1),f;case 1:return f=B(f.type,!0),f;default:return""}}function le(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case R:return"Fragment";case A:return"Portal";case I:return"Profiler";case O:return"StrictMode";case U:return"Suspense";case ee:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case G:return(f.displayName||"Context")+".Consumer";case k:return(f._context.displayName||"Context")+".Provider";case $:var p=f.render;return f=f.displayName,f||(f=p.displayName||p.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case re:return p=f.displayName||null,p!==null?p:le(f.type)||"Memo";case ne:p=f._payload,f=f._init;try{return le(f(p))}catch{}}return null}function pe(f){var p=f.type;switch(f.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=p.render,f=f.displayName||f.name||"",p.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return le(p);case 8:return p===O?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function he(f){switch(typeof f){case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function Ee(f){var p=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function _e(f){var p=Ee(f)?"checked":"value",b=Object.getOwnPropertyDescriptor(f.constructor.prototype,p),P=""+f[p];if(!f.hasOwnProperty(p)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var D=b.get,V=b.set;return Object.defineProperty(f,p,{configurable:!0,get:function(){return D.call(this)},set:function(ae){P=""+ae,V.call(this,ae)}}),Object.defineProperty(f,p,{enumerable:b.enumerable}),{getValue:function(){return P},setValue:function(ae){P=""+ae},stopTracking:function(){f._valueTracker=null,delete f[p]}}}}function te(f){f._valueTracker||(f._valueTracker=_e(f))}function j(f){if(!f)return!1;var p=f._valueTracker;if(!p)return!0;var b=p.getValue(),P="";return f&&(P=Ee(f)?f.checked?"true":"false":f.value),f=P,f!==b?(p.setValue(f),!0):!1}function ce(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}function fe(f,p){var b=p.checked;return F({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:b??f._wrapperState.initialChecked})}function ie(f,p){var b=p.defaultValue==null?"":p.defaultValue,P=p.checked!=null?p.checked:p.defaultChecked;b=he(p.value!=null?p.value:b),f._wrapperState={initialChecked:P,initialValue:b,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function se(f,p){p=p.checked,p!=null&&S(f,"checked",p,!1)}function Ae(f,p){se(f,p);var b=he(p.value),P=p.type;if(b!=null)P==="number"?(b===0&&f.value===""||f.value!=b)&&(f.value=""+b):f.value!==""+b&&(f.value=""+b);else if(P==="submit"||P==="reset"){f.removeAttribute("value");return}p.hasOwnProperty("value")?Re(f,p.type,b):p.hasOwnProperty("defaultValue")&&Re(f,p.type,he(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(f.defaultChecked=!!p.defaultChecked)}function we(f,p,b){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var P=p.type;if(!(P!=="submit"&&P!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+f._wrapperState.initialValue,b||p===f.value||(f.value=p),f.defaultValue=p}b=f.name,b!==""&&(f.name=""),f.defaultChecked=!!f._wrapperState.initialChecked,b!==""&&(f.name=b)}function Re(f,p,b){(p!=="number"||ce(f.ownerDocument)!==f)&&(b==null?f.defaultValue=""+f._wrapperState.initialValue:f.defaultValue!==""+b&&(f.defaultValue=""+b))}var Le=Array.isArray;function be(f,p,b,P){if(f=f.options,p){p={};for(var D=0;D<b.length;D++)p["$"+b[D]]=!0;for(b=0;b<f.length;b++)D=p.hasOwnProperty("$"+f[b].value),f[b].selected!==D&&(f[b].selected=D),D&&P&&(f[b].defaultSelected=!0)}else{for(b=""+he(b),p=null,D=0;D<f.length;D++){if(f[D].value===b){f[D].selected=!0,P&&(f[D].defaultSelected=!0);return}p!==null||f[D].disabled||(p=f[D])}p!==null&&(p.selected=!0)}}function Ye(f,p){if(p.dangerouslySetInnerHTML!=null)throw Error(t(91));return F({},p,{value:void 0,defaultValue:void 0,children:""+f._wrapperState.initialValue})}function ue(f,p){var b=p.value;if(b==null){if(b=p.children,p=p.defaultValue,b!=null){if(p!=null)throw Error(t(92));if(Le(b)){if(1<b.length)throw Error(t(93));b=b[0]}p=b}p==null&&(p=""),b=p}f._wrapperState={initialValue:he(b)}}function oe(f,p){var b=he(p.value),P=he(p.defaultValue);b!=null&&(b=""+b,b!==f.value&&(f.value=b),p.defaultValue==null&&f.defaultValue!==b&&(f.defaultValue=b)),P!=null&&(f.defaultValue=""+P)}function ye(f){var p=f.textContent;p===f._wrapperState.initialValue&&p!==""&&p!==null&&(f.value=p)}function Fe(f){switch(f){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ze(f,p){return f==null||f==="http://www.w3.org/1999/xhtml"?Fe(p):f==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":f}var He,Ze=function(f){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,b,P,D){MSApp.execUnsafeLocalFunction(function(){return f(p,b,P,D)})}:f}(function(f,p){if(f.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in f)f.innerHTML=p;else{for(He=He||document.createElement("div"),He.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=He.firstChild;f.firstChild;)f.removeChild(f.firstChild);for(;p.firstChild;)f.appendChild(p.firstChild)}});function Ke(f,p){if(p){var b=f.firstChild;if(b&&b===f.lastChild&&b.nodeType===3){b.nodeValue=p;return}}f.textContent=p}var Ue={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},st=["Webkit","ms","Moz","O"];Object.keys(Ue).forEach(function(f){st.forEach(function(p){p=p+f.charAt(0).toUpperCase()+f.substring(1),Ue[p]=Ue[f]})});function ht(f,p,b){return p==null||typeof p=="boolean"||p===""?"":b||typeof p!="number"||p===0||Ue.hasOwnProperty(f)&&Ue[f]?(""+p).trim():p+"px"}function at(f,p){f=f.style;for(var b in p)if(p.hasOwnProperty(b)){var P=b.indexOf("--")===0,D=ht(b,p[b],P);b==="float"&&(b="cssFloat"),P?f.setProperty(b,D):f[b]=D}}var Qe=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ot(f,p){if(p){if(Qe[f]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(t(137,f));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(t(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(t(61))}if(p.style!=null&&typeof p.style!="object")throw Error(t(62))}}function xt(f,p){if(f.indexOf("-")===-1)return typeof p.is=="string";switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ut=null;function xe(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var et=null,Ne=null,rt=null;function ct(f){if(f=pa(f)){if(typeof et!="function")throw Error(t(280));var p=f.stateNode;p&&(p=ph(p),et(f.stateNode,f.type,p))}}function Vt(f){Ne?rt?rt.push(f):rt=[f]:Ne=f}function rn(){if(Ne){var f=Ne,p=rt;if(rt=Ne=null,ct(f),p)for(f=0;f<p.length;f++)ct(p[f])}}function xn(f,p){return f(p)}function hn(){}var Sn=!1;function yn(f,p,b){if(Sn)return f(p,b);Sn=!0;try{return xn(f,p,b)}finally{Sn=!1,(Ne!==null||rt!==null)&&(hn(),rn())}}function Xt(f,p){var b=f.stateNode;if(b===null)return null;var P=ph(b);if(P===null)return null;b=P[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(P=!P.disabled)||(f=f.type,P=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!P;break e;default:f=!1}if(f)return null;if(b&&typeof b!="function")throw Error(t(231,p,typeof b));return b}var ti=!1;if(a)try{var vr={};Object.defineProperty(vr,"passive",{get:function(){ti=!0}}),window.addEventListener("test",vr,vr),window.removeEventListener("test",vr,vr)}catch{ti=!1}function Mn(f,p,b,P,D,V,ae,ve,Se){var Be=Array.prototype.slice.call(arguments,3);try{p.apply(b,Be)}catch(nt){this.onError(nt)}}var On=!1,zr=null,Dn=!1,nr=null,qr={onError:function(f){On=!0,zr=f}};function ks(f,p,b,P,D,V,ae,ve,Se){On=!1,zr=null,Mn.apply(qr,arguments)}function Hi(f,p,b,P,D,V,ae,ve,Se){if(ks.apply(this,arguments),On){if(On){var Be=zr;On=!1,zr=null}else throw Error(t(198));Dn||(Dn=!0,nr=Be)}}function me(f){var p=f,b=f;if(f.alternate)for(;p.return;)p=p.return;else{f=p;do p=f,(p.flags&4098)!==0&&(b=p.return),f=p.return;while(f)}return p.tag===3?b:null}function De(f){if(f.tag===13){var p=f.memoizedState;if(p===null&&(f=f.alternate,f!==null&&(p=f.memoizedState)),p!==null)return p.dehydrated}return null}function je(f){if(me(f)!==f)throw Error(t(188))}function Pe(f){var p=f.alternate;if(!p){if(p=me(f),p===null)throw Error(t(188));return p!==f?null:f}for(var b=f,P=p;;){var D=b.return;if(D===null)break;var V=D.alternate;if(V===null){if(P=D.return,P!==null){b=P;continue}break}if(D.child===V.child){for(V=D.child;V;){if(V===b)return je(D),f;if(V===P)return je(D),p;V=V.sibling}throw Error(t(188))}if(b.return!==P.return)b=D,P=V;else{for(var ae=!1,ve=D.child;ve;){if(ve===b){ae=!0,b=D,P=V;break}if(ve===P){ae=!0,P=D,b=V;break}ve=ve.sibling}if(!ae){for(ve=V.child;ve;){if(ve===b){ae=!0,b=V,P=D;break}if(ve===P){ae=!0,P=V,b=D;break}ve=ve.sibling}if(!ae)throw Error(t(189))}}if(b.alternate!==P)throw Error(t(190))}if(b.tag!==3)throw Error(t(188));return b.stateNode.current===b?f:p}function We(f){return f=Pe(f),f!==null?St(f):null}function St(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var p=St(f);if(p!==null)return p;f=f.sibling}return null}var Lt=e.unstable_scheduleCallback,Ot=e.unstable_cancelCallback,zt=e.unstable_shouldYield,Jt=e.unstable_requestPaint,qe=e.unstable_now,Dt=e.unstable_getCurrentPriorityLevel,kn=e.unstable_ImmediatePriority,En=e.unstable_UserBlockingPriority,Tr=e.unstable_NormalPriority,Ci=e.unstable_LowPriority,An=e.unstable_IdlePriority,Ft=null,Zt=null;function Gt(f){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(Ft,f,void 0,(f.current.flags&128)===128)}catch{}}var Pn=Math.clz32?Math.clz32:ts,_r=Math.log,or=Math.LN2;function ts(f){return f>>>=0,f===0?32:31-(_r(f)/or|0)|0}var In=64,$n=4194304;function Xr(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function dr(f,p){var b=f.pendingLanes;if(b===0)return 0;var P=0,D=f.suspendedLanes,V=f.pingedLanes,ae=b&268435455;if(ae!==0){var ve=ae&~D;ve!==0?P=Xr(ve):(V&=ae,V!==0&&(P=Xr(V)))}else ae=b&~D,ae!==0?P=Xr(ae):V!==0&&(P=Xr(V));if(P===0)return 0;if(p!==0&&p!==P&&(p&D)===0&&(D=P&-P,V=p&-p,D>=V||D===16&&(V&4194240)!==0))return p;if((P&4)!==0&&(P|=b&16),p=f.entangledLanes,p!==0)for(f=f.entanglements,p&=P;0<p;)b=31-Pn(p),D=1<<b,P|=f[b],p&=~D;return P}function Ro(f,p){switch(f){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Po(f,p){for(var b=f.suspendedLanes,P=f.pingedLanes,D=f.expirationTimes,V=f.pendingLanes;0<V;){var ae=31-Pn(V),ve=1<<ae,Se=D[ae];Se===-1?((ve&b)===0||(ve&P)!==0)&&(D[ae]=Ro(ve,p)):Se<=p&&(f.expiredLanes|=ve),V&=~ve}}function ni(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function ns(){var f=In;return In<<=1,(In&4194240)===0&&(In=64),f}function Za(f){for(var p=[],b=0;31>b;b++)p.push(f);return p}function so(f,p,b){f.pendingLanes|=p,p!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,p=31-Pn(p),f[p]=b}function $d(f,p){var b=f.pendingLanes&~p;f.pendingLanes=p,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=p,f.mutableReadLanes&=p,f.entangledLanes&=p,p=f.entanglements;var P=f.eventTimes;for(f=f.expirationTimes;0<b;){var D=31-Pn(b),V=1<<D;p[D]=0,P[D]=-1,f[D]=-1,b&=~V}}function oo(f,p){var b=f.entangledLanes|=p;for(f=f.entanglements;b;){var P=31-Pn(b),D=1<<P;D&p|f[P]&p&&(f[P]|=p),b&=~D}}var pn=0;function Io(f){return f&=-f,1<f?4<f?(f&268435455)!==0?16:536870912:4:1}var Qa,Ku,Ju,Lo,Hl,Us=!1,ao=[],yi=null,jt=null,Fs=null,gs=new Map,No=new Map,zs=[],Gd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ar(f,p){switch(f){case"focusin":case"focusout":yi=null;break;case"dragenter":case"dragleave":jt=null;break;case"mouseover":case"mouseout":Fs=null;break;case"pointerover":case"pointerout":gs.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":No.delete(p.pointerId)}}function lo(f,p,b,P,D,V){return f===null||f.nativeEvent!==V?(f={blockedOn:p,domEventName:b,eventSystemFlags:P,nativeEvent:V,targetContainers:[D]},p!==null&&(p=pa(p),p!==null&&Ku(p)),f):(f.eventSystemFlags|=P,p=f.targetContainers,D!==null&&p.indexOf(D)===-1&&p.push(D),f)}function Vd(f,p,b,P,D){switch(p){case"focusin":return yi=lo(yi,f,p,b,P,D),!0;case"dragenter":return jt=lo(jt,f,p,b,P,D),!0;case"mouseover":return Fs=lo(Fs,f,p,b,P,D),!0;case"pointerover":var V=D.pointerId;return gs.set(V,lo(gs.get(V)||null,f,p,b,P,D)),!0;case"gotpointercapture":return V=D.pointerId,No.set(V,lo(No.get(V)||null,f,p,b,P,D)),!0}return!1}function Ri(f){var p=fl(f.target);if(p!==null){var b=me(p);if(b!==null){if(p=b.tag,p===13){if(p=De(b),p!==null){f.blockedOn=p,Hl(f.priority,function(){Ju(b)});return}}else if(p===3&&b.stateNode.current.memoizedState.isDehydrated){f.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}f.blockedOn=null}function el(f){if(f.blockedOn!==null)return!1;for(var p=f.targetContainers;0<p.length;){var b=Pi(f.domEventName,f.eventSystemFlags,p[0],f.nativeEvent);if(b===null){b=f.nativeEvent;var P=new b.constructor(b.type,b);Ut=P,b.target.dispatchEvent(P),Ut=null}else return p=pa(b),p!==null&&Ku(p),f.blockedOn=b,!1;p.shift()}return!0}function tl(f,p,b){el(f)&&b.delete(p)}function ys(){Us=!1,yi!==null&&el(yi)&&(yi=null),jt!==null&&el(jt)&&(jt=null),Fs!==null&&el(Fs)&&(Fs=null),gs.forEach(tl),No.forEach(tl)}function ra(f,p){f.blockedOn===p&&(f.blockedOn=null,Us||(Us=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ys)))}function nl(f){function p(D){return ra(D,f)}if(0<ao.length){ra(ao[0],f);for(var b=1;b<ao.length;b++){var P=ao[b];P.blockedOn===f&&(P.blockedOn=null)}}for(yi!==null&&ra(yi,f),jt!==null&&ra(jt,f),Fs!==null&&ra(Fs,f),gs.forEach(p),No.forEach(p),b=0;b<zs.length;b++)P=zs[b],P.blockedOn===f&&(P.blockedOn=null);for(;0<zs.length&&(b=zs[0],b.blockedOn===null);)Ri(b),b.blockedOn===null&&zs.shift()}var ri=T.ReactCurrentBatchConfig,ii=!0;function Oo(f,p,b,P){var D=pn,V=ri.transition;ri.transition=null;try{pn=1,$l(f,p,b,P)}finally{pn=D,ri.transition=V}}function Bs(f,p,b,P){var D=pn,V=ri.transition;ri.transition=null;try{pn=4,$l(f,p,b,P)}finally{pn=D,ri.transition=V}}function $l(f,p,b,P){if(ii){var D=Pi(f,p,b,P);if(D===null)lh(f,p,P,rl,b),ar(f,P);else if(Vd(D,f,p,b,P))P.stopPropagation();else if(ar(f,P),p&4&&-1<Gd.indexOf(f)){for(;D!==null;){var V=pa(D);if(V!==null&&Qa(V),V=Pi(f,p,b,P),V===null&&lh(f,p,P,rl,b),V===D)break;D=V}D!==null&&P.stopPropagation()}else lh(f,p,P,null,b)}}var rl=null;function Pi(f,p,b,P){if(rl=null,f=xe(P),f=fl(f),f!==null)if(p=me(f),p===null)f=null;else if(b=p.tag,b===13){if(f=De(p),f!==null)return f;f=null}else if(b===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;f=null}else p!==f&&(f=null);return rl=f,null}function il(f){switch(f){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dt()){case kn:return 1;case En:return 4;case Tr:case Ci:return 16;case An:return 536870912;default:return 16}default:return 16}}var rs=null,ia=null,si=null;function Yr(){if(si)return si;var f,p=ia,b=p.length,P,D="value"in rs?rs.value:rs.textContent,V=D.length;for(f=0;f<b&&p[f]===D[f];f++);var ae=b-f;for(P=1;P<=ae&&p[b-P]===D[V-P];P++);return si=D.slice(f,1<P?1-P:void 0)}function sa(f){var p=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&p===13&&(f=13)):f=p,f===10&&(f=13),32<=f||f===13?f:0}function is(){return!0}function oa(){return!1}function oi(f){function p(b,P,D,V,ae){this._reactName=b,this._targetInst=D,this.type=P,this.nativeEvent=V,this.target=ae,this.currentTarget=null;for(var ve in f)f.hasOwnProperty(ve)&&(b=f[ve],this[ve]=b?b(V):V[ve]);return this.isDefaultPrevented=(V.defaultPrevented!=null?V.defaultPrevented:V.returnValue===!1)?is:oa,this.isPropagationStopped=oa,this}return F(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=is)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=is)},persist:function(){},isPersistent:is}),p}var aa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Br=oi(aa),Kr=F({},aa,{view:0,detail:0}),Mr=oi(Kr),hr,$i,Hs,Zu=F({},Kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ol,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==Hs&&(Hs&&f.type==="mousemove"?(hr=f.screenX-Hs.screenX,$i=f.screenY-Hs.screenY):$i=hr=0,Hs=f),hr)},movementY:function(f){return"movementY"in f?f.movementY:$i}}),um=oi(Zu),la=F({},Zu,{dataTransfer:0}),sl=oi(la),jd=F({},Kr,{relatedTarget:0}),Wd=oi(jd),qd=F({},aa,{animationName:0,elapsedTime:0,pseudoElement:0}),Sv=oi(qd),Ev=F({},aa,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),cm=oi(Ev),Xd=F({},aa,{data:0}),fm=oi(Xd),bv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qu(f){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(f):(f=dm[f])?!!p[f]:!1}function ol(){return Qu}var Yd=F({},Kr,{key:function(f){if(f.key){var p=bv[f.key]||f.key;if(p!=="Unidentified")return p}return f.type==="keypress"?(f=sa(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?Tv[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ol,charCode:function(f){return f.type==="keypress"?sa(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?sa(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),Kd=oi(Yd),$s=F({},Zu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vs=oi($s),Gl=F({},Kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ol}),ua=oi(Gl),ca=F({},aa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vl=oi(ca),Mv=F({},Zu,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),hm=oi(Mv),pm=[9,13,27,32],Gi=a&&"CompositionEvent"in window,vi=null;a&&"documentMode"in document&&(vi=document.documentMode);var lr=a&&"TextEvent"in window&&!vi,ec=a&&(!Gi||vi&&8<vi&&11>=vi),Gs=" ",mm=!1;function gm(f,p){switch(f){case"keyup":return pm.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jd(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var al=!1;function Av(f,p){switch(f){case"compositionend":return Jd(p);case"keypress":return p.which!==32?null:(mm=!0,Gs);case"textInput":return f=p.data,f===Gs&&mm?null:f;default:return null}}function rf(f,p){if(al)return f==="compositionend"||!Gi&&gm(f,p)?(f=Yr(),si=ia=rs=null,al=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return ec&&p.locale!=="ko"?null:p.data;default:return null}}var tc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zd(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p==="input"?!!tc[f.type]:p==="textarea"}function nc(f,p,b,P){Vt(P),p=uh(p,"onChange"),0<p.length&&(b=new Br("onChange","change",null,b,P),f.push({event:b,listeners:p}))}var ll=null,rc=null;function Cv(f){ac(f,0)}function fa(f){var p=Ar(f);if(j(p))return f}function Rv(f,p){if(f==="change")return p}var ic=!1;if(a){var ss;if(a){var jl="oninput"in document;if(!jl){var Wl=document.createElement("div");Wl.setAttribute("oninput","return;"),jl=typeof Wl.oninput=="function"}ss=jl}else ss=!1;ic=ss&&(!document.documentMode||9<document.documentMode)}function uo(){ll&&(ll.detachEvent("onpropertychange",Qd),rc=ll=null)}function Qd(f){if(f.propertyName==="value"&&fa(rc)){var p=[];nc(p,rc,f,xe(f)),yn(Cv,p)}}function sc(f,p,b){f==="focusin"?(uo(),ll=p,rc=b,ll.attachEvent("onpropertychange",Qd)):f==="focusout"&&uo()}function Pv(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return fa(rc)}function ym(f,p){if(f==="click")return fa(p)}function pr(f,p){if(f==="input"||f==="change")return fa(p)}function eh(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var _s=typeof Object.is=="function"?Object.is:eh;function ql(f,p){if(_s(f,p))return!0;if(typeof f!="object"||f===null||typeof p!="object"||p===null)return!1;var b=Object.keys(f),P=Object.keys(p);if(b.length!==P.length)return!1;for(P=0;P<b.length;P++){var D=b[P];if(!l.call(p,D)||!_s(f[D],p[D]))return!1}return!0}function sf(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function xs(f,p){var b=sf(f);f=0;for(var P;b;){if(b.nodeType===3){if(P=f+b.textContent.length,f<=p&&P>=p)return{node:b,offset:p-f};f=P}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=sf(b)}}function Xl(f,p){return f&&p?f===p?!0:f&&f.nodeType===3?!1:p&&p.nodeType===3?Xl(f,p.parentNode):"contains"in f?f.contains(p):f.compareDocumentPosition?!!(f.compareDocumentPosition(p)&16):!1:!1}function mr(){for(var f=window,p=ce();p instanceof f.HTMLIFrameElement;){try{var b=typeof p.contentWindow.location.href=="string"}catch{b=!1}if(b)f=p.contentWindow;else break;p=ce(f.document)}return p}function ai(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p&&(p==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||p==="textarea"||f.contentEditable==="true")}function li(f){var p=mr(),b=f.focusedElem,P=f.selectionRange;if(p!==b&&b&&b.ownerDocument&&Xl(b.ownerDocument.documentElement,b)){if(P!==null&&ai(b)){if(p=P.start,f=P.end,f===void 0&&(f=p),"selectionStart"in b)b.selectionStart=p,b.selectionEnd=Math.min(f,b.value.length);else if(f=(p=b.ownerDocument||document)&&p.defaultView||window,f.getSelection){f=f.getSelection();var D=b.textContent.length,V=Math.min(P.start,D);P=P.end===void 0?V:Math.min(P.end,D),!f.extend&&V>P&&(D=P,P=V,V=D),D=xs(b,V);var ae=xs(b,P);D&&ae&&(f.rangeCount!==1||f.anchorNode!==D.node||f.anchorOffset!==D.offset||f.focusNode!==ae.node||f.focusOffset!==ae.offset)&&(p=p.createRange(),p.setStart(D.node,D.offset),f.removeAllRanges(),V>P?(f.addRange(p),f.extend(ae.node,ae.offset)):(p.setEnd(ae.node,ae.offset),f.addRange(p)))}}for(p=[],f=b;f=f.parentNode;)f.nodeType===1&&p.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<p.length;b++)f=p[b],f.element.scrollLeft=f.left,f.element.scrollTop=f.top}}var th=a&&"documentMode"in document&&11>=document.documentMode,Do=null,Yl=null,of=null,ui=!1;function nh(f,p,b){var P=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;ui||Do==null||Do!==ce(P)||(P=Do,"selectionStart"in P&&ai(P)?P={start:P.selectionStart,end:P.selectionEnd}:(P=(P.ownerDocument&&P.ownerDocument.defaultView||window).getSelection(),P={anchorNode:P.anchorNode,anchorOffset:P.anchorOffset,focusNode:P.focusNode,focusOffset:P.focusOffset}),of&&ql(of,P)||(of=P,P=uh(Yl,"onSelect"),0<P.length&&(p=new Br("onSelect","select",null,p,b),f.push({event:p,listeners:P}),p.target=Do)))}function oc(f,p){var b={};return b[f.toLowerCase()]=p.toLowerCase(),b["Webkit"+f]="webkit"+p,b["Moz"+f]="moz"+p,b}var ul={animationend:oc("Animation","AnimationEnd"),animationiteration:oc("Animation","AnimationIteration"),animationstart:oc("Animation","AnimationStart"),transitionend:oc("Transition","TransitionEnd")},co={},fo={};a&&(fo=document.createElement("div").style,"AnimationEvent"in window||(delete ul.animationend.animation,delete ul.animationiteration.animation,delete ul.animationstart.animation),"TransitionEvent"in window||delete ul.transitionend.transition);function ko(f){if(co[f])return co[f];if(!ul[f])return f;var p=ul[f],b;for(b in p)if(p.hasOwnProperty(b)&&b in fo)return co[f]=p[b];return f}var af=ko("animationend"),lf=ko("animationiteration"),vm=ko("animationstart"),_m=ko("transitionend"),xm=new Map,wm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function da(f,p){xm.set(f,p),s(p,[f])}for(var rh=0;rh<wm.length;rh++){var uf=wm[rh],cf=uf.toLowerCase(),Iv=uf[0].toUpperCase()+uf.slice(1);da(cf,"on"+Iv)}da(af,"onAnimationEnd"),da(lf,"onAnimationIteration"),da(vm,"onAnimationStart"),da("dblclick","onDoubleClick"),da("focusin","onFocus"),da("focusout","onBlur"),da(_m,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ih=new Set("cancel close invalid load scroll toggle".split(" ").concat(cl));function sh(f,p,b){var P=f.type||"unknown-event";f.currentTarget=b,Hi(P,p,void 0,f),f.currentTarget=null}function ac(f,p){p=(p&4)!==0;for(var b=0;b<f.length;b++){var P=f[b],D=P.event;P=P.listeners;e:{var V=void 0;if(p)for(var ae=P.length-1;0<=ae;ae--){var ve=P[ae],Se=ve.instance,Be=ve.currentTarget;if(ve=ve.listener,Se!==V&&D.isPropagationStopped())break e;sh(D,ve,Be),V=Se}else for(ae=0;ae<P.length;ae++){if(ve=P[ae],Se=ve.instance,Be=ve.currentTarget,ve=ve.listener,Se!==V&&D.isPropagationStopped())break e;sh(D,ve,Be),V=Se}}}if(Dn)throw f=nr,Dn=!1,nr=null,f}function Jn(f,p){var b=p[Zl];b===void 0&&(b=p[Zl]=new Set);var P=f+"__bubble";b.has(P)||(ah(p,f,2,!1),b.add(P))}function oh(f,p,b){var P=0;p&&(P|=4),ah(b,f,P,p)}var ff="_reactListening"+Math.random().toString(36).slice(2);function lc(f){if(!f[ff]){f[ff]=!0,r.forEach(function(b){b!=="selectionchange"&&(ih.has(b)||oh(b,!1,f),oh(b,!0,f))});var p=f.nodeType===9?f:f.ownerDocument;p===null||p[ff]||(p[ff]=!0,oh("selectionchange",!1,p))}}function ah(f,p,b,P){switch(il(p)){case 1:var D=Oo;break;case 4:D=Bs;break;default:D=$l}b=D.bind(null,p,b,f),D=void 0,!ti||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(D=!0),P?D!==void 0?f.addEventListener(p,b,{capture:!0,passive:D}):f.addEventListener(p,b,!0):D!==void 0?f.addEventListener(p,b,{passive:D}):f.addEventListener(p,b,!1)}function lh(f,p,b,P,D){var V=P;if((p&1)===0&&(p&2)===0&&P!==null)e:for(;;){if(P===null)return;var ae=P.tag;if(ae===3||ae===4){var ve=P.stateNode.containerInfo;if(ve===D||ve.nodeType===8&&ve.parentNode===D)break;if(ae===4)for(ae=P.return;ae!==null;){var Se=ae.tag;if((Se===3||Se===4)&&(Se=ae.stateNode.containerInfo,Se===D||Se.nodeType===8&&Se.parentNode===D))return;ae=ae.return}for(;ve!==null;){if(ae=fl(ve),ae===null)return;if(Se=ae.tag,Se===5||Se===6){P=V=ae;continue e}ve=ve.parentNode}}P=P.return}yn(function(){var Be=V,nt=xe(b),it=[];e:{var tt=xm.get(f);if(tt!==void 0){var Et=Br,Mt=f;switch(f){case"keypress":if(sa(b)===0)break e;case"keydown":case"keyup":Et=Kd;break;case"focusin":Mt="focus",Et=Wd;break;case"focusout":Mt="blur",Et=Wd;break;case"beforeblur":case"afterblur":Et=Wd;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Et=um;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Et=sl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Et=ua;break;case af:case lf:case vm:Et=Sv;break;case _m:Et=Vl;break;case"scroll":Et=Mr;break;case"wheel":Et=hm;break;case"copy":case"cut":case"paste":Et=cm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Et=vs}var At=(p&4)!==0,Zr=!At&&f==="scroll",Ie=At?tt!==null?tt+"Capture":null:tt;At=[];for(var Te=Be,Oe;Te!==null;){Oe=Te;var ut=Oe.stateNode;if(Oe.tag===5&&ut!==null&&(Oe=ut,Ie!==null&&(ut=Xt(Te,Ie),ut!=null&&At.push(uc(Te,ut,Oe)))),Zr)break;Te=Te.return}0<At.length&&(tt=new Et(tt,Mt,null,b,nt),it.push({event:tt,listeners:At}))}}if((p&7)===0){e:{if(tt=f==="mouseover"||f==="pointerover",Et=f==="mouseout"||f==="pointerout",tt&&b!==Ut&&(Mt=b.relatedTarget||b.fromElement)&&(fl(Mt)||Mt[ws]))break e;if((Et||tt)&&(tt=nt.window===nt?nt:(tt=nt.ownerDocument)?tt.defaultView||tt.parentWindow:window,Et?(Mt=b.relatedTarget||b.toElement,Et=Be,Mt=Mt?fl(Mt):null,Mt!==null&&(Zr=me(Mt),Mt!==Zr||Mt.tag!==5&&Mt.tag!==6)&&(Mt=null)):(Et=null,Mt=Be),Et!==Mt)){if(At=um,ut="onMouseLeave",Ie="onMouseEnter",Te="mouse",(f==="pointerout"||f==="pointerover")&&(At=vs,ut="onPointerLeave",Ie="onPointerEnter",Te="pointer"),Zr=Et==null?tt:Ar(Et),Oe=Mt==null?tt:Ar(Mt),tt=new At(ut,Te+"leave",Et,b,nt),tt.target=Zr,tt.relatedTarget=Oe,ut=null,fl(nt)===Be&&(At=new At(Ie,Te+"enter",Mt,b,nt),At.target=Oe,At.relatedTarget=Zr,ut=At),Zr=ut,Et&&Mt)t:{for(At=Et,Ie=Mt,Te=0,Oe=At;Oe;Oe=Kl(Oe))Te++;for(Oe=0,ut=Ie;ut;ut=Kl(ut))Oe++;for(;0<Te-Oe;)At=Kl(At),Te--;for(;0<Oe-Te;)Ie=Kl(Ie),Oe--;for(;Te--;){if(At===Ie||Ie!==null&&At===Ie.alternate)break t;At=Kl(At),Ie=Kl(Ie)}At=null}else At=null;Et!==null&&Lv(it,tt,Et,At,!1),Mt!==null&&Zr!==null&&Lv(it,Zr,Mt,At,!0)}}e:{if(tt=Be?Ar(Be):window,Et=tt.nodeName&&tt.nodeName.toLowerCase(),Et==="select"||Et==="input"&&tt.type==="file")var It=Rv;else if(Zd(tt))if(ic)It=pr;else{It=Pv;var Bt=sc}else(Et=tt.nodeName)&&Et.toLowerCase()==="input"&&(tt.type==="checkbox"||tt.type==="radio")&&(It=ym);if(It&&(It=It(f,Be))){nc(it,It,b,nt);break e}Bt&&Bt(f,tt,Be),f==="focusout"&&(Bt=tt._wrapperState)&&Bt.controlled&&tt.type==="number"&&Re(tt,"number",tt.value)}switch(Bt=Be?Ar(Be):window,f){case"focusin":(Zd(Bt)||Bt.contentEditable==="true")&&(Do=Bt,Yl=Be,of=null);break;case"focusout":of=Yl=Do=null;break;case"mousedown":ui=!0;break;case"contextmenu":case"mouseup":case"dragend":ui=!1,nh(it,b,nt);break;case"selectionchange":if(th)break;case"keydown":case"keyup":nh(it,b,nt)}var Ht;if(Gi)e:{switch(f){case"compositionstart":var Wt="onCompositionStart";break e;case"compositionend":Wt="onCompositionEnd";break e;case"compositionupdate":Wt="onCompositionUpdate";break e}Wt=void 0}else al?gm(f,b)&&(Wt="onCompositionEnd"):f==="keydown"&&b.keyCode===229&&(Wt="onCompositionStart");Wt&&(ec&&b.locale!=="ko"&&(al||Wt!=="onCompositionStart"?Wt==="onCompositionEnd"&&al&&(Ht=Yr()):(rs=nt,ia="value"in rs?rs.value:rs.textContent,al=!0)),Bt=uh(Be,Wt),0<Bt.length&&(Wt=new fm(Wt,f,null,b,nt),it.push({event:Wt,listeners:Bt}),Ht?Wt.data=Ht:(Ht=Jd(b),Ht!==null&&(Wt.data=Ht)))),(Ht=lr?Av(f,b):rf(f,b))&&(Be=uh(Be,"onBeforeInput"),0<Be.length&&(nt=new fm("onBeforeInput","beforeinput",null,b,nt),it.push({event:nt,listeners:Be}),nt.data=Ht))}ac(it,p)})}function uc(f,p,b){return{instance:f,listener:p,currentTarget:b}}function uh(f,p){for(var b=p+"Capture",P=[];f!==null;){var D=f,V=D.stateNode;D.tag===5&&V!==null&&(D=V,V=Xt(f,b),V!=null&&P.unshift(uc(f,V,D)),V=Xt(f,p),V!=null&&P.push(uc(f,V,D))),f=f.return}return P}function Kl(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5);return f||null}function Lv(f,p,b,P,D){for(var V=p._reactName,ae=[];b!==null&&b!==P;){var ve=b,Se=ve.alternate,Be=ve.stateNode;if(Se!==null&&Se===P)break;ve.tag===5&&Be!==null&&(ve=Be,D?(Se=Xt(b,V),Se!=null&&ae.unshift(uc(b,Se,ve))):D||(Se=Xt(b,V),Se!=null&&ae.push(uc(b,Se,ve)))),b=b.return}ae.length!==0&&f.push({event:p,listeners:ae})}var xw=/\r\n?/g,Nv=/\u0000|\uFFFD/g;function Sm(f){return(typeof f=="string"?f:""+f).replace(xw,`
`).replace(Nv,"")}function df(f,p,b){if(p=Sm(p),Sm(f)!==p&&b)throw Error(t(425))}function hf(){}var cc=null,Em=null;function bm(f,p){return f==="textarea"||f==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var Tm=typeof setTimeout=="function"?setTimeout:void 0,Mm=typeof clearTimeout=="function"?clearTimeout:void 0,ch=typeof Promise=="function"?Promise:void 0,ww=typeof queueMicrotask=="function"?queueMicrotask:typeof ch<"u"?function(f){return ch.resolve(null).then(f).catch(Ov)}:Tm;function Ov(f){setTimeout(function(){throw f})}function fh(f,p){var b=p,P=0;do{var D=b.nextSibling;if(f.removeChild(b),D&&D.nodeType===8)if(b=D.data,b==="/$"){if(P===0){f.removeChild(D),nl(p);return}P--}else b!=="$"&&b!=="$?"&&b!=="$!"||P++;b=D}while(b);nl(p)}function ha(f){for(;f!=null;f=f.nextSibling){var p=f.nodeType;if(p===1||p===3)break;if(p===8){if(p=f.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return f}function Am(f){f=f.previousSibling;for(var p=0;f;){if(f.nodeType===8){var b=f.data;if(b==="$"||b==="$!"||b==="$?"){if(p===0)return f;p--}else b==="/$"&&p++}f=f.previousSibling}return null}var Jl=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Jl,fc="__reactProps$"+Jl,ws="__reactContainer$"+Jl,Zl="__reactEvents$"+Jl,dh="__reactListeners$"+Jl,hh="__reactHandles$"+Jl;function fl(f){var p=f[Jr];if(p)return p;for(var b=f.parentNode;b;){if(p=b[ws]||b[Jr]){if(b=p.alternate,p.child!==null||b!==null&&b.child!==null)for(f=Am(f);f!==null;){if(b=f[Jr])return b;f=Am(f)}return p}f=b,b=f.parentNode}return null}function pa(f){return f=f[Jr]||f[ws],!f||f.tag!==5&&f.tag!==6&&f.tag!==13&&f.tag!==3?null:f}function Ar(f){if(f.tag===5||f.tag===6)return f.stateNode;throw Error(t(33))}function ph(f){return f[fc]||null}var Cm=[],ci=-1;function xr(f){return{current:f}}function Zn(f){0>ci||(f.current=Cm[ci],Cm[ci]=null,ci--)}function Xn(f,p){ci++,Cm[ci]=f.current,f.current=p}var ma={},_i=xr(ma),Vi=xr(!1),ga=ma;function Ql(f,p){var b=f.type.contextTypes;if(!b)return ma;var P=f.stateNode;if(P&&P.__reactInternalMemoizedUnmaskedChildContext===p)return P.__reactInternalMemoizedMaskedChildContext;var D={},V;for(V in b)D[V]=p[V];return P&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=p,f.__reactInternalMemoizedMaskedChildContext=D),D}function Ii(f){return f=f.childContextTypes,f!=null}function pf(){Zn(Vi),Zn(_i)}function Rm(f,p,b){if(_i.current!==ma)throw Error(t(168));Xn(_i,p),Xn(Vi,b)}function mf(f,p,b){var P=f.stateNode;if(p=p.childContextTypes,typeof P.getChildContext!="function")return b;P=P.getChildContext();for(var D in P)if(!(D in p))throw Error(t(108,pe(f)||"Unknown",D));return F({},b,P)}function eu(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||ma,ga=_i.current,Xn(_i,f),Xn(Vi,Vi.current),!0}function Pm(f,p,b){var P=f.stateNode;if(!P)throw Error(t(169));b?(f=mf(f,p,ga),P.__reactInternalMemoizedMergedChildContext=f,Zn(Vi),Zn(_i),Xn(_i,f)):Zn(Vi),Xn(Vi,b)}var ho=null,gf=!1,mh=!1;function yf(f){ho===null?ho=[f]:ho.push(f)}function Dv(f){gf=!0,yf(f)}function Uo(){if(!mh&&ho!==null){mh=!0;var f=0,p=pn;try{var b=ho;for(pn=1;f<b.length;f++){var P=b[f];do P=P(!0);while(P!==null)}ho=null,gf=!1}catch(D){throw ho!==null&&(ho=ho.slice(f+1)),Lt(kn,Uo),D}finally{pn=p,mh=!1}}return null}var tu=[],os=0,gh=null,yh=0,ji=[],fi=0,nu=null,ft=1,Vs="";function ya(f,p){tu[os++]=yh,tu[os++]=gh,gh=f,yh=p}function Im(f,p,b){ji[fi++]=ft,ji[fi++]=Vs,ji[fi++]=nu,nu=f;var P=ft;f=Vs;var D=32-Pn(P)-1;P&=~(1<<D),b+=1;var V=32-Pn(p)+D;if(30<V){var ae=D-D%5;V=(P&(1<<ae)-1).toString(32),P>>=ae,D-=ae,ft=1<<32-Pn(p)+D|b<<D|P,Vs=V+f}else ft=1<<V|b<<D|P,Vs=f}function Lm(f){f.return!==null&&(ya(f,1),Im(f,1,0))}function va(f){for(;f===gh;)gh=tu[--os],tu[os]=null,yh=tu[--os],tu[os]=null;for(;f===nu;)nu=ji[--fi],ji[fi]=null,Vs=ji[--fi],ji[fi]=null,ft=ji[--fi],ji[fi]=null}var xi=null,Wi=null,rr=!1,js=null;function Nm(f,p){var b=$o(5,null,null,0);b.elementType="DELETED",b.stateNode=p,b.return=f,p=f.deletions,p===null?(f.deletions=[b],f.flags|=16):p.push(b)}function Om(f,p){switch(f.tag){case 5:var b=f.type;return p=p.nodeType!==1||b.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(f.stateNode=p,xi=f,Wi=ha(p.firstChild),!0):!1;case 6:return p=f.pendingProps===""||p.nodeType!==3?null:p,p!==null?(f.stateNode=p,xi=f,Wi=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(b=nu!==null?{id:ft,overflow:Vs}:null,f.memoizedState={dehydrated:p,treeContext:b,retryLane:1073741824},b=$o(18,null,null,0),b.stateNode=p,b.return=f,f.child=b,xi=f,Wi=null,!0):!1;default:return!1}}function vh(f){return(f.mode&1)!==0&&(f.flags&128)===0}function _h(f){if(rr){var p=Wi;if(p){var b=p;if(!Om(f,p)){if(vh(f))throw Error(t(418));p=ha(b.nextSibling);var P=xi;p&&Om(f,p)?Nm(P,b):(f.flags=f.flags&-4097|2,rr=!1,xi=f)}}else{if(vh(f))throw Error(t(418));f.flags=f.flags&-4097|2,rr=!1,xi=f}}}function xh(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;xi=f}function dc(f){if(f!==xi)return!1;if(!rr)return xh(f),rr=!0,!1;var p;if((p=f.tag!==3)&&!(p=f.tag!==5)&&(p=f.type,p=p!=="head"&&p!=="body"&&!bm(f.type,f.memoizedProps)),p&&(p=Wi)){if(vh(f))throw Dm(),Error(t(418));for(;p;)Nm(f,p),p=ha(p.nextSibling)}if(xh(f),f.tag===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(t(317));e:{for(f=f.nextSibling,p=0;f;){if(f.nodeType===8){var b=f.data;if(b==="/$"){if(p===0){Wi=ha(f.nextSibling);break e}p--}else b!=="$"&&b!=="$!"&&b!=="$?"||p++}f=f.nextSibling}Wi=null}}else Wi=xi?ha(f.stateNode.nextSibling):null;return!0}function Dm(){for(var f=Wi;f;)f=ha(f.nextSibling)}function dl(){Wi=xi=null,rr=!1}function hc(f){js===null?js=[f]:js.push(f)}var Sw=T.ReactCurrentBatchConfig;function vf(f,p,b){if(f=b.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(t(309));var P=b.stateNode}if(!P)throw Error(t(147,f));var D=P,V=""+f;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===V?p.ref:(p=function(ae){var ve=D.refs;ae===null?delete ve[V]:ve[V]=ae},p._stringRef=V,p)}if(typeof f!="string")throw Error(t(284));if(!b._owner)throw Error(t(290,f))}return f}function _f(f,p){throw f=Object.prototype.toString.call(p),Error(t(31,f==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":f))}function km(f){var p=f._init;return p(f._payload)}function Um(f){function p(Ie,Te){if(f){var Oe=Ie.deletions;Oe===null?(Ie.deletions=[Te],Ie.flags|=16):Oe.push(Te)}}function b(Ie,Te){if(!f)return null;for(;Te!==null;)p(Ie,Te),Te=Te.sibling;return null}function P(Ie,Te){for(Ie=new Map;Te!==null;)Te.key!==null?Ie.set(Te.key,Te):Ie.set(Te.index,Te),Te=Te.sibling;return Ie}function D(Ie,Te){return Ie=bc(Ie,Te),Ie.index=0,Ie.sibling=null,Ie}function V(Ie,Te,Oe){return Ie.index=Oe,f?(Oe=Ie.alternate,Oe!==null?(Oe=Oe.index,Oe<Te?(Ie.flags|=2,Te):Oe):(Ie.flags|=2,Te)):(Ie.flags|=1048576,Te)}function ae(Ie){return f&&Ie.alternate===null&&(Ie.flags|=2),Ie}function ve(Ie,Te,Oe,ut){return Te===null||Te.tag!==6?(Te=Hw(Oe,Ie.mode,ut),Te.return=Ie,Te):(Te=D(Te,Oe),Te.return=Ie,Te)}function Se(Ie,Te,Oe,ut){var It=Oe.type;return It===R?nt(Ie,Te,Oe.props.children,ut,Oe.key):Te!==null&&(Te.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===ne&&km(It)===Te.type)?(ut=D(Te,Oe.props),ut.ref=vf(Ie,Te,Oe),ut.return=Ie,ut):(ut=i0(Oe.type,Oe.key,Oe.props,null,Ie.mode,ut),ut.ref=vf(Ie,Te,Oe),ut.return=Ie,ut)}function Be(Ie,Te,Oe,ut){return Te===null||Te.tag!==4||Te.stateNode.containerInfo!==Oe.containerInfo||Te.stateNode.implementation!==Oe.implementation?(Te=$w(Oe,Ie.mode,ut),Te.return=Ie,Te):(Te=D(Te,Oe.children||[]),Te.return=Ie,Te)}function nt(Ie,Te,Oe,ut,It){return Te===null||Te.tag!==7?(Te=kf(Oe,Ie.mode,ut,It),Te.return=Ie,Te):(Te=D(Te,Oe),Te.return=Ie,Te)}function it(Ie,Te,Oe){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return Te=Hw(""+Te,Ie.mode,Oe),Te.return=Ie,Te;if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case M:return Oe=i0(Te.type,Te.key,Te.props,null,Ie.mode,Oe),Oe.ref=vf(Ie,null,Te),Oe.return=Ie,Oe;case A:return Te=$w(Te,Ie.mode,Oe),Te.return=Ie,Te;case ne:var ut=Te._init;return it(Ie,ut(Te._payload),Oe)}if(Le(Te)||K(Te))return Te=kf(Te,Ie.mode,Oe,null),Te.return=Ie,Te;_f(Ie,Te)}return null}function tt(Ie,Te,Oe,ut){var It=Te!==null?Te.key:null;if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number")return It!==null?null:ve(Ie,Te,""+Oe,ut);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case M:return Oe.key===It?Se(Ie,Te,Oe,ut):null;case A:return Oe.key===It?Be(Ie,Te,Oe,ut):null;case ne:return It=Oe._init,tt(Ie,Te,It(Oe._payload),ut)}if(Le(Oe)||K(Oe))return It!==null?null:nt(Ie,Te,Oe,ut,null);_f(Ie,Oe)}return null}function Et(Ie,Te,Oe,ut,It){if(typeof ut=="string"&&ut!==""||typeof ut=="number")return Ie=Ie.get(Oe)||null,ve(Te,Ie,""+ut,It);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case M:return Ie=Ie.get(ut.key===null?Oe:ut.key)||null,Se(Te,Ie,ut,It);case A:return Ie=Ie.get(ut.key===null?Oe:ut.key)||null,Be(Te,Ie,ut,It);case ne:var Bt=ut._init;return Et(Ie,Te,Oe,Bt(ut._payload),It)}if(Le(ut)||K(ut))return Ie=Ie.get(Oe)||null,nt(Te,Ie,ut,It,null);_f(Te,ut)}return null}function Mt(Ie,Te,Oe,ut){for(var It=null,Bt=null,Ht=Te,Wt=Te=0,Di=null;Ht!==null&&Wt<Oe.length;Wt++){Ht.index>Wt?(Di=Ht,Ht=null):Di=Ht.sibling;var Un=tt(Ie,Ht,Oe[Wt],ut);if(Un===null){Ht===null&&(Ht=Di);break}f&&Ht&&Un.alternate===null&&p(Ie,Ht),Te=V(Un,Te,Wt),Bt===null?It=Un:Bt.sibling=Un,Bt=Un,Ht=Di}if(Wt===Oe.length)return b(Ie,Ht),rr&&ya(Ie,Wt),It;if(Ht===null){for(;Wt<Oe.length;Wt++)Ht=it(Ie,Oe[Wt],ut),Ht!==null&&(Te=V(Ht,Te,Wt),Bt===null?It=Ht:Bt.sibling=Ht,Bt=Ht);return rr&&ya(Ie,Wt),It}for(Ht=P(Ie,Ht);Wt<Oe.length;Wt++)Di=Et(Ht,Ie,Wt,Oe[Wt],ut),Di!==null&&(f&&Di.alternate!==null&&Ht.delete(Di.key===null?Wt:Di.key),Te=V(Di,Te,Wt),Bt===null?It=Di:Bt.sibling=Di,Bt=Di);return f&&Ht.forEach(function(Tc){return p(Ie,Tc)}),rr&&ya(Ie,Wt),It}function At(Ie,Te,Oe,ut){var It=K(Oe);if(typeof It!="function")throw Error(t(150));if(Oe=It.call(Oe),Oe==null)throw Error(t(151));for(var Bt=It=null,Ht=Te,Wt=Te=0,Di=null,Un=Oe.next();Ht!==null&&!Un.done;Wt++,Un=Oe.next()){Ht.index>Wt?(Di=Ht,Ht=null):Di=Ht.sibling;var Tc=tt(Ie,Ht,Un.value,ut);if(Tc===null){Ht===null&&(Ht=Di);break}f&&Ht&&Tc.alternate===null&&p(Ie,Ht),Te=V(Tc,Te,Wt),Bt===null?It=Tc:Bt.sibling=Tc,Bt=Tc,Ht=Di}if(Un.done)return b(Ie,Ht),rr&&ya(Ie,Wt),It;if(Ht===null){for(;!Un.done;Wt++,Un=Oe.next())Un=it(Ie,Un.value,ut),Un!==null&&(Te=V(Un,Te,Wt),Bt===null?It=Un:Bt.sibling=Un,Bt=Un);return rr&&ya(Ie,Wt),It}for(Ht=P(Ie,Ht);!Un.done;Wt++,Un=Oe.next())Un=Et(Ht,Ie,Wt,Un.value,ut),Un!==null&&(f&&Un.alternate!==null&&Ht.delete(Un.key===null?Wt:Un.key),Te=V(Un,Te,Wt),Bt===null?It=Un:Bt.sibling=Un,Bt=Un);return f&&Ht.forEach(function(C4){return p(Ie,C4)}),rr&&ya(Ie,Wt),It}function Zr(Ie,Te,Oe,ut){if(typeof Oe=="object"&&Oe!==null&&Oe.type===R&&Oe.key===null&&(Oe=Oe.props.children),typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case M:e:{for(var It=Oe.key,Bt=Te;Bt!==null;){if(Bt.key===It){if(It=Oe.type,It===R){if(Bt.tag===7){b(Ie,Bt.sibling),Te=D(Bt,Oe.props.children),Te.return=Ie,Ie=Te;break e}}else if(Bt.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===ne&&km(It)===Bt.type){b(Ie,Bt.sibling),Te=D(Bt,Oe.props),Te.ref=vf(Ie,Bt,Oe),Te.return=Ie,Ie=Te;break e}b(Ie,Bt);break}else p(Ie,Bt);Bt=Bt.sibling}Oe.type===R?(Te=kf(Oe.props.children,Ie.mode,ut,Oe.key),Te.return=Ie,Ie=Te):(ut=i0(Oe.type,Oe.key,Oe.props,null,Ie.mode,ut),ut.ref=vf(Ie,Te,Oe),ut.return=Ie,Ie=ut)}return ae(Ie);case A:e:{for(Bt=Oe.key;Te!==null;){if(Te.key===Bt)if(Te.tag===4&&Te.stateNode.containerInfo===Oe.containerInfo&&Te.stateNode.implementation===Oe.implementation){b(Ie,Te.sibling),Te=D(Te,Oe.children||[]),Te.return=Ie,Ie=Te;break e}else{b(Ie,Te);break}else p(Ie,Te);Te=Te.sibling}Te=$w(Oe,Ie.mode,ut),Te.return=Ie,Ie=Te}return ae(Ie);case ne:return Bt=Oe._init,Zr(Ie,Te,Bt(Oe._payload),ut)}if(Le(Oe))return Mt(Ie,Te,Oe,ut);if(K(Oe))return At(Ie,Te,Oe,ut);_f(Ie,Oe)}return typeof Oe=="string"&&Oe!==""||typeof Oe=="number"?(Oe=""+Oe,Te!==null&&Te.tag===6?(b(Ie,Te.sibling),Te=D(Te,Oe),Te.return=Ie,Ie=Te):(b(Ie,Te),Te=Hw(Oe,Ie.mode,ut),Te.return=Ie,Ie=Te),ae(Ie)):b(Ie,Te)}return Zr}var ru=Um(!0),xf=Um(!1),iu=xr(null),su=null,_a=null,pc=null;function ou(){pc=_a=su=null}function wf(f){var p=iu.current;Zn(iu),f._currentValue=p}function Sf(f,p,b){for(;f!==null;){var P=f.alternate;if((f.childLanes&p)!==p?(f.childLanes|=p,P!==null&&(P.childLanes|=p)):P!==null&&(P.childLanes&p)!==p&&(P.childLanes|=p),f===b)break;f=f.return}}function hl(f,p){su=f,pc=_a=null,f=f.dependencies,f!==null&&f.firstContext!==null&&((f.lanes&p)!==0&&(sn=!0),f.firstContext=null)}function Ss(f){var p=f._currentValue;if(pc!==f)if(f={context:f,memoizedValue:p,next:null},_a===null){if(su===null)throw Error(t(308));_a=f,su.dependencies={lanes:0,firstContext:f}}else _a=_a.next=f;return p}var xa=null;function Fm(f){xa===null?xa=[f]:xa.push(f)}function Ef(f,p,b,P){var D=p.interleaved;return D===null?(b.next=b,Fm(p)):(b.next=D.next,D.next=b),p.interleaved=b,po(f,P)}function po(f,p){f.lanes|=p;var b=f.alternate;for(b!==null&&(b.lanes|=p),b=f,f=f.return;f!==null;)f.childLanes|=p,b=f.alternate,b!==null&&(b.childLanes|=p),b=f,f=f.return;return b.tag===3?b.stateNode:null}var Gn=!1;function nn(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cr(f,p){f=f.updateQueue,p.updateQueue===f&&(p.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function Vn(f,p){return{eventTime:f,lane:p,tag:0,payload:null,callback:null,next:null}}function ur(f,p,b){var P=f.updateQueue;if(P===null)return null;if(P=P.shared,(Ln&2)!==0){var D=P.pending;return D===null?p.next=p:(p.next=D.next,D.next=p),P.pending=p,po(f,b)}return D=P.interleaved,D===null?(p.next=p,Fm(P)):(p.next=D.next,D.next=p),P.interleaved=p,po(f,b)}function Li(f,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194240)!==0)){var P=p.lanes;P&=f.pendingLanes,b|=P,p.lanes=b,oo(f,b)}}function au(f,p){var b=f.updateQueue,P=f.alternate;if(P!==null&&(P=P.updateQueue,b===P)){var D=null,V=null;if(b=b.firstBaseUpdate,b!==null){do{var ae={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};V===null?D=V=ae:V=V.next=ae,b=b.next}while(b!==null);V===null?D=V=p:V=V.next=p}else D=V=p;b={baseState:P.baseState,firstBaseUpdate:D,lastBaseUpdate:V,shared:P.shared,effects:P.effects},f.updateQueue=b;return}f=b.lastBaseUpdate,f===null?b.firstBaseUpdate=p:f.next=p,b.lastBaseUpdate=p}function wr(f,p,b,P){var D=f.updateQueue;Gn=!1;var V=D.firstBaseUpdate,ae=D.lastBaseUpdate,ve=D.shared.pending;if(ve!==null){D.shared.pending=null;var Se=ve,Be=Se.next;Se.next=null,ae===null?V=Be:ae.next=Be,ae=Se;var nt=f.alternate;nt!==null&&(nt=nt.updateQueue,ve=nt.lastBaseUpdate,ve!==ae&&(ve===null?nt.firstBaseUpdate=Be:ve.next=Be,nt.lastBaseUpdate=Se))}if(V!==null){var it=D.baseState;ae=0,nt=Be=Se=null,ve=V;do{var tt=ve.lane,Et=ve.eventTime;if((P&tt)===tt){nt!==null&&(nt=nt.next={eventTime:Et,lane:0,tag:ve.tag,payload:ve.payload,callback:ve.callback,next:null});e:{var Mt=f,At=ve;switch(tt=p,Et=b,At.tag){case 1:if(Mt=At.payload,typeof Mt=="function"){it=Mt.call(Et,it,tt);break e}it=Mt;break e;case 3:Mt.flags=Mt.flags&-65537|128;case 0:if(Mt=At.payload,tt=typeof Mt=="function"?Mt.call(Et,it,tt):Mt,tt==null)break e;it=F({},it,tt);break e;case 2:Gn=!0}}ve.callback!==null&&ve.lane!==0&&(f.flags|=64,tt=D.effects,tt===null?D.effects=[ve]:tt.push(ve))}else Et={eventTime:Et,lane:tt,tag:ve.tag,payload:ve.payload,callback:ve.callback,next:null},nt===null?(Be=nt=Et,Se=it):nt=nt.next=Et,ae|=tt;if(ve=ve.next,ve===null){if(ve=D.shared.pending,ve===null)break;tt=ve,ve=tt.next,tt.next=null,D.lastBaseUpdate=tt,D.shared.pending=null}}while(!0);if(nt===null&&(Se=it),D.baseState=Se,D.firstBaseUpdate=Be,D.lastBaseUpdate=nt,p=D.shared.interleaved,p!==null){D=p;do ae|=D.lane,D=D.next;while(D!==p)}else V===null&&(D.shared.lanes=0);Lf|=ae,f.lanes=ae,f.memoizedState=it}}function mc(f,p,b){if(f=p.effects,p.effects=null,f!==null)for(p=0;p<f.length;p++){var P=f[p],D=P.callback;if(D!==null){if(P.callback=null,P=b,typeof D!="function")throw Error(t(191,D));D.call(P)}}}var Fo={},Es=xr(Fo),lu=xr(Fo),wa=xr(Fo);function Hr(f){if(f===Fo)throw Error(t(174));return f}function bf(f,p){switch(Xn(wa,p),Xn(lu,f),Xn(Es,Fo),f=p.nodeType,f){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:ze(null,"");break;default:f=f===8?p.parentNode:p,p=f.namespaceURI||null,f=f.tagName,p=ze(p,f)}Zn(Es),Xn(Es,p)}function pl(){Zn(Es),Zn(lu),Zn(wa)}function uu(f){Hr(wa.current);var p=Hr(Es.current),b=ze(p,f.type);p!==b&&(Xn(lu,f),Xn(Es,b))}function gc(f){lu.current===f&&(Zn(Es),Zn(lu))}var ir=xr(0);function mo(f){for(var p=f;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||b.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var yc=[];function zo(){for(var f=0;f<yc.length;f++)yc[f]._workInProgressVersionPrimary=null;yc.length=0}var cu=T.ReactCurrentDispatcher,fu=T.ReactCurrentBatchConfig,Sa=0,Qn=null,Sr=null,Cn=null,go=!1,Ni=!1,ml=0,as=0;function wi(){throw Error(t(321))}function Tf(f,p){if(p===null)return!1;for(var b=0;b<p.length&&b<f.length;b++)if(!_s(f[b],p[b]))return!1;return!0}function Mf(f,p,b,P,D,V){if(Sa=V,Qn=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,cu.current=f===null||f.memoizedState===null?$v:Gv,f=b(P,D),Ni){V=0;do{if(Ni=!1,ml=0,25<=V)throw Error(t(301));V+=1,Cn=Sr=null,p.updateQueue=null,cu.current=Vv,f=b(P,D)}while(Ni)}if(cu.current=Ah,p=Sr!==null&&Sr.next!==null,Sa=0,Cn=Sr=Qn=null,go=!1,p)throw Error(t(300));return f}function zm(){var f=ml!==0;return ml=0,f}function Si(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?Qn.memoizedState=Cn=f:Cn=Cn.next=f,Cn}function bs(){if(Sr===null){var f=Qn.alternate;f=f!==null?f.memoizedState:null}else f=Sr.next;var p=Cn===null?Qn.memoizedState:Cn.next;if(p!==null)Cn=p,Sr=f;else{if(f===null)throw Error(t(310));Sr=f,f={memoizedState:Sr.memoizedState,baseState:Sr.baseState,baseQueue:Sr.baseQueue,queue:Sr.queue,next:null},Cn===null?Qn.memoizedState=Cn=f:Cn=Cn.next=f}return Cn}function vc(f,p){return typeof p=="function"?p(f):p}function Af(f){var p=bs(),b=p.queue;if(b===null)throw Error(t(311));b.lastRenderedReducer=f;var P=Sr,D=P.baseQueue,V=b.pending;if(V!==null){if(D!==null){var ae=D.next;D.next=V.next,V.next=ae}P.baseQueue=D=V,b.pending=null}if(D!==null){V=D.next,P=P.baseState;var ve=ae=null,Se=null,Be=V;do{var nt=Be.lane;if((Sa&nt)===nt)Se!==null&&(Se=Se.next={lane:0,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null}),P=Be.hasEagerState?Be.eagerState:f(P,Be.action);else{var it={lane:nt,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null};Se===null?(ve=Se=it,ae=P):Se=Se.next=it,Qn.lanes|=nt,Lf|=nt}Be=Be.next}while(Be!==null&&Be!==V);Se===null?ae=P:Se.next=ve,_s(P,p.memoizedState)||(sn=!0),p.memoizedState=P,p.baseState=ae,p.baseQueue=Se,b.lastRenderedState=P}if(f=b.interleaved,f!==null){D=f;do V=D.lane,Qn.lanes|=V,Lf|=V,D=D.next;while(D!==f)}else D===null&&(b.lanes=0);return[p.memoizedState,b.dispatch]}function Ea(f){var p=bs(),b=p.queue;if(b===null)throw Error(t(311));b.lastRenderedReducer=f;var P=b.dispatch,D=b.pending,V=p.memoizedState;if(D!==null){b.pending=null;var ae=D=D.next;do V=f(V,ae.action),ae=ae.next;while(ae!==D);_s(V,p.memoizedState)||(sn=!0),p.memoizedState=V,p.baseQueue===null&&(p.baseState=V),b.lastRenderedState=V}return[V,P]}function Bm(){}function Hm(f,p){var b=Qn,P=bs(),D=p(),V=!_s(P.memoizedState,D);if(V&&(P.memoizedState=D,sn=!0),P=P.queue,Vm(kv.bind(null,b,P,f),[f]),P.getSnapshot!==p||V||Cn!==null&&Cn.memoizedState.tag&1){if(b.flags|=2048,yo(9,Cf.bind(null,b,P,D,p),void 0,null),Oi===null)throw Error(t(349));(Sa&30)!==0||wh(b,p,D)}return D}function wh(f,p,b){f.flags|=16384,f={getSnapshot:p,value:b},p=Qn.updateQueue,p===null?(p={lastEffect:null,stores:null},Qn.updateQueue=p,p.stores=[f]):(b=p.stores,b===null?p.stores=[f]:b.push(f))}function Cf(f,p,b,P){p.value=b,p.getSnapshot=P,Uv(p)&&$m(f)}function kv(f,p,b){return b(function(){Uv(p)&&$m(f)})}function Uv(f){var p=f.getSnapshot;f=f.value;try{var b=p();return!_s(f,b)}catch{return!0}}function $m(f){var p=po(f,1);p!==null&&Ca(p,f,1,-1)}function Gm(f){var p=Si();return typeof f=="function"&&(f=f()),p.memoizedState=p.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vc,lastRenderedState:f},p.queue=f,f=f.dispatch=du.bind(null,Qn,f),[p.memoizedState,f]}function yo(f,p,b,P){return f={tag:f,create:p,destroy:b,deps:P,next:null},p=Qn.updateQueue,p===null?(p={lastEffect:null,stores:null},Qn.updateQueue=p,p.lastEffect=f.next=f):(b=p.lastEffect,b===null?p.lastEffect=f.next=f:(P=b.next,b.next=f,f.next=P,p.lastEffect=f)),f}function Fv(){return bs().memoizedState}function Bo(f,p,b,P){var D=Si();Qn.flags|=f,D.memoizedState=yo(1|p,b,void 0,P===void 0?null:P)}function Rf(f,p,b,P){var D=bs();P=P===void 0?null:P;var V=void 0;if(Sr!==null){var ae=Sr.memoizedState;if(V=ae.destroy,P!==null&&Tf(P,ae.deps)){D.memoizedState=yo(p,b,V,P);return}}Qn.flags|=f,D.memoizedState=yo(1|p,b,V,P)}function qi(f,p){return Bo(8390656,8,f,p)}function Vm(f,p){return Rf(2048,8,f,p)}function jm(f,p){return Rf(4,2,f,p)}function zv(f,p){return Rf(4,4,f,p)}function Bv(f,p){if(typeof p=="function")return f=f(),p(f),function(){p(null)};if(p!=null)return f=f(),p.current=f,function(){p.current=null}}function Wm(f,p,b){return b=b!=null?b.concat([f]):null,Rf(4,4,Bv.bind(null,p,f),b)}function Sh(){}function Hv(f,p){var b=bs();p=p===void 0?null:p;var P=b.memoizedState;return P!==null&&p!==null&&Tf(p,P[1])?P[0]:(b.memoizedState=[f,p],f)}function Ts(f,p){var b=bs();p=p===void 0?null:p;var P=b.memoizedState;return P!==null&&p!==null&&Tf(p,P[1])?P[0]:(f=f(),b.memoizedState=[f,p],f)}function Eh(f,p,b){return(Sa&21)===0?(f.baseState&&(f.baseState=!1,sn=!0),f.memoizedState=b):(_s(b,p)||(b=ns(),Qn.lanes|=b,Lf|=b,f.baseState=!0),p)}function Ew(f,p){var b=pn;pn=b!==0&&4>b?b:4,f(!0);var P=fu.transition;fu.transition={};try{f(!1),p()}finally{pn=b,fu.transition=P}}function ba(){return bs().memoizedState}function bh(f,p,b){var P=Sc(f);if(b={lane:P,action:b,hasEagerState:!1,eagerState:null,next:null},Pf(f))Th(p,b);else if(b=Ef(f,p,b,P),b!==null){var D=As();Ca(b,f,P,D),Mh(b,p,P)}}function du(f,p,b){var P=Sc(f),D={lane:P,action:b,hasEagerState:!1,eagerState:null,next:null};if(Pf(f))Th(p,D);else{var V=f.alternate;if(f.lanes===0&&(V===null||V.lanes===0)&&(V=p.lastRenderedReducer,V!==null))try{var ae=p.lastRenderedState,ve=V(ae,b);if(D.hasEagerState=!0,D.eagerState=ve,_s(ve,ae)){var Se=p.interleaved;Se===null?(D.next=D,Fm(p)):(D.next=Se.next,Se.next=D),p.interleaved=D;return}}catch{}finally{}b=Ef(f,p,D,P),b!==null&&(D=As(),Ca(b,f,P,D),Mh(b,p,P))}}function Pf(f){var p=f.alternate;return f===Qn||p!==null&&p===Qn}function Th(f,p){Ni=go=!0;var b=f.pending;b===null?p.next=p:(p.next=b.next,b.next=p),f.pending=p}function Mh(f,p,b){if((b&4194240)!==0){var P=p.lanes;P&=f.pendingLanes,b|=P,p.lanes=b,oo(f,b)}}var Ah={readContext:Ss,useCallback:wi,useContext:wi,useEffect:wi,useImperativeHandle:wi,useInsertionEffect:wi,useLayoutEffect:wi,useMemo:wi,useReducer:wi,useRef:wi,useState:wi,useDebugValue:wi,useDeferredValue:wi,useTransition:wi,useMutableSource:wi,useSyncExternalStore:wi,useId:wi,unstable_isNewReconciler:!1},$v={readContext:Ss,useCallback:function(f,p){return Si().memoizedState=[f,p===void 0?null:p],f},useContext:Ss,useEffect:qi,useImperativeHandle:function(f,p,b){return b=b!=null?b.concat([f]):null,Bo(4194308,4,Bv.bind(null,p,f),b)},useLayoutEffect:function(f,p){return Bo(4194308,4,f,p)},useInsertionEffect:function(f,p){return Bo(4,2,f,p)},useMemo:function(f,p){var b=Si();return p=p===void 0?null:p,f=f(),b.memoizedState=[f,p],f},useReducer:function(f,p,b){var P=Si();return p=b!==void 0?b(p):p,P.memoizedState=P.baseState=p,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:p},P.queue=f,f=f.dispatch=bh.bind(null,Qn,f),[P.memoizedState,f]},useRef:function(f){var p=Si();return f={current:f},p.memoizedState=f},useState:Gm,useDebugValue:Sh,useDeferredValue:function(f){return Si().memoizedState=f},useTransition:function(){var f=Gm(!1),p=f[0];return f=Ew.bind(null,f[1]),Si().memoizedState=f,[p,f]},useMutableSource:function(){},useSyncExternalStore:function(f,p,b){var P=Qn,D=Si();if(rr){if(b===void 0)throw Error(t(407));b=b()}else{if(b=p(),Oi===null)throw Error(t(349));(Sa&30)!==0||wh(P,p,b)}D.memoizedState=b;var V={value:b,getSnapshot:p};return D.queue=V,qi(kv.bind(null,P,V,f),[f]),P.flags|=2048,yo(9,Cf.bind(null,P,V,b,p),void 0,null),b},useId:function(){var f=Si(),p=Oi.identifierPrefix;if(rr){var b=Vs,P=ft;b=(P&~(1<<32-Pn(P)-1)).toString(32)+b,p=":"+p+"R"+b,b=ml++,0<b&&(p+="H"+b.toString(32)),p+=":"}else b=as++,p=":"+p+"r"+b.toString(32)+":";return f.memoizedState=p},unstable_isNewReconciler:!1},Gv={readContext:Ss,useCallback:Hv,useContext:Ss,useEffect:Vm,useImperativeHandle:Wm,useInsertionEffect:jm,useLayoutEffect:zv,useMemo:Ts,useReducer:Af,useRef:Fv,useState:function(){return Af(vc)},useDebugValue:Sh,useDeferredValue:function(f){var p=bs();return Eh(p,Sr.memoizedState,f)},useTransition:function(){var f=Af(vc)[0],p=bs().memoizedState;return[f,p]},useMutableSource:Bm,useSyncExternalStore:Hm,useId:ba,unstable_isNewReconciler:!1},Vv={readContext:Ss,useCallback:Hv,useContext:Ss,useEffect:Vm,useImperativeHandle:Wm,useInsertionEffect:jm,useLayoutEffect:zv,useMemo:Ts,useReducer:Ea,useRef:Fv,useState:function(){return Ea(vc)},useDebugValue:Sh,useDeferredValue:function(f){var p=bs();return Sr===null?p.memoizedState=f:Eh(p,Sr.memoizedState,f)},useTransition:function(){var f=Ea(vc)[0],p=bs().memoizedState;return[f,p]},useMutableSource:Bm,useSyncExternalStore:Hm,useId:ba,unstable_isNewReconciler:!1};function Ws(f,p){if(f&&f.defaultProps){p=F({},p),f=f.defaultProps;for(var b in f)p[b]===void 0&&(p[b]=f[b]);return p}return p}function If(f,p,b,P){p=f.memoizedState,b=b(P,p),b=b==null?p:F({},p,b),f.memoizedState=b,f.lanes===0&&(f.updateQueue.baseState=b)}var Ch={isMounted:function(f){return(f=f._reactInternals)?me(f)===f:!1},enqueueSetState:function(f,p,b){f=f._reactInternals;var P=As(),D=Sc(f),V=Vn(P,D);V.payload=p,b!=null&&(V.callback=b),p=ur(f,V,D),p!==null&&(Ca(p,f,D,P),Li(p,f,D))},enqueueReplaceState:function(f,p,b){f=f._reactInternals;var P=As(),D=Sc(f),V=Vn(P,D);V.tag=1,V.payload=p,b!=null&&(V.callback=b),p=ur(f,V,D),p!==null&&(Ca(p,f,D,P),Li(p,f,D))},enqueueForceUpdate:function(f,p){f=f._reactInternals;var b=As(),P=Sc(f),D=Vn(b,P);D.tag=2,p!=null&&(D.callback=p),p=ur(f,D,P),p!==null&&(Ca(p,f,P,b),Li(p,f,P))}};function jv(f,p,b,P,D,V,ae){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(P,V,ae):p.prototype&&p.prototype.isPureReactComponent?!ql(b,P)||!ql(D,V):!0}function x(f,p,b){var P=!1,D=ma,V=p.contextType;return typeof V=="object"&&V!==null?V=Ss(V):(D=Ii(p)?ga:_i.current,P=p.contextTypes,V=(P=P!=null)?Ql(f,D):ma),p=new p(b,V),f.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Ch,f.stateNode=p,p._reactInternals=f,P&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=D,f.__reactInternalMemoizedMaskedChildContext=V),p}function w(f,p,b,P){f=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,P),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,P),p.state!==f&&Ch.enqueueReplaceState(p,p.state,null)}function C(f,p,b,P){var D=f.stateNode;D.props=b,D.state=f.memoizedState,D.refs={},nn(f);var V=p.contextType;typeof V=="object"&&V!==null?D.context=Ss(V):(V=Ii(p)?ga:_i.current,D.context=Ql(f,V)),D.state=f.memoizedState,V=p.getDerivedStateFromProps,typeof V=="function"&&(If(f,p,V,b),D.state=f.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(p=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),p!==D.state&&Ch.enqueueReplaceState(D,D.state,null),wr(f,b,D,P),D.state=f.memoizedState),typeof D.componentDidMount=="function"&&(f.flags|=4194308)}function N(f,p){try{var b="",P=p;do b+=J(P),P=P.return;while(P);var D=b}catch(V){D=`
Error generating stack: `+V.message+`
`+V.stack}return{value:f,source:p,stack:D,digest:null}}function H(f,p,b){return{value:f,source:null,stack:b??null,digest:p??null}}function Q(f,p){try{console.error(p.value)}catch(b){setTimeout(function(){throw b})}}var ge=typeof WeakMap=="function"?WeakMap:Map;function Me(f,p,b){b=Vn(-1,b),b.tag=3,b.payload={element:null};var P=p.value;return b.callback=function(){Zv||(Zv=!0,Nw=P),Q(f,p)},b}function Ve(f,p,b){b=Vn(-1,b),b.tag=3;var P=f.type.getDerivedStateFromError;if(typeof P=="function"){var D=p.value;b.payload=function(){return P(D)},b.callback=function(){Q(f,p)}}var V=f.stateNode;return V!==null&&typeof V.componentDidCatch=="function"&&(b.callback=function(){Q(f,p),typeof P!="function"&&(xc===null?xc=new Set([this]):xc.add(this));var ae=p.stack;this.componentDidCatch(p.value,{componentStack:ae!==null?ae:""})}),b}function lt(f,p,b){var P=f.pingCache;if(P===null){P=f.pingCache=new ge;var D=new Set;P.set(p,D)}else D=P.get(p),D===void 0&&(D=new Set,P.set(p,D));D.has(b)||(D.add(b),f=y4.bind(null,f,p,b),p.then(f,f))}function bt(f){do{var p;if((p=f.tag===13)&&(p=f.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return f;f=f.return}while(f!==null);return null}function Yt(f,p,b,P,D){return(f.mode&1)===0?(f===p?f.flags|=65536:(f.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(p=Vn(-1,1),p.tag=2,ur(b,p,1))),b.lanes|=1),f):(f.flags|=65536,f.lanes=D,f)}var kt=T.ReactCurrentOwner,sn=!1;function _t(f,p,b,P){p.child=f===null?xf(p,null,b,P):ru(p,f.child,b,P)}function Ei(f,p,b,P,D){b=b.render;var V=p.ref;return hl(p,D),P=Mf(f,p,b,P,V,D),b=zm(),f!==null&&!sn?(p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~D,hu(f,p,D)):(rr&&b&&Lm(p),p.flags|=1,_t(f,p,P,D),p.child)}function Ms(f,p,b,P,D){if(f===null){var V=b.type;return typeof V=="function"&&!Bw(V)&&V.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(p.tag=15,p.type=V,ke(f,p,V,P,D)):(f=i0(b.type,null,P,p,p.mode,D),f.ref=p.ref,f.return=p,p.child=f)}if(V=f.child,(f.lanes&D)===0){var ae=V.memoizedProps;if(b=b.compare,b=b!==null?b:ql,b(ae,P)&&f.ref===p.ref)return hu(f,p,D)}return p.flags|=1,f=bc(V,P),f.ref=p.ref,f.return=p,p.child=f}function ke(f,p,b,P,D){if(f!==null){var V=f.memoizedProps;if(ql(V,P)&&f.ref===p.ref)if(sn=!1,p.pendingProps=P=V,(f.lanes&D)!==0)(f.flags&131072)!==0&&(sn=!0);else return p.lanes=f.lanes,hu(f,p,D)}return vt(f,p,b,P,D)}function Ce(f,p,b){var P=p.pendingProps,D=P.children,V=f!==null?f.memoizedState:null;if(P.mode==="hidden")if((p.mode&1)===0)p.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xn(Ph,vo),vo|=b;else{if((b&1073741824)===0)return f=V!==null?V.baseLanes|b:b,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:f,cachePool:null,transitions:null},p.updateQueue=null,Xn(Ph,vo),vo|=f,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},P=V!==null?V.baseLanes:b,Xn(Ph,vo),vo|=P}else V!==null?(P=V.baseLanes|b,p.memoizedState=null):P=b,Xn(Ph,vo),vo|=P;return _t(f,p,D,b),p.child}function Ge(f,p){var b=p.ref;(f===null&&b!==null||f!==null&&f.ref!==b)&&(p.flags|=512,p.flags|=2097152)}function vt(f,p,b,P,D){var V=Ii(b)?ga:_i.current;return V=Ql(p,V),hl(p,D),b=Mf(f,p,b,P,V,D),P=zm(),f!==null&&!sn?(p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~D,hu(f,p,D)):(rr&&P&&Lm(p),p.flags|=1,_t(f,p,b,D),p.child)}function Rt(f,p,b,P,D){if(Ii(b)){var V=!0;eu(p)}else V=!1;if(hl(p,D),p.stateNode===null)qv(f,p),x(p,b,P),C(p,b,P,D),P=!0;else if(f===null){var ae=p.stateNode,ve=p.memoizedProps;ae.props=ve;var Se=ae.context,Be=b.contextType;typeof Be=="object"&&Be!==null?Be=Ss(Be):(Be=Ii(b)?ga:_i.current,Be=Ql(p,Be));var nt=b.getDerivedStateFromProps,it=typeof nt=="function"||typeof ae.getSnapshotBeforeUpdate=="function";it||typeof ae.UNSAFE_componentWillReceiveProps!="function"&&typeof ae.componentWillReceiveProps!="function"||(ve!==P||Se!==Be)&&w(p,ae,P,Be),Gn=!1;var tt=p.memoizedState;ae.state=tt,wr(p,P,ae,D),Se=p.memoizedState,ve!==P||tt!==Se||Vi.current||Gn?(typeof nt=="function"&&(If(p,b,nt,P),Se=p.memoizedState),(ve=Gn||jv(p,b,ve,P,tt,Se,Be))?(it||typeof ae.UNSAFE_componentWillMount!="function"&&typeof ae.componentWillMount!="function"||(typeof ae.componentWillMount=="function"&&ae.componentWillMount(),typeof ae.UNSAFE_componentWillMount=="function"&&ae.UNSAFE_componentWillMount()),typeof ae.componentDidMount=="function"&&(p.flags|=4194308)):(typeof ae.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=P,p.memoizedState=Se),ae.props=P,ae.state=Se,ae.context=Be,P=ve):(typeof ae.componentDidMount=="function"&&(p.flags|=4194308),P=!1)}else{ae=p.stateNode,Cr(f,p),ve=p.memoizedProps,Be=p.type===p.elementType?ve:Ws(p.type,ve),ae.props=Be,it=p.pendingProps,tt=ae.context,Se=b.contextType,typeof Se=="object"&&Se!==null?Se=Ss(Se):(Se=Ii(b)?ga:_i.current,Se=Ql(p,Se));var Et=b.getDerivedStateFromProps;(nt=typeof Et=="function"||typeof ae.getSnapshotBeforeUpdate=="function")||typeof ae.UNSAFE_componentWillReceiveProps!="function"&&typeof ae.componentWillReceiveProps!="function"||(ve!==it||tt!==Se)&&w(p,ae,P,Se),Gn=!1,tt=p.memoizedState,ae.state=tt,wr(p,P,ae,D);var Mt=p.memoizedState;ve!==it||tt!==Mt||Vi.current||Gn?(typeof Et=="function"&&(If(p,b,Et,P),Mt=p.memoizedState),(Be=Gn||jv(p,b,Be,P,tt,Mt,Se)||!1)?(nt||typeof ae.UNSAFE_componentWillUpdate!="function"&&typeof ae.componentWillUpdate!="function"||(typeof ae.componentWillUpdate=="function"&&ae.componentWillUpdate(P,Mt,Se),typeof ae.UNSAFE_componentWillUpdate=="function"&&ae.UNSAFE_componentWillUpdate(P,Mt,Se)),typeof ae.componentDidUpdate=="function"&&(p.flags|=4),typeof ae.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof ae.componentDidUpdate!="function"||ve===f.memoizedProps&&tt===f.memoizedState||(p.flags|=4),typeof ae.getSnapshotBeforeUpdate!="function"||ve===f.memoizedProps&&tt===f.memoizedState||(p.flags|=1024),p.memoizedProps=P,p.memoizedState=Mt),ae.props=P,ae.state=Mt,ae.context=Se,P=Be):(typeof ae.componentDidUpdate!="function"||ve===f.memoizedProps&&tt===f.memoizedState||(p.flags|=4),typeof ae.getSnapshotBeforeUpdate!="function"||ve===f.memoizedProps&&tt===f.memoizedState||(p.flags|=1024),P=!1)}return en(f,p,b,P,V,D)}function en(f,p,b,P,D,V){Ge(f,p);var ae=(p.flags&128)!==0;if(!P&&!ae)return D&&Pm(p,b,!1),hu(f,p,V);P=p.stateNode,kt.current=p;var ve=ae&&typeof b.getDerivedStateFromError!="function"?null:P.render();return p.flags|=1,f!==null&&ae?(p.child=ru(p,f.child,null,V),p.child=ru(p,null,ve,V)):_t(f,p,ve,V),p.memoizedState=P.state,D&&Pm(p,b,!0),p.child}function Kt(f){var p=f.stateNode;p.pendingContext?Rm(f,p.pendingContext,p.pendingContext!==p.context):p.context&&Rm(f,p.context,!1),bf(f,p.containerInfo)}function bn(f,p,b,P,D){return dl(),hc(D),p.flags|=256,_t(f,p,b,P),p.child}var $r={dehydrated:null,treeContext:null,retryLane:0};function wn(f){return{baseLanes:f,cachePool:null,transitions:null}}function Ta(f,p,b){var P=p.pendingProps,D=ir.current,V=!1,ae=(p.flags&128)!==0,ve;if((ve=ae)||(ve=f!==null&&f.memoizedState===null?!1:(D&2)!==0),ve?(V=!0,p.flags&=-129):(f===null||f.memoizedState!==null)&&(D|=1),Xn(ir,D&1),f===null)return _h(p),f=p.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?((p.mode&1)===0?p.lanes=1:f.data==="$!"?p.lanes=8:p.lanes=1073741824,null):(ae=P.children,f=P.fallback,V?(P=p.mode,V=p.child,ae={mode:"hidden",children:ae},(P&1)===0&&V!==null?(V.childLanes=0,V.pendingProps=ae):V=s0(ae,P,0,null),f=kf(f,P,b,null),V.return=p,f.return=p,V.sibling=f,p.child=V,p.child.memoizedState=wn(b),p.memoizedState=$r,f):qm(p,ae));if(D=f.memoizedState,D!==null&&(ve=D.dehydrated,ve!==null))return s4(f,p,ae,P,ve,D,b);if(V){V=P.fallback,ae=p.mode,D=f.child,ve=D.sibling;var Se={mode:"hidden",children:P.children};return(ae&1)===0&&p.child!==D?(P=p.child,P.childLanes=0,P.pendingProps=Se,p.deletions=null):(P=bc(D,Se),P.subtreeFlags=D.subtreeFlags&14680064),ve!==null?V=bc(ve,V):(V=kf(V,ae,b,null),V.flags|=2),V.return=p,P.return=p,P.sibling=V,p.child=P,P=V,V=p.child,ae=f.child.memoizedState,ae=ae===null?wn(b):{baseLanes:ae.baseLanes|b,cachePool:null,transitions:ae.transitions},V.memoizedState=ae,V.childLanes=f.childLanes&~b,p.memoizedState=$r,P}return V=f.child,f=V.sibling,P=bc(V,{mode:"visible",children:P.children}),(p.mode&1)===0&&(P.lanes=b),P.return=p,P.sibling=null,f!==null&&(b=p.deletions,b===null?(p.deletions=[f],p.flags|=16):b.push(f)),p.child=P,p.memoizedState=null,P}function qm(f,p){return p=s0({mode:"visible",children:p},f.mode,0,null),p.return=f,f.child=p}function Wv(f,p,b,P){return P!==null&&hc(P),ru(p,f.child,null,b),f=qm(p,p.pendingProps.children),f.flags|=2,p.memoizedState=null,f}function s4(f,p,b,P,D,V,ae){if(b)return p.flags&256?(p.flags&=-257,P=H(Error(t(422))),Wv(f,p,ae,P)):p.memoizedState!==null?(p.child=f.child,p.flags|=128,null):(V=P.fallback,D=p.mode,P=s0({mode:"visible",children:P.children},D,0,null),V=kf(V,D,ae,null),V.flags|=2,P.return=p,V.return=p,P.sibling=V,p.child=P,(p.mode&1)!==0&&ru(p,f.child,null,ae),p.child.memoizedState=wn(ae),p.memoizedState=$r,V);if((p.mode&1)===0)return Wv(f,p,ae,null);if(D.data==="$!"){if(P=D.nextSibling&&D.nextSibling.dataset,P)var ve=P.dgst;return P=ve,V=Error(t(419)),P=H(V,P,void 0),Wv(f,p,ae,P)}if(ve=(ae&f.childLanes)!==0,sn||ve){if(P=Oi,P!==null){switch(ae&-ae){case 4:D=2;break;case 16:D=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:D=32;break;case 536870912:D=268435456;break;default:D=0}D=(D&(P.suspendedLanes|ae))!==0?0:D,D!==0&&D!==V.retryLane&&(V.retryLane=D,po(f,D),Ca(P,f,D,-1))}return zw(),P=H(Error(t(421))),Wv(f,p,ae,P)}return D.data==="$?"?(p.flags|=128,p.child=f.child,p=v4.bind(null,f),D._reactRetry=p,null):(f=V.treeContext,Wi=ha(D.nextSibling),xi=p,rr=!0,js=null,f!==null&&(ji[fi++]=ft,ji[fi++]=Vs,ji[fi++]=nu,ft=f.id,Vs=f.overflow,nu=p),p=qm(p,P.children),p.flags|=4096,p)}function x2(f,p,b){f.lanes|=p;var P=f.alternate;P!==null&&(P.lanes|=p),Sf(f.return,p,b)}function bw(f,p,b,P,D){var V=f.memoizedState;V===null?f.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:P,tail:b,tailMode:D}:(V.isBackwards=p,V.rendering=null,V.renderingStartTime=0,V.last=P,V.tail=b,V.tailMode=D)}function w2(f,p,b){var P=p.pendingProps,D=P.revealOrder,V=P.tail;if(_t(f,p,P.children,b),P=ir.current,(P&2)!==0)P=P&1|2,p.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=p.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&x2(f,b,p);else if(f.tag===19)x2(f,b,p);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===p)break e;for(;f.sibling===null;){if(f.return===null||f.return===p)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}P&=1}if(Xn(ir,P),(p.mode&1)===0)p.memoizedState=null;else switch(D){case"forwards":for(b=p.child,D=null;b!==null;)f=b.alternate,f!==null&&mo(f)===null&&(D=b),b=b.sibling;b=D,b===null?(D=p.child,p.child=null):(D=b.sibling,b.sibling=null),bw(p,!1,D,b,V);break;case"backwards":for(b=null,D=p.child,p.child=null;D!==null;){if(f=D.alternate,f!==null&&mo(f)===null){p.child=D;break}f=D.sibling,D.sibling=b,b=D,D=f}bw(p,!0,b,null,V);break;case"together":bw(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function qv(f,p){(p.mode&1)===0&&f!==null&&(f.alternate=null,p.alternate=null,p.flags|=2)}function hu(f,p,b){if(f!==null&&(p.dependencies=f.dependencies),Lf|=p.lanes,(b&p.childLanes)===0)return null;if(f!==null&&p.child!==f.child)throw Error(t(153));if(p.child!==null){for(f=p.child,b=bc(f,f.pendingProps),p.child=b,b.return=p;f.sibling!==null;)f=f.sibling,b=b.sibling=bc(f,f.pendingProps),b.return=p;b.sibling=null}return p.child}function o4(f,p,b){switch(p.tag){case 3:Kt(p),dl();break;case 5:uu(p);break;case 1:Ii(p.type)&&eu(p);break;case 4:bf(p,p.stateNode.containerInfo);break;case 10:var P=p.type._context,D=p.memoizedProps.value;Xn(iu,P._currentValue),P._currentValue=D;break;case 13:if(P=p.memoizedState,P!==null)return P.dehydrated!==null?(Xn(ir,ir.current&1),p.flags|=128,null):(b&p.child.childLanes)!==0?Ta(f,p,b):(Xn(ir,ir.current&1),f=hu(f,p,b),f!==null?f.sibling:null);Xn(ir,ir.current&1);break;case 19:if(P=(b&p.childLanes)!==0,(f.flags&128)!==0){if(P)return w2(f,p,b);p.flags|=128}if(D=p.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),Xn(ir,ir.current),P)break;return null;case 22:case 23:return p.lanes=0,Ce(f,p,b)}return hu(f,p,b)}var S2,Tw,E2,b2;S2=function(f,p){for(var b=p.child;b!==null;){if(b.tag===5||b.tag===6)f.appendChild(b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===p)break;for(;b.sibling===null;){if(b.return===null||b.return===p)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},Tw=function(){},E2=function(f,p,b,P){var D=f.memoizedProps;if(D!==P){f=p.stateNode,Hr(Es.current);var V=null;switch(b){case"input":D=fe(f,D),P=fe(f,P),V=[];break;case"select":D=F({},D,{value:void 0}),P=F({},P,{value:void 0}),V=[];break;case"textarea":D=Ye(f,D),P=Ye(f,P),V=[];break;default:typeof D.onClick!="function"&&typeof P.onClick=="function"&&(f.onclick=hf)}ot(b,P);var ae;b=null;for(Be in D)if(!P.hasOwnProperty(Be)&&D.hasOwnProperty(Be)&&D[Be]!=null)if(Be==="style"){var ve=D[Be];for(ae in ve)ve.hasOwnProperty(ae)&&(b||(b={}),b[ae]="")}else Be!=="dangerouslySetInnerHTML"&&Be!=="children"&&Be!=="suppressContentEditableWarning"&&Be!=="suppressHydrationWarning"&&Be!=="autoFocus"&&(i.hasOwnProperty(Be)?V||(V=[]):(V=V||[]).push(Be,null));for(Be in P){var Se=P[Be];if(ve=D!=null?D[Be]:void 0,P.hasOwnProperty(Be)&&Se!==ve&&(Se!=null||ve!=null))if(Be==="style")if(ve){for(ae in ve)!ve.hasOwnProperty(ae)||Se&&Se.hasOwnProperty(ae)||(b||(b={}),b[ae]="");for(ae in Se)Se.hasOwnProperty(ae)&&ve[ae]!==Se[ae]&&(b||(b={}),b[ae]=Se[ae])}else b||(V||(V=[]),V.push(Be,b)),b=Se;else Be==="dangerouslySetInnerHTML"?(Se=Se?Se.__html:void 0,ve=ve?ve.__html:void 0,Se!=null&&ve!==Se&&(V=V||[]).push(Be,Se)):Be==="children"?typeof Se!="string"&&typeof Se!="number"||(V=V||[]).push(Be,""+Se):Be!=="suppressContentEditableWarning"&&Be!=="suppressHydrationWarning"&&(i.hasOwnProperty(Be)?(Se!=null&&Be==="onScroll"&&Jn("scroll",f),V||ve===Se||(V=[])):(V=V||[]).push(Be,Se))}b&&(V=V||[]).push("style",b);var Be=V;(p.updateQueue=Be)&&(p.flags|=4)}},b2=function(f,p,b,P){b!==P&&(p.flags|=4)};function Xm(f,p){if(!rr)switch(f.tailMode){case"hidden":p=f.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?f.tail=null:b.sibling=null;break;case"collapsed":b=f.tail;for(var P=null;b!==null;)b.alternate!==null&&(P=b),b=b.sibling;P===null?p||f.tail===null?f.tail=null:f.tail.sibling=null:P.sibling=null}}function ls(f){var p=f.alternate!==null&&f.alternate.child===f.child,b=0,P=0;if(p)for(var D=f.child;D!==null;)b|=D.lanes|D.childLanes,P|=D.subtreeFlags&14680064,P|=D.flags&14680064,D.return=f,D=D.sibling;else for(D=f.child;D!==null;)b|=D.lanes|D.childLanes,P|=D.subtreeFlags,P|=D.flags,D.return=f,D=D.sibling;return f.subtreeFlags|=P,f.childLanes=b,p}function a4(f,p,b){var P=p.pendingProps;switch(va(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ls(p),null;case 1:return Ii(p.type)&&pf(),ls(p),null;case 3:return P=p.stateNode,pl(),Zn(Vi),Zn(_i),zo(),P.pendingContext&&(P.context=P.pendingContext,P.pendingContext=null),(f===null||f.child===null)&&(dc(p)?p.flags|=4:f===null||f.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,js!==null&&(kw(js),js=null))),Tw(f,p),ls(p),null;case 5:gc(p);var D=Hr(wa.current);if(b=p.type,f!==null&&p.stateNode!=null)E2(f,p,b,P,D),f.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!P){if(p.stateNode===null)throw Error(t(166));return ls(p),null}if(f=Hr(Es.current),dc(p)){P=p.stateNode,b=p.type;var V=p.memoizedProps;switch(P[Jr]=p,P[fc]=V,f=(p.mode&1)!==0,b){case"dialog":Jn("cancel",P),Jn("close",P);break;case"iframe":case"object":case"embed":Jn("load",P);break;case"video":case"audio":for(D=0;D<cl.length;D++)Jn(cl[D],P);break;case"source":Jn("error",P);break;case"img":case"image":case"link":Jn("error",P),Jn("load",P);break;case"details":Jn("toggle",P);break;case"input":ie(P,V),Jn("invalid",P);break;case"select":P._wrapperState={wasMultiple:!!V.multiple},Jn("invalid",P);break;case"textarea":ue(P,V),Jn("invalid",P)}ot(b,V),D=null;for(var ae in V)if(V.hasOwnProperty(ae)){var ve=V[ae];ae==="children"?typeof ve=="string"?P.textContent!==ve&&(V.suppressHydrationWarning!==!0&&df(P.textContent,ve,f),D=["children",ve]):typeof ve=="number"&&P.textContent!==""+ve&&(V.suppressHydrationWarning!==!0&&df(P.textContent,ve,f),D=["children",""+ve]):i.hasOwnProperty(ae)&&ve!=null&&ae==="onScroll"&&Jn("scroll",P)}switch(b){case"input":te(P),we(P,V,!0);break;case"textarea":te(P),ye(P);break;case"select":case"option":break;default:typeof V.onClick=="function"&&(P.onclick=hf)}P=D,p.updateQueue=P,P!==null&&(p.flags|=4)}else{ae=D.nodeType===9?D:D.ownerDocument,f==="http://www.w3.org/1999/xhtml"&&(f=Fe(b)),f==="http://www.w3.org/1999/xhtml"?b==="script"?(f=ae.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild)):typeof P.is=="string"?f=ae.createElement(b,{is:P.is}):(f=ae.createElement(b),b==="select"&&(ae=f,P.multiple?ae.multiple=!0:P.size&&(ae.size=P.size))):f=ae.createElementNS(f,b),f[Jr]=p,f[fc]=P,S2(f,p,!1,!1),p.stateNode=f;e:{switch(ae=xt(b,P),b){case"dialog":Jn("cancel",f),Jn("close",f),D=P;break;case"iframe":case"object":case"embed":Jn("load",f),D=P;break;case"video":case"audio":for(D=0;D<cl.length;D++)Jn(cl[D],f);D=P;break;case"source":Jn("error",f),D=P;break;case"img":case"image":case"link":Jn("error",f),Jn("load",f),D=P;break;case"details":Jn("toggle",f),D=P;break;case"input":ie(f,P),D=fe(f,P),Jn("invalid",f);break;case"option":D=P;break;case"select":f._wrapperState={wasMultiple:!!P.multiple},D=F({},P,{value:void 0}),Jn("invalid",f);break;case"textarea":ue(f,P),D=Ye(f,P),Jn("invalid",f);break;default:D=P}ot(b,D),ve=D;for(V in ve)if(ve.hasOwnProperty(V)){var Se=ve[V];V==="style"?at(f,Se):V==="dangerouslySetInnerHTML"?(Se=Se?Se.__html:void 0,Se!=null&&Ze(f,Se)):V==="children"?typeof Se=="string"?(b!=="textarea"||Se!=="")&&Ke(f,Se):typeof Se=="number"&&Ke(f,""+Se):V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&V!=="autoFocus"&&(i.hasOwnProperty(V)?Se!=null&&V==="onScroll"&&Jn("scroll",f):Se!=null&&S(f,V,Se,ae))}switch(b){case"input":te(f),we(f,P,!1);break;case"textarea":te(f),ye(f);break;case"option":P.value!=null&&f.setAttribute("value",""+he(P.value));break;case"select":f.multiple=!!P.multiple,V=P.value,V!=null?be(f,!!P.multiple,V,!1):P.defaultValue!=null&&be(f,!!P.multiple,P.defaultValue,!0);break;default:typeof D.onClick=="function"&&(f.onclick=hf)}switch(b){case"button":case"input":case"select":case"textarea":P=!!P.autoFocus;break e;case"img":P=!0;break e;default:P=!1}}P&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return ls(p),null;case 6:if(f&&p.stateNode!=null)b2(f,p,f.memoizedProps,P);else{if(typeof P!="string"&&p.stateNode===null)throw Error(t(166));if(b=Hr(wa.current),Hr(Es.current),dc(p)){if(P=p.stateNode,b=p.memoizedProps,P[Jr]=p,(V=P.nodeValue!==b)&&(f=xi,f!==null))switch(f.tag){case 3:df(P.nodeValue,b,(f.mode&1)!==0);break;case 5:f.memoizedProps.suppressHydrationWarning!==!0&&df(P.nodeValue,b,(f.mode&1)!==0)}V&&(p.flags|=4)}else P=(b.nodeType===9?b:b.ownerDocument).createTextNode(P),P[Jr]=p,p.stateNode=P}return ls(p),null;case 13:if(Zn(ir),P=p.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(rr&&Wi!==null&&(p.mode&1)!==0&&(p.flags&128)===0)Dm(),dl(),p.flags|=98560,V=!1;else if(V=dc(p),P!==null&&P.dehydrated!==null){if(f===null){if(!V)throw Error(t(318));if(V=p.memoizedState,V=V!==null?V.dehydrated:null,!V)throw Error(t(317));V[Jr]=p}else dl(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;ls(p),V=!1}else js!==null&&(kw(js),js=null),V=!0;if(!V)return p.flags&65536?p:null}return(p.flags&128)!==0?(p.lanes=b,p):(P=P!==null,P!==(f!==null&&f.memoizedState!==null)&&P&&(p.child.flags|=8192,(p.mode&1)!==0&&(f===null||(ir.current&1)!==0?bi===0&&(bi=3):zw())),p.updateQueue!==null&&(p.flags|=4),ls(p),null);case 4:return pl(),Tw(f,p),f===null&&lc(p.stateNode.containerInfo),ls(p),null;case 10:return wf(p.type._context),ls(p),null;case 17:return Ii(p.type)&&pf(),ls(p),null;case 19:if(Zn(ir),V=p.memoizedState,V===null)return ls(p),null;if(P=(p.flags&128)!==0,ae=V.rendering,ae===null)if(P)Xm(V,!1);else{if(bi!==0||f!==null&&(f.flags&128)!==0)for(f=p.child;f!==null;){if(ae=mo(f),ae!==null){for(p.flags|=128,Xm(V,!1),P=ae.updateQueue,P!==null&&(p.updateQueue=P,p.flags|=4),p.subtreeFlags=0,P=b,b=p.child;b!==null;)V=b,f=P,V.flags&=14680066,ae=V.alternate,ae===null?(V.childLanes=0,V.lanes=f,V.child=null,V.subtreeFlags=0,V.memoizedProps=null,V.memoizedState=null,V.updateQueue=null,V.dependencies=null,V.stateNode=null):(V.childLanes=ae.childLanes,V.lanes=ae.lanes,V.child=ae.child,V.subtreeFlags=0,V.deletions=null,V.memoizedProps=ae.memoizedProps,V.memoizedState=ae.memoizedState,V.updateQueue=ae.updateQueue,V.type=ae.type,f=ae.dependencies,V.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),b=b.sibling;return Xn(ir,ir.current&1|2),p.child}f=f.sibling}V.tail!==null&&qe()>Ih&&(p.flags|=128,P=!0,Xm(V,!1),p.lanes=4194304)}else{if(!P)if(f=mo(ae),f!==null){if(p.flags|=128,P=!0,b=f.updateQueue,b!==null&&(p.updateQueue=b,p.flags|=4),Xm(V,!0),V.tail===null&&V.tailMode==="hidden"&&!ae.alternate&&!rr)return ls(p),null}else 2*qe()-V.renderingStartTime>Ih&&b!==1073741824&&(p.flags|=128,P=!0,Xm(V,!1),p.lanes=4194304);V.isBackwards?(ae.sibling=p.child,p.child=ae):(b=V.last,b!==null?b.sibling=ae:p.child=ae,V.last=ae)}return V.tail!==null?(p=V.tail,V.rendering=p,V.tail=p.sibling,V.renderingStartTime=qe(),p.sibling=null,b=ir.current,Xn(ir,P?b&1|2:b&1),p):(ls(p),null);case 22:case 23:return Fw(),P=p.memoizedState!==null,f!==null&&f.memoizedState!==null!==P&&(p.flags|=8192),P&&(p.mode&1)!==0?(vo&1073741824)!==0&&(ls(p),p.subtreeFlags&6&&(p.flags|=8192)):ls(p),null;case 24:return null;case 25:return null}throw Error(t(156,p.tag))}function l4(f,p){switch(va(p),p.tag){case 1:return Ii(p.type)&&pf(),f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 3:return pl(),Zn(Vi),Zn(_i),zo(),f=p.flags,(f&65536)!==0&&(f&128)===0?(p.flags=f&-65537|128,p):null;case 5:return gc(p),null;case 13:if(Zn(ir),f=p.memoizedState,f!==null&&f.dehydrated!==null){if(p.alternate===null)throw Error(t(340));dl()}return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 19:return Zn(ir),null;case 4:return pl(),null;case 10:return wf(p.type._context),null;case 22:case 23:return Fw(),null;case 24:return null;default:return null}}var Xv=!1,us=!1,u4=typeof WeakSet=="function"?WeakSet:Set,Tt=null;function Rh(f,p){var b=f.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(P){Gr(f,p,P)}else b.current=null}function Mw(f,p,b){try{b()}catch(P){Gr(f,p,P)}}var T2=!1;function c4(f,p){if(cc=ii,f=mr(),ai(f)){if("selectionStart"in f)var b={start:f.selectionStart,end:f.selectionEnd};else e:{b=(b=f.ownerDocument)&&b.defaultView||window;var P=b.getSelection&&b.getSelection();if(P&&P.rangeCount!==0){b=P.anchorNode;var D=P.anchorOffset,V=P.focusNode;P=P.focusOffset;try{b.nodeType,V.nodeType}catch{b=null;break e}var ae=0,ve=-1,Se=-1,Be=0,nt=0,it=f,tt=null;t:for(;;){for(var Et;it!==b||D!==0&&it.nodeType!==3||(ve=ae+D),it!==V||P!==0&&it.nodeType!==3||(Se=ae+P),it.nodeType===3&&(ae+=it.nodeValue.length),(Et=it.firstChild)!==null;)tt=it,it=Et;for(;;){if(it===f)break t;if(tt===b&&++Be===D&&(ve=ae),tt===V&&++nt===P&&(Se=ae),(Et=it.nextSibling)!==null)break;it=tt,tt=it.parentNode}it=Et}b=ve===-1||Se===-1?null:{start:ve,end:Se}}else b=null}b=b||{start:0,end:0}}else b=null;for(Em={focusedElem:f,selectionRange:b},ii=!1,Tt=p;Tt!==null;)if(p=Tt,f=p.child,(p.subtreeFlags&1028)!==0&&f!==null)f.return=p,Tt=f;else for(;Tt!==null;){p=Tt;try{var Mt=p.alternate;if((p.flags&1024)!==0)switch(p.tag){case 0:case 11:case 15:break;case 1:if(Mt!==null){var At=Mt.memoizedProps,Zr=Mt.memoizedState,Ie=p.stateNode,Te=Ie.getSnapshotBeforeUpdate(p.elementType===p.type?At:Ws(p.type,At),Zr);Ie.__reactInternalSnapshotBeforeUpdate=Te}break;case 3:var Oe=p.stateNode.containerInfo;Oe.nodeType===1?Oe.textContent="":Oe.nodeType===9&&Oe.documentElement&&Oe.removeChild(Oe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ut){Gr(p,p.return,ut)}if(f=p.sibling,f!==null){f.return=p.return,Tt=f;break}Tt=p.return}return Mt=T2,T2=!1,Mt}function Ym(f,p,b){var P=p.updateQueue;if(P=P!==null?P.lastEffect:null,P!==null){var D=P=P.next;do{if((D.tag&f)===f){var V=D.destroy;D.destroy=void 0,V!==void 0&&Mw(p,b,V)}D=D.next}while(D!==P)}}function Yv(f,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var b=p=p.next;do{if((b.tag&f)===f){var P=b.create;b.destroy=P()}b=b.next}while(b!==p)}}function Aw(f){var p=f.ref;if(p!==null){var b=f.stateNode;switch(f.tag){case 5:f=b;break;default:f=b}typeof p=="function"?p(f):p.current=f}}function M2(f){var p=f.alternate;p!==null&&(f.alternate=null,M2(p)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(p=f.stateNode,p!==null&&(delete p[Jr],delete p[fc],delete p[Zl],delete p[dh],delete p[hh])),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function A2(f){return f.tag===5||f.tag===3||f.tag===4}function C2(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||A2(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function Cw(f,p,b){var P=f.tag;if(P===5||P===6)f=f.stateNode,p?b.nodeType===8?b.parentNode.insertBefore(f,p):b.insertBefore(f,p):(b.nodeType===8?(p=b.parentNode,p.insertBefore(f,b)):(p=b,p.appendChild(f)),b=b._reactRootContainer,b!=null||p.onclick!==null||(p.onclick=hf));else if(P!==4&&(f=f.child,f!==null))for(Cw(f,p,b),f=f.sibling;f!==null;)Cw(f,p,b),f=f.sibling}function Rw(f,p,b){var P=f.tag;if(P===5||P===6)f=f.stateNode,p?b.insertBefore(f,p):b.appendChild(f);else if(P!==4&&(f=f.child,f!==null))for(Rw(f,p,b),f=f.sibling;f!==null;)Rw(f,p,b),f=f.sibling}var Xi=null,Ma=!1;function _c(f,p,b){for(b=b.child;b!==null;)R2(f,p,b),b=b.sibling}function R2(f,p,b){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(Ft,b)}catch{}switch(b.tag){case 5:us||Rh(b,p);case 6:var P=Xi,D=Ma;Xi=null,_c(f,p,b),Xi=P,Ma=D,Xi!==null&&(Ma?(f=Xi,b=b.stateNode,f.nodeType===8?f.parentNode.removeChild(b):f.removeChild(b)):Xi.removeChild(b.stateNode));break;case 18:Xi!==null&&(Ma?(f=Xi,b=b.stateNode,f.nodeType===8?fh(f.parentNode,b):f.nodeType===1&&fh(f,b),nl(f)):fh(Xi,b.stateNode));break;case 4:P=Xi,D=Ma,Xi=b.stateNode.containerInfo,Ma=!0,_c(f,p,b),Xi=P,Ma=D;break;case 0:case 11:case 14:case 15:if(!us&&(P=b.updateQueue,P!==null&&(P=P.lastEffect,P!==null))){D=P=P.next;do{var V=D,ae=V.destroy;V=V.tag,ae!==void 0&&((V&2)!==0||(V&4)!==0)&&Mw(b,p,ae),D=D.next}while(D!==P)}_c(f,p,b);break;case 1:if(!us&&(Rh(b,p),P=b.stateNode,typeof P.componentWillUnmount=="function"))try{P.props=b.memoizedProps,P.state=b.memoizedState,P.componentWillUnmount()}catch(ve){Gr(b,p,ve)}_c(f,p,b);break;case 21:_c(f,p,b);break;case 22:b.mode&1?(us=(P=us)||b.memoizedState!==null,_c(f,p,b),us=P):_c(f,p,b);break;default:_c(f,p,b)}}function P2(f){var p=f.updateQueue;if(p!==null){f.updateQueue=null;var b=f.stateNode;b===null&&(b=f.stateNode=new u4),p.forEach(function(P){var D=_4.bind(null,f,P);b.has(P)||(b.add(P),P.then(D,D))})}}function Aa(f,p){var b=p.deletions;if(b!==null)for(var P=0;P<b.length;P++){var D=b[P];try{var V=f,ae=p,ve=ae;e:for(;ve!==null;){switch(ve.tag){case 5:Xi=ve.stateNode,Ma=!1;break e;case 3:Xi=ve.stateNode.containerInfo,Ma=!0;break e;case 4:Xi=ve.stateNode.containerInfo,Ma=!0;break e}ve=ve.return}if(Xi===null)throw Error(t(160));R2(V,ae,D),Xi=null,Ma=!1;var Se=D.alternate;Se!==null&&(Se.return=null),D.return=null}catch(Be){Gr(D,p,Be)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)I2(p,f),p=p.sibling}function I2(f,p){var b=f.alternate,P=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:if(Aa(p,f),gl(f),P&4){try{Ym(3,f,f.return),Yv(3,f)}catch(At){Gr(f,f.return,At)}try{Ym(5,f,f.return)}catch(At){Gr(f,f.return,At)}}break;case 1:Aa(p,f),gl(f),P&512&&b!==null&&Rh(b,b.return);break;case 5:if(Aa(p,f),gl(f),P&512&&b!==null&&Rh(b,b.return),f.flags&32){var D=f.stateNode;try{Ke(D,"")}catch(At){Gr(f,f.return,At)}}if(P&4&&(D=f.stateNode,D!=null)){var V=f.memoizedProps,ae=b!==null?b.memoizedProps:V,ve=f.type,Se=f.updateQueue;if(f.updateQueue=null,Se!==null)try{ve==="input"&&V.type==="radio"&&V.name!=null&&se(D,V),xt(ve,ae);var Be=xt(ve,V);for(ae=0;ae<Se.length;ae+=2){var nt=Se[ae],it=Se[ae+1];nt==="style"?at(D,it):nt==="dangerouslySetInnerHTML"?Ze(D,it):nt==="children"?Ke(D,it):S(D,nt,it,Be)}switch(ve){case"input":Ae(D,V);break;case"textarea":oe(D,V);break;case"select":var tt=D._wrapperState.wasMultiple;D._wrapperState.wasMultiple=!!V.multiple;var Et=V.value;Et!=null?be(D,!!V.multiple,Et,!1):tt!==!!V.multiple&&(V.defaultValue!=null?be(D,!!V.multiple,V.defaultValue,!0):be(D,!!V.multiple,V.multiple?[]:"",!1))}D[fc]=V}catch(At){Gr(f,f.return,At)}}break;case 6:if(Aa(p,f),gl(f),P&4){if(f.stateNode===null)throw Error(t(162));D=f.stateNode,V=f.memoizedProps;try{D.nodeValue=V}catch(At){Gr(f,f.return,At)}}break;case 3:if(Aa(p,f),gl(f),P&4&&b!==null&&b.memoizedState.isDehydrated)try{nl(p.containerInfo)}catch(At){Gr(f,f.return,At)}break;case 4:Aa(p,f),gl(f);break;case 13:Aa(p,f),gl(f),D=f.child,D.flags&8192&&(V=D.memoizedState!==null,D.stateNode.isHidden=V,!V||D.alternate!==null&&D.alternate.memoizedState!==null||(Lw=qe())),P&4&&P2(f);break;case 22:if(nt=b!==null&&b.memoizedState!==null,f.mode&1?(us=(Be=us)||nt,Aa(p,f),us=Be):Aa(p,f),gl(f),P&8192){if(Be=f.memoizedState!==null,(f.stateNode.isHidden=Be)&&!nt&&(f.mode&1)!==0)for(Tt=f,nt=f.child;nt!==null;){for(it=Tt=nt;Tt!==null;){switch(tt=Tt,Et=tt.child,tt.tag){case 0:case 11:case 14:case 15:Ym(4,tt,tt.return);break;case 1:Rh(tt,tt.return);var Mt=tt.stateNode;if(typeof Mt.componentWillUnmount=="function"){P=tt,b=tt.return;try{p=P,Mt.props=p.memoizedProps,Mt.state=p.memoizedState,Mt.componentWillUnmount()}catch(At){Gr(P,b,At)}}break;case 5:Rh(tt,tt.return);break;case 22:if(tt.memoizedState!==null){O2(it);continue}}Et!==null?(Et.return=tt,Tt=Et):O2(it)}nt=nt.sibling}e:for(nt=null,it=f;;){if(it.tag===5){if(nt===null){nt=it;try{D=it.stateNode,Be?(V=D.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none"):(ve=it.stateNode,Se=it.memoizedProps.style,ae=Se!=null&&Se.hasOwnProperty("display")?Se.display:null,ve.style.display=ht("display",ae))}catch(At){Gr(f,f.return,At)}}}else if(it.tag===6){if(nt===null)try{it.stateNode.nodeValue=Be?"":it.memoizedProps}catch(At){Gr(f,f.return,At)}}else if((it.tag!==22&&it.tag!==23||it.memoizedState===null||it===f)&&it.child!==null){it.child.return=it,it=it.child;continue}if(it===f)break e;for(;it.sibling===null;){if(it.return===null||it.return===f)break e;nt===it&&(nt=null),it=it.return}nt===it&&(nt=null),it.sibling.return=it.return,it=it.sibling}}break;case 19:Aa(p,f),gl(f),P&4&&P2(f);break;case 21:break;default:Aa(p,f),gl(f)}}function gl(f){var p=f.flags;if(p&2){try{e:{for(var b=f.return;b!==null;){if(A2(b)){var P=b;break e}b=b.return}throw Error(t(160))}switch(P.tag){case 5:var D=P.stateNode;P.flags&32&&(Ke(D,""),P.flags&=-33);var V=C2(f);Rw(f,V,D);break;case 3:case 4:var ae=P.stateNode.containerInfo,ve=C2(f);Cw(f,ve,ae);break;default:throw Error(t(161))}}catch(Se){Gr(f,f.return,Se)}f.flags&=-3}p&4096&&(f.flags&=-4097)}function f4(f,p,b){Tt=f,L2(f)}function L2(f,p,b){for(var P=(f.mode&1)!==0;Tt!==null;){var D=Tt,V=D.child;if(D.tag===22&&P){var ae=D.memoizedState!==null||Xv;if(!ae){var ve=D.alternate,Se=ve!==null&&ve.memoizedState!==null||us;ve=Xv;var Be=us;if(Xv=ae,(us=Se)&&!Be)for(Tt=D;Tt!==null;)ae=Tt,Se=ae.child,ae.tag===22&&ae.memoizedState!==null?D2(D):Se!==null?(Se.return=ae,Tt=Se):D2(D);for(;V!==null;)Tt=V,L2(V),V=V.sibling;Tt=D,Xv=ve,us=Be}N2(f)}else(D.subtreeFlags&8772)!==0&&V!==null?(V.return=D,Tt=V):N2(f)}}function N2(f){for(;Tt!==null;){var p=Tt;if((p.flags&8772)!==0){var b=p.alternate;try{if((p.flags&8772)!==0)switch(p.tag){case 0:case 11:case 15:us||Yv(5,p);break;case 1:var P=p.stateNode;if(p.flags&4&&!us)if(b===null)P.componentDidMount();else{var D=p.elementType===p.type?b.memoizedProps:Ws(p.type,b.memoizedProps);P.componentDidUpdate(D,b.memoizedState,P.__reactInternalSnapshotBeforeUpdate)}var V=p.updateQueue;V!==null&&mc(p,V,P);break;case 3:var ae=p.updateQueue;if(ae!==null){if(b=null,p.child!==null)switch(p.child.tag){case 5:b=p.child.stateNode;break;case 1:b=p.child.stateNode}mc(p,ae,b)}break;case 5:var ve=p.stateNode;if(b===null&&p.flags&4){b=ve;var Se=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":Se.autoFocus&&b.focus();break;case"img":Se.src&&(b.src=Se.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var Be=p.alternate;if(Be!==null){var nt=Be.memoizedState;if(nt!==null){var it=nt.dehydrated;it!==null&&nl(it)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}us||p.flags&512&&Aw(p)}catch(tt){Gr(p,p.return,tt)}}if(p===f){Tt=null;break}if(b=p.sibling,b!==null){b.return=p.return,Tt=b;break}Tt=p.return}}function O2(f){for(;Tt!==null;){var p=Tt;if(p===f){Tt=null;break}var b=p.sibling;if(b!==null){b.return=p.return,Tt=b;break}Tt=p.return}}function D2(f){for(;Tt!==null;){var p=Tt;try{switch(p.tag){case 0:case 11:case 15:var b=p.return;try{Yv(4,p)}catch(Se){Gr(p,b,Se)}break;case 1:var P=p.stateNode;if(typeof P.componentDidMount=="function"){var D=p.return;try{P.componentDidMount()}catch(Se){Gr(p,D,Se)}}var V=p.return;try{Aw(p)}catch(Se){Gr(p,V,Se)}break;case 5:var ae=p.return;try{Aw(p)}catch(Se){Gr(p,ae,Se)}}}catch(Se){Gr(p,p.return,Se)}if(p===f){Tt=null;break}var ve=p.sibling;if(ve!==null){ve.return=p.return,Tt=ve;break}Tt=p.return}}var d4=Math.ceil,Kv=T.ReactCurrentDispatcher,Pw=T.ReactCurrentOwner,Ho=T.ReactCurrentBatchConfig,Ln=0,Oi=null,di=null,Yi=0,vo=0,Ph=xr(0),bi=0,Km=null,Lf=0,Jv=0,Iw=0,Jm=null,qs=null,Lw=0,Ih=1/0,pu=null,Zv=!1,Nw=null,xc=null,Qv=!1,wc=null,e0=0,Zm=0,Ow=null,t0=-1,n0=0;function As(){return(Ln&6)!==0?qe():t0!==-1?t0:t0=qe()}function Sc(f){return(f.mode&1)===0?1:(Ln&2)!==0&&Yi!==0?Yi&-Yi:Sw.transition!==null?(n0===0&&(n0=ns()),n0):(f=pn,f!==0||(f=window.event,f=f===void 0?16:il(f.type)),f)}function Ca(f,p,b,P){if(50<Zm)throw Zm=0,Ow=null,Error(t(185));so(f,b,P),((Ln&2)===0||f!==Oi)&&(f===Oi&&((Ln&2)===0&&(Jv|=b),bi===4&&Ec(f,Yi)),Xs(f,P),b===1&&Ln===0&&(p.mode&1)===0&&(Ih=qe()+500,gf&&Uo()))}function Xs(f,p){var b=f.callbackNode;Po(f,p);var P=dr(f,f===Oi?Yi:0);if(P===0)b!==null&&Ot(b),f.callbackNode=null,f.callbackPriority=0;else if(p=P&-P,f.callbackPriority!==p){if(b!=null&&Ot(b),p===1)f.tag===0?Dv(U2.bind(null,f)):yf(U2.bind(null,f)),ww(function(){(Ln&6)===0&&Uo()}),b=null;else{switch(Io(P)){case 1:b=kn;break;case 4:b=En;break;case 16:b=Tr;break;case 536870912:b=An;break;default:b=Tr}b=j2(b,k2.bind(null,f))}f.callbackPriority=p,f.callbackNode=b}}function k2(f,p){if(t0=-1,n0=0,(Ln&6)!==0)throw Error(t(327));var b=f.callbackNode;if(Lh()&&f.callbackNode!==b)return null;var P=dr(f,f===Oi?Yi:0);if(P===0)return null;if((P&30)!==0||(P&f.expiredLanes)!==0||p)p=r0(f,P);else{p=P;var D=Ln;Ln|=2;var V=z2();(Oi!==f||Yi!==p)&&(pu=null,Ih=qe()+500,Of(f,p));do try{m4();break}catch(ve){F2(f,ve)}while(!0);ou(),Kv.current=V,Ln=D,di!==null?p=0:(Oi=null,Yi=0,p=bi)}if(p!==0){if(p===2&&(D=ni(f),D!==0&&(P=D,p=Dw(f,D))),p===1)throw b=Km,Of(f,0),Ec(f,P),Xs(f,qe()),b;if(p===6)Ec(f,P);else{if(D=f.current.alternate,(P&30)===0&&!h4(D)&&(p=r0(f,P),p===2&&(V=ni(f),V!==0&&(P=V,p=Dw(f,V))),p===1))throw b=Km,Of(f,0),Ec(f,P),Xs(f,qe()),b;switch(f.finishedWork=D,f.finishedLanes=P,p){case 0:case 1:throw Error(t(345));case 2:Df(f,qs,pu);break;case 3:if(Ec(f,P),(P&130023424)===P&&(p=Lw+500-qe(),10<p)){if(dr(f,0)!==0)break;if(D=f.suspendedLanes,(D&P)!==P){As(),f.pingedLanes|=f.suspendedLanes&D;break}f.timeoutHandle=Tm(Df.bind(null,f,qs,pu),p);break}Df(f,qs,pu);break;case 4:if(Ec(f,P),(P&4194240)===P)break;for(p=f.eventTimes,D=-1;0<P;){var ae=31-Pn(P);V=1<<ae,ae=p[ae],ae>D&&(D=ae),P&=~V}if(P=D,P=qe()-P,P=(120>P?120:480>P?480:1080>P?1080:1920>P?1920:3e3>P?3e3:4320>P?4320:1960*d4(P/1960))-P,10<P){f.timeoutHandle=Tm(Df.bind(null,f,qs,pu),P);break}Df(f,qs,pu);break;case 5:Df(f,qs,pu);break;default:throw Error(t(329))}}}return Xs(f,qe()),f.callbackNode===b?k2.bind(null,f):null}function Dw(f,p){var b=Jm;return f.current.memoizedState.isDehydrated&&(Of(f,p).flags|=256),f=r0(f,p),f!==2&&(p=qs,qs=b,p!==null&&kw(p)),f}function kw(f){qs===null?qs=f:qs.push.apply(qs,f)}function h4(f){for(var p=f;;){if(p.flags&16384){var b=p.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var P=0;P<b.length;P++){var D=b[P],V=D.getSnapshot;D=D.value;try{if(!_s(V(),D))return!1}catch{return!1}}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Ec(f,p){for(p&=~Iw,p&=~Jv,f.suspendedLanes|=p,f.pingedLanes&=~p,f=f.expirationTimes;0<p;){var b=31-Pn(p),P=1<<b;f[b]=-1,p&=~P}}function U2(f){if((Ln&6)!==0)throw Error(t(327));Lh();var p=dr(f,0);if((p&1)===0)return Xs(f,qe()),null;var b=r0(f,p);if(f.tag!==0&&b===2){var P=ni(f);P!==0&&(p=P,b=Dw(f,P))}if(b===1)throw b=Km,Of(f,0),Ec(f,p),Xs(f,qe()),b;if(b===6)throw Error(t(345));return f.finishedWork=f.current.alternate,f.finishedLanes=p,Df(f,qs,pu),Xs(f,qe()),null}function Uw(f,p){var b=Ln;Ln|=1;try{return f(p)}finally{Ln=b,Ln===0&&(Ih=qe()+500,gf&&Uo())}}function Nf(f){wc!==null&&wc.tag===0&&(Ln&6)===0&&Lh();var p=Ln;Ln|=1;var b=Ho.transition,P=pn;try{if(Ho.transition=null,pn=1,f)return f()}finally{pn=P,Ho.transition=b,Ln=p,(Ln&6)===0&&Uo()}}function Fw(){vo=Ph.current,Zn(Ph)}function Of(f,p){f.finishedWork=null,f.finishedLanes=0;var b=f.timeoutHandle;if(b!==-1&&(f.timeoutHandle=-1,Mm(b)),di!==null)for(b=di.return;b!==null;){var P=b;switch(va(P),P.tag){case 1:P=P.type.childContextTypes,P!=null&&pf();break;case 3:pl(),Zn(Vi),Zn(_i),zo();break;case 5:gc(P);break;case 4:pl();break;case 13:Zn(ir);break;case 19:Zn(ir);break;case 10:wf(P.type._context);break;case 22:case 23:Fw()}b=b.return}if(Oi=f,di=f=bc(f.current,null),Yi=vo=p,bi=0,Km=null,Iw=Jv=Lf=0,qs=Jm=null,xa!==null){for(p=0;p<xa.length;p++)if(b=xa[p],P=b.interleaved,P!==null){b.interleaved=null;var D=P.next,V=b.pending;if(V!==null){var ae=V.next;V.next=D,P.next=ae}b.pending=P}xa=null}return f}function F2(f,p){do{var b=di;try{if(ou(),cu.current=Ah,go){for(var P=Qn.memoizedState;P!==null;){var D=P.queue;D!==null&&(D.pending=null),P=P.next}go=!1}if(Sa=0,Cn=Sr=Qn=null,Ni=!1,ml=0,Pw.current=null,b===null||b.return===null){bi=1,Km=p,di=null;break}e:{var V=f,ae=b.return,ve=b,Se=p;if(p=Yi,ve.flags|=32768,Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var Be=Se,nt=ve,it=nt.tag;if((nt.mode&1)===0&&(it===0||it===11||it===15)){var tt=nt.alternate;tt?(nt.updateQueue=tt.updateQueue,nt.memoizedState=tt.memoizedState,nt.lanes=tt.lanes):(nt.updateQueue=null,nt.memoizedState=null)}var Et=bt(ae);if(Et!==null){Et.flags&=-257,Yt(Et,ae,ve,V,p),Et.mode&1&&lt(V,Be,p),p=Et,Se=Be;var Mt=p.updateQueue;if(Mt===null){var At=new Set;At.add(Se),p.updateQueue=At}else Mt.add(Se);break e}else{if((p&1)===0){lt(V,Be,p),zw();break e}Se=Error(t(426))}}else if(rr&&ve.mode&1){var Zr=bt(ae);if(Zr!==null){(Zr.flags&65536)===0&&(Zr.flags|=256),Yt(Zr,ae,ve,V,p),hc(N(Se,ve));break e}}V=Se=N(Se,ve),bi!==4&&(bi=2),Jm===null?Jm=[V]:Jm.push(V),V=ae;do{switch(V.tag){case 3:V.flags|=65536,p&=-p,V.lanes|=p;var Ie=Me(V,Se,p);au(V,Ie);break e;case 1:ve=Se;var Te=V.type,Oe=V.stateNode;if((V.flags&128)===0&&(typeof Te.getDerivedStateFromError=="function"||Oe!==null&&typeof Oe.componentDidCatch=="function"&&(xc===null||!xc.has(Oe)))){V.flags|=65536,p&=-p,V.lanes|=p;var ut=Ve(V,ve,p);au(V,ut);break e}}V=V.return}while(V!==null)}H2(b)}catch(It){p=It,di===b&&b!==null&&(di=b=b.return);continue}break}while(!0)}function z2(){var f=Kv.current;return Kv.current=Ah,f===null?Ah:f}function zw(){(bi===0||bi===3||bi===2)&&(bi=4),Oi===null||(Lf&268435455)===0&&(Jv&268435455)===0||Ec(Oi,Yi)}function r0(f,p){var b=Ln;Ln|=2;var P=z2();(Oi!==f||Yi!==p)&&(pu=null,Of(f,p));do try{p4();break}catch(D){F2(f,D)}while(!0);if(ou(),Ln=b,Kv.current=P,di!==null)throw Error(t(261));return Oi=null,Yi=0,bi}function p4(){for(;di!==null;)B2(di)}function m4(){for(;di!==null&&!zt();)B2(di)}function B2(f){var p=V2(f.alternate,f,vo);f.memoizedProps=f.pendingProps,p===null?H2(f):di=p,Pw.current=null}function H2(f){var p=f;do{var b=p.alternate;if(f=p.return,(p.flags&32768)===0){if(b=a4(b,p,vo),b!==null){di=b;return}}else{if(b=l4(b,p),b!==null){b.flags&=32767,di=b;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{bi=6,di=null;return}}if(p=p.sibling,p!==null){di=p;return}di=p=f}while(p!==null);bi===0&&(bi=5)}function Df(f,p,b){var P=pn,D=Ho.transition;try{Ho.transition=null,pn=1,g4(f,p,b,P)}finally{Ho.transition=D,pn=P}return null}function g4(f,p,b,P){do Lh();while(wc!==null);if((Ln&6)!==0)throw Error(t(327));b=f.finishedWork;var D=f.finishedLanes;if(b===null)return null;if(f.finishedWork=null,f.finishedLanes=0,b===f.current)throw Error(t(177));f.callbackNode=null,f.callbackPriority=0;var V=b.lanes|b.childLanes;if($d(f,V),f===Oi&&(di=Oi=null,Yi=0),(b.subtreeFlags&2064)===0&&(b.flags&2064)===0||Qv||(Qv=!0,j2(Tr,function(){return Lh(),null})),V=(b.flags&15990)!==0,(b.subtreeFlags&15990)!==0||V){V=Ho.transition,Ho.transition=null;var ae=pn;pn=1;var ve=Ln;Ln|=4,Pw.current=null,c4(f,b),I2(b,f),li(Em),ii=!!cc,Em=cc=null,f.current=b,f4(b),Jt(),Ln=ve,pn=ae,Ho.transition=V}else f.current=b;if(Qv&&(Qv=!1,wc=f,e0=D),V=f.pendingLanes,V===0&&(xc=null),Gt(b.stateNode),Xs(f,qe()),p!==null)for(P=f.onRecoverableError,b=0;b<p.length;b++)D=p[b],P(D.value,{componentStack:D.stack,digest:D.digest});if(Zv)throw Zv=!1,f=Nw,Nw=null,f;return(e0&1)!==0&&f.tag!==0&&Lh(),V=f.pendingLanes,(V&1)!==0?f===Ow?Zm++:(Zm=0,Ow=f):Zm=0,Uo(),null}function Lh(){if(wc!==null){var f=Io(e0),p=Ho.transition,b=pn;try{if(Ho.transition=null,pn=16>f?16:f,wc===null)var P=!1;else{if(f=wc,wc=null,e0=0,(Ln&6)!==0)throw Error(t(331));var D=Ln;for(Ln|=4,Tt=f.current;Tt!==null;){var V=Tt,ae=V.child;if((Tt.flags&16)!==0){var ve=V.deletions;if(ve!==null){for(var Se=0;Se<ve.length;Se++){var Be=ve[Se];for(Tt=Be;Tt!==null;){var nt=Tt;switch(nt.tag){case 0:case 11:case 15:Ym(8,nt,V)}var it=nt.child;if(it!==null)it.return=nt,Tt=it;else for(;Tt!==null;){nt=Tt;var tt=nt.sibling,Et=nt.return;if(M2(nt),nt===Be){Tt=null;break}if(tt!==null){tt.return=Et,Tt=tt;break}Tt=Et}}}var Mt=V.alternate;if(Mt!==null){var At=Mt.child;if(At!==null){Mt.child=null;do{var Zr=At.sibling;At.sibling=null,At=Zr}while(At!==null)}}Tt=V}}if((V.subtreeFlags&2064)!==0&&ae!==null)ae.return=V,Tt=ae;else e:for(;Tt!==null;){if(V=Tt,(V.flags&2048)!==0)switch(V.tag){case 0:case 11:case 15:Ym(9,V,V.return)}var Ie=V.sibling;if(Ie!==null){Ie.return=V.return,Tt=Ie;break e}Tt=V.return}}var Te=f.current;for(Tt=Te;Tt!==null;){ae=Tt;var Oe=ae.child;if((ae.subtreeFlags&2064)!==0&&Oe!==null)Oe.return=ae,Tt=Oe;else e:for(ae=Te;Tt!==null;){if(ve=Tt,(ve.flags&2048)!==0)try{switch(ve.tag){case 0:case 11:case 15:Yv(9,ve)}}catch(It){Gr(ve,ve.return,It)}if(ve===ae){Tt=null;break e}var ut=ve.sibling;if(ut!==null){ut.return=ve.return,Tt=ut;break e}Tt=ve.return}}if(Ln=D,Uo(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(Ft,f)}catch{}P=!0}return P}finally{pn=b,Ho.transition=p}}return!1}function $2(f,p,b){p=N(b,p),p=Me(f,p,1),f=ur(f,p,1),p=As(),f!==null&&(so(f,1,p),Xs(f,p))}function Gr(f,p,b){if(f.tag===3)$2(f,f,b);else for(;p!==null;){if(p.tag===3){$2(p,f,b);break}else if(p.tag===1){var P=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof P.componentDidCatch=="function"&&(xc===null||!xc.has(P))){f=N(b,f),f=Ve(p,f,1),p=ur(p,f,1),f=As(),p!==null&&(so(p,1,f),Xs(p,f));break}}p=p.return}}function y4(f,p,b){var P=f.pingCache;P!==null&&P.delete(p),p=As(),f.pingedLanes|=f.suspendedLanes&b,Oi===f&&(Yi&b)===b&&(bi===4||bi===3&&(Yi&130023424)===Yi&&500>qe()-Lw?Of(f,0):Iw|=b),Xs(f,p)}function G2(f,p){p===0&&((f.mode&1)===0?p=1:(p=$n,$n<<=1,($n&130023424)===0&&($n=4194304)));var b=As();f=po(f,p),f!==null&&(so(f,p,b),Xs(f,b))}function v4(f){var p=f.memoizedState,b=0;p!==null&&(b=p.retryLane),G2(f,b)}function _4(f,p){var b=0;switch(f.tag){case 13:var P=f.stateNode,D=f.memoizedState;D!==null&&(b=D.retryLane);break;case 19:P=f.stateNode;break;default:throw Error(t(314))}P!==null&&P.delete(p),G2(f,b)}var V2;V2=function(f,p,b){if(f!==null)if(f.memoizedProps!==p.pendingProps||Vi.current)sn=!0;else{if((f.lanes&b)===0&&(p.flags&128)===0)return sn=!1,o4(f,p,b);sn=(f.flags&131072)!==0}else sn=!1,rr&&(p.flags&1048576)!==0&&Im(p,yh,p.index);switch(p.lanes=0,p.tag){case 2:var P=p.type;qv(f,p),f=p.pendingProps;var D=Ql(p,_i.current);hl(p,b),D=Mf(null,p,P,f,D,b);var V=zm();return p.flags|=1,typeof D=="object"&&D!==null&&typeof D.render=="function"&&D.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,Ii(P)?(V=!0,eu(p)):V=!1,p.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,nn(p),D.updater=Ch,p.stateNode=D,D._reactInternals=p,C(p,P,f,b),p=en(null,p,P,!0,V,b)):(p.tag=0,rr&&V&&Lm(p),_t(null,p,D,b),p=p.child),p;case 16:P=p.elementType;e:{switch(qv(f,p),f=p.pendingProps,D=P._init,P=D(P._payload),p.type=P,D=p.tag=w4(P),f=Ws(P,f),D){case 0:p=vt(null,p,P,f,b);break e;case 1:p=Rt(null,p,P,f,b);break e;case 11:p=Ei(null,p,P,f,b);break e;case 14:p=Ms(null,p,P,Ws(P.type,f),b);break e}throw Error(t(306,P,""))}return p;case 0:return P=p.type,D=p.pendingProps,D=p.elementType===P?D:Ws(P,D),vt(f,p,P,D,b);case 1:return P=p.type,D=p.pendingProps,D=p.elementType===P?D:Ws(P,D),Rt(f,p,P,D,b);case 3:e:{if(Kt(p),f===null)throw Error(t(387));P=p.pendingProps,V=p.memoizedState,D=V.element,Cr(f,p),wr(p,P,null,b);var ae=p.memoizedState;if(P=ae.element,V.isDehydrated)if(V={element:P,isDehydrated:!1,cache:ae.cache,pendingSuspenseBoundaries:ae.pendingSuspenseBoundaries,transitions:ae.transitions},p.updateQueue.baseState=V,p.memoizedState=V,p.flags&256){D=N(Error(t(423)),p),p=bn(f,p,P,b,D);break e}else if(P!==D){D=N(Error(t(424)),p),p=bn(f,p,P,b,D);break e}else for(Wi=ha(p.stateNode.containerInfo.firstChild),xi=p,rr=!0,js=null,b=xf(p,null,P,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(dl(),P===D){p=hu(f,p,b);break e}_t(f,p,P,b)}p=p.child}return p;case 5:return uu(p),f===null&&_h(p),P=p.type,D=p.pendingProps,V=f!==null?f.memoizedProps:null,ae=D.children,bm(P,D)?ae=null:V!==null&&bm(P,V)&&(p.flags|=32),Ge(f,p),_t(f,p,ae,b),p.child;case 6:return f===null&&_h(p),null;case 13:return Ta(f,p,b);case 4:return bf(p,p.stateNode.containerInfo),P=p.pendingProps,f===null?p.child=ru(p,null,P,b):_t(f,p,P,b),p.child;case 11:return P=p.type,D=p.pendingProps,D=p.elementType===P?D:Ws(P,D),Ei(f,p,P,D,b);case 7:return _t(f,p,p.pendingProps,b),p.child;case 8:return _t(f,p,p.pendingProps.children,b),p.child;case 12:return _t(f,p,p.pendingProps.children,b),p.child;case 10:e:{if(P=p.type._context,D=p.pendingProps,V=p.memoizedProps,ae=D.value,Xn(iu,P._currentValue),P._currentValue=ae,V!==null)if(_s(V.value,ae)){if(V.children===D.children&&!Vi.current){p=hu(f,p,b);break e}}else for(V=p.child,V!==null&&(V.return=p);V!==null;){var ve=V.dependencies;if(ve!==null){ae=V.child;for(var Se=ve.firstContext;Se!==null;){if(Se.context===P){if(V.tag===1){Se=Vn(-1,b&-b),Se.tag=2;var Be=V.updateQueue;if(Be!==null){Be=Be.shared;var nt=Be.pending;nt===null?Se.next=Se:(Se.next=nt.next,nt.next=Se),Be.pending=Se}}V.lanes|=b,Se=V.alternate,Se!==null&&(Se.lanes|=b),Sf(V.return,b,p),ve.lanes|=b;break}Se=Se.next}}else if(V.tag===10)ae=V.type===p.type?null:V.child;else if(V.tag===18){if(ae=V.return,ae===null)throw Error(t(341));ae.lanes|=b,ve=ae.alternate,ve!==null&&(ve.lanes|=b),Sf(ae,b,p),ae=V.sibling}else ae=V.child;if(ae!==null)ae.return=V;else for(ae=V;ae!==null;){if(ae===p){ae=null;break}if(V=ae.sibling,V!==null){V.return=ae.return,ae=V;break}ae=ae.return}V=ae}_t(f,p,D.children,b),p=p.child}return p;case 9:return D=p.type,P=p.pendingProps.children,hl(p,b),D=Ss(D),P=P(D),p.flags|=1,_t(f,p,P,b),p.child;case 14:return P=p.type,D=Ws(P,p.pendingProps),D=Ws(P.type,D),Ms(f,p,P,D,b);case 15:return ke(f,p,p.type,p.pendingProps,b);case 17:return P=p.type,D=p.pendingProps,D=p.elementType===P?D:Ws(P,D),qv(f,p),p.tag=1,Ii(P)?(f=!0,eu(p)):f=!1,hl(p,b),x(p,P,D),C(p,P,D,b),en(null,p,P,!0,f,b);case 19:return w2(f,p,b);case 22:return Ce(f,p,b)}throw Error(t(156,p.tag))};function j2(f,p){return Lt(f,p)}function x4(f,p,b,P){this.tag=f,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=P,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $o(f,p,b,P){return new x4(f,p,b,P)}function Bw(f){return f=f.prototype,!(!f||!f.isReactComponent)}function w4(f){if(typeof f=="function")return Bw(f)?1:0;if(f!=null){if(f=f.$$typeof,f===$)return 11;if(f===re)return 14}return 2}function bc(f,p){var b=f.alternate;return b===null?(b=$o(f.tag,p,f.key,f.mode),b.elementType=f.elementType,b.type=f.type,b.stateNode=f.stateNode,b.alternate=f,f.alternate=b):(b.pendingProps=p,b.type=f.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=f.flags&14680064,b.childLanes=f.childLanes,b.lanes=f.lanes,b.child=f.child,b.memoizedProps=f.memoizedProps,b.memoizedState=f.memoizedState,b.updateQueue=f.updateQueue,p=f.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=f.sibling,b.index=f.index,b.ref=f.ref,b}function i0(f,p,b,P,D,V){var ae=2;if(P=f,typeof f=="function")Bw(f)&&(ae=1);else if(typeof f=="string")ae=5;else e:switch(f){case R:return kf(b.children,D,V,p);case O:ae=8,D|=8;break;case I:return f=$o(12,b,p,D|2),f.elementType=I,f.lanes=V,f;case U:return f=$o(13,b,p,D),f.elementType=U,f.lanes=V,f;case ee:return f=$o(19,b,p,D),f.elementType=ee,f.lanes=V,f;case X:return s0(b,D,V,p);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case k:ae=10;break e;case G:ae=9;break e;case $:ae=11;break e;case re:ae=14;break e;case ne:ae=16,P=null;break e}throw Error(t(130,f==null?f:typeof f,""))}return p=$o(ae,b,p,D),p.elementType=f,p.type=P,p.lanes=V,p}function kf(f,p,b,P){return f=$o(7,f,P,p),f.lanes=b,f}function s0(f,p,b,P){return f=$o(22,f,P,p),f.elementType=X,f.lanes=b,f.stateNode={isHidden:!1},f}function Hw(f,p,b){return f=$o(6,f,null,p),f.lanes=b,f}function $w(f,p,b){return p=$o(4,f.children!==null?f.children:[],f.key,p),p.lanes=b,p.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},p}function S4(f,p,b,P,D){this.tag=p,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Za(0),this.expirationTimes=Za(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Za(0),this.identifierPrefix=P,this.onRecoverableError=D,this.mutableSourceEagerHydrationData=null}function Gw(f,p,b,P,D,V,ae,ve,Se){return f=new S4(f,p,b,ve,Se),p===1?(p=1,V===!0&&(p|=8)):p=0,V=$o(3,null,null,p),f.current=V,V.stateNode=f,V.memoizedState={element:P,isDehydrated:b,cache:null,transitions:null,pendingSuspenseBoundaries:null},nn(V),f}function E4(f,p,b){var P=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:P==null?null:""+P,children:f,containerInfo:p,implementation:b}}function W2(f){if(!f)return ma;f=f._reactInternals;e:{if(me(f)!==f||f.tag!==1)throw Error(t(170));var p=f;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(Ii(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(t(171))}if(f.tag===1){var b=f.type;if(Ii(b))return mf(f,b,p)}return p}function q2(f,p,b,P,D,V,ae,ve,Se){return f=Gw(b,P,!0,f,D,V,ae,ve,Se),f.context=W2(null),b=f.current,P=As(),D=Sc(b),V=Vn(P,D),V.callback=p??null,ur(b,V,D),f.current.lanes=D,so(f,D,P),Xs(f,P),f}function o0(f,p,b,P){var D=p.current,V=As(),ae=Sc(D);return b=W2(b),p.context===null?p.context=b:p.pendingContext=b,p=Vn(V,ae),p.payload={element:f},P=P===void 0?null:P,P!==null&&(p.callback=P),f=ur(D,p,ae),f!==null&&(Ca(f,D,ae,V),Li(f,D,ae)),ae}function a0(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return f.child.stateNode;default:return f.child.stateNode}}function X2(f,p){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var b=f.retryLane;f.retryLane=b!==0&&b<p?b:p}}function Vw(f,p){X2(f,p),(f=f.alternate)&&X2(f,p)}function b4(){return null}var Y2=typeof reportError=="function"?reportError:function(f){console.error(f)};function jw(f){this._internalRoot=f}l0.prototype.render=jw.prototype.render=function(f){var p=this._internalRoot;if(p===null)throw Error(t(409));o0(f,p,null,null)},l0.prototype.unmount=jw.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var p=f.containerInfo;Nf(function(){o0(null,f,null,null)}),p[ws]=null}};function l0(f){this._internalRoot=f}l0.prototype.unstable_scheduleHydration=function(f){if(f){var p=Lo();f={blockedOn:null,target:f,priority:p};for(var b=0;b<zs.length&&p!==0&&p<zs[b].priority;b++);zs.splice(b,0,f),b===0&&Ri(f)}};function Ww(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function u0(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11&&(f.nodeType!==8||f.nodeValue!==" react-mount-point-unstable "))}function K2(){}function T4(f,p,b,P,D){if(D){if(typeof P=="function"){var V=P;P=function(){var Be=a0(ae);V.call(Be)}}var ae=q2(p,P,f,0,null,!1,!1,"",K2);return f._reactRootContainer=ae,f[ws]=ae.current,lc(f.nodeType===8?f.parentNode:f),Nf(),ae}for(;D=f.lastChild;)f.removeChild(D);if(typeof P=="function"){var ve=P;P=function(){var Be=a0(Se);ve.call(Be)}}var Se=Gw(f,0,!1,null,null,!1,!1,"",K2);return f._reactRootContainer=Se,f[ws]=Se.current,lc(f.nodeType===8?f.parentNode:f),Nf(function(){o0(p,Se,b,P)}),Se}function c0(f,p,b,P,D){var V=b._reactRootContainer;if(V){var ae=V;if(typeof D=="function"){var ve=D;D=function(){var Se=a0(ae);ve.call(Se)}}o0(p,ae,f,D)}else ae=T4(b,p,f,D,P);return a0(ae)}Qa=function(f){switch(f.tag){case 3:var p=f.stateNode;if(p.current.memoizedState.isDehydrated){var b=Xr(p.pendingLanes);b!==0&&(oo(p,b|1),Xs(p,qe()),(Ln&6)===0&&(Ih=qe()+500,Uo()))}break;case 13:Nf(function(){var P=po(f,1);if(P!==null){var D=As();Ca(P,f,1,D)}}),Vw(f,1)}},Ku=function(f){if(f.tag===13){var p=po(f,134217728);if(p!==null){var b=As();Ca(p,f,134217728,b)}Vw(f,134217728)}},Ju=function(f){if(f.tag===13){var p=Sc(f),b=po(f,p);if(b!==null){var P=As();Ca(b,f,p,P)}Vw(f,p)}},Lo=function(){return pn},Hl=function(f,p){var b=pn;try{return pn=f,p()}finally{pn=b}},et=function(f,p,b){switch(p){case"input":if(Ae(f,b),p=b.name,b.type==="radio"&&p!=null){for(b=f;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<b.length;p++){var P=b[p];if(P!==f&&P.form===f.form){var D=ph(P);if(!D)throw Error(t(90));j(P),Ae(P,D)}}}break;case"textarea":oe(f,b);break;case"select":p=b.value,p!=null&&be(f,!!b.multiple,p,!1)}},xn=Uw,hn=Nf;var M4={usingClientEntryPoint:!1,Events:[pa,Ar,ph,Vt,rn,Uw]},Qm={findFiberByHostInstance:fl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},A4={bundleType:Qm.bundleType,version:Qm.version,rendererPackageName:Qm.rendererPackageName,rendererConfig:Qm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(f){return f=We(f),f===null?null:f.stateNode},findFiberByHostInstance:Qm.findFiberByHostInstance||b4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var f0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!f0.isDisabled&&f0.supportsFiber)try{Ft=f0.inject(A4),Zt=f0}catch{}}return Ys.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M4,Ys.createPortal=function(f,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ww(p))throw Error(t(200));return E4(f,p,null,b)},Ys.createRoot=function(f,p){if(!Ww(f))throw Error(t(299));var b=!1,P="",D=Y2;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(P=p.identifierPrefix),p.onRecoverableError!==void 0&&(D=p.onRecoverableError)),p=Gw(f,1,!1,null,null,b,!1,P,D),f[ws]=p.current,lc(f.nodeType===8?f.parentNode:f),new jw(p)},Ys.findDOMNode=function(f){if(f==null)return null;if(f.nodeType===1)return f;var p=f._reactInternals;if(p===void 0)throw typeof f.render=="function"?Error(t(188)):(f=Object.keys(f).join(","),Error(t(268,f)));return f=We(p),f=f===null?null:f.stateNode,f},Ys.flushSync=function(f){return Nf(f)},Ys.hydrate=function(f,p,b){if(!u0(p))throw Error(t(200));return c0(null,f,p,!0,b)},Ys.hydrateRoot=function(f,p,b){if(!Ww(f))throw Error(t(405));var P=b!=null&&b.hydratedSources||null,D=!1,V="",ae=Y2;if(b!=null&&(b.unstable_strictMode===!0&&(D=!0),b.identifierPrefix!==void 0&&(V=b.identifierPrefix),b.onRecoverableError!==void 0&&(ae=b.onRecoverableError)),p=q2(p,null,f,1,b??null,D,!1,V,ae),f[ws]=p.current,lc(f),P)for(f=0;f<P.length;f++)b=P[f],D=b._getVersion,D=D(b._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[b,D]:p.mutableSourceEagerHydrationData.push(b,D);return new l0(p)},Ys.render=function(f,p,b){if(!u0(p))throw Error(t(200));return c0(null,f,p,!1,b)},Ys.unmountComponentAtNode=function(f){if(!u0(f))throw Error(t(40));return f._reactRootContainer?(Nf(function(){c0(null,null,f,!1,function(){f._reactRootContainer=null,f[ws]=null})}),!0):!1},Ys.unstable_batchedUpdates=Uw,Ys.unstable_renderSubtreeIntoContainer=function(f,p,b,P){if(!u0(b))throw Error(t(200));if(f==null||f._reactInternals===void 0)throw Error(t(38));return c0(f,p,b,!1,P)},Ys.version="18.3.1-next-f1338f8080-20240426",Ys}var sC;function D4(){if(sC)return Yw.exports;sC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Yw.exports=O4(),Yw.exports}var oC;function k4(){if(oC)return d0;oC=1;var n=D4();return d0.createRoot=n.createRoot,d0.hydrateRoot=n.hydrateRoot,d0}var MD=k4();const U4=Bi(MD);var Rb=function(n,e){return Rb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Rb(n,e)};function ta(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Rb(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Pt=function(){return Pt=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Pt.apply(this,arguments)};function Dp(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Tl(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}function wl(n,e){var t=e&&e.cache?e.cache:V4,r=e&&e.serializer?e.serializer:$4,i=e&&e.strategy?e.strategy:B4;return i(n,{cache:t,serializer:r})}function F4(n){return n==null||typeof n=="number"||typeof n=="boolean"}function z4(n,e,t,r){var i=F4(r)?r:t(r),s=e.get(i);return typeof s>"u"&&(s=n.call(this,r),e.set(i,s)),s}function AD(n,e,t){var r=Array.prototype.slice.call(arguments,3),i=t(r),s=e.get(i);return typeof s>"u"&&(s=n.apply(this,r),e.set(i,s)),s}function CD(n,e,t,r,i){return t.bind(e,n,r,i)}function B4(n,e){var t=n.length===1?z4:AD;return CD(n,this,t,e.cache.create(),e.serializer)}function H4(n,e){return CD(n,this,AD,e.cache.create(),e.serializer)}var $4=function(){return JSON.stringify(arguments)},G4=function(){function n(){this.cache=Object.create(null)}return n.prototype.get=function(e){return this.cache[e]},n.prototype.set=function(e,t){this.cache[e]=t},n}(),V4={create:function(){return new G4}},Sl={variadic:H4},Tn;(function(n){n[n.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",n[n.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",n[n.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",n[n.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",n[n.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",n[n.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",n[n.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",n[n.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",n[n.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",n[n.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",n[n.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",n[n.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",n[n.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",n[n.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",n[n.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",n[n.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",n[n.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",n[n.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",n[n.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",n[n.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",n[n.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",n[n.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",n[n.INVALID_TAG=23]="INVALID_TAG",n[n.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",n[n.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",n[n.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(Tn||(Tn={}));var gr;(function(n){n[n.literal=0]="literal",n[n.argument=1]="argument",n[n.number=2]="number",n[n.date=3]="date",n[n.time=4]="time",n[n.select=5]="select",n[n.plural=6]="plural",n[n.pound=7]="pound",n[n.tag=8]="tag"})(gr||(gr={}));var kp;(function(n){n[n.number=0]="number",n[n.dateTime=1]="dateTime"})(kp||(kp={}));function aC(n){return n.type===gr.literal}function j4(n){return n.type===gr.argument}function RD(n){return n.type===gr.number}function PD(n){return n.type===gr.date}function ID(n){return n.type===gr.time}function LD(n){return n.type===gr.select}function ND(n){return n.type===gr.plural}function W4(n){return n.type===gr.pound}function OD(n){return n.type===gr.tag}function DD(n){return!!(n&&typeof n=="object"&&n.type===kp.number)}function Pb(n){return!!(n&&typeof n=="object"&&n.type===kp.dateTime)}var kD=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,q4=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function X4(n){var e={};return n.replace(q4,function(t){var r=t.length;switch(t[0]){case"G":e.era=r===4?"long":r===5?"narrow":"short";break;case"y":e.year=r===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":e.month=["numeric","2-digit","short","long","narrow"][r-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":e.day=["numeric","2-digit"][r-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":e.weekday=r===4?"long":r===5?"narrow":"short";break;case"e":if(r<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][r-4];break;case"c":if(r<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][r-4];break;case"a":e.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":e.hourCycle="h12",e.hour=["numeric","2-digit"][r-1];break;case"H":e.hourCycle="h23",e.hour=["numeric","2-digit"][r-1];break;case"K":e.hourCycle="h11",e.hour=["numeric","2-digit"][r-1];break;case"k":e.hourCycle="h24",e.hour=["numeric","2-digit"][r-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":e.minute=["numeric","2-digit"][r-1];break;case"s":e.second=["numeric","2-digit"][r-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":e.timeZoneName=r<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),e}var Y4=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function K4(n){if(n.length===0)throw new Error("Number skeleton cannot be empty");for(var e=n.split(Y4).filter(function(h){return h.length>0}),t=[],r=0,i=e;r<i.length;r++){var s=i[r],o=s.split("/");if(o.length===0)throw new Error("Invalid number skeleton");for(var a=o[0],l=o.slice(1),u=0,c=l;u<c.length;u++){var d=c[u];if(d.length===0)throw new Error("Invalid number skeleton")}t.push({stem:a,options:l})}return t}function J4(n){return n.replace(/^(.*?)-/,"")}var lC=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,UD=/^(@+)?(\+|#+)?[rs]?$/g,Z4=/(\*)(0+)|(#+)(0+)|(0+)/g,FD=/^(0+)$/;function uC(n){var e={};return n[n.length-1]==="r"?e.roundingPriority="morePrecision":n[n.length-1]==="s"&&(e.roundingPriority="lessPrecision"),n.replace(UD,function(t,r,i){return typeof i!="string"?(e.minimumSignificantDigits=r.length,e.maximumSignificantDigits=r.length):i==="+"?e.minimumSignificantDigits=r.length:r[0]==="#"?e.maximumSignificantDigits=r.length:(e.minimumSignificantDigits=r.length,e.maximumSignificantDigits=r.length+(typeof i=="string"?i.length:0)),""}),e}function zD(n){switch(n){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function Q4(n){var e;if(n[0]==="E"&&n[1]==="E"?(e={notation:"engineering"},n=n.slice(2)):n[0]==="E"&&(e={notation:"scientific"},n=n.slice(1)),e){var t=n.slice(0,2);if(t==="+!"?(e.signDisplay="always",n=n.slice(2)):t==="+?"&&(e.signDisplay="exceptZero",n=n.slice(2)),!FD.test(n))throw new Error("Malformed concise eng/scientific notation");e.minimumIntegerDigits=n.length}return e}function cC(n){var e={},t=zD(n);return t||e}function e5(n){for(var e={},t=0,r=n;t<r.length;t++){var i=r[t];switch(i.stem){case"percent":case"%":e.style="percent";continue;case"%x100":e.style="percent",e.scale=100;continue;case"currency":e.style="currency",e.currency=i.options[0];continue;case"group-off":case",_":e.useGrouping=!1;continue;case"precision-integer":case".":e.maximumFractionDigits=0;continue;case"measure-unit":case"unit":e.style="unit",e.unit=J4(i.options[0]);continue;case"compact-short":case"K":e.notation="compact",e.compactDisplay="short";continue;case"compact-long":case"KK":e.notation="compact",e.compactDisplay="long";continue;case"scientific":e=Pt(Pt(Pt({},e),{notation:"scientific"}),i.options.reduce(function(l,u){return Pt(Pt({},l),cC(u))},{}));continue;case"engineering":e=Pt(Pt(Pt({},e),{notation:"engineering"}),i.options.reduce(function(l,u){return Pt(Pt({},l),cC(u))},{}));continue;case"notation-simple":e.notation="standard";continue;case"unit-width-narrow":e.currencyDisplay="narrowSymbol",e.unitDisplay="narrow";continue;case"unit-width-short":e.currencyDisplay="code",e.unitDisplay="short";continue;case"unit-width-full-name":e.currencyDisplay="name",e.unitDisplay="long";continue;case"unit-width-iso-code":e.currencyDisplay="symbol";continue;case"scale":e.scale=parseFloat(i.options[0]);continue;case"rounding-mode-floor":e.roundingMode="floor";continue;case"rounding-mode-ceiling":e.roundingMode="ceil";continue;case"rounding-mode-down":e.roundingMode="trunc";continue;case"rounding-mode-up":e.roundingMode="expand";continue;case"rounding-mode-half-even":e.roundingMode="halfEven";continue;case"rounding-mode-half-down":e.roundingMode="halfTrunc";continue;case"rounding-mode-half-up":e.roundingMode="halfExpand";continue;case"integer-width":if(i.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");i.options[0].replace(Z4,function(l,u,c,d,h,g){if(u)e.minimumIntegerDigits=c.length;else{if(d&&h)throw new Error("We currently do not support maximum integer digits");if(g)throw new Error("We currently do not support exact integer digits")}return""});continue}if(FD.test(i.stem)){e.minimumIntegerDigits=i.stem.length;continue}if(lC.test(i.stem)){if(i.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");i.stem.replace(lC,function(l,u,c,d,h,g){return c==="*"?e.minimumFractionDigits=u.length:d&&d[0]==="#"?e.maximumFractionDigits=d.length:h&&g?(e.minimumFractionDigits=h.length,e.maximumFractionDigits=h.length+g.length):(e.minimumFractionDigits=u.length,e.maximumFractionDigits=u.length),""});var s=i.options[0];s==="w"?e=Pt(Pt({},e),{trailingZeroDisplay:"stripIfInteger"}):s&&(e=Pt(Pt({},e),uC(s)));continue}if(UD.test(i.stem)){e=Pt(Pt({},e),uC(i.stem));continue}var o=zD(i.stem);o&&(e=Pt(Pt({},e),o));var a=Q4(i.stem);a&&(e=Pt(Pt({},e),a))}return e}var h0={"001":["H","h"],419:["h","H","hB","hb"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["h","H","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["h","H","hB","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["h","H","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["h","H","hB","hb"],CU:["h","H","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["h","H","hB","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["h","H","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["h","H","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["h","H","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["h","H","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["h","H","hB","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["h","H","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["h","H","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["h","H","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"en-HK":["h","hb","H","hB"],"en-IL":["H","h","hb","hB"],"en-MY":["h","hb","H","hB"],"es-BR":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function t5(n,e){for(var t="",r=0;r<n.length;r++){var i=n.charAt(r);if(i==="j"){for(var s=0;r+1<n.length&&n.charAt(r+1)===i;)s++,r++;var o=1+(s&1),a=s<2?1:3+(s>>1),l="a",u=n5(e);for((u=="H"||u=="k")&&(a=0);a-- >0;)t+=l;for(;o-- >0;)t=u+t}else i==="J"?t+="H":t+=i}return t}function n5(n){var e=n.hourCycle;if(e===void 0&&n.hourCycles&&n.hourCycles.length&&(e=n.hourCycles[0]),e)switch(e){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var t=n.language,r;t!=="root"&&(r=n.maximize().region);var i=h0[r||""]||h0[t||""]||h0["".concat(t,"-001")]||h0["001"];return i[0]}var Zw,r5=new RegExp("^".concat(kD.source,"*")),i5=new RegExp("".concat(kD.source,"*$"));function Rn(n,e){return{start:n,end:e}}var s5=!!String.prototype.startsWith&&"_a".startsWith("a",1),o5=!!String.fromCodePoint,a5=!!Object.fromEntries,l5=!!String.prototype.codePointAt,u5=!!String.prototype.trimStart,c5=!!String.prototype.trimEnd,f5=!!Number.isSafeInteger,d5=f5?Number.isSafeInteger:function(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n&&Math.abs(n)<=9007199254740991},Ib=!0;try{var h5=HD("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Ib=((Zw=h5.exec("a"))===null||Zw===void 0?void 0:Zw[0])==="a"}catch{Ib=!1}var fC=s5?function(e,t,r){return e.startsWith(t,r)}:function(e,t,r){return e.slice(r,r+t.length)===t},Lb=o5?String.fromCodePoint:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r="",i=e.length,s=0,o;i>s;){if(o=e[s++],o>1114111)throw RangeError(o+" is not a valid code point");r+=o<65536?String.fromCharCode(o):String.fromCharCode(((o-=65536)>>10)+55296,o%1024+56320)}return r},dC=a5?Object.fromEntries:function(e){for(var t={},r=0,i=e;r<i.length;r++){var s=i[r],o=s[0],a=s[1];t[o]=a}return t},BD=l5?function(e,t){return e.codePointAt(t)}:function(e,t){var r=e.length;if(!(t<0||t>=r)){var i=e.charCodeAt(t),s;return i<55296||i>56319||t+1===r||(s=e.charCodeAt(t+1))<56320||s>57343?i:(i-55296<<10)+(s-56320)+65536}},p5=u5?function(e){return e.trimStart()}:function(e){return e.replace(r5,"")},m5=c5?function(e){return e.trimEnd()}:function(e){return e.replace(i5,"")};function HD(n,e){return new RegExp(n,e)}var Nb;if(Ib){var hC=HD("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Nb=function(e,t){var r;hC.lastIndex=t;var i=hC.exec(e);return(r=i[1])!==null&&r!==void 0?r:""}}else Nb=function(e,t){for(var r=[];;){var i=BD(e,t);if(i===void 0||$D(i)||_5(i))break;r.push(i),t+=i>=65536?2:1}return Lb.apply(void 0,r)};var g5=function(){function n(e,t){t===void 0&&(t={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!t.ignoreTag,this.locale=t.locale,this.requiresOtherClause=!!t.requiresOtherClause,this.shouldParseSkeletons=!!t.shouldParseSkeletons}return n.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},n.prototype.parseMessage=function(e,t,r){for(var i=[];!this.isEOF();){var s=this.char();if(s===123){var o=this.parseArgument(e,r);if(o.err)return o;i.push(o.val)}else{if(s===125&&e>0)break;if(s===35&&(t==="plural"||t==="selectordinal")){var a=this.clonePosition();this.bump(),i.push({type:gr.pound,location:Rn(a,this.clonePosition())})}else if(s===60&&!this.ignoreTag&&this.peek()===47){if(r)break;return this.error(Tn.UNMATCHED_CLOSING_TAG,Rn(this.clonePosition(),this.clonePosition()))}else if(s===60&&!this.ignoreTag&&Ob(this.peek()||0)){var o=this.parseTag(e,t);if(o.err)return o;i.push(o.val)}else{var o=this.parseLiteral(e,t);if(o.err)return o;i.push(o.val)}}}return{val:i,err:null}},n.prototype.parseTag=function(e,t){var r=this.clonePosition();this.bump();var i=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:gr.literal,value:"<".concat(i,"/>"),location:Rn(r,this.clonePosition())},err:null};if(this.bumpIf(">")){var s=this.parseMessage(e+1,t,!0);if(s.err)return s;var o=s.val,a=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!Ob(this.char()))return this.error(Tn.INVALID_TAG,Rn(a,this.clonePosition()));var l=this.clonePosition(),u=this.parseTagName();return i!==u?this.error(Tn.UNMATCHED_CLOSING_TAG,Rn(l,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:gr.tag,value:i,children:o,location:Rn(r,this.clonePosition())},err:null}:this.error(Tn.INVALID_TAG,Rn(a,this.clonePosition())))}else return this.error(Tn.UNCLOSED_TAG,Rn(r,this.clonePosition()))}else return this.error(Tn.INVALID_TAG,Rn(r,this.clonePosition()))},n.prototype.parseTagName=function(){var e=this.offset();for(this.bump();!this.isEOF()&&v5(this.char());)this.bump();return this.message.slice(e,this.offset())},n.prototype.parseLiteral=function(e,t){for(var r=this.clonePosition(),i="";;){var s=this.tryParseQuote(t);if(s){i+=s;continue}var o=this.tryParseUnquoted(e,t);if(o){i+=o;continue}var a=this.tryParseLeftAngleBracket();if(a){i+=a;continue}break}var l=Rn(r,this.clonePosition());return{val:{type:gr.literal,value:i,location:l},err:null}},n.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!y5(this.peek()||0))?(this.bump(),"<"):null},n.prototype.tryParseQuote=function(e){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(e==="plural"||e==="selectordinal")break;return null;default:return null}this.bump();var t=[this.char()];for(this.bump();!this.isEOF();){var r=this.char();if(r===39)if(this.peek()===39)t.push(39),this.bump();else{this.bump();break}else t.push(r);this.bump()}return Lb.apply(void 0,t)},n.prototype.tryParseUnquoted=function(e,t){if(this.isEOF())return null;var r=this.char();return r===60||r===123||r===35&&(t==="plural"||t==="selectordinal")||r===125&&e>0?null:(this.bump(),Lb(r))},n.prototype.parseArgument=function(e,t){var r=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(Tn.EXPECT_ARGUMENT_CLOSING_BRACE,Rn(r,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(Tn.EMPTY_ARGUMENT,Rn(r,this.clonePosition()));var i=this.parseIdentifierIfPossible().value;if(!i)return this.error(Tn.MALFORMED_ARGUMENT,Rn(r,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(Tn.EXPECT_ARGUMENT_CLOSING_BRACE,Rn(r,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:gr.argument,value:i,location:Rn(r,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(Tn.EXPECT_ARGUMENT_CLOSING_BRACE,Rn(r,this.clonePosition())):this.parseArgumentOptions(e,t,i,r);default:return this.error(Tn.MALFORMED_ARGUMENT,Rn(r,this.clonePosition()))}},n.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),t=this.offset(),r=Nb(this.message,t),i=t+r.length;this.bumpTo(i);var s=this.clonePosition(),o=Rn(e,s);return{value:r,location:o}},n.prototype.parseArgumentOptions=function(e,t,r,i){var s,o=this.clonePosition(),a=this.parseIdentifierIfPossible().value,l=this.clonePosition();switch(a){case"":return this.error(Tn.EXPECT_ARGUMENT_TYPE,Rn(o,l));case"number":case"date":case"time":{this.bumpSpace();var u=null;if(this.bumpIf(",")){this.bumpSpace();var c=this.clonePosition(),d=this.parseSimpleArgStyleIfPossible();if(d.err)return d;var h=m5(d.val);if(h.length===0)return this.error(Tn.EXPECT_ARGUMENT_STYLE,Rn(this.clonePosition(),this.clonePosition()));var g=Rn(c,this.clonePosition());u={style:h,styleLocation:g}}var y=this.tryParseArgumentClose(i);if(y.err)return y;var E=Rn(i,this.clonePosition());if(u&&fC(u==null?void 0:u.style,"::",0)){var _=p5(u.style.slice(2));if(a==="number"){var d=this.parseNumberSkeletonFromString(_,u.styleLocation);return d.err?d:{val:{type:gr.number,value:r,location:E,style:d.val},err:null}}else{if(_.length===0)return this.error(Tn.EXPECT_DATE_TIME_SKELETON,E);var m=_;this.locale&&(m=t5(_,this.locale));var h={type:kp.dateTime,pattern:m,location:u.styleLocation,parsedOptions:this.shouldParseSkeletons?X4(m):{}},v=a==="date"?gr.date:gr.time;return{val:{type:v,value:r,location:E,style:h},err:null}}}return{val:{type:a==="number"?gr.number:a==="date"?gr.date:gr.time,value:r,location:E,style:(s=u==null?void 0:u.style)!==null&&s!==void 0?s:null},err:null}}case"plural":case"selectordinal":case"select":{var S=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(Tn.EXPECT_SELECT_ARGUMENT_OPTIONS,Rn(S,Pt({},S)));this.bumpSpace();var T=this.parseIdentifierIfPossible(),M=0;if(a!=="select"&&T.value==="offset"){if(!this.bumpIf(":"))return this.error(Tn.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Rn(this.clonePosition(),this.clonePosition()));this.bumpSpace();var d=this.tryParseDecimalInteger(Tn.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Tn.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(d.err)return d;this.bumpSpace(),T=this.parseIdentifierIfPossible(),M=d.val}var A=this.tryParsePluralOrSelectOptions(e,a,t,T);if(A.err)return A;var y=this.tryParseArgumentClose(i);if(y.err)return y;var R=Rn(i,this.clonePosition());return a==="select"?{val:{type:gr.select,value:r,options:dC(A.val),location:R},err:null}:{val:{type:gr.plural,value:r,options:dC(A.val),offset:M,pluralType:a==="plural"?"cardinal":"ordinal",location:R},err:null}}default:return this.error(Tn.INVALID_ARGUMENT_TYPE,Rn(o,l))}},n.prototype.tryParseArgumentClose=function(e){return this.isEOF()||this.char()!==125?this.error(Tn.EXPECT_ARGUMENT_CLOSING_BRACE,Rn(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},n.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,t=this.clonePosition();!this.isEOF();){var r=this.char();switch(r){case 39:{this.bump();var i=this.clonePosition();if(!this.bumpUntil("'"))return this.error(Tn.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,Rn(i,this.clonePosition()));this.bump();break}case 123:{e+=1,this.bump();break}case 125:{if(e>0)e-=1;else return{val:this.message.slice(t.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(t.offset,this.offset()),err:null}},n.prototype.parseNumberSkeletonFromString=function(e,t){var r=[];try{r=K4(e)}catch{return this.error(Tn.INVALID_NUMBER_SKELETON,t)}return{val:{type:kp.number,tokens:r,location:t,parsedOptions:this.shouldParseSkeletons?e5(r):{}},err:null}},n.prototype.tryParsePluralOrSelectOptions=function(e,t,r,i){for(var s,o=!1,a=[],l=new Set,u=i.value,c=i.location;;){if(u.length===0){var d=this.clonePosition();if(t!=="select"&&this.bumpIf("=")){var h=this.tryParseDecimalInteger(Tn.EXPECT_PLURAL_ARGUMENT_SELECTOR,Tn.INVALID_PLURAL_ARGUMENT_SELECTOR);if(h.err)return h;c=Rn(d,this.clonePosition()),u=this.message.slice(d.offset,this.offset())}else break}if(l.has(u))return this.error(t==="select"?Tn.DUPLICATE_SELECT_ARGUMENT_SELECTOR:Tn.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,c);u==="other"&&(o=!0),this.bumpSpace();var g=this.clonePosition();if(!this.bumpIf("{"))return this.error(t==="select"?Tn.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:Tn.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,Rn(this.clonePosition(),this.clonePosition()));var y=this.parseMessage(e+1,t,r);if(y.err)return y;var E=this.tryParseArgumentClose(g);if(E.err)return E;a.push([u,{value:y.val,location:Rn(g,this.clonePosition())}]),l.add(u),this.bumpSpace(),s=this.parseIdentifierIfPossible(),u=s.value,c=s.location}return a.length===0?this.error(t==="select"?Tn.EXPECT_SELECT_ARGUMENT_SELECTOR:Tn.EXPECT_PLURAL_ARGUMENT_SELECTOR,Rn(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!o?this.error(Tn.MISSING_OTHER_CLAUSE,Rn(this.clonePosition(),this.clonePosition())):{val:a,err:null}},n.prototype.tryParseDecimalInteger=function(e,t){var r=1,i=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(r=-1);for(var s=!1,o=0;!this.isEOF();){var a=this.char();if(a>=48&&a<=57)s=!0,o=o*10+(a-48),this.bump();else break}var l=Rn(i,this.clonePosition());return s?(o*=r,d5(o)?{val:o,err:null}:this.error(t,l)):this.error(e,l)},n.prototype.offset=function(){return this.position.offset},n.prototype.isEOF=function(){return this.offset()===this.message.length},n.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},n.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var t=BD(this.message,e);if(t===void 0)throw Error("Offset ".concat(e," is at invalid UTF-16 code unit boundary"));return t},n.prototype.error=function(e,t){return{val:null,err:{kind:e,message:this.message,location:t}}},n.prototype.bump=function(){if(!this.isEOF()){var e=this.char();e===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},n.prototype.bumpIf=function(e){if(fC(this.message,e,this.offset())){for(var t=0;t<e.length;t++)this.bump();return!0}return!1},n.prototype.bumpUntil=function(e){var t=this.offset(),r=this.message.indexOf(e,t);return r>=0?(this.bumpTo(r),!0):(this.bumpTo(this.message.length),!1)},n.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset ".concat(e," must be greater than or equal to the current offset ").concat(this.offset()));for(e=Math.min(e,this.message.length);;){var t=this.offset();if(t===e)break;if(t>e)throw Error("targetOffset ".concat(e," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},n.prototype.bumpSpace=function(){for(;!this.isEOF()&&$D(this.char());)this.bump()},n.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),t=this.offset(),r=this.message.charCodeAt(t+(e>=65536?2:1));return r??null},n}();function Ob(n){return n>=97&&n<=122||n>=65&&n<=90}function y5(n){return Ob(n)||n===47}function v5(n){return n===45||n===46||n>=48&&n<=57||n===95||n>=97&&n<=122||n>=65&&n<=90||n==183||n>=192&&n<=214||n>=216&&n<=246||n>=248&&n<=893||n>=895&&n<=8191||n>=8204&&n<=8205||n>=8255&&n<=8256||n>=8304&&n<=8591||n>=11264&&n<=12271||n>=12289&&n<=55295||n>=63744&&n<=64975||n>=65008&&n<=65533||n>=65536&&n<=983039}function $D(n){return n>=9&&n<=13||n===32||n===133||n>=8206&&n<=8207||n===8232||n===8233}function _5(n){return n>=33&&n<=35||n===36||n>=37&&n<=39||n===40||n===41||n===42||n===43||n===44||n===45||n>=46&&n<=47||n>=58&&n<=59||n>=60&&n<=62||n>=63&&n<=64||n===91||n===92||n===93||n===94||n===96||n===123||n===124||n===125||n===126||n===161||n>=162&&n<=165||n===166||n===167||n===169||n===171||n===172||n===174||n===176||n===177||n===182||n===187||n===191||n===215||n===247||n>=8208&&n<=8213||n>=8214&&n<=8215||n===8216||n===8217||n===8218||n>=8219&&n<=8220||n===8221||n===8222||n===8223||n>=8224&&n<=8231||n>=8240&&n<=8248||n===8249||n===8250||n>=8251&&n<=8254||n>=8257&&n<=8259||n===8260||n===8261||n===8262||n>=8263&&n<=8273||n===8274||n===8275||n>=8277&&n<=8286||n>=8592&&n<=8596||n>=8597&&n<=8601||n>=8602&&n<=8603||n>=8604&&n<=8607||n===8608||n>=8609&&n<=8610||n===8611||n>=8612&&n<=8613||n===8614||n>=8615&&n<=8621||n===8622||n>=8623&&n<=8653||n>=8654&&n<=8655||n>=8656&&n<=8657||n===8658||n===8659||n===8660||n>=8661&&n<=8691||n>=8692&&n<=8959||n>=8960&&n<=8967||n===8968||n===8969||n===8970||n===8971||n>=8972&&n<=8991||n>=8992&&n<=8993||n>=8994&&n<=9e3||n===9001||n===9002||n>=9003&&n<=9083||n===9084||n>=9085&&n<=9114||n>=9115&&n<=9139||n>=9140&&n<=9179||n>=9180&&n<=9185||n>=9186&&n<=9254||n>=9255&&n<=9279||n>=9280&&n<=9290||n>=9291&&n<=9311||n>=9472&&n<=9654||n===9655||n>=9656&&n<=9664||n===9665||n>=9666&&n<=9719||n>=9720&&n<=9727||n>=9728&&n<=9838||n===9839||n>=9840&&n<=10087||n===10088||n===10089||n===10090||n===10091||n===10092||n===10093||n===10094||n===10095||n===10096||n===10097||n===10098||n===10099||n===10100||n===10101||n>=10132&&n<=10175||n>=10176&&n<=10180||n===10181||n===10182||n>=10183&&n<=10213||n===10214||n===10215||n===10216||n===10217||n===10218||n===10219||n===10220||n===10221||n===10222||n===10223||n>=10224&&n<=10239||n>=10240&&n<=10495||n>=10496&&n<=10626||n===10627||n===10628||n===10629||n===10630||n===10631||n===10632||n===10633||n===10634||n===10635||n===10636||n===10637||n===10638||n===10639||n===10640||n===10641||n===10642||n===10643||n===10644||n===10645||n===10646||n===10647||n===10648||n>=10649&&n<=10711||n===10712||n===10713||n===10714||n===10715||n>=10716&&n<=10747||n===10748||n===10749||n>=10750&&n<=11007||n>=11008&&n<=11055||n>=11056&&n<=11076||n>=11077&&n<=11078||n>=11079&&n<=11084||n>=11085&&n<=11123||n>=11124&&n<=11125||n>=11126&&n<=11157||n===11158||n>=11159&&n<=11263||n>=11776&&n<=11777||n===11778||n===11779||n===11780||n===11781||n>=11782&&n<=11784||n===11785||n===11786||n===11787||n===11788||n===11789||n>=11790&&n<=11798||n===11799||n>=11800&&n<=11801||n===11802||n===11803||n===11804||n===11805||n>=11806&&n<=11807||n===11808||n===11809||n===11810||n===11811||n===11812||n===11813||n===11814||n===11815||n===11816||n===11817||n>=11818&&n<=11822||n===11823||n>=11824&&n<=11833||n>=11834&&n<=11835||n>=11836&&n<=11839||n===11840||n===11841||n===11842||n>=11843&&n<=11855||n>=11856&&n<=11857||n===11858||n>=11859&&n<=11903||n>=12289&&n<=12291||n===12296||n===12297||n===12298||n===12299||n===12300||n===12301||n===12302||n===12303||n===12304||n===12305||n>=12306&&n<=12307||n===12308||n===12309||n===12310||n===12311||n===12312||n===12313||n===12314||n===12315||n===12316||n===12317||n>=12318&&n<=12319||n===12320||n===12336||n===64830||n===64831||n>=65093&&n<=65094}function Db(n){n.forEach(function(e){if(delete e.location,LD(e)||ND(e))for(var t in e.options)delete e.options[t].location,Db(e.options[t].value);else RD(e)&&DD(e.style)||(PD(e)||ID(e))&&Pb(e.style)?delete e.style.location:OD(e)&&Db(e.children)})}function x5(n,e){e===void 0&&(e={}),e=Pt({shouldParseSkeletons:!0,requiresOtherClause:!0},e);var t=new g5(n,e).parse();if(t.err){var r=SyntaxError(Tn[t.err.kind]);throw r.location=t.err.location,r.originalMessage=t.err.message,r}return e!=null&&e.captureLocation||Db(t.val),t.val}var Ol;(function(n){n.MISSING_VALUE="MISSING_VALUE",n.INVALID_VALUE="INVALID_VALUE",n.MISSING_INTL_API="MISSING_INTL_API"})(Ol||(Ol={}));var Jc=function(n){ta(e,n);function e(t,r,i){var s=n.call(this,t)||this;return s.code=r,s.originalMessage=i,s}return e.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},e}(Error),pC=function(n){ta(e,n);function e(t,r,i,s){return n.call(this,'Invalid values for "'.concat(t,'": "').concat(r,'". Options are "').concat(Object.keys(i).join('", "'),'"'),Ol.INVALID_VALUE,s)||this}return e}(Jc),w5=function(n){ta(e,n);function e(t,r,i){return n.call(this,'Value for "'.concat(t,'" must be of type ').concat(r),Ol.INVALID_VALUE,i)||this}return e}(Jc),S5=function(n){ta(e,n);function e(t,r){return n.call(this,'The intl string context variable "'.concat(t,'" was not provided to the string "').concat(r,'"'),Ol.MISSING_VALUE,r)||this}return e}(Jc),Is;(function(n){n[n.literal=0]="literal",n[n.object=1]="object"})(Is||(Is={}));function E5(n){return n.length<2?n:n.reduce(function(e,t){var r=e[e.length-1];return!r||r.type!==Is.literal||t.type!==Is.literal?e.push(t):r.value+=t.value,e},[])}function GD(n){return typeof n=="function"}function px(n,e,t,r,i,s,o){if(n.length===1&&aC(n[0]))return[{type:Is.literal,value:n[0].value}];for(var a=[],l=0,u=n;l<u.length;l++){var c=u[l];if(aC(c)){a.push({type:Is.literal,value:c.value});continue}if(W4(c)){typeof s=="number"&&a.push({type:Is.literal,value:t.getNumberFormat(e).format(s)});continue}var d=c.value;if(!(i&&d in i))throw new S5(d,o);var h=i[d];if(j4(c)){(!h||typeof h=="string"||typeof h=="number")&&(h=typeof h=="string"||typeof h=="number"?String(h):""),a.push({type:typeof h=="string"?Is.literal:Is.object,value:h});continue}if(PD(c)){var g=typeof c.style=="string"?r.date[c.style]:Pb(c.style)?c.style.parsedOptions:void 0;a.push({type:Is.literal,value:t.getDateTimeFormat(e,g).format(h)});continue}if(ID(c)){var g=typeof c.style=="string"?r.time[c.style]:Pb(c.style)?c.style.parsedOptions:r.time.medium;a.push({type:Is.literal,value:t.getDateTimeFormat(e,g).format(h)});continue}if(RD(c)){var g=typeof c.style=="string"?r.number[c.style]:DD(c.style)?c.style.parsedOptions:void 0;g&&g.scale&&(h=h*(g.scale||1)),a.push({type:Is.literal,value:t.getNumberFormat(e,g).format(h)});continue}if(OD(c)){var y=c.children,E=c.value,_=i[E];if(!GD(_))throw new w5(E,"function",o);var m=px(y,e,t,r,i,s),v=_(m.map(function(M){return M.value}));Array.isArray(v)||(v=[v]),a.push.apply(a,v.map(function(M){return{type:typeof M=="string"?Is.literal:Is.object,value:M}}))}if(LD(c)){var S=c.options[h]||c.options.other;if(!S)throw new pC(c.value,h,Object.keys(c.options),o);a.push.apply(a,px(S.value,e,t,r,i));continue}if(ND(c)){var S=c.options["=".concat(h)];if(!S){if(!Intl.PluralRules)throw new Jc(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,Ol.MISSING_INTL_API,o);var T=t.getPluralRules(e,{type:c.pluralType}).select(h-(c.offset||0));S=c.options[T]||c.options.other}if(!S)throw new pC(c.value,h,Object.keys(c.options),o);a.push.apply(a,px(S.value,e,t,r,i,h-(c.offset||0)));continue}}return E5(a)}function b5(n,e){return e?Pt(Pt(Pt({},n||{}),e||{}),Object.keys(n).reduce(function(t,r){return t[r]=Pt(Pt({},n[r]),e[r]||{}),t},{})):n}function T5(n,e){return e?Object.keys(n).reduce(function(t,r){return t[r]=b5(n[r],e[r]),t},Pt({},n)):n}function Qw(n){return{create:function(){return{get:function(e){return n[e]},set:function(e,t){n[e]=t}}}}}function M5(n){return n===void 0&&(n={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:wl(function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.NumberFormat).bind.apply(e,Tl([void 0],t,!1)))},{cache:Qw(n.number),strategy:Sl.variadic}),getDateTimeFormat:wl(function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.DateTimeFormat).bind.apply(e,Tl([void 0],t,!1)))},{cache:Qw(n.dateTime),strategy:Sl.variadic}),getPluralRules:wl(function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.PluralRules).bind.apply(e,Tl([void 0],t,!1)))},{cache:Qw(n.pluralRules),strategy:Sl.variadic})}}var VD=function(){function n(e,t,r,i){t===void 0&&(t=n.defaultLocale);var s=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(l){var u=s.formatToParts(l);if(u.length===1)return u[0].value;var c=u.reduce(function(d,h){return!d.length||h.type!==Is.literal||typeof d[d.length-1]!="string"?d.push(h.value):d[d.length-1]+=h.value,d},[]);return c.length<=1?c[0]||"":c},this.formatToParts=function(l){return px(s.ast,s.locales,s.formatters,s.formats,l,void 0,s.message)},this.resolvedOptions=function(){var l;return{locale:((l=s.resolvedLocale)===null||l===void 0?void 0:l.toString())||Intl.NumberFormat.supportedLocalesOf(s.locales)[0]}},this.getAst=function(){return s.ast},this.locales=t,this.resolvedLocale=n.resolveLocale(t),typeof e=="string"){if(this.message=e,!n.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var o=i||{};o.formatters;var a=Dp(o,["formatters"]);this.ast=n.__parse(e,Pt(Pt({},a),{locale:this.resolvedLocale}))}else this.ast=e;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=T5(n.formats,r),this.formatters=i&&i.formatters||M5(this.formatterCache)}return Object.defineProperty(n,"defaultLocale",{get:function(){return n.memoizedDefaultLocale||(n.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),n.memoizedDefaultLocale},enumerable:!1,configurable:!0}),n.memoizedDefaultLocale=null,n.resolveLocale=function(e){if(!(typeof Intl.Locale>"u")){var t=Intl.NumberFormat.supportedLocalesOf(e);return t.length>0?new Intl.Locale(t[0]):new Intl.Locale(typeof e=="string"?e:e[0])}},n.__parse=x5,n.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},n}(),Ed;(function(n){n.FORMAT_ERROR="FORMAT_ERROR",n.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",n.INVALID_CONFIG="INVALID_CONFIG",n.MISSING_DATA="MISSING_DATA",n.MISSING_TRANSLATION="MISSING_TRANSLATION"})(Ed||(Ed={}));var qy=function(n){ta(e,n);function e(t,r,i){var s=this,o=i?i instanceof Error?i:new Error(String(i)):void 0;return s=n.call(this,"[@formatjs/intl Error ".concat(t,"] ").concat(r,`
`).concat(o?`
`.concat(o.message,`
`).concat(o.stack):""))||this,s.code=t,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(s,e),s}return e}(Error),A5=function(n){ta(e,n);function e(t,r){return n.call(this,Ed.UNSUPPORTED_FORMATTER,t,r)||this}return e}(qy),C5=function(n){ta(e,n);function e(t,r){return n.call(this,Ed.INVALID_CONFIG,t,r)||this}return e}(qy),mC=function(n){ta(e,n);function e(t,r){return n.call(this,Ed.MISSING_DATA,t,r)||this}return e}(qy),na=function(n){ta(e,n);function e(t,r,i){var s=n.call(this,Ed.FORMAT_ERROR,"".concat(t,`
Locale: `).concat(r,`
`),i)||this;return s.locale=r,s}return e}(qy),eS=function(n){ta(e,n);function e(t,r,i,s){var o=n.call(this,"".concat(t,`
MessageID: `).concat(i==null?void 0:i.id,`
Default Message: `).concat(i==null?void 0:i.defaultMessage,`
Description: `).concat(i==null?void 0:i.description,`
`),r,s)||this;return o.descriptor=i,o.locale=r,o}return e}(na),R5=function(n){ta(e,n);function e(t,r){var i=n.call(this,Ed.MISSING_TRANSLATION,'Missing message: "'.concat(t.id,'" for locale "').concat(r,'", using ').concat(t.defaultMessage?"default message (".concat(typeof t.defaultMessage=="string"?t.defaultMessage:t.defaultMessage.map(function(s){var o;return(o=s.value)!==null&&o!==void 0?o:JSON.stringify(s)}).join(),")"):"id"," as fallback."))||this;return i.descriptor=t,i}return e}(qy);function P5(n,e,t){if(t===void 0&&(t=Error),!n)throw new t(e)}function Xp(n,e,t){return t===void 0&&(t={}),e.reduce(function(r,i){return i in n?r[i]=n[i]:i in t&&(r[i]=t[i]),r},{})}var I5=function(n){},L5=function(n){},jD={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:I5,onWarn:L5};function WD(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function Uf(n){return{create:function(){return{get:function(e){return n[e]},set:function(e,t){n[e]=t}}}}}function N5(n){n===void 0&&(n=WD());var e=Intl.RelativeTimeFormat,t=Intl.ListFormat,r=Intl.DisplayNames,i=wl(function(){for(var a,l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return new((a=Intl.DateTimeFormat).bind.apply(a,Tl([void 0],l,!1)))},{cache:Uf(n.dateTime),strategy:Sl.variadic}),s=wl(function(){for(var a,l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return new((a=Intl.NumberFormat).bind.apply(a,Tl([void 0],l,!1)))},{cache:Uf(n.number),strategy:Sl.variadic}),o=wl(function(){for(var a,l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return new((a=Intl.PluralRules).bind.apply(a,Tl([void 0],l,!1)))},{cache:Uf(n.pluralRules),strategy:Sl.variadic});return{getDateTimeFormat:i,getNumberFormat:s,getMessageFormat:wl(function(a,l,u,c){return new VD(a,l,u,Pt({formatters:{getNumberFormat:s,getDateTimeFormat:i,getPluralRules:o}},c||{}))},{cache:Uf(n.message),strategy:Sl.variadic}),getRelativeTimeFormat:wl(function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return new(e.bind.apply(e,Tl([void 0],a,!1)))},{cache:Uf(n.relativeTime),strategy:Sl.variadic}),getPluralRules:o,getListFormat:wl(function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return new(t.bind.apply(t,Tl([void 0],a,!1)))},{cache:Uf(n.list),strategy:Sl.variadic}),getDisplayNames:wl(function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return new(r.bind.apply(r,Tl([void 0],a,!1)))},{cache:Uf(n.displayNames),strategy:Sl.variadic})}}function mM(n,e,t,r){var i=n&&n[e],s;if(i&&(s=i[t]),s)return s;r(new A5("No ".concat(e," format named: ").concat(t)))}function p0(n,e){return Object.keys(n).reduce(function(t,r){return t[r]=Pt({timeZone:e},n[r]),t},{})}function gC(n,e){var t=Object.keys(Pt(Pt({},n),e));return t.reduce(function(r,i){return r[i]=Pt(Pt({},n[i]||{}),e[i]||{}),r},{})}function yC(n,e){if(!e)return n;var t=VD.formats;return Pt(Pt(Pt({},t),n),{date:gC(p0(t.date,e),p0(n.date||{},e)),time:gC(p0(t.time,e),p0(n.time||{},e))})}var kb=function(n,e,t,r,i){var s=n.locale,o=n.formats,a=n.messages,l=n.defaultLocale,u=n.defaultFormats,c=n.fallbackOnEmptyString,d=n.onError,h=n.timeZone,g=n.defaultRichTextElements;t===void 0&&(t={id:""});var y=t.id,E=t.defaultMessage;P5(!!y,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.github.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.github.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.github.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var _=String(y),m=a&&Object.prototype.hasOwnProperty.call(a,_)&&a[_];if(Array.isArray(m)&&m.length===1&&m[0].type===gr.literal)return m[0].value;if(!r&&m&&typeof m=="string"&&!g)return m.replace(/'\{(.*?)\}'/gi,"{$1}");if(r=Pt(Pt({},g),r||{}),o=yC(o,h),u=yC(u,h),!m){if(c===!1&&m==="")return m;if((!E||s&&s.toLowerCase()!==l.toLowerCase())&&d(new R5(t,s)),E)try{var v=e.getMessageFormat(E,l,u,i);return v.format(r)}catch(S){return d(new eS('Error formatting default message for: "'.concat(_,'", rendering default message verbatim'),s,t,S)),typeof E=="string"?E:_}return _}try{var v=e.getMessageFormat(m,s,o,Pt({formatters:e},i||{}));return v.format(r)}catch(S){d(new eS('Error formatting message: "'.concat(_,'", using ').concat(E?"default message":"id"," as fallback."),s,t,S))}if(E)try{var v=e.getMessageFormat(E,l,u,i);return v.format(r)}catch(S){d(new eS('Error formatting the default message for: "'.concat(_,'", rendering message verbatim'),s,t,S))}return typeof m=="string"?m:typeof E=="string"?E:_},O5=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function Xy(n,e,t,r){var i=n.locale,s=n.formats,o=n.onError,a=n.timeZone;r===void 0&&(r={});var l=r.format,u=Pt(Pt({},a&&{timeZone:a}),l&&mM(s,e,l,o)),c=Xp(r,O5,u);return e==="time"&&!c.hour&&!c.minute&&!c.second&&!c.timeStyle&&!c.dateStyle&&(c=Pt(Pt({},c),{hour:"numeric",minute:"numeric"})),t(i,c)}function D5(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var i=t[0],s=t[1],o=s===void 0?{}:s,a=typeof i=="string"?new Date(i||0):i;try{return Xy(n,"date",e,o).format(a)}catch(l){n.onError(new na("Error formatting date.",n.locale,l))}return String(a)}function k5(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var i=t[0],s=t[1],o=s===void 0?{}:s,a=typeof i=="string"?new Date(i||0):i;try{return Xy(n,"time",e,o).format(a)}catch(l){n.onError(new na("Error formatting time.",n.locale,l))}return String(a)}function U5(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var i=t[0],s=t[1],o=t[2],a=o===void 0?{}:o,l=typeof i=="string"?new Date(i||0):i,u=typeof s=="string"?new Date(s||0):s;try{return Xy(n,"dateTimeRange",e,a).formatRange(l,u)}catch(c){n.onError(new na("Error formatting date time range.",n.locale,c))}return String(l)}function F5(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var i=t[0],s=t[1],o=s===void 0?{}:s,a=typeof i=="string"?new Date(i||0):i;try{return Xy(n,"date",e,o).formatToParts(a)}catch(l){n.onError(new na("Error formatting date.",n.locale,l))}return[]}function z5(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var i=t[0],s=t[1],o=s===void 0?{}:s,a=typeof i=="string"?new Date(i||0):i;try{return Xy(n,"time",e,o).formatToParts(a)}catch(l){n.onError(new na("Error formatting time.",n.locale,l))}return[]}var B5=["style","type","fallback","languageDisplay"];function H5(n,e,t,r){var i=n.locale,s=n.onError,o=Intl.DisplayNames;o||s(new Jc(`Intl.DisplayNames is not available in this environment.
Try polyfilling it using "@formatjs/intl-displaynames"
`,Ol.MISSING_INTL_API));var a=Xp(r,B5);try{return e(i,a).of(t)}catch(l){s(new na("Error formatting display name.",i,l))}}var $5=["type","style"],vC=Date.now();function G5(n){return"".concat(vC,"_").concat(n,"_").concat(vC)}function V5(n,e,t,r){r===void 0&&(r={});var i=qD(n,e,t,r).reduce(function(s,o){var a=o.value;return typeof a!="string"?s.push(a):typeof s[s.length-1]=="string"?s[s.length-1]+=a:s.push(a),s},[]);return i.length===1?i[0]:i.length===0?"":i}function qD(n,e,t,r){var i=n.locale,s=n.onError;r===void 0&&(r={});var o=Intl.ListFormat;o||s(new Jc(`Intl.ListFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-listformat"
`,Ol.MISSING_INTL_API));var a=Xp(r,$5);try{var l={},u=t.map(function(c,d){if(typeof c=="object"){var h=G5(d);return l[h]=c,h}return String(c)});return e(i,a).formatToParts(u).map(function(c){return c.type==="literal"?c:Pt(Pt({},c),{value:l[c.value]||c.value})})}catch(c){s(new na("Error formatting list.",i,c))}return t}var j5=["type"];function W5(n,e,t,r){var i=n.locale,s=n.onError;r===void 0&&(r={}),Intl.PluralRules||s(new Jc(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,Ol.MISSING_INTL_API));var o=Xp(r,j5);try{return e(i,o).select(t)}catch(a){s(new na("Error formatting plural.",i,a))}return"other"}var q5=["numeric","style"];function X5(n,e,t){var r=n.locale,i=n.formats,s=n.onError;t===void 0&&(t={});var o=t.format,a=!!o&&mM(i,"relative",o,s)||{},l=Xp(t,q5,a);return e(r,l)}function Y5(n,e,t,r,i){i===void 0&&(i={}),r||(r="second");var s=Intl.RelativeTimeFormat;s||n.onError(new Jc(`Intl.RelativeTimeFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-relativetimeformat"
`,Ol.MISSING_INTL_API));try{return X5(n,e,i).format(t,r)}catch(o){n.onError(new na("Error formatting relative time.",n.locale,o))}return String(t)}var K5=["style","currency","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem","trailingZeroDisplay","roundingPriority","roundingIncrement","roundingMode"];function XD(n,e,t){var r=n.locale,i=n.formats,s=n.onError;t===void 0&&(t={});var o=t.format,a=o&&mM(i,"number",o,s)||{},l=Xp(t,K5,a);return e(r,l)}function J5(n,e,t,r){r===void 0&&(r={});try{return XD(n,e,r).format(t)}catch(i){n.onError(new na("Error formatting number.",n.locale,i))}return String(t)}function Z5(n,e,t,r){r===void 0&&(r={});try{return XD(n,e,r).formatToParts(t)}catch(i){n.onError(new na("Error formatting number.",n.locale,i))}return[]}function Q5(n){var e=n?n[Object.keys(n)[0]]:void 0;return typeof e=="string"}function eH(n){n.onWarn&&n.defaultRichTextElements&&Q5(n.messages||{})&&n.onWarn(`[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. 
Please consider using "@formatjs/cli" to pre-compile your messages for performance.
For more details see https://formatjs.github.io/docs/getting-started/message-distribution`)}function tH(n,e){var t=N5(e),r=Pt(Pt({},jD),n),i=r.locale,s=r.defaultLocale,o=r.onError;return i?!Intl.NumberFormat.supportedLocalesOf(i).length&&o?o(new mC('Missing locale data for locale: "'.concat(i,'" in Intl.NumberFormat. Using default locale: "').concat(s,'" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(i).length&&o&&o(new mC('Missing locale data for locale: "'.concat(i,'" in Intl.DateTimeFormat. Using default locale: "').concat(s,'" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details'))):(o&&o(new C5('"locale" was not configured, using "'.concat(s,'" as fallback. See https://formatjs.github.io/docs/react-intl/api#intlshape for more details'))),r.locale=r.defaultLocale||"en"),eH(r),Pt(Pt({},r),{formatters:t,formatNumber:J5.bind(null,r,t.getNumberFormat),formatNumberToParts:Z5.bind(null,r,t.getNumberFormat),formatRelativeTime:Y5.bind(null,r,t.getRelativeTimeFormat),formatDate:D5.bind(null,r,t.getDateTimeFormat),formatDateToParts:F5.bind(null,r,t.getDateTimeFormat),formatTime:k5.bind(null,r,t.getDateTimeFormat),formatDateTimeRange:U5.bind(null,r,t.getDateTimeFormat),formatTimeToParts:z5.bind(null,r,t.getDateTimeFormat),formatPlural:W5.bind(null,r,t.getPluralRules),formatMessage:kb.bind(null,r,t),$t:kb.bind(null,r,t),formatList:V5.bind(null,r,t.getListFormat),formatListToParts:qD.bind(null,r,t.getListFormat),formatDisplayName:H5.bind(null,r,t.getDisplayNames)})}function nH(n,e,t){if(t===void 0&&(t=Error),!n)throw new t(e)}function YD(n){nH(n,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}var KD=Pt(Pt({},jD),{textComponent:Z.Fragment});function rH(n){return function(e){return n(Z.Children.toArray(e))}}function Ub(n,e){if(n===e)return!0;if(!n||!e)return!1;var t=Object.keys(n),r=Object.keys(e),i=t.length;if(r.length!==i)return!1;for(var s=0;s<i;s++){var o=t[s];if(n[o]!==e[o]||!Object.prototype.hasOwnProperty.call(e,o))return!1}return!0}var tS={exports:{}},jn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _C;function iH(){if(_C)return jn;_C=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,t=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,o=n?Symbol.for("react.provider"):60109,a=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,u=n?Symbol.for("react.concurrent_mode"):60111,c=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,E=n?Symbol.for("react.block"):60121,_=n?Symbol.for("react.fundamental"):60117,m=n?Symbol.for("react.responder"):60118,v=n?Symbol.for("react.scope"):60119;function S(M){if(typeof M=="object"&&M!==null){var A=M.$$typeof;switch(A){case e:switch(M=M.type,M){case l:case u:case r:case s:case i:case d:return M;default:switch(M=M&&M.$$typeof,M){case a:case c:case y:case g:case o:return M;default:return A}}case t:return A}}}function T(M){return S(M)===u}return jn.AsyncMode=l,jn.ConcurrentMode=u,jn.ContextConsumer=a,jn.ContextProvider=o,jn.Element=e,jn.ForwardRef=c,jn.Fragment=r,jn.Lazy=y,jn.Memo=g,jn.Portal=t,jn.Profiler=s,jn.StrictMode=i,jn.Suspense=d,jn.isAsyncMode=function(M){return T(M)||S(M)===l},jn.isConcurrentMode=T,jn.isContextConsumer=function(M){return S(M)===a},jn.isContextProvider=function(M){return S(M)===o},jn.isElement=function(M){return typeof M=="object"&&M!==null&&M.$$typeof===e},jn.isForwardRef=function(M){return S(M)===c},jn.isFragment=function(M){return S(M)===r},jn.isLazy=function(M){return S(M)===y},jn.isMemo=function(M){return S(M)===g},jn.isPortal=function(M){return S(M)===t},jn.isProfiler=function(M){return S(M)===s},jn.isStrictMode=function(M){return S(M)===i},jn.isSuspense=function(M){return S(M)===d},jn.isValidElementType=function(M){return typeof M=="string"||typeof M=="function"||M===r||M===u||M===s||M===i||M===d||M===h||typeof M=="object"&&M!==null&&(M.$$typeof===y||M.$$typeof===g||M.$$typeof===o||M.$$typeof===a||M.$$typeof===c||M.$$typeof===_||M.$$typeof===m||M.$$typeof===v||M.$$typeof===E)},jn.typeOf=S,jn}var xC;function sH(){return xC||(xC=1,tS.exports=iH()),tS.exports}var nS,wC;function oH(){if(wC)return nS;wC=1;var n=sH(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[n.ForwardRef]=r,s[n.Memo]=i;function o(y){return n.isMemo(y)?i:s[y.$$typeof]||e}var a=Object.defineProperty,l=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,c=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,h=Object.prototype;function g(y,E,_){if(typeof E!="string"){if(h){var m=d(E);m&&m!==h&&g(y,m,_)}var v=l(E);u&&(v=v.concat(u(E)));for(var S=o(y),T=o(E),M=0;M<v.length;++M){var A=v[M];if(!t[A]&&!(_&&_[A])&&!(T&&T[A])&&!(S&&S[A])){var R=c(E,A);try{a(y,A,R)}catch{}}}}return y}return nS=g,nS}oH();var gM=typeof window<"u"&&!window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=Z.createContext(null)):Z.createContext(null);gM.Consumer;var aH=gM.Provider,lH=aH,uH=gM;function yM(){var n=Z.useContext(uH);return YD(n),n}var Fb;(function(n){n.formatDate="FormattedDate",n.formatTime="FormattedTime",n.formatNumber="FormattedNumber",n.formatList="FormattedList",n.formatDisplayName="FormattedDisplayName"})(Fb||(Fb={}));var zb;(function(n){n.formatDate="FormattedDateParts",n.formatTime="FormattedTimeParts",n.formatNumber="FormattedNumberParts",n.formatList="FormattedListParts"})(zb||(zb={}));function JD(n){var e=function(t){var r=yM(),i=t.value,s=t.children,o=Dp(t,["value","children"]),a=typeof i=="string"?new Date(i||0):i,l=n==="formatDate"?r.formatDateToParts(a,o):r.formatTimeToParts(a,o);return s(l)};return e.displayName=zb[n],e}function Yy(n){var e=function(t){var r=yM(),i=t.value,s=t.children,o=Dp(t,["value","children"]),a=r[n](i,o);if(typeof s=="function")return s(a);var l=r.textComponent||Z.Fragment;return Z.createElement(l,null,a)};return e.displayName=Fb[n],e}function ZD(n){return n&&Object.keys(n).reduce(function(e,t){var r=n[t];return e[t]=GD(r)?rH(r):r,e},{})}var SC=function(n,e,t,r){for(var i=[],s=4;s<arguments.length;s++)i[s-4]=arguments[s];var o=ZD(r),a=kb.apply(void 0,Tl([n,e,t,o],i,!1));return Array.isArray(a)?Z.Children.toArray(a):a},EC=function(n,e){var t=n.defaultRichTextElements,r=Dp(n,["defaultRichTextElements"]),i=ZD(t),s=tH(Pt(Pt(Pt({},KD),r),{defaultRichTextElements:i}),e),o={locale:s.locale,timeZone:s.timeZone,fallbackOnEmptyString:s.fallbackOnEmptyString,formats:s.formats,defaultLocale:s.defaultLocale,defaultFormats:s.defaultFormats,messages:s.messages,onError:s.onError,defaultRichTextElements:i};return Pt(Pt({},s),{formatMessage:SC.bind(null,o,s.formatters),$t:SC.bind(null,o,s.formatters)})};function cH(n,e){var t=n.values,r=Dp(n,["values"]),i=e.values,s=Dp(e,["values"]);return Ub(i,t)&&Ub(r,s)}function QD(n){var e=yM(),t=e.formatMessage,r=e.textComponent,i=r===void 0?Z.Fragment:r,s=n.id,o=n.description,a=n.defaultMessage,l=n.values,u=n.children,c=n.tagName,d=c===void 0?i:c,h=n.ignoreTag,g={id:s,description:o,defaultMessage:a},y=t(g,l,{ignoreTag:h});return typeof u=="function"?u(Array.isArray(y)?y:[y]):d?Z.createElement(d,null,Z.Children.toArray(y)):Z.createElement(Z.Fragment,null,y)}QD.displayName="FormattedMessage";var Nt=Z.memo(QD,cH);Nt.displayName="MemoizedFormattedMessage";function rS(n){return{locale:n.locale,timeZone:n.timeZone,fallbackOnEmptyString:n.fallbackOnEmptyString,formats:n.formats,textComponent:n.textComponent,messages:n.messages,defaultLocale:n.defaultLocale,defaultFormats:n.defaultFormats,onError:n.onError,onWarn:n.onWarn,wrapRichTextChunksInFragment:n.wrapRichTextChunksInFragment,defaultRichTextElements:n.defaultRichTextElements}}var ek=function(n){ta(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.cache=WD(),t.state={cache:t.cache,intl:EC(rS(t.props),t.cache),prevConfig:rS(t.props)},t}return e.getDerivedStateFromProps=function(t,r){var i=r.prevConfig,s=r.cache,o=rS(t);return Ub(i,o)?null:{intl:EC(o,s),prevConfig:o}},e.prototype.render=function(){return YD(this.state.intl),Z.createElement(lH,{value:this.state.intl},this.props.children)},e.displayName="IntlProvider",e.defaultProps=KD,e}(Z.PureComponent);Yy("formatDate");Yy("formatTime");Yy("formatNumber");Yy("formatList");Yy("formatDisplayName");JD("formatDate");JD("formatTime");const fH="OpenID Federation Browser",dH="Inserisci un Trust Anchor",hH="Seleziona un Trust Anchor",pH="N il proxy CORS n il plug-in disabilitatore dei CORS sono impostati. Potresti riscontrare problemi nel recupero dei dati.",mH="Leggi di pi",gH="Inserisci l'URL HTTP del Trust Anchor",yH="Inserisci l'URL HTTP dell'Entity",vH="Visualizza/Carica",_H="Vista Corrente",xH="Entity ID",wH="URL: ",SH="Errore",EH="Messaggio",bH="Dettagli dell'errore",TH="Inserisci un'Entit",MH="Importa View",AH="Ripristina View",CH="Informazioni del Nodo",RH="Informazioni del Collegamento",PH="Lista degli Immediate Subordinates",IH="Lista degli Authority Hints",LH="Dati dell'Entity Configuration",NH="Dati dello Subordinate Statement",OH="Seleziona l'URL di un'Entit di Federazione OpenID",DH="Caricamento...",kH="Tipo di Entit di Federazione",UH="Numero di Immediates Subordinate",FH="Stato Entity Configuration",zH="Stato Subordinate Statement",BH="Scaduto",HH="Valido Fino",$H="Submit",GH="Inserisci un URL valido",VH="Inserisci un URL valido per procedere",jH="Visualizzazione delle informazioni del Trust Anchor per: ",WH="Fork su GitHub",qH="Versione: ",XH="Cerca",YH="Benvenuto",KH="Errore nella richiesta",JH="Attenzione",ZH="Errore",QH="Stai aggiungendo pi nodi della rete. Questo potrebbe rallentare il caricamento delle informazioni. Continuare?",e$="Continua",t$="Annulla",n$="Header",r$="Payload",i$="Tipo di View",s$="Secgli il tipo dinamico se vuoi mantenere solo le informazioni necessarie ricalcolandola al prossimo import, altrimenti scegli statico per mantenere tutte le informazioni senza ricalcolarle in fase di import.",o$="Dinamico",a$="Valida Schema Payload",l$="Schema Payload non valido",u$="Schema Payloadvalido",c$="Valida Schema Header",f$="Header Schema non valido",d$="Header Schema valido",h$="Non elencare le entit gi visualizzate",p$="Pagina corrente",m$="Inserisci il nome della View",g$="Inserisci il nome della View per salvarla",y$="Salva",v$="Nessuna sessione precedente disponibile",_$="Trust Marks",x$="Ripristina View da File",w$="Ripristina View precedente",S$="Upload View",E$="Esporta TC",b$="Salva View",T$="URL dello schema di validazione",M$="Sorgente",A$="Destinazione",C$="Aggiungi Entit",R$="Aggiungi un'entit",P$="Aggiungi",I$="Da File",L$="Da Sessione Precedente",N$="Screenshot",O$="Nome della sessione",D$="Data",k$="Azioni",U$="Filtri Avanzati",F$="Cerca",z$="Ripristina",B$="Tieni premuto Shift e trascina per selezionare pi nodi",H$="Endpoint di elenco dei Trust Marks",$$="Tipo Entit",G$="File caricato:",V$="Carica File",j$="Entit instanziata da un Authority Hint non elencato",W$="Valore di input non valido",q$={title:fH,insert_trust_node_url_option:dH,select_trust_node_url_option:hH,cors_warning:pH,read_more:mH,insert_anchor_url_label:gH,insert_entity_url_label:yH,view_upload_label:vH,current_view_label:_H,entity_id_label:xH,url_input_label:wH,error:SH,message:EH,error_details:bH,insert_entity_node_url_option:TH,upload_entity_view_option:MH,restore_session_label:AH,node_info:CH,edge_info:RH,subordinate_list:PH,authority_hints_list:IH,entity_configuration_data:LH,subordinate_statement_data:NH,select_trust_node_url_label:OH,loading:DH,federation_entity_type_label:kH,immediate_subordinate_count_label:UH,status_label:FH,substatement_status_label:zH,expired_label:BH,expiring_date_label:HH,trust_anchor_url_button:$H,invalid_url_error_message:GH,url_insert_placeholder:VH,display_info_for:jH,fork_on_github:WH,version:qH,search_label:XH,"oidc-attributes":"Informazioni utente","oidc-logout":"Logout",welcome:YH,"login-with-spid":"Entra con SPID","login-with-cie":"Entra con CIE","spid-explanation":"SPID  il sistema di accesso che permette di usare servizi online con un unica identit digitale. Se hai gi la tua identit digitale entra con il tuo Identity Provider. Se non hai ancora la tua identit digitale scegli lo SPID Digital Identity con il quale ottenerla.","cie-explanation":"Se hai la nuova Electronic Identity Card (CIE) puoi usarla per accedere ai servizi online della pubblica amministrazione. Hai bisongo dei codici PIN e PUK: la prima parte dei due codici  nella ricevuta della richiesta CIE, la seconda parte viene inviata insieme al CIE. Visita sito ufficiale di CIE id per ottenere software, documentazione e tutorial.",invalid_request:KH,"Authentication request rejected by user":"Richiseta di autenticazione cancellata dall'utente",warning_modal_title:JH,error_modal_title:ZH,warning_modal_message:QH,modal_confirm:e$,modal_cancel:t$,header:n$,payload:r$,static_dynamic_title:i$,static_dynamic_choice_message:s$,dynamic:o$,static:"Statico",validate_schema:a$,invalid_schema:l$,valid_schema:u$,validate_header_schema:c$,invalid_header_schema:f$,valid_header_schema:d$,filter_discovered:h$,current_page:p$,save_name_title:m$,save_name_message:g$,save:y$,no_session_available:v$,trust_marks:_$,restore_view_file:x$,restore_view_previous:w$,upload_view:S$,export:"Esporta",export_tc:E$,save_view:b$,schema_validation_url:T$,source:M$,target:A$,add_entity:C$,add_entity_label:R$,add:P$,from_file:I$,from_previous_session:L$,screenshot:N$,session_name:O$,date:D$,actions:k$,advanced_filters:U$,search:F$,restore:z$,drag_info:B$,trust_marks_listing_endpoint:H$,entity_type_label:$$,loaded_file:G$,upload_file:V$,entity_instanciated_from_authority_hint:j$,invalid_input_value:W$},X$="OpenID Federation Browser",Y$="Insert URL",K$="Select From List",J$="Neither CORS proxy or CORS disabler Plug-in are set. You may experience issues with fetching data.",Z$="Read More",Q$="Insert Trust Anchor HTTP URL",eG="Insert Entity ID HTTP URL",tG="View/Upload",nG="Current View",rG="Entity ID: ",iG="URL: ",sG="Error",oG="Message",aG="Error Details",lG="Insert an Entity",uG="Upload View",cG="Restore View",fG="Node Information",dG="Edge Information",hG="Immediate Subordinates List",pG="Authority Hints List",mG="Entity Configuration Data",gG="Subordinate Statement Data",yG="Select URL of an OpenID Federation Entity",vG="Loading...",_G="Federation Entity Type",xG="Immediate Subordinates Count",wG="Entity Configuration Status",SG="Subordinate Statement Status",EG="Expired",bG="Valid Until",TG="Submit",MG="Insert a valid URL",AG="Insert a valid URL to proceed",CG="Displaying Trust Anchor information for: ",RG="Fork on GitHub",PG="Version: ",IG="Search",LG="Welcome",NG="Invalid Request",OG="Warning",DG="Error",kG="You are adding more nodes to the network. This could slow down the loading of information. Continue?",UG="Continue",FG="Cancel",zG="Header",BG="Payload",HG="View Type",$G="Choose dynamic if you want to keep only the necessary information recalculating it at the next import, otherwise choose static to keep all the information without recalculating it during the import.",GG="Dynamic",VG="Validate Payload Schema",jG="Invalid Payload Schema",WG="Valid Payload Schema",qG="Validate Header Schema",XG="Invalid Header Schema",YG="Valid Header Schema",KG="Do not list already displayed entities",JG="Current Page",ZG="Insert the name of the View",QG="Insert the name of the View to save it",eV="Save",tV="No previous session available",nV="Trust Marks",rV="Restore View from File",iV="Restore View from saved Previous Sessions",sV="Upload View",oV="Export TC",aV="Save View",lV="Schema Validation URL",uV="Source",cV="Target",fV="Add Entity",dV="Add an entity",hV="Add",pV="From File",mV="From Previous Session",gV="Screenshot",yV="Session Name",vV="Date",_V="Actions",xV="Advanced Filters",wV="Search",SV="Restore",EV="Hold Shift and Drag to Select Multiple Nodes",bV="Trust Marks Listing Endpoint",TV="Entity Type",MV="Loaded File:",AV="Upload File",CV="Entity instanciated from a not listed Authority Hint",RV="Invalid input value",PV={title:X$,insert_trust_node_url_option:Y$,select_trust_node_url_option:K$,cors_warning:J$,read_more:Z$,insert_anchor_url_label:Q$,insert_entity_url_label:eG,view_upload_label:tG,current_view_label:nG,entity_id_label:rG,url_input_label:iG,error:sG,message:oG,error_details:aG,insert_entity_node_url_option:lG,upload_entity_view_option:uG,restore_session_label:cG,node_info:fG,edge_info:dG,subordinate_list:hG,authority_hints_list:pG,entity_configuration_data:mG,subordinate_statement_data:gG,select_trust_node_url_label:yG,loading:vG,federation_entity_type_label:_G,immediate_subordinate_count_label:xG,status_label:wG,substatement_status_label:SG,expired_label:EG,expiring_date_label:bG,trust_anchor_url_button:TG,invalid_url_error_message:MG,url_insert_placeholder:AG,display_info_for:CG,fork_on_github:RG,version:PG,search_label:IG,"oidc-attributes":"User Information","oidc-logout":"Logout",welcome:LG,"login-with-spid":"Login with SPID","login-with-cie":"Login with CIE","spid-explanation":"SPID is the access system that allows you to use online services with a unique digital identity. If you already have a digital identity, login with your Identity Provider. If you dont have a digital identity yet, choose an Identity Provider where obtain your SPID Digital Identity.","cie-explanation":"If you have the new Electronic Identity Card (CIE) you can use it to access the services online Public Administration. You need the PIN and PUK codes: the first part of the two codes is in the receipt of the CIE request, the second part is delivered together with the CIE. Visit the official site of CIE id to get the software, documentation and tutorial.",invalid_request:NG,"Authentication request rejected by user":"Authentication request rejected by user",warning_modal_title:OG,error_modal_title:DG,warning_modal_message:kG,modal_confirm:UG,modal_cancel:FG,header:zG,payload:BG,static_dynamic_title:HG,static_dynamic_choice_message:$G,dynamic:GG,static:"Static",validate_schema:VG,invalid_schema:jG,valid_schema:WG,validate_header_schema:qG,invalid_header_schema:XG,valid_header_schema:YG,filter_discovered:KG,current_page:JG,save_name_title:ZG,save_name_message:QG,save:eV,no_session_available:tV,trust_marks:nV,restore_view_file:rV,restore_view_previous:iV,upload_view:sV,export:"Export View",export_tc:oV,save_view:aV,schema_validation_url:lV,source:uV,target:cV,add_entity:fV,add_entity_label:dV,add:hV,from_file:pV,from_previous_session:mV,screenshot:gV,session_name:yV,date:vV,actions:_V,advanced_filters:xV,search:wV,restore:SV,drag_info:EV,trust_marks_listing_endpoint:bV,entity_type_label:TV,loaded_file:MV,upload_file:AV,entity_instanciated_from_authority_hint:CV,invalid_input_value:RV},f1=n=>{switch(n){case"it":case"it-IT":return q$;default:return PV}},IV=""+new URL("sprites-DxrjK2e0.svg",import.meta.url).href,Ir=({iconID:n,className:e,isRounded:t,style:r})=>{const i=r||{};return W.jsx("span",{className:t?"rounded-icon":"",children:W.jsx("svg",{className:`icon ${e?e.toString():""}`,style:{...i},children:W.jsx("use",{xlinkHref:IV+n})})})},LV="_pageTitle_1hr40_1",NV="_headerText_1hr40_10",Nu={pageTitle:LV,headerText:NV},OV="0.16.0",DV={version:OV};var tg={},bC;function kV(){if(bC)return tg;bC=1,Object.defineProperty(tg,"__esModule",{value:!0}),tg.parse=o,tg.serialize=u;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const h=function(){};return h.prototype=Object.create(null),h})();function o(h,g){const y=new s,E=h.length;if(E<2)return y;const _=(g==null?void 0:g.decode)||c;let m=0;do{const v=h.indexOf("=",m);if(v===-1)break;const S=h.indexOf(";",m),T=S===-1?E:S;if(v>T){m=h.lastIndexOf(";",v-1)+1;continue}const M=a(h,m,v),A=l(h,v,M),R=h.slice(M,A);if(y[R]===void 0){let O=a(h,v+1,T),I=l(h,T,O);const k=_(h.slice(O,I));y[R]=k}m=T+1}while(m<E);return y}function a(h,g,y){do{const E=h.charCodeAt(g);if(E!==32&&E!==9)return g}while(++g<y);return y}function l(h,g,y){for(;g>y;){const E=h.charCodeAt(--g);if(E!==32&&E!==9)return g+1}return y}function u(h,g,y){const E=(y==null?void 0:y.encode)||encodeURIComponent;if(!n.test(h))throw new TypeError(`argument name is invalid: ${h}`);const _=E(g);if(!e.test(_))throw new TypeError(`argument val is invalid: ${g}`);let m=h+"="+_;if(!y)return m;if(y.maxAge!==void 0){if(!Number.isInteger(y.maxAge))throw new TypeError(`option maxAge is invalid: ${y.maxAge}`);m+="; Max-Age="+y.maxAge}if(y.domain){if(!t.test(y.domain))throw new TypeError(`option domain is invalid: ${y.domain}`);m+="; Domain="+y.domain}if(y.path){if(!r.test(y.path))throw new TypeError(`option path is invalid: ${y.path}`);m+="; Path="+y.path}if(y.expires){if(!d(y.expires)||!Number.isFinite(y.expires.valueOf()))throw new TypeError(`option expires is invalid: ${y.expires}`);m+="; Expires="+y.expires.toUTCString()}if(y.httpOnly&&(m+="; HttpOnly"),y.secure&&(m+="; Secure"),y.partitioned&&(m+="; Partitioned"),y.priority)switch(typeof y.priority=="string"?y.priority.toLowerCase():void 0){case"low":m+="; Priority=Low";break;case"medium":m+="; Priority=Medium";break;case"high":m+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${y.priority}`)}if(y.sameSite)switch(typeof y.sameSite=="string"?y.sameSite.toLowerCase():y.sameSite){case!0:case"strict":m+="; SameSite=Strict";break;case"lax":m+="; SameSite=Lax";break;case"none":m+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${y.sameSite}`)}return m}function c(h){if(h.indexOf("%")===-1)return h;try{return decodeURIComponent(h)}catch{return h}}function d(h){return i.call(h)==="[object Date]"}return tg}kV();var TC="popstate";function UV(n={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Bb("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:fy(i)}return zV(e,t,null,n)}function Ur(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Va(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function FV(){return Math.random().toString(36).substring(2,10)}function MC(n,e){return{usr:n.state,key:n.key,idx:e}}function Bb(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Yp(e):e,state:t,key:e&&e.key||r||FV()}}function fy({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Yp(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function zV(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,u=c();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function c(){return(o.state||{idx:null}).idx}function d(){a="POP";let _=c(),m=_==null?null:_-u;u=_,l&&l({action:a,location:E.location,delta:m})}function h(_,m){a="PUSH";let v=Bb(E.location,_,m);u=c()+1;let S=MC(v,u),T=E.createHref(v);try{o.pushState(S,"",T)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(T)}s&&l&&l({action:a,location:E.location,delta:1})}function g(_,m){a="REPLACE";let v=Bb(E.location,_,m);u=c();let S=MC(v,u),T=E.createHref(v);o.replaceState(S,"",T),s&&l&&l({action:a,location:E.location,delta:0})}function y(_){let m=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof _=="string"?_:fy(_);return v=v.replace(/ $/,"%20"),Ur(m,`No window.location.(origin|href) available to create URL for href: ${v}`),new URL(v,m)}let E={get action(){return a},get location(){return n(i,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(TC,d),l=_,()=>{i.removeEventListener(TC,d),l=null}},createHref(_){return e(i,_)},createURL:y,encodeLocation(_){let m=y(_);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:g,go(_){return o.go(_)}};return E}function tk(n,e,t="/"){return BV(n,e,t,!1)}function BV(n,e,t,r){let i=typeof e=="string"?Yp(e):e,s=Hu(i.pathname||"/",t);if(s==null)return null;let o=nk(n);HV(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=ZV(s);a=KV(o[l],u,r)}return a}function nk(n,e=[],t=[],r=""){let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ur(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let u=Uu([r,l.relativePath]),c=t.concat(l);s.children&&s.children.length>0&&(Ur(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),nk(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:XV(u,s.index),routesMeta:c})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of rk(s.path))i(s,o,l)}),e}function rk(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=rk(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function HV(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:YV(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var $V=/^:[\w-]+$/,GV=3,VV=2,jV=1,WV=10,qV=-2,AC=n=>n==="*";function XV(n,e){let t=n.split("/"),r=t.length;return t.some(AC)&&(r+=qV),e&&(r+=VV),t.filter(i=>!AC(i)).reduce((i,s)=>i+($V.test(s)?GV:s===""?jV:WV),r)}function YV(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function KV(n,e,t=!1){let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=kx({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),h=l.route;if(!d&&u&&t&&!r[r.length-1].route.index&&(d=kx({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Uu([s,d.pathname]),pathnameBase:nj(Uu([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=Uu([s,d.pathnameBase]))}return o}function kx(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=JV(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:d},h)=>{if(c==="*"){let y=a[h]||"";o=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const g=a[h];return d&&!g?u[c]=void 0:u[c]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:n}}function JV(n,e=!1,t=!0){Va(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function ZV(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Va(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Hu(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function QV(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Yp(n):n;return{pathname:t?t.startsWith("/")?t:ej(t,e):e,search:rj(r),hash:ij(i)}}function ej(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function iS(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function tj(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ik(n){let e=tj(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function sk(n,e,t,r=!1){let i;typeof n=="string"?i=Yp(n):(i={...n},Ur(!i.pathname||!i.pathname.includes("?"),iS("?","pathname","search",i)),Ur(!i.pathname||!i.pathname.includes("#"),iS("#","pathname","hash",i)),Ur(!i.search||!i.search.includes("#"),iS("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=QV(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var Uu=n=>n.join("/").replace(/\/\/+/g,"/"),nj=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),rj=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,ij=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function sj(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var ok=["POST","PUT","PATCH","DELETE"];new Set(ok);var oj=["GET",...ok];new Set(oj);var Kp=Z.createContext(null);Kp.displayName="DataRouter";var d1=Z.createContext(null);d1.displayName="DataRouterState";var ak=Z.createContext({isTransitioning:!1});ak.displayName="ViewTransition";var aj=Z.createContext(new Map);aj.displayName="Fetchers";var lj=Z.createContext(null);lj.displayName="Await";var Fl=Z.createContext(null);Fl.displayName="Navigation";var Ky=Z.createContext(null);Ky.displayName="Location";var Vu=Z.createContext({outlet:null,matches:[],isDataRoute:!1});Vu.displayName="Route";var vM=Z.createContext(null);vM.displayName="RouteError";function uj(n,{relative:e}={}){Ur(Jy(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=Z.useContext(Fl),{hash:i,pathname:s,search:o}=Zy(n,{relative:e}),a=s;return t!=="/"&&(a=s==="/"?t:Uu([t,s])),r.createHref({pathname:a,search:o,hash:i})}function Jy(){return Z.useContext(Ky)!=null}function zl(){return Ur(Jy(),"useLocation() may be used only in the context of a <Router> component."),Z.useContext(Ky).location}var lk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uk(n){Z.useContext(Fl).static||Z.useLayoutEffect(n)}function Jp(){let{isDataRoute:n}=Z.useContext(Vu);return n?Sj():cj()}function cj(){Ur(Jy(),"useNavigate() may be used only in the context of a <Router> component.");let n=Z.useContext(Kp),{basename:e,navigator:t}=Z.useContext(Fl),{matches:r}=Z.useContext(Vu),{pathname:i}=zl(),s=JSON.stringify(ik(r)),o=Z.useRef(!1);return uk(()=>{o.current=!0}),Z.useCallback((l,u={})=>{if(Va(o.current,lk),!o.current)return;if(typeof l=="number"){t.go(l);return}let c=sk(l,JSON.parse(s),i,u.relative==="path");n==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Uu([e,c.pathname])),(u.replace?t.replace:t.push)(c,u.state,u)},[e,t,s,i,n])}Z.createContext(null);function Zy(n,{relative:e}={}){let{matches:t}=Z.useContext(Vu),{pathname:r}=zl(),i=JSON.stringify(ik(t));return Z.useMemo(()=>sk(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function fj(n,e){return ck(n,e)}function ck(n,e,t,r){var v;Ur(Jy(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=Z.useContext(Fl),{matches:o}=Z.useContext(Vu),a=o[o.length-1],l=a?a.params:{},u=a?a.pathname:"/",c=a?a.pathnameBase:"/",d=a&&a.route;{let S=d&&d.path||"";fk(u,!d||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let h=zl(),g;if(e){let S=typeof e=="string"?Yp(e):e;Ur(c==="/"||((v=S.pathname)==null?void 0:v.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${S.pathname}" was given in the \`location\` prop.`),g=S}else g=h;let y=g.pathname||"/",E=y;if(c!=="/"){let S=c.replace(/^\//,"").split("/");E="/"+y.replace(/^\//,"").split("/").slice(S.length).join("/")}let _=!s&&t&&t.matches&&t.matches.length>0?t.matches:tk(n,{pathname:E});Va(d||_!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),Va(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let m=gj(_&&_.map(S=>Object.assign({},S,{params:Object.assign({},l,S.params),pathname:Uu([c,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:Uu([c,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),o,t,r);return e&&m?Z.createElement(Ky.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},m):m}function dj(){let n=wj(),e=sj(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=Z.createElement(Z.Fragment,null,Z.createElement("p",null," Hey developer "),Z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Z.createElement("code",{style:s},"ErrorBoundary")," or"," ",Z.createElement("code",{style:s},"errorElement")," prop on your route.")),Z.createElement(Z.Fragment,null,Z.createElement("h2",null,"Unexpected Application Error!"),Z.createElement("h3",{style:{fontStyle:"italic"}},e),t?Z.createElement("pre",{style:i},t):null,o)}var hj=Z.createElement(dj,null),pj=class extends Z.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?Z.createElement(Vu.Provider,{value:this.props.routeContext},Z.createElement(vM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function mj({routeContext:n,match:e,children:t}){let r=Z.useContext(Kp);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),Z.createElement(Vu.Provider,{value:n},t)}function gj(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,s=t==null?void 0:t.errors;if(s!=null){let l=i.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);Ur(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let o=!1,a=-1;if(t)for(let l=0;l<i.length;l++){let u=i[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:c,errors:d}=t,h=u.route.loader&&!c.hasOwnProperty(u.route.id)&&(!d||d[u.route.id]===void 0);if(u.route.lazy||h){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,u,c)=>{let d,h=!1,g=null,y=null;t&&(d=s&&u.route.id?s[u.route.id]:void 0,g=u.route.errorElement||hj,o&&(a<0&&c===0?(fk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,y=null):a===c&&(h=!0,y=u.route.hydrateFallbackElement||null)));let E=e.concat(i.slice(0,c+1)),_=()=>{let m;return d?m=g:h?m=y:u.route.Component?m=Z.createElement(u.route.Component,null):u.route.element?m=u.route.element:m=l,Z.createElement(mj,{match:u,routeContext:{outlet:l,matches:E,isDataRoute:t!=null},children:m})};return t&&(u.route.ErrorBoundary||u.route.errorElement||c===0)?Z.createElement(pj,{location:t.location,revalidation:t.revalidation,component:g,error:d,children:_(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):_()},null)}function _M(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yj(n){let e=Z.useContext(Kp);return Ur(e,_M(n)),e}function vj(n){let e=Z.useContext(d1);return Ur(e,_M(n)),e}function _j(n){let e=Z.useContext(Vu);return Ur(e,_M(n)),e}function xM(n){let e=_j(n),t=e.matches[e.matches.length-1];return Ur(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function xj(){return xM("useRouteId")}function wj(){var r;let n=Z.useContext(vM),e=vj("useRouteError"),t=xM("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function Sj(){let{router:n}=yj("useNavigate"),e=xM("useNavigate"),t=Z.useRef(!1);return uk(()=>{t.current=!0}),Z.useCallback(async(i,s={})=>{Va(t.current,lk),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...s}))},[n,e])}var CC={};function fk(n,e,t){!e&&!CC[n]&&(CC[n]=!0,Va(!1,t))}Z.memo(Ej);function Ej({routes:n,future:e,state:t}){return ck(n,void 0,t,e)}function nd(n){Ur(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function bj({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:s=!1}){Ur(!Jy(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),a=Z.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof t=="string"&&(t=Yp(t));let{pathname:l="/",search:u="",hash:c="",state:d=null,key:h="default"}=t,g=Z.useMemo(()=>{let y=Hu(l,o);return y==null?null:{location:{pathname:y,search:u,hash:c,state:d,key:h},navigationType:r}},[o,l,u,c,d,h,r]);return Va(g!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:Z.createElement(Fl.Provider,{value:a},Z.createElement(Ky.Provider,{children:e,value:g}))}function Tj({children:n,location:e}){return fj(Hb(n),e)}function Hb(n,e=[]){let t=[];return Z.Children.forEach(n,(r,i)=>{if(!Z.isValidElement(r))return;let s=[...e,i];if(r.type===Z.Fragment){t.push.apply(t,Hb(r.props.children,s));return}Ur(r.type===nd,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ur(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Hb(r.props.children,s)),t.push(o)}),t}var mx="get",gx="application/x-www-form-urlencoded";function h1(n){return n!=null&&typeof n.tagName=="string"}function Mj(n){return h1(n)&&n.tagName.toLowerCase()==="button"}function Aj(n){return h1(n)&&n.tagName.toLowerCase()==="form"}function Cj(n){return h1(n)&&n.tagName.toLowerCase()==="input"}function Rj(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Pj(n,e){return n.button===0&&(!e||e==="_self")&&!Rj(n)}function $b(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(i=>[t,i]):[[t,r]])},[]))}function Ij(n,e){let t=$b(n);return e&&e.forEach((r,i)=>{t.has(i)||e.getAll(i).forEach(s=>{t.append(i,s)})}),t}var m0=null;function Lj(){if(m0===null)try{new FormData(document.createElement("form"),0),m0=!1}catch{m0=!0}return m0}var Nj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function sS(n){return n!=null&&!Nj.has(n)?(Va(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${gx}"`),null):n}function Oj(n,e){let t,r,i,s,o;if(Aj(n)){let a=n.getAttribute("action");r=a?Hu(a,e):null,t=n.getAttribute("method")||mx,i=sS(n.getAttribute("enctype"))||gx,s=new FormData(n)}else if(Mj(n)||Cj(n)&&(n.type==="submit"||n.type==="image")){let a=n.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||a.getAttribute("action");if(r=l?Hu(l,e):null,t=n.getAttribute("formmethod")||a.getAttribute("method")||mx,i=sS(n.getAttribute("formenctype"))||sS(a.getAttribute("enctype"))||gx,s=new FormData(a,n),!Lj()){let{name:u,type:c,value:d}=n;if(c==="image"){let h=u?`${u}.`:"";s.append(`${h}x`,"0"),s.append(`${h}y`,"0")}else u&&s.append(u,d)}}else{if(h1(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=mx,r=null,i=gx,o=n}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:s,body:o}}function wM(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function Dj(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function kj(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Uj(n,e,t){let r=await Promise.all(n.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await Dj(s,t);return o.links?o.links():[]}return[]}));return Hj(r.flat(1).filter(kj).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function RC(n,e,t,r,i,s){let o=(l,u)=>t[u]?l.route.id!==t[u].route.id:!0,a=(l,u)=>{var c;return t[u].pathname!==l.pathname||((c=t[u].route.path)==null?void 0:c.endsWith("*"))&&t[u].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,u)=>o(l,u)||a(l,u)):s==="data"?e.filter((l,u)=>{var d;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=t[0])==null?void 0:d.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function Fj(n,e,{includeHydrateFallback:t}={}){return zj(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function zj(n){return[...new Set(n)]}function Bj(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function Hj(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let s=JSON.stringify(Bj(i));return t.has(s)||(t.add(s),r.push({key:s,link:i})),r},[])}var $j=new Set([100,101,204,205]);function Gj(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Hu(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function dk(){let n=Z.useContext(Kp);return wM(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Vj(){let n=Z.useContext(d1);return wM(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var SM=Z.createContext(void 0);SM.displayName="FrameworkContext";function hk(){let n=Z.useContext(SM);return wM(n,"You must render this element inside a <HydratedRouter> element"),n}function jj(n,e){let t=Z.useContext(SM),[r,i]=Z.useState(!1),[s,o]=Z.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:d}=e,h=Z.useRef(null);Z.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let E=m=>{m.forEach(v=>{o(v.isIntersecting)})},_=new IntersectionObserver(E,{threshold:.5});return h.current&&_.observe(h.current),()=>{_.disconnect()}}},[n]),Z.useEffect(()=>{if(r){let E=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(E)}}},[r]);let g=()=>{i(!0)},y=()=>{i(!1),o(!1)};return t?n!=="intent"?[s,h,{}]:[s,h,{onFocus:ng(a,g),onBlur:ng(l,y),onMouseEnter:ng(u,g),onMouseLeave:ng(c,y),onTouchStart:ng(d,g)}]:[!1,h,{}]}function ng(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Wj({page:n,...e}){let{router:t}=dk(),r=Z.useMemo(()=>tk(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?Z.createElement(Xj,{page:n,matches:r,...e}):null}function qj(n){let{manifest:e,routeModules:t}=hk(),[r,i]=Z.useState([]);return Z.useEffect(()=>{let s=!1;return Uj(n,e,t).then(o=>{s||i(o)}),()=>{s=!0}},[n,e,t]),r}function Xj({page:n,matches:e,...t}){let r=zl(),{manifest:i,routeModules:s}=hk(),{basename:o}=dk(),{loaderData:a,matches:l}=Vj(),u=Z.useMemo(()=>RC(n,e,l,i,r,"data"),[n,e,l,i,r]),c=Z.useMemo(()=>RC(n,e,l,i,r,"assets"),[n,e,l,i,r]),d=Z.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let y=new Set,E=!1;if(e.forEach(m=>{var S;let v=i.routes[m.route.id];!v||!v.hasLoader||(!u.some(T=>T.route.id===m.route.id)&&m.route.id in a&&((S=s[m.route.id])!=null&&S.shouldRevalidate)||v.hasClientLoader?E=!0:y.add(m.route.id))}),y.size===0)return[];let _=Gj(n,o);return E&&y.size>0&&_.searchParams.set("_routes",e.filter(m=>y.has(m.route.id)).map(m=>m.route.id).join(",")),[_.pathname+_.search]},[o,a,r,i,u,e,n,s]),h=Z.useMemo(()=>Fj(c,i),[c,i]),g=qj(c);return Z.createElement(Z.Fragment,null,d.map(y=>Z.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...t})),h.map(y=>Z.createElement("link",{key:y,rel:"modulepreload",href:y,...t})),g.map(({key:y,link:E})=>Z.createElement("link",{key:y,...E})))}function Yj(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var pk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{pk&&(window.__reactRouterVersion="7.5.3")}catch{}function Kj({basename:n,children:e,window:t}){let r=Z.useRef();r.current==null&&(r.current=UV({window:t,v5Compat:!0}));let i=r.current,[s,o]=Z.useState({action:i.action,location:i.location}),a=Z.useCallback(l=>{Z.startTransition(()=>o(l))},[o]);return Z.useLayoutEffect(()=>i.listen(a),[i,a]),Z.createElement(bj,{basename:n,children:e,location:s.location,navigationType:s.action,navigator:i})}var mk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Al=Z.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:d,...h},g){let{basename:y}=Z.useContext(Fl),E=typeof u=="string"&&mk.test(u),_,m=!1;if(typeof u=="string"&&E&&(_=u,pk))try{let I=new URL(window.location.href),k=u.startsWith("//")?new URL(I.protocol+u):new URL(u),G=Hu(k.pathname,y);k.origin===I.origin&&G!=null?u=G+k.search+k.hash:m=!0}catch{Va(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=uj(u,{relative:i}),[S,T,M]=jj(r,h),A=e6(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:d});function R(I){e&&e(I),I.defaultPrevented||A(I)}let O=Z.createElement("a",{...h,...M,href:_||v,onClick:m||s?e:R,ref:Yj(g,T),target:l,"data-discover":!E&&t==="render"?"true":void 0});return S&&!E?Z.createElement(Z.Fragment,null,O,Z.createElement(Wj,{page:v})):O});Al.displayName="Link";var Jj=Z.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...u},c){let d=Zy(o,{relative:u.relative}),h=zl(),g=Z.useContext(d1),{navigator:y,basename:E}=Z.useContext(Fl),_=g!=null&&s6(d)&&a===!0,m=y.encodeLocation?y.encodeLocation(d).pathname:d.pathname,v=h.pathname,S=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;t||(v=v.toLowerCase(),S=S?S.toLowerCase():null,m=m.toLowerCase()),S&&E&&(S=Hu(S,E)||S);const T=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let M=v===m||!i&&v.startsWith(m)&&v.charAt(T)==="/",A=S!=null&&(S===m||!i&&S.startsWith(m)&&S.charAt(m.length)==="/"),R={isActive:M,isPending:A,isTransitioning:_},O=M?e:void 0,I;typeof r=="function"?I=r(R):I=[r,M?"active":null,A?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let k=typeof s=="function"?s(R):s;return Z.createElement(Al,{...u,"aria-current":O,className:I,ref:c,style:k,to:o,viewTransition:a},typeof l=="function"?l(R):l)});Jj.displayName="NavLink";var Zj=Z.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:s,method:o=mx,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:d,...h},g)=>{let y=r6(),E=i6(a,{relative:u}),_=o.toLowerCase()==="get"?"get":"post",m=typeof a=="string"&&mk.test(a),v=S=>{if(l&&l(S),S.defaultPrevented)return;S.preventDefault();let T=S.nativeEvent.submitter,M=(T==null?void 0:T.getAttribute("formmethod"))||o;y(T||S.currentTarget,{fetcherKey:e,method:M,navigate:t,replace:i,state:s,relative:u,preventScrollReset:c,viewTransition:d})};return Z.createElement("form",{ref:g,method:_,action:E,onSubmit:r?l:v,...h,"data-discover":!m&&n==="render"?"true":void 0})});Zj.displayName="Form";function Qj(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gk(n){let e=Z.useContext(Kp);return Ur(e,Qj(n)),e}function e6(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=Jp(),l=zl(),u=Zy(n,{relative:s});return Z.useCallback(c=>{if(Pj(c,e)){c.preventDefault();let d=t!==void 0?t:fy(l)===fy(u);a(n,{replace:d,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,u,t,r,e,n,i,s,o])}function yk(n){Va(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=Z.useRef($b(n)),t=Z.useRef(!1),r=zl(),i=Z.useMemo(()=>Ij(r.search,t.current?null:e.current),[r.search]),s=Jp(),o=Z.useCallback((a,l)=>{const u=$b(typeof a=="function"?a(i):a);t.current=!0,s("?"+u,l)},[s,i]);return[i,o]}var t6=0,n6=()=>`__${String(++t6)}__`;function r6(){let{router:n}=gk("useSubmit"),{basename:e}=Z.useContext(Fl),t=xj();return Z.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:l,body:u}=Oj(r,e);if(i.navigate===!1){let c=i.fetcherKey||n6();await n.fetch(c,t,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await n.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function i6(n,{relative:e}={}){let{basename:t}=Z.useContext(Fl),r=Z.useContext(Vu);Ur(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Zy(n||".",{relative:e})},o=zl();if(n==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let c=a.toString();s.search=c?`?${c}`:""}}return(!n||n===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:Uu([t,s.pathname])),fy(s)}function s6(n,e={}){let t=Z.useContext(ak);Ur(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=gk("useViewTransitionState"),i=Zy(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=Hu(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Hu(t.nextLocation.pathname,r)||t.nextLocation.pathname;return kx(i.pathname,o)!=null||kx(i.pathname,s)!=null}new TextEncoder;[...$j];const o6=()=>W.jsx("div",{className:"it-header-slim-wrapper",children:W.jsx("div",{className:"container",children:W.jsx("div",{className:"row",children:W.jsx("div",{className:"col-12",children:W.jsxs("div",{className:"it-header-slim-wrapper-content",children:[W.jsxs("div",{className:"row",children:[W.jsx("div",{className:"col-2",children:W.jsx("span",{className:"d-lg-block navbar-brand",children:W.jsx(Al,{to:"/",children:W.jsx(Ir,{iconID:"#it-designers-italia",isRounded:!0,style:{width:"32px",height:"32px"}})})})}),W.jsx("div",{className:"col-8",children:W.jsx(Al,{to:"/",children:W.jsx("span",{className:"d-lg-block navbar-brand mt-1",children:W.jsx("h1",{className:Nu.pageTitle,children:W.jsx(Nt,{id:"title"})})})})})]}),W.jsxs("div",{className:"it-header-slim-right-zone",children:[W.jsxs("a",{className:"btn btn-primary btn-icon btn-full",title:"Fork on Github","aria-label":"Fork on Github",href:"https://github.com/italia/openid-federation-browser",children:[W.jsx(Ir,{iconID:"#it-github",className:"icon-primary",isRounded:!0}),W.jsx("span",{className:`d-none d-lg-block ${Nu.headerText}`,children:W.jsx(Nt,{id:"fork_on_github"})})]}),W.jsxs("div",{className:Nu.headerText,style:{marginLeft:"20px"},children:[W.jsx(Nt,{id:"version"}),DV.version]})]})]})})})})}),a6=()=>{const n=zl(),[e,t]=Z.useState(!1);return Z.useEffect(()=>{n.pathname==="/graphView"&&t(!0)},[n.pathname]),W.jsx("div",{className:"it-header-navbar-wrapper",children:W.jsx("div",{className:"container-xxl",children:W.jsx("div",{className:"row",children:W.jsx("div",{className:"col-12",children:W.jsx("nav",{className:"navbar navbar-expand-lg has-megamenu","aria-label":"Navigazione principale",children:W.jsx("div",{className:"navbar-collapsable",id:"nav1",style:{display:"none"},children:W.jsx("div",{className:"menu-wrapper",children:W.jsxs("ul",{className:"navbar-nav titillium-web-bold",style:{fontSize:"18px !important"},children:[W.jsx("li",{className:"nav-item",children:W.jsx(Al,{className:`nav-link ${n.pathname==="/insertUrl"?"active":""}`,to:"/insertUrl","data-testid":"insert-entity-url-link",children:W.jsx("span",{style:{padding:"2px 24px"},children:W.jsx(Nt,{id:"insert_trust_node_url_option"})})})}),W.jsx("li",{className:"nav-item",children:W.jsx(Al,{className:`nav-link ${n.pathname==="/listUrl"?"active":""}`,to:"/listUrl","data-testid":"list-entity-url-link",children:W.jsx(Nt,{id:"select_trust_node_url_option"})})}),W.jsx("li",{className:"nav-item",children:W.jsx(Al,{className:`nav-link ${n.pathname==="/insertEntityUrl"?"active":""}`,to:"/insertEntityUrl","data-testid":"insert-entity-url-link",children:W.jsx(Nt,{id:"insert_entity_node_url_option"})})}),W.jsx("li",{className:"nav-item",children:W.jsx(Al,{className:`nav-link ${n.pathname==="/restoreSession"?"active":""}`,to:"/restoreSession","data-testid":"restore-session-link",children:W.jsx(Nt,{id:"restore_session_label"})})}),e&&W.jsx("li",{className:"nav-item",children:W.jsx(Al,{className:`nav-link ${n.pathname==="/graphView"?"active":""}`,to:"/graphView","data-testid":"current-view-link",children:W.jsx(Nt,{id:"current_view_label"})})})]})})})})})})})})},l6=()=>W.jsxs("div",{style:{width:"100%",height:"auto"},children:[W.jsx("div",{className:"row",children:W.jsx(o6,{})}),W.jsx("div",{className:"row",children:W.jsx(a6,{})})]}),Gb=[{name:"CIE id OpenID Federation of the Italian Ministry of Interior",url:"https://oidc.registry.servizicie.interno.gov.it"},{name:"IT-Wallet Stage",url:"https://pre.ta.wallet.ipzs.it"}];function vk(n,e){return function(){return n.apply(e,arguments)}}const{toString:u6}=Object.prototype,{getPrototypeOf:EM}=Object,{iterator:p1,toStringTag:_k}=Symbol,m1=(n=>e=>{const t=u6.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),qa=n=>(n=n.toLowerCase(),e=>m1(e)===n),g1=n=>e=>typeof e===n,{isArray:Zp}=Array,Up=g1("undefined");function Qy(n){return n!==null&&!Up(n)&&n.constructor!==null&&!Up(n.constructor)&&to(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const xk=qa("ArrayBuffer");function c6(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&xk(n.buffer),e}const f6=g1("string"),to=g1("function"),wk=g1("number"),ev=n=>n!==null&&typeof n=="object",d6=n=>n===!0||n===!1,yx=n=>{if(m1(n)!=="object")return!1;const e=EM(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(_k in n)&&!(p1 in n)},h6=n=>{if(!ev(n)||Qy(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},p6=qa("Date"),m6=qa("File"),g6=qa("Blob"),y6=qa("FileList"),v6=n=>ev(n)&&to(n.pipe),_6=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||to(n.append)&&((e=m1(n))==="formdata"||e==="object"&&to(n.toString)&&n.toString()==="[object FormData]"))},x6=qa("URLSearchParams"),[w6,S6,E6,b6]=["ReadableStream","Request","Response","Headers"].map(qa),T6=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function tv(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),Zp(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{if(Qy(n))return;const s=t?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,n[a],a,n)}}function Sk(n,e){if(Qy(n))return null;e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const ud=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ek=n=>!Up(n)&&n!==ud;function Vb(){const{caseless:n,skipUndefined:e}=Ek(this)&&this||{},t={},r=(i,s)=>{const o=n&&Sk(t,s)||s;yx(t[o])&&yx(i)?t[o]=Vb(t[o],i):yx(i)?t[o]=Vb({},i):Zp(i)?t[o]=i.slice():(!e||!Up(i))&&(t[o]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&tv(arguments[i],r);return t}const M6=(n,e,t,{allOwnKeys:r}={})=>(tv(e,(i,s)=>{t&&to(i)?n[s]=vk(i,t):n[s]=i},{allOwnKeys:r}),n),A6=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),C6=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},R6=(n,e,t,r)=>{let i,s,o;const a={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),s=i.length;s-- >0;)o=i[s],(!r||r(o,n,e))&&!a[o]&&(e[o]=n[o],a[o]=!0);n=t!==!1&&EM(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},P6=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},I6=n=>{if(!n)return null;if(Zp(n))return n;let e=n.length;if(!wk(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},L6=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&EM(Uint8Array)),N6=(n,e)=>{const r=(n&&n[p1]).call(n);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(n,s[0],s[1])}},O6=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},D6=qa("HTMLFormElement"),k6=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),PC=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),U6=qa("RegExp"),bk=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};tv(t,(i,s)=>{let o;(o=e(i,s,n))!==!1&&(r[s]=o||i)}),Object.defineProperties(n,r)},F6=n=>{bk(n,(e,t)=>{if(to(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(to(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},z6=(n,e)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return Zp(n)?r(n):r(String(n).split(e)),t},B6=()=>{},H6=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function $6(n){return!!(n&&to(n.append)&&n[_k]==="FormData"&&n[p1])}const G6=n=>{const e=new Array(10),t=(r,i)=>{if(ev(r)){if(e.indexOf(r)>=0)return;if(Qy(r))return r;if(!("toJSON"in r)){e[i]=r;const s=Zp(r)?[]:{};return tv(r,(o,a)=>{const l=t(o,i+1);!Up(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return t(n,0)},V6=qa("AsyncFunction"),j6=n=>n&&(ev(n)||to(n))&&to(n.then)&&to(n.catch),Tk=((n,e)=>n?setImmediate:e?((t,r)=>(ud.addEventListener("message",({source:i,data:s})=>{i===ud&&s===t&&r.length&&r.shift()()},!1),i=>{r.push(i),ud.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",to(ud.postMessage)),W6=typeof queueMicrotask<"u"?queueMicrotask.bind(ud):typeof process<"u"&&process.nextTick||Tk,q6=n=>n!=null&&to(n[p1]),$e={isArray:Zp,isArrayBuffer:xk,isBuffer:Qy,isFormData:_6,isArrayBufferView:c6,isString:f6,isNumber:wk,isBoolean:d6,isObject:ev,isPlainObject:yx,isEmptyObject:h6,isReadableStream:w6,isRequest:S6,isResponse:E6,isHeaders:b6,isUndefined:Up,isDate:p6,isFile:m6,isBlob:g6,isRegExp:U6,isFunction:to,isStream:v6,isURLSearchParams:x6,isTypedArray:L6,isFileList:y6,forEach:tv,merge:Vb,extend:M6,trim:T6,stripBOM:A6,inherits:C6,toFlatObject:R6,kindOf:m1,kindOfTest:qa,endsWith:P6,toArray:I6,forEachEntry:N6,matchAll:O6,isHTMLForm:D6,hasOwnProperty:PC,hasOwnProp:PC,reduceDescriptors:bk,freezeMethods:F6,toObjectSet:z6,toCamelCase:k6,noop:B6,toFiniteNumber:H6,findKey:Sk,global:ud,isContextDefined:Ek,isSpecCompliantForm:$6,toJSONObject:G6,isAsyncFn:V6,isThenable:j6,setImmediate:Tk,asap:W6,isIterable:q6};function ln(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}$e.inherits(ln,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$e.toJSONObject(this.config),code:this.code,status:this.status}}});const Mk=ln.prototype,Ak={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Ak[n]={value:n}});Object.defineProperties(ln,Ak);Object.defineProperty(Mk,"isAxiosError",{value:!0});ln.from=(n,e,t,r,i,s)=>{const o=Object.create(Mk);$e.toFlatObject(n,o,function(c){return c!==Error.prototype},u=>u!=="isAxiosError");const a=n&&n.message?n.message:"Error",l=e==null&&n?n.code:e;return ln.call(o,a,l,t,r,i),n&&o.cause==null&&Object.defineProperty(o,"cause",{value:n,configurable:!0}),o.name=n&&n.name||"Error",s&&Object.assign(o,s),o};const X6=null;function jb(n){return $e.isPlainObject(n)||$e.isArray(n)}function Ck(n){return $e.endsWith(n,"[]")?n.slice(0,-2):n}function IC(n,e,t){return n?n.concat(e).map(function(i,s){return i=Ck(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function Y6(n){return $e.isArray(n)&&!n.some(jb)}const K6=$e.toFlatObject($e,{},null,function(e){return/^is[A-Z]/.test(e)});function y1(n,e,t){if(!$e.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=$e.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,_){return!$e.isUndefined(_[E])});const r=t.metaTokens,i=t.visitor||c,s=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&$e.isSpecCompliantForm(e);if(!$e.isFunction(i))throw new TypeError("visitor must be a function");function u(y){if(y===null)return"";if($e.isDate(y))return y.toISOString();if($e.isBoolean(y))return y.toString();if(!l&&$e.isBlob(y))throw new ln("Blob is not supported. Use a Buffer instead.");return $e.isArrayBuffer(y)||$e.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function c(y,E,_){let m=y;if(y&&!_&&typeof y=="object"){if($e.endsWith(E,"{}"))E=r?E:E.slice(0,-2),y=JSON.stringify(y);else if($e.isArray(y)&&Y6(y)||($e.isFileList(y)||$e.endsWith(E,"[]"))&&(m=$e.toArray(y)))return E=Ck(E),m.forEach(function(S,T){!($e.isUndefined(S)||S===null)&&e.append(o===!0?IC([E],T,s):o===null?E:E+"[]",u(S))}),!1}return jb(y)?!0:(e.append(IC(_,E,s),u(y)),!1)}const d=[],h=Object.assign(K6,{defaultVisitor:c,convertValue:u,isVisitable:jb});function g(y,E){if(!$e.isUndefined(y)){if(d.indexOf(y)!==-1)throw Error("Circular reference detected in "+E.join("."));d.push(y),$e.forEach(y,function(m,v){(!($e.isUndefined(m)||m===null)&&i.call(e,m,$e.isString(v)?v.trim():v,E,h))===!0&&g(m,E?E.concat(v):[v])}),d.pop()}}if(!$e.isObject(n))throw new TypeError("data must be an object");return g(n),e}function LC(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function bM(n,e){this._pairs=[],n&&y1(n,this,e)}const Rk=bM.prototype;Rk.append=function(e,t){this._pairs.push([e,t])};Rk.toString=function(e){const t=e?function(r){return e.call(this,r,LC)}:LC;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function J6(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Pk(n,e,t){if(!e)return n;const r=t&&t.encode||J6;$e.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let s;if(i?s=i(e,t):s=$e.isURLSearchParams(e)?e.toString():new bM(e,t).toString(r),s){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class NC{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){$e.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Ik={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Z6=typeof URLSearchParams<"u"?URLSearchParams:bM,Q6=typeof FormData<"u"?FormData:null,e8=typeof Blob<"u"?Blob:null,t8={isBrowser:!0,classes:{URLSearchParams:Z6,FormData:Q6,Blob:e8},protocols:["http","https","file","blob","url","data"]},TM=typeof window<"u"&&typeof document<"u",Wb=typeof navigator=="object"&&navigator||void 0,n8=TM&&(!Wb||["ReactNative","NativeScript","NS"].indexOf(Wb.product)<0),r8=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",i8=TM&&window.location.href||"http://localhost",s8=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:TM,hasStandardBrowserEnv:n8,hasStandardBrowserWebWorkerEnv:r8,navigator:Wb,origin:i8},Symbol.toStringTag,{value:"Module"})),ds={...s8,...t8};function o8(n,e){return y1(n,new ds.classes.URLSearchParams,{visitor:function(t,r,i,s){return ds.isNode&&$e.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function a8(n){return $e.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function l8(n){const e={},t=Object.keys(n);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],e[s]=n[s];return e}function Lk(n){function e(t,r,i,s){let o=t[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=t.length;return o=!o&&$e.isArray(i)?i.length:o,l?($e.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!$e.isObject(i[o]))&&(i[o]=[]),e(t,r,i[o],s)&&$e.isArray(i[o])&&(i[o]=l8(i[o])),!a)}if($e.isFormData(n)&&$e.isFunction(n.entries)){const t={};return $e.forEachEntry(n,(r,i)=>{e(a8(r),i,t,0)}),t}return null}function u8(n,e,t){if($e.isString(n))try{return(e||JSON.parse)(n),$e.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const nv={transitional:Ik,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=$e.isObject(e);if(s&&$e.isHTMLForm(e)&&(e=new FormData(e)),$e.isFormData(e))return i?JSON.stringify(Lk(e)):e;if($e.isArrayBuffer(e)||$e.isBuffer(e)||$e.isStream(e)||$e.isFile(e)||$e.isBlob(e)||$e.isReadableStream(e))return e;if($e.isArrayBufferView(e))return e.buffer;if($e.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return o8(e,this.formSerializer).toString();if((a=$e.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return y1(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),u8(e)):e}],transformResponse:[function(e){const t=this.transitional||nv.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if($e.isResponse(e)||$e.isReadableStream(e))return e;if(e&&$e.isString(e)&&(r&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?ln.from(a,ln.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ds.classes.FormData,Blob:ds.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$e.forEach(["delete","get","head","post","put","patch"],n=>{nv.headers[n]={}});const c8=$e.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),f8=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!t||e[t]&&c8[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},OC=Symbol("internals");function rg(n){return n&&String(n).trim().toLowerCase()}function vx(n){return n===!1||n==null?n:$e.isArray(n)?n.map(vx):String(n)}function d8(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const h8=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function oS(n,e,t,r,i){if($e.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!$e.isString(e)){if($e.isString(r))return e.indexOf(r)!==-1;if($e.isRegExp(r))return r.test(e)}}function p8(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function m8(n,e){const t=$e.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let no=class{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function s(a,l,u){const c=rg(l);if(!c)throw new Error("header name must be a non-empty string");const d=$e.findKey(i,c);(!d||i[d]===void 0||u===!0||u===void 0&&i[d]!==!1)&&(i[d||l]=vx(a))}const o=(a,l)=>$e.forEach(a,(u,c)=>s(u,c,l));if($e.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if($e.isString(e)&&(e=e.trim())&&!h8(e))o(f8(e),t);else if($e.isObject(e)&&$e.isIterable(e)){let a={},l,u;for(const c of e){if(!$e.isArray(c))throw TypeError("Object iterator must return a key-value pair");a[u=c[0]]=(l=a[u])?$e.isArray(l)?[...l,c[1]]:[l,c[1]]:c[1]}o(a,t)}else e!=null&&s(t,e,r);return this}get(e,t){if(e=rg(e),e){const r=$e.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return d8(i);if($e.isFunction(t))return t.call(this,i,r);if($e.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=rg(e),e){const r=$e.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||oS(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function s(o){if(o=rg(o),o){const a=$e.findKey(r,o);a&&(!t||oS(r,r[a],a,t))&&(delete r[a],i=!0)}}return $e.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!e||oS(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,r={};return $e.forEach(this,(i,s)=>{const o=$e.findKey(r,s);if(o){t[o]=vx(i),delete t[s];return}const a=e?p8(s):String(s).trim();a!==s&&delete t[s],t[a]=vx(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return $e.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&$e.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[OC]=this[OC]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=rg(o);r[a]||(m8(i,o),r[a]=!0)}return $e.isArray(e)?e.forEach(s):s(e),this}};no.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$e.reduceDescriptors(no.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});$e.freezeMethods(no);function aS(n,e){const t=this||nv,r=e||t,i=no.from(r.headers);let s=r.data;return $e.forEach(n,function(a){s=a.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function Nk(n){return!!(n&&n.__CANCEL__)}function Qp(n,e,t){ln.call(this,n??"canceled",ln.ERR_CANCELED,e,t),this.name="CanceledError"}$e.inherits(Qp,ln,{__CANCEL__:!0});function Ok(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new ln("Request failed with status code "+t.status,[ln.ERR_BAD_REQUEST,ln.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function g8(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function y8(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),c=r[s];o||(o=u),t[i]=l,r[i]=u;let d=s,h=0;for(;d!==i;)h+=t[d++],d=d%n;if(i=(i+1)%n,i===s&&(s=(s+1)%n),u-o<e)return;const g=c&&u-c;return g?Math.round(h*1e3/g):void 0}}function v8(n,e){let t=0,r=1e3/e,i,s;const o=(u,c=Date.now())=>{t=c,i=null,s&&(clearTimeout(s),s=null),n(...u)};return[(...u)=>{const c=Date.now(),d=c-t;d>=r?o(u,c):(i=u,s||(s=setTimeout(()=>{s=null,o(i)},r-d)))},()=>i&&o(i)]}const Ux=(n,e,t=3)=>{let r=0;const i=y8(50,250);return v8(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,u=i(l),c=o<=a;r=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&c?(a-o)/u:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};n(d)},t)},DC=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},kC=n=>(...e)=>$e.asap(()=>n(...e)),_8=ds.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,ds.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(ds.origin),ds.navigator&&/(msie|trident)/i.test(ds.navigator.userAgent)):()=>!0,x8=ds.hasStandardBrowserEnv?{write(n,e,t,r,i,s){const o=[n+"="+encodeURIComponent(e)];$e.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),$e.isString(r)&&o.push("path="+r),$e.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function w8(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function S8(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function Dk(n,e,t){let r=!w8(e);return n&&(r||t==!1)?S8(n,e):e}const UC=n=>n instanceof no?{...n}:n;function bd(n,e){e=e||{};const t={};function r(u,c,d,h){return $e.isPlainObject(u)&&$e.isPlainObject(c)?$e.merge.call({caseless:h},u,c):$e.isPlainObject(c)?$e.merge({},c):$e.isArray(c)?c.slice():c}function i(u,c,d,h){if($e.isUndefined(c)){if(!$e.isUndefined(u))return r(void 0,u,d,h)}else return r(u,c,d,h)}function s(u,c){if(!$e.isUndefined(c))return r(void 0,c)}function o(u,c){if($e.isUndefined(c)){if(!$e.isUndefined(u))return r(void 0,u)}else return r(void 0,c)}function a(u,c,d){if(d in e)return r(u,c);if(d in n)return r(void 0,u)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,c,d)=>i(UC(u),UC(c),d,!0)};return $e.forEach(Object.keys({...n,...e}),function(c){const d=l[c]||i,h=d(n[c],e[c],c);$e.isUndefined(h)&&d!==a||(t[c]=h)}),t}const kk=n=>{const e=bd({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;if(e.headers=o=no.from(o),e.url=Pk(Dk(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),$e.isFormData(t)){if(ds.hasStandardBrowserEnv||ds.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if($e.isFunction(t.getHeaders)){const l=t.getHeaders(),u=["content-type","content-length"];Object.entries(l).forEach(([c,d])=>{u.includes(c.toLowerCase())&&o.set(c,d)})}}if(ds.hasStandardBrowserEnv&&(r&&$e.isFunction(r)&&(r=r(e)),r||r!==!1&&_8(e.url))){const l=i&&s&&x8.read(s);l&&o.set(i,l)}return e},E8=typeof XMLHttpRequest<"u",b8=E8&&function(n){return new Promise(function(t,r){const i=kk(n);let s=i.data;const o=no.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=i,c,d,h,g,y;function E(){g&&g(),y&&y(),i.cancelToken&&i.cancelToken.unsubscribe(c),i.signal&&i.signal.removeEventListener("abort",c)}let _=new XMLHttpRequest;_.open(i.method.toUpperCase(),i.url,!0),_.timeout=i.timeout;function m(){if(!_)return;const S=no.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),M={data:!a||a==="text"||a==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:S,config:n,request:_};Ok(function(R){t(R),E()},function(R){r(R),E()},M),_=null}"onloadend"in _?_.onloadend=m:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(m)},_.onabort=function(){_&&(r(new ln("Request aborted",ln.ECONNABORTED,n,_)),_=null)},_.onerror=function(T){const M=T&&T.message?T.message:"Network Error",A=new ln(M,ln.ERR_NETWORK,n,_);A.event=T||null,r(A),_=null},_.ontimeout=function(){let T=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const M=i.transitional||Ik;i.timeoutErrorMessage&&(T=i.timeoutErrorMessage),r(new ln(T,M.clarifyTimeoutError?ln.ETIMEDOUT:ln.ECONNABORTED,n,_)),_=null},s===void 0&&o.setContentType(null),"setRequestHeader"in _&&$e.forEach(o.toJSON(),function(T,M){_.setRequestHeader(M,T)}),$e.isUndefined(i.withCredentials)||(_.withCredentials=!!i.withCredentials),a&&a!=="json"&&(_.responseType=i.responseType),u&&([h,y]=Ux(u,!0),_.addEventListener("progress",h)),l&&_.upload&&([d,g]=Ux(l),_.upload.addEventListener("progress",d),_.upload.addEventListener("loadend",g)),(i.cancelToken||i.signal)&&(c=S=>{_&&(r(!S||S.type?new Qp(null,n,_):S),_.abort(),_=null)},i.cancelToken&&i.cancelToken.subscribe(c),i.signal&&(i.signal.aborted?c():i.signal.addEventListener("abort",c)));const v=g8(i.url);if(v&&ds.protocols.indexOf(v)===-1){r(new ln("Unsupported protocol "+v+":",ln.ERR_BAD_REQUEST,n));return}_.send(s||null)})},T8=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const s=function(u){if(!i){i=!0,a();const c=u instanceof Error?u:this.reason;r.abort(c instanceof ln?c:new Qp(c instanceof Error?c.message:c))}};let o=e&&setTimeout(()=>{o=null,s(new ln(`timeout ${e} of ms exceeded`,ln.ETIMEDOUT))},e);const a=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),n=null)};n.forEach(u=>u.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>$e.asap(a),l}},M8=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},A8=async function*(n,e){for await(const t of C8(n))yield*M8(t,e)},C8=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},FC=(n,e,t,r)=>{const i=A8(n,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:u,value:c}=await i.next();if(u){a(),l.close();return}let d=c.byteLength;if(t){let h=s+=d;t(h)}l.enqueue(new Uint8Array(c))}catch(u){throw a(u),u}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},zC=64*1024,{isFunction:g0}=$e,Uk=(({fetch:n,Request:e,Response:t})=>({fetch:n,Request:e,Response:t}))($e.global),{ReadableStream:BC,TextEncoder:HC}=$e.global,$C=(n,...e)=>{try{return!!n(...e)}catch{return!1}},R8=n=>{const{fetch:e,Request:t,Response:r}=Object.assign({},Uk,n),i=g0(e),s=g0(t),o=g0(r);if(!i)return!1;const a=i&&g0(BC),l=i&&(typeof HC=="function"?(y=>E=>y.encode(E))(new HC):async y=>new Uint8Array(await new t(y).arrayBuffer())),u=s&&a&&$C(()=>{let y=!1;const E=new t(ds.origin,{body:new BC,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!E}),c=o&&a&&$C(()=>$e.isReadableStream(new r("").body)),d={stream:c&&(y=>y.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!d[y]&&(d[y]=(E,_)=>{let m=E&&E[y];if(m)return m.call(E);throw new ln(`Response type '${y}' is not supported`,ln.ERR_NOT_SUPPORT,_)})});const h=async y=>{if(y==null)return 0;if($e.isBlob(y))return y.size;if($e.isSpecCompliantForm(y))return(await new t(ds.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if($e.isArrayBufferView(y)||$e.isArrayBuffer(y))return y.byteLength;if($e.isURLSearchParams(y)&&(y=y+""),$e.isString(y))return(await l(y)).byteLength},g=async(y,E)=>{const _=$e.toFiniteNumber(y.getContentLength());return _??h(E)};return async y=>{let{url:E,method:_,data:m,signal:v,cancelToken:S,timeout:T,onDownloadProgress:M,onUploadProgress:A,responseType:R,headers:O,withCredentials:I="same-origin",fetchOptions:k}=kk(y);R=R?(R+"").toLowerCase():"text";let G=T8([v,S&&S.toAbortSignal()],T),$=null;const U=G&&G.unsubscribe&&(()=>{G.unsubscribe()});let ee;try{if(A&&u&&_!=="get"&&_!=="head"&&(ee=await g(O,m))!==0){let F=new t(E,{method:"POST",body:m,duplex:"half"}),L;if($e.isFormData(m)&&(L=F.headers.get("content-type"))&&O.setContentType(L),F.body){const[z,Y]=DC(ee,Ux(kC(A)));m=FC(F.body,zC,z,Y)}}$e.isString(I)||(I=I?"include":"omit");const re=s&&"credentials"in t.prototype,ne={...k,signal:G,method:_.toUpperCase(),headers:O.normalize().toJSON(),body:m,duplex:"half",credentials:re?I:void 0};$=s&&new t(E,ne);let X=await(s?e($,k):e(E,ne));const q=c&&(R==="stream"||R==="response");if(c&&(M||q&&U)){const F={};["status","statusText","headers"].forEach(B=>{F[B]=X[B]});const L=$e.toFiniteNumber(X.headers.get("content-length")),[z,Y]=M&&DC(L,Ux(kC(M),!0))||[];X=new r(FC(X.body,zC,z,()=>{Y&&Y(),U&&U()}),F)}R=R||"text";let K=await d[$e.findKey(d,R)||"text"](X,y);return!q&&U&&U(),await new Promise((F,L)=>{Ok(F,L,{data:K,headers:no.from(X.headers),status:X.status,statusText:X.statusText,config:y,request:$})})}catch(re){throw U&&U(),re&&re.name==="TypeError"&&/Load failed|fetch/i.test(re.message)?Object.assign(new ln("Network Error",ln.ERR_NETWORK,y,$),{cause:re.cause||re}):ln.from(re,re&&re.code,y,$)}}},P8=new Map,Fk=n=>{let e=$e.merge.call({skipUndefined:!0},Uk,n?n.env:null);const{fetch:t,Request:r,Response:i}=e,s=[r,i,t];let o=s.length,a=o,l,u,c=P8;for(;a--;)l=s[a],u=c.get(l),u===void 0&&c.set(l,u=a?new Map:R8(e)),c=u;return u};Fk();const qb={http:X6,xhr:b8,fetch:{get:Fk}};$e.forEach(qb,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const GC=n=>`- ${n}`,I8=n=>$e.isFunction(n)||n===null||n===!1,zk={getAdapter:(n,e)=>{n=$e.isArray(n)?n:[n];const{length:t}=n;let r,i;const s={};for(let o=0;o<t;o++){r=n[o];let a;if(i=r,!I8(r)&&(i=qb[(a=String(r)).toLowerCase()],i===void 0))throw new ln(`Unknown adapter '${a}'`);if(i&&($e.isFunction(i)||(i=i.get(e))))break;s[a||"#"+o]=i}if(!i){const o=Object.entries(s).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=t?o.length>1?`since :
`+o.map(GC).join(`
`):" "+GC(o[0]):"as no adapter specified";throw new ln("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i},adapters:qb};function lS(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Qp(null,n)}function VC(n){return lS(n),n.headers=no.from(n.headers),n.data=aS.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),zk.getAdapter(n.adapter||nv.adapter,n)(n).then(function(r){return lS(n),r.data=aS.call(n,n.transformResponse,r),r.headers=no.from(r.headers),r},function(r){return Nk(r)||(lS(n),r&&r.response&&(r.response.data=aS.call(n,n.transformResponse,r.response),r.response.headers=no.from(r.response.headers))),Promise.reject(r)})}const Bk="1.12.0",v1={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{v1[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const jC={};v1.transitional=function(e,t,r){function i(s,o){return"[Axios v"+Bk+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new ln(i(o," has been removed"+(t?" in "+t:"")),ln.ERR_DEPRECATED);return t&&!jC[o]&&(jC[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};v1.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function L8(n,e,t){if(typeof n!="object")throw new ln("options must be an object",ln.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=n[s],l=a===void 0||o(a,s,n);if(l!==!0)throw new ln("option "+s+" must be "+l,ln.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new ln("Unknown option "+s,ln.ERR_BAD_OPTION)}}const _x={assertOptions:L8,validators:v1},yl=_x.validators;let md=class{constructor(e){this.defaults=e||{},this.interceptors={request:new NC,response:new NC}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=bd(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&_x.assertOptions(r,{silentJSONParsing:yl.transitional(yl.boolean),forcedJSONParsing:yl.transitional(yl.boolean),clarifyTimeoutError:yl.transitional(yl.boolean)},!1),i!=null&&($e.isFunction(i)?t.paramsSerializer={serialize:i}:_x.assertOptions(i,{encode:yl.function,serialize:yl.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),_x.assertOptions(t,{baseUrl:yl.spelling("baseURL"),withXsrfToken:yl.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&$e.merge(s.common,s[t.method]);s&&$e.forEach(["delete","get","head","post","put","patch","common"],y=>{delete s[y]}),t.headers=no.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(t)===!1||(l=l&&E.synchronous,a.unshift(E.fulfilled,E.rejected))});const u=[];this.interceptors.response.forEach(function(E){u.push(E.fulfilled,E.rejected)});let c,d=0,h;if(!l){const y=[VC.bind(this),void 0];for(y.unshift(...a),y.push(...u),h=y.length,c=Promise.resolve(t);d<h;)c=c.then(y[d++],y[d++]);return c}h=a.length;let g=t;for(d=0;d<h;){const y=a[d++],E=a[d++];try{g=y(g)}catch(_){E.call(this,_);break}}try{c=VC.call(this,g)}catch(y){return Promise.reject(y)}for(d=0,h=u.length;d<h;)c=c.then(u[d++],u[d++]);return c}getUri(e){e=bd(this.defaults,e);const t=Dk(e.baseURL,e.url,e.allowAbsoluteUrls);return Pk(t,e.params,e.paramsSerializer)}};$e.forEach(["delete","get","head","options"],function(e){md.prototype[e]=function(t,r){return this.request(bd(r||{},{method:e,url:t,data:(r||{}).data}))}});$e.forEach(["post","put","patch"],function(e){function t(r){return function(s,o,a){return this.request(bd(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}md.prototype[e]=t(),md.prototype[e+"Form"]=t(!0)});let N8=class Hk{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Qp(s,o,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Hk(function(i){e=i}),cancel:e}}};function O8(n){return function(t){return n.apply(null,t)}}function D8(n){return $e.isObject(n)&&n.isAxiosError===!0}const Xb={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Xb).forEach(([n,e])=>{Xb[e]=n});function $k(n){const e=new md(n),t=vk(md.prototype.request,e);return $e.extend(t,md.prototype,e,{allOwnKeys:!0}),$e.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return $k(bd(n,i))},t}const fr=$k(nv);fr.Axios=md;fr.CanceledError=Qp;fr.CancelToken=N8;fr.isCancel=Nk;fr.VERSION=Bk;fr.toFormData=y1;fr.AxiosError=ln;fr.Cancel=fr.CanceledError;fr.all=function(e){return Promise.all(e)};fr.spread=O8;fr.isAxiosError=D8;fr.mergeConfig=bd;fr.AxiosHeaders=no;fr.formToJSON=n=>Lk($e.isHTMLForm(n)?new FormData(n):n);fr.getAdapter=zk.getAdapter;fr.HttpStatusCode=Xb;fr.default=fr;const{Axios:che,AxiosError:fhe,CanceledError:dhe,isCancel:hhe,CancelToken:phe,VERSION:mhe,all:ghe,Cancel:yhe,isAxiosError:vhe,spread:_he,toFormData:xhe,AxiosHeaders:whe,HttpStatusCode:She,formToJSON:Ehe,getAdapter:bhe,mergeConfig:The}=fr,Mc=new Map;var uS={set(n,e,t){Mc.has(n)||Mc.set(n,new Map);const r=Mc.get(n);if(!r.has(e)&&r.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`);return}r.set(e,t)},get(n,e){return Mc.has(n)&&Mc.get(n).get(e)||null},remove(n,e){if(!Mc.has(n))return;const t=Mc.get(n);t.delete(e),t.size===0&&Mc.delete(n)}};const k8=1e3,Yb="transitionend",U8=n=>n==null?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase(),F8=n=>{let e=n.getAttribute("data-bs-target");if(!e||e==="#"){let t=n.getAttribute("href");if(!t||!t.includes("#")&&!t.startsWith("."))return null;t.includes("#")&&!t.startsWith("#")&&(t=`#${t.split("#")[1]}`),e=t&&t!=="#"?t.trim():null}return e},Gk=n=>{const e=F8(n);return e?document.querySelector(e):null},z8=n=>{if(!n)return 0;let{transitionDuration:e,transitionDelay:t}=window.getComputedStyle(n);const r=Number.parseFloat(e),i=Number.parseFloat(t);return!r&&!i?0:(e=e.split(",")[0],t=t.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(t))*k8)},B8=n=>{n.dispatchEvent(new Event(Yb))},Rp=n=>!n||typeof n!="object"?!1:typeof n.nodeType<"u",Kb=n=>Rp(n)?n:typeof n=="string"&&n.length>0?document.querySelector(n):null,Vk=n=>{if(!Rp(n)||n.getClientRects().length===0)return!1;const e=getComputedStyle(n).getPropertyValue("visibility")==="visible",t=n.closest("details:not([open])");if(!t)return e;if(t!==n){const r=n.closest("summary");if(r&&r.parentNode!==t||r===null)return!1}return e},jk=n=>!n||n.nodeType!==Node.ELEMENT_NODE||n.classList.contains("disabled")?!0:typeof n.disabled<"u"?n.disabled:n.hasAttribute("disabled")&&n.getAttribute("disabled")!=="false",Wk=n=>{n.offsetHeight},WC=()=>typeof window<"u"&&typeof document<"u"?document.documentElement.dir==="rtl":!1,sd=n=>{typeof n=="function"&&n()},qk=(n,e,t=!0)=>{if(!t){sd(n);return}const i=z8(e)+5;let s=!1;const o=({target:a})=>{a===e&&(s=!0,e.removeEventListener(Yb,o),sd(n))};e.addEventListener(Yb,o),setTimeout(()=>{s||B8(e)},i)},H8=/[^.]*(?=\..*)\.|.*/,$8=/\..*/,G8=/::\d+$/,cS={};let qC=1;const Xk={mouseenter:"mouseover",mouseleave:"mouseout"},V8=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Yk(n,e){return e&&`${e}::${qC++}`||n.uidEvent||qC++}function Kk(n){const e=Yk(n);return n.uidEvent=e,cS[e]=cS[e]||{},cS[e]}function j8(n,e){return function t(r){return MM(r,{delegateTarget:n}),t.oneOff&&Pr.off(n,r.type,e),e.apply(n,[r])}}function W8(n,e,t){return function r(i){const s=n.querySelectorAll(e);for(let{target:o}=i;o&&o!==this;o=o.parentNode)for(const a of s)if(a===o)return MM(i,{delegateTarget:o}),r.oneOff&&Pr.off(n,i.type,e,t),t.apply(o,[i])}}function Jk(n,e,t=null){return Object.values(n).find(r=>r.callable===e&&r.delegationSelector===t)}function Zk(n,e,t){const r=typeof e=="string",i=r?t:e||t;let s=X8(n);return V8.has(s)||(s=n),[r,i,s]}function XC(n,e,t,r,i){if(typeof e!="string"||!n)return;let[s,o,a]=Zk(e,t,r);e in Xk&&(o=(y=>function(E){if(!E.relatedTarget||E.relatedTarget!==E.delegateTarget&&!E.delegateTarget.contains(E.relatedTarget))return y.call(this,E)})(o));const l=Kk(n),u=l[a]||(l[a]={}),c=Jk(u,o,s?t:null);if(c){c.oneOff=c.oneOff&&i;return}const d=Yk(o,e.replace(H8,"")),h=s?W8(n,t,o):j8(n,o);h.delegationSelector=s?t:null,h.callable=o,h.oneOff=i,h.uidEvent=d,u[d]=h,n.addEventListener(a,h,s)}function Jb(n,e,t,r,i){const s=Jk(e[t],r,i);s&&(n.removeEventListener(t,s,!!i),delete e[t][s.uidEvent])}function q8(n,e,t,r){const i=e[t]||{};for(const s of Object.keys(i))if(s.includes(r)){const o=i[s];Jb(n,e,t,o.callable,o.delegationSelector)}}function X8(n){return n=n.replace($8,""),Xk[n]||n}const Pr={on(n,e,t,r){XC(n,e,t,r,!1)},one(n,e,t,r){XC(n,e,t,r,!0)},off(n,e,t,r){if(typeof e!="string"||!n)return;const[i,s,o]=Zk(e,t,r),a=o!==e,l=Kk(n),u=l[o]||{},c=e.startsWith(".");if(typeof s<"u"){if(!Object.keys(u).length)return;Jb(n,l,o,s,i?t:null);return}if(c)for(const d of Object.keys(l))q8(n,l,d,e.slice(1));for(const d of Object.keys(u)){const h=d.replace(G8,"");if(!a||e.includes(h)){const g=u[d];Jb(n,l,o,g.callable,g.delegationSelector)}}},trigger(n,e,t){if(typeof e!="string"||!n)return null;let r=!0,i=new Event(e,{bubbles:r,cancelable:!0});return i=MM(i,t),n.dispatchEvent(i),i}};function MM(n,e){for(const[t,r]of Object.entries(e||{}))try{n[t]=r}catch{Object.defineProperty(n,t,{configurable:!0,get(){return r}})}return n}function YC(n){if(n==="true")return!0;if(n==="false")return!1;if(n===Number(n).toString())return Number(n);if(n===""||n==="null")return null;if(typeof n!="string")return n;try{return JSON.parse(decodeURIComponent(n))}catch{return n}}function fS(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const Yg={setDataAttribute(n,e,t){n.setAttribute(`data-bs-${fS(e)}`,t)},removeDataAttribute(n,e){n.removeAttribute(`data-bs-${fS(e)}`)},getDataAttributes(n){if(!n)return{};const e={},t=Object.keys(n.dataset).filter(r=>r.startsWith("bs")&&!r.startsWith("bsConfig"));for(const r of t){let i=r.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),e[i]=YC(n.dataset[r])}return e},getDataAttribute(n,e){return YC(n.getAttribute(`data-bs-${fS(e)}`))}};class AM{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const r=Rp(t)?Yg.getDataAttribute(t,"config"):{};return{...this.constructor.Default,...typeof r=="object"?r:{},...Rp(t)?Yg.getDataAttributes(t):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const r of Object.keys(t)){const i=t[r],s=e[r],o=Rp(s)?"element":U8(s);if(!new RegExp(i).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${r}" provided type "${o}" but expected type "${i}".`)}}}const Y8="5.2.3";class K8 extends AM{constructor(e,t){super(),e=Kb(e),e&&(this._element=e,this._config=this._getConfig(t),uS.set(this._element,this.constructor.DATA_KEY,this))}dispose(){uS.remove(this._element,this.constructor.DATA_KEY),Pr.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,r=!0){qk(e,t,r)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return uS.get(Kb(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,typeof t=="object"?t:null)}static get VERSION(){return Y8}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const dy={find(n,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,n))},findOne(n,e=document.documentElement){return Element.prototype.querySelector.call(e,n)},children(n,e){return[].concat(...n.children).filter(t=>t.matches(e))},parents(n,e){const t=[];let r=n.parentNode.closest(e);for(;r;)t.push(r),r=r.parentNode.closest(e);return t},prev(n,e){let t=n.previousElementSibling;for(;t;){if(t.matches(e))return[t];t=t.previousElementSibling}return[]},next(n,e){let t=n.nextElementSibling;for(;t;){if(t.matches(e))return[t];t=t.nextElementSibling}return[]},focusableChildren(n){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(t=>`${t}:not([tabindex^="-"])`).join(",");return this.find(e,n).filter(t=>!jk(t)&&Vk(t))}},J8=(n,e="hide")=>{const t=`click.dismiss${n.EVENT_KEY}`,r=n.NAME;Pr.on(document,t,`[data-bs-dismiss="${r}"]`,function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),jk(this))return;const s=Gk(this)||this.closest(`.${r}`);n.getOrCreateInstance(s)[e]()})},KC=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",JC=".sticky-top",y0="padding-right",ZC="margin-right";class Z8{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,y0,t=>t+e),this._setElementAttributes(KC,y0,t=>t+e),this._setElementAttributes(JC,ZC,t=>t-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,y0),this._resetElementAttributes(KC,y0),this._resetElementAttributes(JC,ZC)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,r){const i=this.getWidth(),s=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+i)return;this._saveInitialAttribute(o,t);const a=window.getComputedStyle(o).getPropertyValue(t);o.style.setProperty(t,`${r(Number.parseFloat(a))}px`)};this._applyManipulationCallback(e,s)}_saveInitialAttribute(e,t){const r=e.style.getPropertyValue(t);r&&Yg.setDataAttribute(e,t,r)}_resetElementAttributes(e,t){const r=i=>{const s=Yg.getDataAttribute(i,t);if(s===null){i.style.removeProperty(t);return}Yg.removeDataAttribute(i,t),i.style.setProperty(t,s)};this._applyManipulationCallback(e,r)}_applyManipulationCallback(e,t){if(Rp(e)){t(e);return}for(const r of dy.find(e,this._element))t(r)}}const Qk="backdrop",Q8="fade",QC="show",eR=`mousedown.bs.${Qk}`,eW={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},tW={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class nW extends AM{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return eW}static get DefaultType(){return tW}static get NAME(){return Qk}show(e){if(!this._config.isVisible){sd(e);return}this._append();const t=this._getElement();this._config.isAnimated&&Wk(t),t.classList.add(QC),this._emulateAnimation(()=>{sd(e)})}hide(e){if(!this._config.isVisible){sd(e);return}this._getElement().classList.remove(QC),this._emulateAnimation(()=>{this.dispose(),sd(e)})}dispose(){this._isAppended&&(Pr.off(this._element,eR),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(Q8),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Kb(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),Pr.on(e,eR,()=>{sd(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){qk(e,this._getElement(),this._config.isAnimated)}}const rW="focustrap",iW="bs.focustrap",Fx=`.${iW}`,sW=`focusin${Fx}`,oW=`keydown.tab${Fx}`,aW="Tab",lW="forward",tR="backward",uW={autofocus:!0,trapElement:null},cW={autofocus:"boolean",trapElement:"element"};class fW extends AM{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return uW}static get DefaultType(){return cW}static get NAME(){return rW}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),Pr.off(document,Fx),Pr.on(document,sW,e=>this._handleFocusin(e)),Pr.on(document,oW,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,Pr.off(document,Fx))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const r=dy.focusableChildren(t);r.length===0?t.focus():this._lastTabNavDirection===tR?r[r.length-1].focus():r[0].focus()}_handleKeydown(e){e.key===aW&&(this._lastTabNavDirection=e.shiftKey?tR:lW)}}const dW="modal",hW="bs.modal",Xa=`.${hW}`,pW=".data-api",mW="Escape",gW=`hide${Xa}`,yW=`hidePrevented${Xa}`,e3=`hidden${Xa}`,t3=`show${Xa}`,vW=`shown${Xa}`,_W=`resize${Xa}`,xW=`click.dismiss${Xa}`,wW=`mousedown.dismiss${Xa}`,SW=`keydown.dismiss${Xa}`,EW=`click${Xa}${pW}`,nR="modal-open",bW="fade",rR="show",dS="modal-static",TW=".modal.show",MW=".modal-dialog",AW=".modal-body",CW='[data-bs-toggle="modal"]',RW={backdrop:!0,focus:!0,keyboard:!0},PW={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Kg extends K8{constructor(e,t){super(e,t),this._dialog=dy.findOne(MW,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Z8,this._addEventListeners()}static get Default(){return RW}static get DefaultType(){return PW}static get NAME(){return dW}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||Pr.trigger(this._element,t3,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(nR),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||Pr.trigger(this._element,gW).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(rR),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const e of[window,this._dialog])Pr.off(e,Xa);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new nW({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new fW({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=dy.findOne(AW,this._dialog);t&&(t.scrollTop=0),Wk(this._element),this._element.classList.add(rR);const r=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Pr.trigger(this._element,vW,{relatedTarget:e})};this._queueCallback(r,this._dialog,this._isAnimated())}_addEventListeners(){Pr.on(this._element,SW,e=>{if(e.key===mW){if(this._config.keyboard){e.preventDefault(),this.hide();return}this._triggerBackdropTransition()}}),Pr.on(window,_W,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),Pr.on(this._element,wW,e=>{Pr.one(this._element,xW,t=>{if(!(this._element!==e.target||this._element!==t.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(nR),this._resetAdjustments(),this._scrollBar.reset(),Pr.trigger(this._element,e3)})}_isAnimated(){return this._element.classList.contains(bW)}_triggerBackdropTransition(){if(Pr.trigger(this._element,yW).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,r=this._element.style.overflowY;r==="hidden"||this._element.classList.contains(dS)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(dS),this._queueCallback(()=>{this._element.classList.remove(dS),this._queueCallback(()=>{this._element.style.overflowY=r},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),r=t>0;if(r&&!e){const i=WC()?"paddingLeft":"paddingRight";this._element.style[i]=`${t}px`}if(!r&&e){const i=WC()?"paddingRight":"paddingLeft";this._element.style[i]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}}typeof window<"u"&&typeof document<"u"&&(Pr.on(document,EW,CW,function(n){const e=Gk(this);["A","AREA"].includes(this.tagName)&&n.preventDefault(),Pr.one(e,t3,i=>{i.defaultPrevented||Pr.one(e,e3,()=>{Vk(this)&&this.focus()})});const t=dy.findOne(TW);t&&Kg.getInstance(t).hide(),Kg.getOrCreateInstance(e).toggle(this)}),J8(Kg));function Td(){return Td=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Td.apply(null,arguments)}const iR="data-focus-mouse",sR="focus--mouse";class n3{constructor(){this._usingMouse=!1,this._bindEvents()}_bindEvents(){if(typeof document>"u")return;["keydown","mousedown"].forEach(t=>{document.addEventListener(t,r=>{this._usingMouse=r.type==="mousedown"})}),document.addEventListener("focusin",t=>{this._usingMouse&&t.target&&(t.target.classList.add(sR),t.target.setAttribute(iR,!0))}),document.addEventListener("focusout",t=>{t.target&&(t.target.classList.remove(sR),t.target.setAttribute(iR,!1))})}}new n3;const IW="2.13.3",LW=()=>{typeof window<"u"&&!window.BOOTSTRAP_ITALIA_VERSION&&(new n3,window.BOOTSTRAP_ITALIA_VERSION=IW)};LW();const r3=n=>{try{return new URL(n),!0}catch{return!1}},i3=n=>{const e=document.getElementById(n);e.value="",e.focus()},Jg=(n,e)=>{const t=document.getElementById(n);t&&(e?(t.classList.remove("hide"),t.classList.add("show")):(t.classList.remove("show"),t.classList.add("hide")))},NW=(n,e)=>{const t=r=>{r.key===n&&e()};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},OW=n=>{n.current&&Kg.getOrCreateInstance(n.current).hide()},Nh=n=>{Kg.getOrCreateInstance(document.getElementById(n)).show()},oR=n=>{const e=document.getElementById(n);return e==null?void 0:e.classList.contains("show")},s3=(n,e)=>{const t=n?"valid":"invalid";return n?t:`${t} (${e})`},o3=(n,e)=>{if(n.length<=e)return n;const t=Math.floor(e/2);return n.slice(0,t)+"..."+n.slice(-t)},aR=(n,e=void 0)=>{const t=new Blob([n],{type:"application/json"}),r=URL.createObjectURL(t),i=document.createElement("a");i.href=r,i.download=e||"currentView.json",i.click(),i.remove()},lR=async n=>{let e=sessionStorage.getItem("currentSessionName");if(!e){const i=`session-${new Date().toLocaleString()}`;sessionStorage.setItem("currentSessionName",i),e=i}const t=await UW(n,60,40),r=JSON.stringify({screenShot:t,graph:sessionStorage.getItem("currentSession")||"",date:Math.floor(Date.now()/1e3)});localStorage.setItem(e,r)},DW=n=>{const e=localStorage.getItem(n);e&&(sessionStorage.setItem("currentSessionName",n),sessionStorage.setItem("currentSession",JSON.parse(e).graph))},uR=()=>Object.keys(localStorage).filter(n=>n.startsWith("session-")).map(n=>{const e=JSON.parse(localStorage.getItem(n)||"");return{label:n.replace("session-",""),sessionName:n,date:e.date,screenShot:e.screenShot}}),kW=n=>{localStorage.removeItem(n)},UW=(n,e,t)=>{const r=new Image;r.src=n;const i=document.getElementById("canvas"),s=i.getContext("2d");return new Promise(o=>{r.addEventListener("load",function(){const a=r.width,l=r.height,u={left:(a-a*e/100)/2,top:(l-l*t/100)/2,right:(a+a*e/100)/2,bottom:(l+l*t/100)/2},c=a-a*e/100,d=l-l*t/100;return i.width=c,i.height=d,s.drawImage(r,u.left,u.top,u.right,u.bottom,0,0,c,d),o(i.toDataURL())})})},er=n=>n.endsWith("/")?n.slice(0,-1):n,CM=n=>new Date(n*1e3).toLocaleString(navigator.language.split(",")[0]),FW="_contextHeaderText_180tj_11",zW="_contextAccordinTitle_180tj_17",BW="_contextAccordinText_180tj_22",HW="_contextAccordinButton_180tj_27",_n={contextHeaderText:FW,contextAccordinTitle:zW,contextAccordinText:BW,contextAccordinButton:HW},$W="_bodyContainer_1ftax_1",GW="_bodyElement_1ftax_7",VW="_graphAtom_1ftax_12",rv={bodyContainer:$W,bodyElement:GW,graphAtom:VW},hS=()=>{const[n,e]=Z.useState(""),[t,r]=Z.useState(!1),i=Jp(),[s]=yk(),o=l=>e(l.target.value),a=window.location.pathname==="/insertEntityUrl"?"entity":"anchor";return Z.useEffect(()=>{t&&(r3(n)?(sessionStorage.setItem("trustAnchorUrl",JSON.stringify({url:n,searchType:a})),sessionStorage.removeItem("currentSession"),sessionStorage.removeItem("currentSessionName"),window.dispatchEvent(new Event("trustAnchorUrl")),i("/graphView",{replace:!0}),Jg("invalid-input-collapse",!1),i3("input-value")):Jg("invalid-input-collapse",!0),r(!1))},[t]),Z.useEffect(()=>NW("Enter",()=>r(!0)),[]),Z.useEffect(()=>{const l=s.get("node");e(l||""),l&&r(!0)},[s]),W.jsx("div",{className:rv.bodyElement,children:W.jsxs("div",{className:"container",children:[W.jsxs("div",{className:"row",children:[W.jsx("div",{className:"col-10",children:W.jsx("input",{type:"text",className:`form-control ${_n.contextAccordinText}`,id:"input-value","data-testid":"input-value",onChange:o,placeholder:f1(navigator.language)[a==="entity"?"insert_entity_url_label":"insert_anchor_url_label"]})}),W.jsx("div",{className:"col-2",children:W.jsx("button",{className:"btn btn-primary btn-sm py-1 px-2",style:{fontSize:"14px"},onClick:()=>r(!0),"data-testid":"submit-button",children:W.jsx("span",{className:_n.contextAccordinButton,children:W.jsx(Nt,{id:"trust_anchor_url_button"})})})})]}),W.jsx("div",{className:"collapse row",id:"invalid-input-collapse",children:W.jsx("div",{className:"col-10",children:W.jsx("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",style:{fontSize:"14px"},children:W.jsx(Nt,{id:"invalid_url_error_message"})})})})]})})};var xx={exports:{}},jW=xx.exports,cR;function WW(){return cR||(cR=1,function(n,e){(function(t,r){n.exports=r(kd())})(jW,t=>(()=>{var r={703:(a,l,u)=>{var c=u(414);function d(){}function h(){}h.resetWarningCache=d,a.exports=function(){function g(_,m,v,S,T,M){if(M!==c){var A=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw A.name="Invariant Violation",A}}function y(){return g}g.isRequired=g;var E={array:g,bigint:g,bool:g,func:g,number:g,object:g,string:g,symbol:g,any:g,arrayOf:y,element:g,elementType:g,instanceOf:y,node:g,objectOf:y,oneOf:y,oneOfType:y,shape:y,exact:y,checkPropTypes:h,resetWarningCache:d};return E.PropTypes=E,E}},697:(a,l,u)=>{a.exports=u(703)()},414:a=>{a.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},98:a=>{a.exports=t}},i={};function s(a){var l=i[a];if(l!==void 0)return l.exports;var u=i[a]={exports:{}};return r[a](u,u.exports,s),u.exports}s.n=a=>{var l=a&&a.__esModule?()=>a.default:()=>a;return s.d(l,{a:l}),l},s.d=(a,l)=>{for(var u in l)s.o(l,u)&&!s.o(a,u)&&Object.defineProperty(a,u,{enumerable:!0,get:l[u]})},s.o=(a,l)=>Object.prototype.hasOwnProperty.call(a,l),s.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return(()=>{s.r(o),s.d(o,{default:()=>G});var a=s(98),l=s.n(a),u=s(697),c=s.n(u);function d(){return d=Object.assign?Object.assign.bind():function($){for(var U=1;U<arguments.length;U++){var ee=arguments[U];for(var re in ee)Object.prototype.hasOwnProperty.call(ee,re)&&($[re]=ee[re])}return $},d.apply(this,arguments)}var h=function($){var U=$.pageClassName,ee=$.pageLinkClassName,re=$.page,ne=$.selected,X=$.activeClassName,q=$.activeLinkClassName,K=$.getEventListener,F=$.pageSelectedHandler,L=$.href,z=$.extraAriaContext,Y=$.pageLabelBuilder,B=$.rel,J=$.ariaLabel||"Page "+re+(z?" "+z:""),le=null;return ne&&(le="page",J=$.ariaLabel||"Page "+re+" is your current page",U=U!==void 0?U+" "+X:X,ee!==void 0?q!==void 0&&(ee=ee+" "+q):ee=q),l().createElement("li",{className:U},l().createElement("a",d({rel:B,role:L?void 0:"button",className:ee,href:L,tabIndex:ne?"-1":"0","aria-label":J,"aria-current":le,onKeyPress:F},K(F)),Y(re)))};h.propTypes={pageSelectedHandler:c().func.isRequired,selected:c().bool.isRequired,pageClassName:c().string,pageLinkClassName:c().string,activeClassName:c().string,activeLinkClassName:c().string,extraAriaContext:c().string,href:c().string,ariaLabel:c().string,page:c().number.isRequired,getEventListener:c().func.isRequired,pageLabelBuilder:c().func.isRequired,rel:c().string};const g=h;function y(){return y=Object.assign?Object.assign.bind():function($){for(var U=1;U<arguments.length;U++){var ee=arguments[U];for(var re in ee)Object.prototype.hasOwnProperty.call(ee,re)&&($[re]=ee[re])}return $},y.apply(this,arguments)}var E=function($){var U=$.breakLabel,ee=$.breakAriaLabel,re=$.breakClassName,ne=$.breakLinkClassName,X=$.breakHandler,q=$.getEventListener,K=re||"break";return l().createElement("li",{className:K},l().createElement("a",y({className:ne,role:"button",tabIndex:"0","aria-label":ee,onKeyPress:X},q(X)),U))};E.propTypes={breakLabel:c().oneOfType([c().string,c().node]),breakAriaLabel:c().string,breakClassName:c().string,breakLinkClassName:c().string,breakHandler:c().func.isRequired,getEventListener:c().func.isRequired};const _=E;function m($){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return $??U}function v($){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},v($)}function S(){return S=Object.assign?Object.assign.bind():function($){for(var U=1;U<arguments.length;U++){var ee=arguments[U];for(var re in ee)Object.prototype.hasOwnProperty.call(ee,re)&&($[re]=ee[re])}return $},S.apply(this,arguments)}function T($,U){for(var ee=0;ee<U.length;ee++){var re=U[ee];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty($,re.key,re)}}function M($,U){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ee,re){return ee.__proto__=re,ee},M($,U)}function A($,U){if(U&&(v(U)==="object"||typeof U=="function"))return U;if(U!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R($)}function R($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function O($){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(U){return U.__proto__||Object.getPrototypeOf(U)},O($)}function I($,U,ee){return U in $?Object.defineProperty($,U,{value:ee,enumerable:!0,configurable:!0,writable:!0}):$[U]=ee,$}var k=function($){(function(K,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function");K.prototype=Object.create(F&&F.prototype,{constructor:{value:K,writable:!0,configurable:!0}}),Object.defineProperty(K,"prototype",{writable:!1}),F&&M(K,F)})(q,$);var U,ee,re,ne,X=(re=q,ne=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var K,F=O(re);if(ne){var L=O(this).constructor;K=Reflect.construct(F,arguments,L)}else K=F.apply(this,arguments);return A(this,K)});function q(K){var F,L;return function(z,Y){if(!(z instanceof Y))throw new TypeError("Cannot call a class as a function")}(this,q),I(R(F=X.call(this,K)),"handlePreviousPage",function(z){var Y=F.state.selected;F.handleClick(z,null,Y>0?Y-1:void 0,{isPrevious:!0})}),I(R(F),"handleNextPage",function(z){var Y=F.state.selected,B=F.props.pageCount;F.handleClick(z,null,Y<B-1?Y+1:void 0,{isNext:!0})}),I(R(F),"handlePageSelected",function(z,Y){if(F.state.selected===z)return F.callActiveCallback(z),void F.handleClick(Y,null,void 0,{isActive:!0});F.handleClick(Y,null,z)}),I(R(F),"handlePageChange",function(z){F.state.selected!==z&&(F.setState({selected:z}),F.callCallback(z))}),I(R(F),"getEventListener",function(z){return I({},F.props.eventListener,z)}),I(R(F),"handleClick",function(z,Y,B){var J=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},le=J.isPrevious,pe=le!==void 0&&le,he=J.isNext,Ee=he!==void 0&&he,_e=J.isBreak,te=_e!==void 0&&_e,j=J.isActive,ce=j!==void 0&&j;z.preventDefault?z.preventDefault():z.returnValue=!1;var fe=F.state.selected,ie=F.props.onClick,se=B;if(ie){var Ae=ie({index:Y,selected:fe,nextSelectedPage:B,event:z,isPrevious:pe,isNext:Ee,isBreak:te,isActive:ce});if(Ae===!1)return;Number.isInteger(Ae)&&(se=Ae)}se!==void 0&&F.handlePageChange(se)}),I(R(F),"handleBreakClick",function(z,Y){var B=F.state.selected;F.handleClick(Y,z,B<z?F.getForwardJump():F.getBackwardJump(),{isBreak:!0})}),I(R(F),"callCallback",function(z){F.props.onPageChange!==void 0&&typeof F.props.onPageChange=="function"&&F.props.onPageChange({selected:z})}),I(R(F),"callActiveCallback",function(z){F.props.onPageActive!==void 0&&typeof F.props.onPageActive=="function"&&F.props.onPageActive({selected:z})}),I(R(F),"getElementPageRel",function(z){var Y=F.state.selected,B=F.props,J=B.nextPageRel,le=B.prevPageRel,pe=B.selectedPageRel;return Y-1===z?le:Y===z?pe:Y+1===z?J:void 0}),I(R(F),"pagination",function(){var z=[],Y=F.props,B=Y.pageRangeDisplayed,J=Y.pageCount,le=Y.marginPagesDisplayed,pe=Y.breakLabel,he=Y.breakClassName,Ee=Y.breakLinkClassName,_e=Y.breakAriaLabels,te=F.state.selected;if(J<=B)for(var j=0;j<J;j++)z.push(F.getPageElement(j));else{var ce=B/2,fe=B-ce;te>J-B/2?ce=B-(fe=J-te):te<B/2&&(fe=B-(ce=te));var ie,se,Ae=function(be){return F.getPageElement(be)},we=[];for(ie=0;ie<J;ie++){var Re=ie+1;if(Re<=le)we.push({type:"page",index:ie,display:Ae(ie)});else if(Re>J-le)we.push({type:"page",index:ie,display:Ae(ie)});else if(ie>=te-ce&&ie<=te+(te===0&&B>1?fe-1:fe))we.push({type:"page",index:ie,display:Ae(ie)});else if(pe&&we.length>0&&we[we.length-1].display!==se&&(B>0||le>0)){var Le=ie<te?_e.backward:_e.forward;se=l().createElement(_,{key:ie,breakAriaLabel:Le,breakLabel:pe,breakClassName:he,breakLinkClassName:Ee,breakHandler:F.handleBreakClick.bind(null,ie),getEventListener:F.getEventListener}),we.push({type:"break",index:ie,display:se})}}we.forEach(function(be,Ye){var ue=be;be.type==="break"&&we[Ye-1]&&we[Ye-1].type==="page"&&we[Ye+1]&&we[Ye+1].type==="page"&&we[Ye+1].index-we[Ye-1].index<=2&&(ue={type:"page",index:be.index,display:Ae(be.index)}),z.push(ue.display)})}return z}),K.initialPage!==void 0&&K.forcePage!==void 0&&console.warn("(react-paginate): Both initialPage (".concat(K.initialPage,") and forcePage (").concat(K.forcePage,") props are provided, which is discouraged.")+` Use exclusively forcePage prop for a controlled component.
See https://reactjs.org/docs/forms.html#controlled-components`),L=K.initialPage?K.initialPage:K.forcePage?K.forcePage:0,F.state={selected:L},F}return U=q,(ee=[{key:"componentDidMount",value:function(){var K=this.props,F=K.initialPage,L=K.disableInitialCallback,z=K.extraAriaContext,Y=K.pageCount,B=K.forcePage;F===void 0||L||this.callCallback(F),z&&console.warn("DEPRECATED (react-paginate): The extraAriaContext prop is deprecated. You should now use the ariaLabelBuilder instead."),Number.isInteger(Y)||console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(Y,"). Did you forget a Math.ceil()?")),F!==void 0&&F>Y-1&&console.warn("(react-paginate): The initialPage prop provided is greater than the maximum page index from pageCount prop (".concat(F," > ").concat(Y-1,").")),B!==void 0&&B>Y-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(B," > ").concat(Y-1,")."))}},{key:"componentDidUpdate",value:function(K){this.props.forcePage!==void 0&&this.props.forcePage!==K.forcePage&&(this.props.forcePage>this.props.pageCount-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(this.props.forcePage," > ").concat(this.props.pageCount-1,").")),this.setState({selected:this.props.forcePage})),Number.isInteger(K.pageCount)&&!Number.isInteger(this.props.pageCount)&&console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(this.props.pageCount,"). Did you forget a Math.ceil()?"))}},{key:"getForwardJump",value:function(){var K=this.state.selected,F=this.props,L=F.pageCount,z=K+F.pageRangeDisplayed;return z>=L?L-1:z}},{key:"getBackwardJump",value:function(){var K=this.state.selected-this.props.pageRangeDisplayed;return K<0?0:K}},{key:"getElementHref",value:function(K){var F=this.props,L=F.hrefBuilder,z=F.pageCount,Y=F.hrefAllControls;if(L)return Y||K>=0&&K<z?L(K+1,z,this.state.selected):void 0}},{key:"ariaLabelBuilder",value:function(K){var F=K===this.state.selected;if(this.props.ariaLabelBuilder&&K>=0&&K<this.props.pageCount){var L=this.props.ariaLabelBuilder(K+1,F);return this.props.extraAriaContext&&!F&&(L=L+" "+this.props.extraAriaContext),L}}},{key:"getPageElement",value:function(K){var F=this.state.selected,L=this.props,z=L.pageClassName,Y=L.pageLinkClassName,B=L.activeClassName,J=L.activeLinkClassName,le=L.extraAriaContext,pe=L.pageLabelBuilder;return l().createElement(g,{key:K,pageSelectedHandler:this.handlePageSelected.bind(null,K),selected:F===K,rel:this.getElementPageRel(K),pageClassName:z,pageLinkClassName:Y,activeClassName:B,activeLinkClassName:J,extraAriaContext:le,href:this.getElementHref(K),ariaLabel:this.ariaLabelBuilder(K),page:K+1,pageLabelBuilder:pe,getEventListener:this.getEventListener})}},{key:"render",value:function(){var K=this.props.renderOnZeroPageCount;if(this.props.pageCount===0&&K!==void 0)return K&&K(this.props);var F=this.props,L=F.disabledClassName,z=F.disabledLinkClassName,Y=F.pageCount,B=F.className,J=F.containerClassName,le=F.previousLabel,pe=F.previousClassName,he=F.previousLinkClassName,Ee=F.previousAriaLabel,_e=F.prevRel,te=F.nextLabel,j=F.nextClassName,ce=F.nextLinkClassName,fe=F.nextAriaLabel,ie=F.nextRel,se=this.state.selected,Ae=se===0,we=se===Y-1,Re="".concat(m(pe)).concat(Ae?" ".concat(m(L)):""),Le="".concat(m(j)).concat(we?" ".concat(m(L)):""),be="".concat(m(he)).concat(Ae?" ".concat(m(z)):""),Ye="".concat(m(ce)).concat(we?" ".concat(m(z)):""),ue=Ae?"true":"false",oe=we?"true":"false";return l().createElement("ul",{className:B||J,role:"navigation","aria-label":"Pagination"},l().createElement("li",{className:Re},l().createElement("a",S({className:be,href:this.getElementHref(se-1),tabIndex:Ae?"-1":"0",role:"button",onKeyPress:this.handlePreviousPage,"aria-disabled":ue,"aria-label":Ee,rel:_e},this.getEventListener(this.handlePreviousPage)),le)),this.pagination(),l().createElement("li",{className:Le},l().createElement("a",S({className:Ye,href:this.getElementHref(se+1),tabIndex:we?"-1":"0",role:"button",onKeyPress:this.handleNextPage,"aria-disabled":oe,"aria-label":fe,rel:ie},this.getEventListener(this.handleNextPage)),te)))}}])&&T(U.prototype,ee),Object.defineProperty(U,"prototype",{writable:!1}),q}(a.Component);I(k,"propTypes",{pageCount:c().number.isRequired,pageRangeDisplayed:c().number,marginPagesDisplayed:c().number,previousLabel:c().node,previousAriaLabel:c().string,prevPageRel:c().string,prevRel:c().string,nextLabel:c().node,nextAriaLabel:c().string,nextPageRel:c().string,nextRel:c().string,breakLabel:c().oneOfType([c().string,c().node]),breakAriaLabels:c().shape({forward:c().string,backward:c().string}),hrefBuilder:c().func,hrefAllControls:c().bool,onPageChange:c().func,onPageActive:c().func,onClick:c().func,initialPage:c().number,forcePage:c().number,disableInitialCallback:c().bool,containerClassName:c().string,className:c().string,pageClassName:c().string,pageLinkClassName:c().string,pageLabelBuilder:c().func,activeClassName:c().string,activeLinkClassName:c().string,previousClassName:c().string,nextClassName:c().string,previousLinkClassName:c().string,nextLinkClassName:c().string,disabledClassName:c().string,disabledLinkClassName:c().string,breakClassName:c().string,breakLinkClassName:c().string,extraAriaContext:c().string,ariaLabelBuilder:c().func,eventListener:c().string,renderOnZeroPageCount:c().func,selectedPageRel:c().string}),I(k,"defaultProps",{pageRangeDisplayed:2,marginPagesDisplayed:3,activeClassName:"selected",previousLabel:"Previous",previousClassName:"previous",previousAriaLabel:"Previous page",prevPageRel:"prev",prevRel:"prev",nextLabel:"Next",nextClassName:"next",nextAriaLabel:"Next page",nextPageRel:"next",nextRel:"next",breakLabel:"...",breakAriaLabels:{forward:"Jump forward",backward:"Jump backward"},disabledClassName:"disabled",disableInitialCallback:!1,pageLabelBuilder:function($){return $},eventListener:"onClick",renderOnZeroPageCount:void 0,selectedPageRel:"canonical",hrefAllControls:!1});const G=k})(),o})())}(xx)),xx.exports}var qW=WW();const XW=Bi(qW),hy=({itemsPerPage:n,items:e,ItemsRenderer:t,filterFn:r,onItemsFiltered:i})=>{const[s,o]=Z.useState(0),[a,l]=Z.useState(""),[u,c]=Z.useState(e),[d,h]=Z.useState(0),[g,y]=Z.useState(0),E=m=>{const v=m.selected*n%e.length;y(m.selected),o(v)},_=m=>l(m.target.value);return Z.useEffect(()=>{const m=s+n,v=r?e.filter(M=>r(M,a)):e,S=v.slice(s,m),T=Math.ceil(v.length/n);c(S),h(T),y(T===0?0:Math.min(g,T-1)),o(T===0?0:Math.min(s,(T-1)*n)),i&&i(v)},[a,s,e]),Z.useEffect(()=>{l(""),E({selected:0})},[e]),W.jsxs("div",{className:"it-list-wrapper container",style:{width:"100%"},children:[r&&W.jsx("div",{className:"row justify-content-md-start",children:W.jsx("div",{className:"col-md-12",children:W.jsx("input",{type:"text",className:`form-control ${_n.contextAccordinText}`,id:"input-value",placeholder:"Filter Subordinates By Entity ID",onChange:_,value:a})})}),W.jsx("div",{className:"row justify-content-md-start pt-4",children:W.jsx("div",{className:"col",children:W.jsx(t,{items:u})})}),W.jsx("div",{className:"row justify-content-md-center pt-4",children:W.jsx("div",{className:"col-md-auto",children:W.jsx(XW,{containerClassName:"pagination",pageClassName:"page-item",pageLinkClassName:"page-link",breakLabel:"...",onPageChange:E,pageRangeDisplayed:3,pageCount:d,renderOnZeroPageCount:null,forcePage:g,previousLabel:W.jsx("span",{children:W.jsx(Ir,{iconID:"#it-chevron-left",className:"icon icon-primary",style:{width:"48px",height:"48px"}})}),nextLabel:W.jsx("span",{children:W.jsx(Ir,{iconID:"#it-chevron-right",className:"icon icon-primary",style:{width:"48px",height:"48px"}})})})})}),W.jsxs("div",{className:`row justify-content-md-center ${_n.contextAccordinText}`,children:[W.jsx(Nt,{id:"current_page"}),": ",g+1," / ",d]})]})},YW=()=>{const n=Jp(),e=({items:r})=>W.jsx("ul",{style:{listStyleType:"none"},children:r&&r.map(i=>W.jsx("li",{children:W.jsxs("div",{className:"row justify-content-md-start",children:[W.jsx("div",{className:"col-md-auto",children:W.jsxs("button",{className:"btn btn-icon btn-sm py-0 px-1 btn-primary",title:"Load","aria-label":"Load",onClick:()=>{sessionStorage.setItem("trustAnchorUrl",JSON.stringify({url:i.url,searchType:"anchor"})),sessionStorage.removeItem("currentSession"),sessionStorage.removeItem("currentSessionName"),window.dispatchEvent(new Event("trustAnchorUrl")),n("/graphView",{replace:!0})},children:[W.jsx(Ir,{iconID:"#it-plus",className:"icon-xs icon-white",isRounded:!1}),W.jsx("span",{className:_n.contextAccordinButton,children:"Add"})]})}),W.jsxs("div",{className:`col-md-auto ${_n.contextAccordinText}`,children:[i.name," - ",o3(i.url,38)]})]})},i.url))}),t=(r,i)=>r.name.toLowerCase().includes(i.toLowerCase());return W.jsx("div",{className:rv.bodyElement,children:W.jsx(hy,{itemsPerPage:5,items:Gb,ItemsRenderer:e,filterFn:t})})},KW=()=>{const n=Jp(),[e,t]=Z.useState(void 0),[r,i]=Z.useState(void 0),[s,o]=Z.useState(void 0),a=async u=>{if(u.target.files){const c=await u.target.files[0].text();t(c);const d=u.target.files[0].name;i(d);const g=(u.target.files[0].size/1024).toFixed(2);o(g)}},l=()=>{e&&(sessionStorage.removeItem("currentSessionName"),sessionStorage.setItem("currentSession",e),n("/graphView",{replace:!0}))};return W.jsxs("div",{className:"container",children:[W.jsx("div",{className:"row",children:W.jsxs("div",{className:"col-10",children:[r&&W.jsx("ul",{className:"upload-file-list",children:W.jsxs("li",{className:"upload-file success",children:[W.jsx(Ir,{iconID:"#it-file",className:"icon-sm",isRounded:!1}),W.jsxs("p",{children:[W.jsx("span",{className:"visually-hidden",children:W.jsx(Nt,{id:"loaded_file"})}),r,W.jsxs("span",{className:"upload-file-weight",children:[s," KB"]})]}),W.jsx("button",{disabled:!0,children:W.jsx(Ir,{iconID:"#it-check",className:"icon-sm",isRounded:!1})})]})}),W.jsx("input",{type:"file",className:"upload",id:"input-value",onChange:a}),W.jsxs("label",{htmlFor:"input-value",children:[W.jsx(Ir,{iconID:"#it-upload",className:"icon-sm",isRounded:!1}),W.jsx("span",{children:W.jsx(Nt,{id:"upload_file"})})]})]})}),W.jsx("div",{className:"collapse row",id:"invalid-input-collapse",children:W.jsx("div",{className:"col-10",children:W.jsx("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",style:{fontSize:"14px"},children:W.jsx(Nt,{id:"invalid_url_error_message"})})})}),W.jsx("div",{className:"row",children:W.jsx("div",{className:"col-12",style:{display:"flex",justifyContent:"flex-end"},children:W.jsxs("button",{className:"btn btn-primary btn-sm py-2 px-4",style:{fontSize:"14px"},onClick:()=>l(),disabled:!e,"data-testid":"restore-upload-button",children:[W.jsx(Ir,{iconID:"#it-arrow-up-circle",className:"icon-sm icon-white",isRounded:!1}),W.jsx("span",{className:"titillium-web-bold",children:W.jsx(Nt,{id:"trust_anchor_url_button"})})]})})})]})},Cl=({action:n,text:e,id:t,title:r,ariaLabel:i,iconID:s,btnClassName:o,textClassName:a,iconClassName:l,disabled:u,style:c,test_id:d})=>W.jsxs("button",{id:t,className:`btn ${o||"btn-icon btn-xs py-1 px-1"}`,title:r,"aria-label":i,onClick:n,style:c,disabled:u||!1,"data-testid":d,children:[s&&W.jsx(Ir,{iconID:s,className:l||"icon-xs icon-white",isRounded:!1}),e&&W.jsx("span",{className:a,children:e})]}),JW=()=>{const n=Jp(),[e,t]=Z.useState(uR()),r=s=>{const o=s==="file"?"file":"previous",a=s==="file"?"previous":"file",l=document.getElementById(`nav-${o}`);l&&(l.classList.add("active"),l.classList.add("show"));const u=document.getElementById(`nav-${o}-tab`);u&&u.classList.add("active");const c=document.getElementById(`nav-${a}`);c&&(c.classList.remove("active"),c.classList.remove("show"));const d=document.getElementById(`nav-${a}-tab`);d&&d.classList.remove("active")},i=({items:s})=>W.jsxs("table",{style:{listStyleType:"none",width:"100%"},"data-testid":"session-table",children:[W.jsx("thead",{children:W.jsxs("tr",{className:`primary-bg ${_n.contextHeaderText}`,children:[W.jsx("th",{children:W.jsx("div",{className:"row justify-content-center",children:W.jsx(Nt,{id:"screenshot"})})}),W.jsx("th",{children:W.jsx("div",{className:"row justify-content-center",children:W.jsx(Nt,{id:"session_name"})})}),W.jsx("th",{children:W.jsx("div",{className:"row justify-content-center",children:W.jsx(Nt,{id:"date"})})}),W.jsx("th",{children:W.jsx("div",{className:"row justify-content-center",children:W.jsx(Nt,{id:"actions"})})})]})}),W.jsx("tbody",{children:s&&s.map(o=>W.jsxs("tr",{"data-testid":"session-row",children:[W.jsx("th",{style:{width:"162px"},children:W.jsx("div",{className:"row justify-content-center",children:W.jsx("img",{"data-testid":"screenshot",src:o.screenShot,style:{width:"160px",height:"60px"},alt:"screenshot"})})}),W.jsx("th",{style:{width:"280px"},children:W.jsx("div",{className:`row justify-content-center ${_n.contextAccordinText}`,"data-testid":"session-name",children:o.label})}),W.jsx("th",{style:{width:"160px"},children:W.jsx("div",{className:`row justify-content-center ${_n.contextAccordinText}`,"data-testid":"session-date",children:CM(o.date)})}),W.jsxs("th",{style:{width:"90px"},children:[W.jsx("div",{className:"row justify-content-center",children:W.jsx(Cl,{action:()=>{DW(o.sessionName),n("/graphView",{replace:!0})},text:"Restore",title:"Load",btnClassName:"btn-icon btn-sm py-0 px-1 btn-success",ariaLabel:"Load",iconID:"#it-plus",textClassName:_n.contextAccordinButton,style:{width:"90px"},test_id:"restore-session-button"})}),W.jsx("div",{className:"row justify-content-center mt-1",children:W.jsx(Cl,{action:()=>{kW(o.sessionName),t(uR())},text:"Delete",title:"Delete",ariaLabel:"Delete",iconID:"#it-minus",btnClassName:"btn-icon btn-sm py-0 px-1 btn-danger",textClassName:_n.contextAccordinButton,style:{width:"90px"},test_id:"delete-session-button"})})]})]},o.sessionName))})]});return W.jsxs("div",{className:rv.bodyElement,children:[W.jsxs("ul",{className:"nav nav-tabs auto",children:[W.jsx("li",{className:"nav-item",children:W.jsx("button",{className:"nav-link active",id:"nav-file-tab",role:"tab",onClick:()=>r("file"),"data-testid":"from-file-tab",children:W.jsx("span",{className:_n.contextAccordinText,children:W.jsx(Nt,{id:"from_file"})})})}),W.jsx("li",{className:"nav-item",children:W.jsx("button",{className:"nav-link",id:"nav-previous-tab",role:"tab",onClick:()=>r("previous"),"data-testid":"from-previous-tab",children:W.jsx("span",{className:_n.contextAccordinText,children:W.jsx(Nt,{id:"from_previous_session"})})})})]}),W.jsxs("div",{className:"tab-content",id:"nav-tabContent",style:{marginTop:"40px"},children:[W.jsx("div",{className:"tab-pane fade show active",id:"nav-file",role:"tabpanel","aria-labelledby":"nav-file-tab",style:{width:"100%"},children:W.jsx("div",{className:"row",children:W.jsx(KW,{})})}),W.jsx("div",{className:"tab-pane fade",id:"nav-previous",role:"tabpanel","aria-labelledby":"nav-previous-tab",style:{width:"100%"},children:e.length===0?W.jsx("h6",{children:W.jsx(Nt,{id:"no_session_available"})}):W.jsx(hy,{itemsPerPage:5,items:e,ItemsRenderer:i,filterFn:void 0})})]})]})},RM=crypto,a3=n=>n instanceof CryptoKey,v0=new TextEncoder,em=new TextDecoder;function ZW(...n){const e=n.reduce((i,{length:s})=>i+s,0),t=new Uint8Array(e);let r=0;for(const i of n)t.set(i,r),r+=i.length;return t}const QW=n=>{const e=atob(n),t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t},zc=n=>{let e=n;e instanceof Uint8Array&&(e=em.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return QW(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class Ns extends Error{constructor(e,t){var r;super(e,t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(r=Error.captureStackTrace)==null||r.call(Error,this,this.constructor)}}Ns.code="ERR_JOSE_GENERIC";class ka extends Ns{constructor(e,t,r="unspecified",i="unspecified"){super(e,{cause:{claim:r,reason:i,payload:t}}),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=r,this.reason=i,this.payload=t}}ka.code="ERR_JWT_CLAIM_VALIDATION_FAILED";class Zb extends Ns{constructor(e,t,r="unspecified",i="unspecified"){super(e,{cause:{claim:r,reason:i,payload:t}}),this.code="ERR_JWT_EXPIRED",this.claim=r,this.reason=i,this.payload=t}}Zb.code="ERR_JWT_EXPIRED";class e9 extends Ns{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}}e9.code="ERR_JOSE_ALG_NOT_ALLOWED";class Du extends Ns{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}}Du.code="ERR_JOSE_NOT_SUPPORTED";class t9 extends Ns{constructor(e="decryption operation failed",t){super(e,t),this.code="ERR_JWE_DECRYPTION_FAILED"}}t9.code="ERR_JWE_DECRYPTION_FAILED";class n9 extends Ns{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}}n9.code="ERR_JWE_INVALID";class Fi extends Ns{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}}Fi.code="ERR_JWS_INVALID";class El extends Ns{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}}El.code="ERR_JWT_INVALID";class r9 extends Ns{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}}r9.code="ERR_JWK_INVALID";class i9 extends Ns{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}}i9.code="ERR_JWKS_INVALID";class s9 extends Ns{constructor(e="no applicable key found in the JSON Web Key Set",t){super(e,t),this.code="ERR_JWKS_NO_MATCHING_KEY"}}s9.code="ERR_JWKS_NO_MATCHING_KEY";class o9 extends Ns{constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}o9.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";class a9 extends Ns{constructor(e="request timed out",t){super(e,t),this.code="ERR_JWKS_TIMEOUT"}}a9.code="ERR_JWKS_TIMEOUT";class l3 extends Ns{constructor(e="signature verification failed",t){super(e,t),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}l3.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";function mu(n,e="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${e} must be ${n}`)}function _0(n,e){return n.name===e}function pS(n){return parseInt(n.name.slice(4),10)}function l9(n){switch(n){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function u9(n,e){if(e.length&&!e.some(t=>n.usages.includes(t))){let t="CryptoKey does not support this operation, its usages must include ";if(e.length>2){const r=e.pop();t+=`one of ${e.join(", ")}, or ${r}.`}else e.length===2?t+=`one of ${e[0]} or ${e[1]}.`:t+=`${e[0]}.`;throw new TypeError(t)}}function c9(n,e,...t){switch(e){case"HS256":case"HS384":case"HS512":{if(!_0(n.algorithm,"HMAC"))throw mu("HMAC");const r=parseInt(e.slice(2),10);if(pS(n.algorithm.hash)!==r)throw mu(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!_0(n.algorithm,"RSASSA-PKCS1-v1_5"))throw mu("RSASSA-PKCS1-v1_5");const r=parseInt(e.slice(2),10);if(pS(n.algorithm.hash)!==r)throw mu(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!_0(n.algorithm,"RSA-PSS"))throw mu("RSA-PSS");const r=parseInt(e.slice(2),10);if(pS(n.algorithm.hash)!==r)throw mu(`SHA-${r}`,"algorithm.hash");break}case"EdDSA":{if(n.algorithm.name!=="Ed25519"&&n.algorithm.name!=="Ed448")throw mu("Ed25519 or Ed448");break}case"ES256":case"ES384":case"ES512":{if(!_0(n.algorithm,"ECDSA"))throw mu("ECDSA");const r=l9(e);if(n.algorithm.namedCurve!==r)throw mu(r,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}u9(n,t)}function u3(n,e,...t){var r;if(t=t.filter(Boolean),t.length>2){const i=t.pop();n+=`one of type ${t.join(", ")}, or ${i}.`}else t.length===2?n+=`one of type ${t[0]} or ${t[1]}.`:n+=`of type ${t[0]}.`;return e==null?n+=` Received ${e}`:typeof e=="function"&&e.name?n+=` Received function ${e.name}`:typeof e=="object"&&e!=null&&(r=e.constructor)!=null&&r.name&&(n+=` Received an instance of ${e.constructor.name}`),n}const fR=(n,...e)=>u3("Key must be ",n,...e);function c3(n,e,...t){return u3(`Key for the ${n} algorithm must be `,e,...t)}const f3=n=>a3(n)?!0:(n==null?void 0:n[Symbol.toStringTag])==="KeyObject",zx=["CryptoKey"],f9=(...n)=>{const e=n.filter(Boolean);if(e.length===0||e.length===1)return!0;let t;for(const r of e){const i=Object.keys(r);if(!t||t.size===0){t=new Set(i);continue}for(const s of i){if(t.has(s))return!1;t.add(s)}}return!0};function d9(n){return typeof n=="object"&&n!==null}function Md(n){if(!d9(n)||Object.prototype.toString.call(n)!=="[object Object]")return!1;if(Object.getPrototypeOf(n)===null)return!0;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}const h9=(n,e)=>{if(n.startsWith("RS")||n.startsWith("PS")){const{modulusLength:t}=e.algorithm;if(typeof t!="number"||t<2048)throw new TypeError(`${n} requires key modulusLength to be 2048 bits or larger`)}};function tm(n){return Md(n)&&typeof n.kty=="string"}function p9(n){return n.kty!=="oct"&&typeof n.d=="string"}function m9(n){return n.kty!=="oct"&&typeof n.d>"u"}function g9(n){return tm(n)&&n.kty==="oct"&&typeof n.k=="string"}function y9(n){let e,t;switch(n.kty){case"RSA":{switch(n.alg){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:`SHA-${n.alg.slice(-3)}`},t=n.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${n.alg.slice(-3)}`},t=n.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:`SHA-${parseInt(n.alg.slice(-3),10)||1}`},t=n.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new Du('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(n.alg){case"ES256":e={name:"ECDSA",namedCurve:"P-256"},t=n.d?["sign"]:["verify"];break;case"ES384":e={name:"ECDSA",namedCurve:"P-384"},t=n.d?["sign"]:["verify"];break;case"ES512":e={name:"ECDSA",namedCurve:"P-521"},t=n.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:"ECDH",namedCurve:n.crv},t=n.d?["deriveBits"]:[];break;default:throw new Du('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(n.alg){case"EdDSA":e={name:n.crv},t=n.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:n.crv},t=n.d?["deriveBits"]:[];break;default:throw new Du('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new Du('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:e,keyUsages:t}}const d3=async n=>{if(!n.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:e,keyUsages:t}=y9(n),r=[e,n.ext??!1,n.key_ops??t],i={...n};return delete i.alg,delete i.use,RM.subtle.importKey("jwk",i,...r)},h3=n=>zc(n);let Oh,Dh;const p3=n=>(n==null?void 0:n[Symbol.toStringTag])==="KeyObject",Bx=async(n,e,t,r,i=!1)=>{let s=n.get(e);if(s!=null&&s[r])return s[r];const o=await d3({...t,alg:r});return i&&Object.freeze(e),s?s[r]=o:n.set(e,{[r]:o}),o},v9=(n,e)=>{if(p3(n)){let t=n.export({format:"jwk"});return delete t.d,delete t.dp,delete t.dq,delete t.p,delete t.q,delete t.qi,t.k?h3(t.k):(Dh||(Dh=new WeakMap),Bx(Dh,n,t,e))}return tm(n)?n.k?zc(n.k):(Dh||(Dh=new WeakMap),Bx(Dh,n,n,e,!0)):n},_9=(n,e)=>{if(p3(n)){let t=n.export({format:"jwk"});return t.k?h3(t.k):(Oh||(Oh=new WeakMap),Bx(Oh,n,t,e))}return tm(n)?n.k?zc(n.k):(Oh||(Oh=new WeakMap),Bx(Oh,n,n,e,!0)):n},x9={normalizePublicKey:v9,normalizePrivateKey:_9};async function w9(n,e){if(!Md(n))throw new TypeError("JWK must be an object");switch(e||(e=n.alg),n.kty){case"oct":if(typeof n.k!="string"||!n.k)throw new TypeError('missing "k" (Key Value) Parameter value');return zc(n.k);case"RSA":if(n.oth!==void 0)throw new Du('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return d3({...n,alg:e});default:throw new Du('Unsupported "kty" (Key Type) Parameter value')}}const _p=n=>n==null?void 0:n[Symbol.toStringTag],Qb=(n,e,t)=>{var r,i;if(e.use!==void 0&&e.use!=="sig")throw new TypeError("Invalid key for this operation, when present its use must be sig");if(e.key_ops!==void 0&&((i=(r=e.key_ops).includes)==null?void 0:i.call(r,t))!==!0)throw new TypeError(`Invalid key for this operation, when present its key_ops must include ${t}`);if(e.alg!==void 0&&e.alg!==n)throw new TypeError(`Invalid key for this operation, when present its alg must be ${n}`);return!0},S9=(n,e,t,r)=>{if(!(e instanceof Uint8Array)){if(r&&tm(e)){if(g9(e)&&Qb(n,e,t))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!f3(e))throw new TypeError(c3(n,e,...zx,"Uint8Array",r?"JSON Web Key":null));if(e.type!=="secret")throw new TypeError(`${_p(e)} instances for symmetric algorithms must be of type "secret"`)}},E9=(n,e,t,r)=>{if(r&&tm(e))switch(t){case"sign":if(p9(e)&&Qb(n,e,t))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"verify":if(m9(e)&&Qb(n,e,t))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!f3(e))throw new TypeError(c3(n,e,...zx,r?"JSON Web Key":null));if(e.type==="secret")throw new TypeError(`${_p(e)} instances for asymmetric algorithms must not be of type "secret"`);if(t==="sign"&&e.type==="public")throw new TypeError(`${_p(e)} instances for asymmetric algorithm signing must be of type "private"`);if(t==="decrypt"&&e.type==="public")throw new TypeError(`${_p(e)} instances for asymmetric algorithm decryption must be of type "private"`);if(e.algorithm&&t==="verify"&&e.type==="private")throw new TypeError(`${_p(e)} instances for asymmetric algorithm verifying must be of type "public"`);if(e.algorithm&&t==="encrypt"&&e.type==="private")throw new TypeError(`${_p(e)} instances for asymmetric algorithm encryption must be of type "public"`)};function m3(n,e,t,r){e.startsWith("HS")||e==="dir"||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?S9(e,t,r,n):E9(e,t,r,n)}m3.bind(void 0,!1);const dR=m3.bind(void 0,!0);function b9(n,e,t,r,i){if(i.crit!==void 0&&(r==null?void 0:r.crit)===void 0)throw new n('"crit" (Critical) Header Parameter MUST be integrity protected');if(!r||r.crit===void 0)return new Set;if(!Array.isArray(r.crit)||r.crit.length===0||r.crit.some(o=>typeof o!="string"||o.length===0))throw new n('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let s;s=e;for(const o of r.crit){if(!s.has(o))throw new Du(`Extension Header Parameter "${o}" is not recognized`);if(i[o]===void 0)throw new n(`Extension Header Parameter "${o}" is missing`);if(s.get(o)&&r[o]===void 0)throw new n(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(r.crit)}function T9(n,e){const t=`SHA-${n.slice(-3)}`;switch(n){case"HS256":case"HS384":case"HS512":return{hash:t,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:t,name:"RSA-PSS",saltLength:n.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:t,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:t,name:"ECDSA",namedCurve:e.namedCurve};case"EdDSA":return{name:e.name};default:throw new Du(`alg ${n} is not supported either by JOSE or your javascript runtime`)}}async function M9(n,e,t){if(e=await x9.normalizePublicKey(e,n),a3(e))return c9(e,n,t),e;if(e instanceof Uint8Array){if(!n.startsWith("HS"))throw new TypeError(fR(e,...zx));return RM.subtle.importKey("raw",e,{hash:`SHA-${n.slice(-3)}`,name:"HMAC"},!1,[t])}throw new TypeError(fR(e,...zx,"Uint8Array","JSON Web Key"))}const A9=async(n,e,t,r)=>{const i=await M9(n,e,"verify");h9(n,i);const s=T9(n,i.algorithm);try{return await RM.subtle.verify(s,i,t,r)}catch{return!1}};async function C9(n,e,t){if(!Md(n))throw new Fi("Flattened JWS must be an object");if(n.protected===void 0&&n.header===void 0)throw new Fi('Flattened JWS must have either of the "protected" or "header" members');if(n.protected!==void 0&&typeof n.protected!="string")throw new Fi("JWS Protected Header incorrect type");if(n.payload===void 0)throw new Fi("JWS Payload missing");if(typeof n.signature!="string")throw new Fi("JWS Signature missing or incorrect type");if(n.header!==void 0&&!Md(n.header))throw new Fi("JWS Unprotected Header incorrect type");let r={};if(n.protected)try{const y=zc(n.protected);r=JSON.parse(em.decode(y))}catch{throw new Fi("JWS Protected Header is invalid")}if(!f9(r,n.header))throw new Fi("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const i={...r,...n.header},s=b9(Fi,new Map([["b64",!0]]),t==null?void 0:t.crit,r,i);let o=!0;if(s.has("b64")&&(o=r.b64,typeof o!="boolean"))throw new Fi('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:a}=i;if(typeof a!="string"||!a)throw new Fi('JWS "alg" (Algorithm) Header Parameter missing or invalid');if(o){if(typeof n.payload!="string")throw new Fi("JWS Payload must be a string")}else if(typeof n.payload!="string"&&!(n.payload instanceof Uint8Array))throw new Fi("JWS Payload must be a string or an Uint8Array instance");let l=!1;typeof e=="function"?(e=await e(r,n),l=!0,dR(a,e,"verify"),tm(e)&&(e=await w9(e,a))):dR(a,e,"verify");const u=ZW(v0.encode(n.protected??""),v0.encode("."),typeof n.payload=="string"?v0.encode(n.payload):n.payload);let c;try{c=zc(n.signature)}catch{throw new Fi("Failed to base64url decode the signature")}if(!await A9(a,e,c,u))throw new l3;let h;if(o)try{h=zc(n.payload)}catch{throw new Fi("Failed to base64url decode the payload")}else typeof n.payload=="string"?h=v0.encode(n.payload):h=n.payload;const g={payload:h};return n.protected!==void 0&&(g.protectedHeader=r),n.header!==void 0&&(g.unprotectedHeader=n.header),l?{...g,key:e}:g}async function R9(n,e,t){if(n instanceof Uint8Array&&(n=em.decode(n)),typeof n!="string")throw new Fi("Compact JWS must be a string or Uint8Array");const{0:r,1:i,2:s,length:o}=n.split(".");if(o!==3)throw new Fi("Invalid Compact JWS");const a=await C9({payload:i,protected:r,signature:s},e,t),l={payload:a.payload,protectedHeader:a.protectedHeader};return typeof e=="function"?{...l,key:a.key}:l}const P9=n=>Math.floor(n.getTime()/1e3),g3=60,y3=g3*60,PM=y3*24,I9=PM*7,L9=PM*365.25,N9=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,hR=n=>{const e=N9.exec(n);if(!e||e[4]&&e[1])throw new TypeError("Invalid time period format");const t=parseFloat(e[2]),r=e[3].toLowerCase();let i;switch(r){case"sec":case"secs":case"second":case"seconds":case"s":i=Math.round(t);break;case"minute":case"minutes":case"min":case"mins":case"m":i=Math.round(t*g3);break;case"hour":case"hours":case"hr":case"hrs":case"h":i=Math.round(t*y3);break;case"day":case"days":case"d":i=Math.round(t*PM);break;case"week":case"weeks":case"w":i=Math.round(t*I9);break;default:i=Math.round(t*L9);break}return e[1]==="-"||e[4]==="ago"?-i:i},pR=n=>n.toLowerCase().replace(/^application\//,""),O9=(n,e)=>typeof n=="string"?e.includes(n):Array.isArray(n)?e.some(Set.prototype.has.bind(new Set(n))):!1,D9=(n,e,t={})=>{let r;try{r=JSON.parse(em.decode(e))}catch{}if(!Md(r))throw new El("JWT Claims Set must be a top-level JSON object");const{typ:i}=t;if(i&&(typeof n.typ!="string"||pR(n.typ)!==pR(i)))throw new ka('unexpected "typ" JWT header value',r,"typ","check_failed");const{requiredClaims:s=[],issuer:o,subject:a,audience:l,maxTokenAge:u}=t,c=[...s];u!==void 0&&c.push("iat"),l!==void 0&&c.push("aud"),a!==void 0&&c.push("sub"),o!==void 0&&c.push("iss");for(const y of new Set(c.reverse()))if(!(y in r))throw new ka(`missing required "${y}" claim`,r,y,"missing");if(o&&!(Array.isArray(o)?o:[o]).includes(r.iss))throw new ka('unexpected "iss" claim value',r,"iss","check_failed");if(a&&r.sub!==a)throw new ka('unexpected "sub" claim value',r,"sub","check_failed");if(l&&!O9(r.aud,typeof l=="string"?[l]:l))throw new ka('unexpected "aud" claim value',r,"aud","check_failed");let d;switch(typeof t.clockTolerance){case"string":d=hR(t.clockTolerance);break;case"number":d=t.clockTolerance;break;case"undefined":d=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:h}=t,g=P9(h||new Date);if((r.iat!==void 0||u)&&typeof r.iat!="number")throw new ka('"iat" claim must be a number',r,"iat","invalid");if(r.nbf!==void 0){if(typeof r.nbf!="number")throw new ka('"nbf" claim must be a number',r,"nbf","invalid");if(r.nbf>g+d)throw new ka('"nbf" claim timestamp check failed',r,"nbf","check_failed")}if(r.exp!==void 0){if(typeof r.exp!="number")throw new ka('"exp" claim must be a number',r,"exp","invalid");if(r.exp<=g-d)throw new Zb('"exp" claim timestamp check failed',r,"exp","check_failed")}if(u){const y=g-r.iat,E=typeof u=="number"?u:hR(u);if(y-d>E)throw new Zb('"iat" claim timestamp check failed (too far in the past)',r,"iat","check_failed");if(y<0-d)throw new ka('"iat" claim timestamp check failed (it should be in the past)',r,"iat","check_failed")}return r};async function k9(n,e,t){var o;const r=await R9(n,e,t);if((o=r.protectedHeader.crit)!=null&&o.includes("b64")&&r.protectedHeader.b64===!1)throw new El("JWTs MUST NOT use unencoded payload");const s={payload:D9(r.protectedHeader,r.payload,t),protectedHeader:r.protectedHeader};return typeof e=="function"?{...s,key:r.key}:s}const v3=zc;function IM(n){let e;if(typeof n=="string"){const t=n.split(".");(t.length===3||t.length===5)&&([e]=t)}else if(typeof n=="object"&&n)if("protected"in n)e=n.protected;else throw new TypeError("Token does not contain a Protected Header");try{if(typeof e!="string"||!e)throw new Error;const t=JSON.parse(em.decode(v3(e)));if(!Md(t))throw new Error;return t}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}function LM(n){if(typeof n!="string")throw new El("JWTs must use Compact JWS serialization, JWT must be a string");const{1:e,length:t}=n.split(".");if(t===5)throw new El("Only JWTs using Compact JWS serialization can be decoded");if(t!==3)throw new El("Invalid JWT");if(!e)throw new El("JWTs must contain a payload");let r;try{r=v3(e)}catch{throw new El("Failed to base64url decode the payload")}let i;try{i=JSON.parse(em.decode(r))}catch{throw new El("Failed to parse the decoded payload as JSON")}if(!Md(i))throw new El("Invalid JWT Claims Set");return i}var Zg=(n=>(n.Anchor="Trust Anchor",n.Intermediate="Intermediate",n.Leaf="Leaf",n.StartNode="StartNode",n.Undiscovered="Undiscovered",n))(Zg||{});const _3=n=>{if(n.kty==="RSA")return{kid:n.kid,kty:n.kty,key_ops:n.key_ops,n:n.n,e:n.e,alg:n.alg};if(n.kty==="EC")return{kid:n.kid,kty:n.kty,key_ops:n.key_ops,x:n.x,y:n.y,crv:n.crv,alg:n.alg};throw new Error(`Unsupported key type ${n.kty}`)},U9=n=>{var e,t;return(t=(e=n.metadata)==null?void 0:e.federation_entity)==null?void 0:t.federation_fetch_endpoint},F9=n=>!!U9(n),z9=n=>n.authority_hints,B9=n=>z9(n),H9=n=>Object.keys(n.metadata),$9=n=>{if(!F9(n.ec.payload)){n.type=Zg.Leaf;return}if(B9(n.ec.payload)){n.type=Zg.Intermediate;return}n.type=Zg.Anchor},G9=n=>!(!n||!Object.hasOwnProperty.call(n,"nodes")||!Object.hasOwnProperty.call(n,"edges")||n.nodes.find(r=>typeof r!="string")||n.edges.find(r=>typeof r.source!="string"||typeof r.target!="string")),x3=async(n,e)=>{try{return await k9(n,e),!0}catch{return!1}},w3=n=>n.payload.exp<Date.now()/1e3,V9=async n=>{const e=n.header.kid;if(!e)return n.valid=!1,n.invalidReason="No kid in header",!1;const t=n.payload.jwks.keys.find(s=>s.kid===e);return t?await x3(n.jwt,t)?w3(n)?(n.valid=!1,n.invalidReason="Expired",!1):(n.valid=!0,!0):(n.valid=!1,n.invalidReason="Invalid JWT",!1):(n.valid=!1,n.invalidReason="No key found",!1)},j9=async(n,e)=>{const t=n.header.kid;if(!t)return!1;const r=e.payload.jwks.keys.find(o=>o.kid===t);if(!r)return!1;const i=await x3(n.jwt,r),s=w3(n);return n.valid=i&&!s,(!i||!s)&&(n.invalidReason=`${i?"Invalid JWT":""} ${i||!s?";":""} ${s?"":"Expired"}`),i&&!s},W9={"Trust Anchor":"#FF6347",Intermediate:"#1E90FF",Leaf:"#CBDFAC",StartNode:"#FF8C00",Undiscovered:"#696969"},q9=n=>({id:n.ec.entity,label:n.ec.entity,fill:W9[n.type],info:n}),Gg=(n,e)=>{const t={id:`${n.ec.entity}-${e.ec.entity}`,source:n.ec.entity,target:e.ec.entity,label:`${n.ec.entity}->${e.ec.entity}`,subStatement:e.ec.subordinates[n.ec.entity],fill:"#c6c6c6"};return t.subStatement||(t.fill="#B8252A"),t},X9=(n,e)=>{if(e.nodes.find(s=>s.id===n.ec.entity))return e;const r=q9(n);return{nodes:[...e.nodes,r],edges:e.edges}},mR=(n,e)=>{const t=n.nodes.filter(i=>er(i.id)!==er(e)),r=n.edges.filter(i=>er(i.source)!==er(e)&&er(i.target)!==er(e));return{nodes:t,edges:r}},Y9=n=>Object.hasOwnProperty.call(n,"source")&&Object.hasOwnProperty.call(n,"target"),mS=n=>!Y9(n),K9=(n,e)=>Array.isArray(e)?e.reduce((t,r)=>mR(t,r),n):mR(n,e),J9=(n,e,t)=>!n.edges.some(r=>er(r.source)===er(e)&&er(r.target)===er(t)||er(r.target)===er(e)&&er(r.source)===er(t));var x0={exports:{}},gS={},gu={},Ff={},yS={},vS={},_S={},gR;function Hx(){return gR||(gR=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.regexpCode=n.getEsmExportName=n.getProperty=n.safeStringify=n.stringify=n.strConcat=n.addCodeArg=n.str=n._=n.nil=n._Code=n.Name=n.IDENTIFIER=n._CodeOrName=void 0;class e{}n._CodeOrName=e,n.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class t extends e{constructor(v){if(super(),!n.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}n.Name=t;class r extends e{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((S,T)=>`${S}${T}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((S,T)=>(T instanceof t&&(S[T.str]=(S[T.str]||0)+1),S),{})}}n._Code=r,n.nil=new r("");function i(m,...v){const S=[m[0]];let T=0;for(;T<v.length;)a(S,v[T]),S.push(m[++T]);return new r(S)}n._=i;const s=new r("+");function o(m,...v){const S=[g(m[0])];let T=0;for(;T<v.length;)S.push(s),a(S,v[T]),S.push(s,g(m[++T]));return l(S),new r(S)}n.str=o;function a(m,v){v instanceof r?m.push(...v._items):v instanceof t?m.push(v):m.push(d(v))}n.addCodeArg=a;function l(m){let v=1;for(;v<m.length-1;){if(m[v]===s){const S=u(m[v-1],m[v+1]);if(S!==void 0){m.splice(v-1,3,S);continue}m[v++]="+"}v++}}function u(m,v){if(v==='""')return m;if(m==='""')return v;if(typeof m=="string")return v instanceof t||m[m.length-1]!=='"'?void 0:typeof v!="string"?`${m.slice(0,-1)}${v}"`:v[0]==='"'?m.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(m instanceof t))return`"${m}${v.slice(1)}`}function c(m,v){return v.emptyStr()?m:m.emptyStr()?v:o`${m}${v}`}n.strConcat=c;function d(m){return typeof m=="number"||typeof m=="boolean"||m===null?m:g(Array.isArray(m)?m.join(","):m)}function h(m){return new r(g(m))}n.stringify=h;function g(m){return JSON.stringify(m).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}n.safeStringify=g;function y(m){return typeof m=="string"&&n.IDENTIFIER.test(m)?new r(`.${m}`):i`[${m}]`}n.getProperty=y;function E(m){if(typeof m=="string"&&n.IDENTIFIER.test(m))return new r(`${m}`);throw new Error(`CodeGen: invalid export name: ${m}, use explicit $id name mapping`)}n.getEsmExportName=E;function _(m){return new r(m.toString())}n.regexpCode=_}(_S)),_S}var xS={},yR;function vR(){return yR||(yR=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ValueScope=n.ValueScopeName=n.Scope=n.varKinds=n.UsedValueState=void 0;const e=Hx();class t extends Error{constructor(u){super(`CodeGen: "code" for ${u} not defined`),this.value=u.value}}var r;(function(l){l[l.Started=0]="Started",l[l.Completed=1]="Completed"})(r||(n.UsedValueState=r={})),n.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class i{constructor({prefixes:u,parent:c}={}){this._names={},this._prefixes=u,this._parent=c}toName(u){return u instanceof e.Name?u:this.name(u)}name(u){return new e.Name(this._newName(u))}_newName(u){const c=this._names[u]||this._nameGroup(u);return`${u}${c.index++}`}_nameGroup(u){var c,d;if(!((d=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||d===void 0)&&d.has(u)||this._prefixes&&!this._prefixes.has(u))throw new Error(`CodeGen: prefix "${u}" is not allowed in this scope`);return this._names[u]={prefix:u,index:0}}}n.Scope=i;class s extends e.Name{constructor(u,c){super(c),this.prefix=u}setValue(u,{property:c,itemIndex:d}){this.value=u,this.scopePath=(0,e._)`.${new e.Name(c)}[${d}]`}}n.ValueScopeName=s;const o=(0,e._)`\n`;class a extends i{constructor(u){super(u),this._values={},this._scope=u.scope,this.opts={...u,_n:u.lines?o:e.nil}}get(){return this._scope}name(u){return new s(u,this._newName(u))}value(u,c){var d;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const h=this.toName(u),{prefix:g}=h,y=(d=c.key)!==null&&d!==void 0?d:c.ref;let E=this._values[g];if(E){const v=E.get(y);if(v)return v}else E=this._values[g]=new Map;E.set(y,h);const _=this._scope[g]||(this._scope[g]=[]),m=_.length;return _[m]=c.ref,h.setValue(c,{property:g,itemIndex:m}),h}getValue(u,c){const d=this._values[u];if(d)return d.get(c)}scopeRefs(u,c=this._values){return this._reduceValues(c,d=>{if(d.scopePath===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return(0,e._)`${u}${d.scopePath}`})}scopeCode(u=this._values,c,d){return this._reduceValues(u,h=>{if(h.value===void 0)throw new Error(`CodeGen: name "${h}" has no value`);return h.value.code},c,d)}_reduceValues(u,c,d={},h){let g=e.nil;for(const y in u){const E=u[y];if(!E)continue;const _=d[y]=d[y]||new Map;E.forEach(m=>{if(_.has(m))return;_.set(m,r.Started);let v=c(m);if(v){const S=this.opts.es5?n.varKinds.var:n.varKinds.const;g=(0,e._)`${g}${S} ${m} = ${v};${this.opts._n}`}else if(v=h==null?void 0:h(m))g=(0,e._)`${g}${v}${this.opts._n}`;else throw new t(m);_.set(m,r.Completed)})}return g}}n.ValueScope=a}(xS)),xS}var _R;function gn(){return _R||(_R=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.or=n.and=n.not=n.CodeGen=n.operators=n.varKinds=n.ValueScopeName=n.ValueScope=n.Scope=n.Name=n.regexpCode=n.stringify=n.getProperty=n.nil=n.strConcat=n.str=n._=void 0;const e=Hx(),t=vR();var r=Hx();Object.defineProperty(n,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(n,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(n,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(n,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(n,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(n,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(n,"Name",{enumerable:!0,get:function(){return r.Name}});var i=vR();Object.defineProperty(n,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(n,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(n,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(n,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),n.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class s{optimizeNodes(){return this}optimizeNames(B,J){return this}}class o extends s{constructor(B,J,le){super(),this.varKind=B,this.name=J,this.rhs=le}render({es5:B,_n:J}){const le=B?t.varKinds.var:this.varKind,pe=this.rhs===void 0?"":` = ${this.rhs}`;return`${le} ${this.name}${pe};`+J}optimizeNames(B,J){if(B[this.name.str])return this.rhs&&(this.rhs=ee(this.rhs,B,J)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(B,J,le){super(),this.lhs=B,this.rhs=J,this.sideEffects=le}render({_n:B}){return`${this.lhs} = ${this.rhs};`+B}optimizeNames(B,J){if(!(this.lhs instanceof e.Name&&!B[this.lhs.str]&&!this.sideEffects))return this.rhs=ee(this.rhs,B,J),this}get names(){const B=this.lhs instanceof e.Name?{}:{...this.lhs.names};return U(B,this.rhs)}}class l extends a{constructor(B,J,le,pe){super(B,le,pe),this.op=J}render({_n:B}){return`${this.lhs} ${this.op}= ${this.rhs};`+B}}class u extends s{constructor(B){super(),this.label=B,this.names={}}render({_n:B}){return`${this.label}:`+B}}class c extends s{constructor(B){super(),this.label=B,this.names={}}render({_n:B}){return`break${this.label?` ${this.label}`:""};`+B}}class d extends s{constructor(B){super(),this.error=B}render({_n:B}){return`throw ${this.error};`+B}get names(){return this.error.names}}class h extends s{constructor(B){super(),this.code=B}render({_n:B}){return`${this.code};`+B}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(B,J){return this.code=ee(this.code,B,J),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class g extends s{constructor(B=[]){super(),this.nodes=B}render(B){return this.nodes.reduce((J,le)=>J+le.render(B),"")}optimizeNodes(){const{nodes:B}=this;let J=B.length;for(;J--;){const le=B[J].optimizeNodes();Array.isArray(le)?B.splice(J,1,...le):le?B[J]=le:B.splice(J,1)}return B.length>0?this:void 0}optimizeNames(B,J){const{nodes:le}=this;let pe=le.length;for(;pe--;){const he=le[pe];he.optimizeNames(B,J)||(re(B,he.names),le.splice(pe,1))}return le.length>0?this:void 0}get names(){return this.nodes.reduce((B,J)=>$(B,J.names),{})}}class y extends g{render(B){return"{"+B._n+super.render(B)+"}"+B._n}}class E extends g{}class _ extends y{}_.kind="else";class m extends y{constructor(B,J){super(J),this.condition=B}render(B){let J=`if(${this.condition})`+super.render(B);return this.else&&(J+="else "+this.else.render(B)),J}optimizeNodes(){super.optimizeNodes();const B=this.condition;if(B===!0)return this.nodes;let J=this.else;if(J){const le=J.optimizeNodes();J=this.else=Array.isArray(le)?new _(le):le}if(J)return B===!1?J instanceof m?J:J.nodes:this.nodes.length?this:new m(ne(B),J instanceof m?[J]:J.nodes);if(!(B===!1||!this.nodes.length))return this}optimizeNames(B,J){var le;if(this.else=(le=this.else)===null||le===void 0?void 0:le.optimizeNames(B,J),!!(super.optimizeNames(B,J)||this.else))return this.condition=ee(this.condition,B,J),this}get names(){const B=super.names;return U(B,this.condition),this.else&&$(B,this.else.names),B}}m.kind="if";class v extends y{}v.kind="for";class S extends v{constructor(B){super(),this.iteration=B}render(B){return`for(${this.iteration})`+super.render(B)}optimizeNames(B,J){if(super.optimizeNames(B,J))return this.iteration=ee(this.iteration,B,J),this}get names(){return $(super.names,this.iteration.names)}}class T extends v{constructor(B,J,le,pe){super(),this.varKind=B,this.name=J,this.from=le,this.to=pe}render(B){const J=B.es5?t.varKinds.var:this.varKind,{name:le,from:pe,to:he}=this;return`for(${J} ${le}=${pe}; ${le}<${he}; ${le}++)`+super.render(B)}get names(){const B=U(super.names,this.from);return U(B,this.to)}}class M extends v{constructor(B,J,le,pe){super(),this.loop=B,this.varKind=J,this.name=le,this.iterable=pe}render(B){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(B)}optimizeNames(B,J){if(super.optimizeNames(B,J))return this.iterable=ee(this.iterable,B,J),this}get names(){return $(super.names,this.iterable.names)}}class A extends y{constructor(B,J,le){super(),this.name=B,this.args=J,this.async=le}render(B){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(B)}}A.kind="func";class R extends g{render(B){return"return "+super.render(B)}}R.kind="return";class O extends y{render(B){let J="try"+super.render(B);return this.catch&&(J+=this.catch.render(B)),this.finally&&(J+=this.finally.render(B)),J}optimizeNodes(){var B,J;return super.optimizeNodes(),(B=this.catch)===null||B===void 0||B.optimizeNodes(),(J=this.finally)===null||J===void 0||J.optimizeNodes(),this}optimizeNames(B,J){var le,pe;return super.optimizeNames(B,J),(le=this.catch)===null||le===void 0||le.optimizeNames(B,J),(pe=this.finally)===null||pe===void 0||pe.optimizeNames(B,J),this}get names(){const B=super.names;return this.catch&&$(B,this.catch.names),this.finally&&$(B,this.finally.names),B}}class I extends y{constructor(B){super(),this.error=B}render(B){return`catch(${this.error})`+super.render(B)}}I.kind="catch";class k extends y{render(B){return"finally"+super.render(B)}}k.kind="finally";class G{constructor(B,J={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...J,_n:J.lines?`
`:""},this._extScope=B,this._scope=new t.Scope({parent:B}),this._nodes=[new E]}toString(){return this._root.render(this.opts)}name(B){return this._scope.name(B)}scopeName(B){return this._extScope.name(B)}scopeValue(B,J){const le=this._extScope.value(B,J);return(this._values[le.prefix]||(this._values[le.prefix]=new Set)).add(le),le}getScopeValue(B,J){return this._extScope.getValue(B,J)}scopeRefs(B){return this._extScope.scopeRefs(B,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(B,J,le,pe){const he=this._scope.toName(J);return le!==void 0&&pe&&(this._constants[he.str]=le),this._leafNode(new o(B,he,le)),he}const(B,J,le){return this._def(t.varKinds.const,B,J,le)}let(B,J,le){return this._def(t.varKinds.let,B,J,le)}var(B,J,le){return this._def(t.varKinds.var,B,J,le)}assign(B,J,le){return this._leafNode(new a(B,J,le))}add(B,J){return this._leafNode(new l(B,n.operators.ADD,J))}code(B){return typeof B=="function"?B():B!==e.nil&&this._leafNode(new h(B)),this}object(...B){const J=["{"];for(const[le,pe]of B)J.length>1&&J.push(","),J.push(le),(le!==pe||this.opts.es5)&&(J.push(":"),(0,e.addCodeArg)(J,pe));return J.push("}"),new e._Code(J)}if(B,J,le){if(this._blockNode(new m(B)),J&&le)this.code(J).else().code(le).endIf();else if(J)this.code(J).endIf();else if(le)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(B){return this._elseNode(new m(B))}else(){return this._elseNode(new _)}endIf(){return this._endBlockNode(m,_)}_for(B,J){return this._blockNode(B),J&&this.code(J).endFor(),this}for(B,J){return this._for(new S(B),J)}forRange(B,J,le,pe,he=this.opts.es5?t.varKinds.var:t.varKinds.let){const Ee=this._scope.toName(B);return this._for(new T(he,Ee,J,le),()=>pe(Ee))}forOf(B,J,le,pe=t.varKinds.const){const he=this._scope.toName(B);if(this.opts.es5){const Ee=J instanceof e.Name?J:this.var("_arr",J);return this.forRange("_i",0,(0,e._)`${Ee}.length`,_e=>{this.var(he,(0,e._)`${Ee}[${_e}]`),le(he)})}return this._for(new M("of",pe,he,J),()=>le(he))}forIn(B,J,le,pe=this.opts.es5?t.varKinds.var:t.varKinds.const){if(this.opts.ownProperties)return this.forOf(B,(0,e._)`Object.keys(${J})`,le);const he=this._scope.toName(B);return this._for(new M("in",pe,he,J),()=>le(he))}endFor(){return this._endBlockNode(v)}label(B){return this._leafNode(new u(B))}break(B){return this._leafNode(new c(B))}return(B){const J=new R;if(this._blockNode(J),this.code(B),J.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(R)}try(B,J,le){if(!J&&!le)throw new Error('CodeGen: "try" without "catch" and "finally"');const pe=new O;if(this._blockNode(pe),this.code(B),J){const he=this.name("e");this._currNode=pe.catch=new I(he),J(he)}return le&&(this._currNode=pe.finally=new k,this.code(le)),this._endBlockNode(I,k)}throw(B){return this._leafNode(new d(B))}block(B,J){return this._blockStarts.push(this._nodes.length),B&&this.code(B).endBlock(J),this}endBlock(B){const J=this._blockStarts.pop();if(J===void 0)throw new Error("CodeGen: not in self-balancing block");const le=this._nodes.length-J;if(le<0||B!==void 0&&le!==B)throw new Error(`CodeGen: wrong number of nodes: ${le} vs ${B} expected`);return this._nodes.length=J,this}func(B,J=e.nil,le,pe){return this._blockNode(new A(B,J,le)),pe&&this.code(pe).endFunc(),this}endFunc(){return this._endBlockNode(A)}optimize(B=1){for(;B-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(B){return this._currNode.nodes.push(B),this}_blockNode(B){this._currNode.nodes.push(B),this._nodes.push(B)}_endBlockNode(B,J){const le=this._currNode;if(le instanceof B||J&&le instanceof J)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${J?`${B.kind}/${J.kind}`:B.kind}"`)}_elseNode(B){const J=this._currNode;if(!(J instanceof m))throw new Error('CodeGen: "else" without "if"');return this._currNode=J.else=B,this}get _root(){return this._nodes[0]}get _currNode(){const B=this._nodes;return B[B.length-1]}set _currNode(B){const J=this._nodes;J[J.length-1]=B}}n.CodeGen=G;function $(Y,B){for(const J in B)Y[J]=(Y[J]||0)+(B[J]||0);return Y}function U(Y,B){return B instanceof e._CodeOrName?$(Y,B.names):Y}function ee(Y,B,J){if(Y instanceof e.Name)return le(Y);if(!pe(Y))return Y;return new e._Code(Y._items.reduce((he,Ee)=>(Ee instanceof e.Name&&(Ee=le(Ee)),Ee instanceof e._Code?he.push(...Ee._items):he.push(Ee),he),[]));function le(he){const Ee=J[he.str];return Ee===void 0||B[he.str]!==1?he:(delete B[he.str],Ee)}function pe(he){return he instanceof e._Code&&he._items.some(Ee=>Ee instanceof e.Name&&B[Ee.str]===1&&J[Ee.str]!==void 0)}}function re(Y,B){for(const J in B)Y[J]=(Y[J]||0)-(B[J]||0)}function ne(Y){return typeof Y=="boolean"||typeof Y=="number"||Y===null?!Y:(0,e._)`!${z(Y)}`}n.not=ne;const X=L(n.operators.AND);function q(...Y){return Y.reduce(X)}n.and=q;const K=L(n.operators.OR);function F(...Y){return Y.reduce(K)}n.or=F;function L(Y){return(B,J)=>B===e.nil?J:J===e.nil?B:(0,e._)`${z(B)} ${Y} ${z(J)}`}function z(Y){return Y instanceof e.Name?Y:(0,e._)`(${Y})`}}(vS)),vS}var mn={},xR;function Hn(){if(xR)return mn;xR=1,Object.defineProperty(mn,"__esModule",{value:!0}),mn.checkStrictMode=mn.getErrorPath=mn.Type=mn.useFunc=mn.setEvaluated=mn.evaluatedPropsToName=mn.mergeEvaluated=mn.eachItem=mn.unescapeJsonPointer=mn.escapeJsonPointer=mn.escapeFragment=mn.unescapeFragment=mn.schemaRefOrVal=mn.schemaHasRulesButRef=mn.schemaHasRules=mn.checkUnknownRules=mn.alwaysValidSchema=mn.toHash=void 0;const n=gn(),e=Hx();function t(M){const A={};for(const R of M)A[R]=!0;return A}mn.toHash=t;function r(M,A){return typeof A=="boolean"?A:Object.keys(A).length===0?!0:(i(M,A),!s(A,M.self.RULES.all))}mn.alwaysValidSchema=r;function i(M,A=M.schema){const{opts:R,self:O}=M;if(!R.strictSchema||typeof A=="boolean")return;const I=O.RULES.keywords;for(const k in A)I[k]||T(M,`unknown keyword: "${k}"`)}mn.checkUnknownRules=i;function s(M,A){if(typeof M=="boolean")return!M;for(const R in M)if(A[R])return!0;return!1}mn.schemaHasRules=s;function o(M,A){if(typeof M=="boolean")return!M;for(const R in M)if(R!=="$ref"&&A.all[R])return!0;return!1}mn.schemaHasRulesButRef=o;function a({topSchemaRef:M,schemaPath:A},R,O,I){if(!I){if(typeof R=="number"||typeof R=="boolean")return R;if(typeof R=="string")return(0,n._)`${R}`}return(0,n._)`${M}${A}${(0,n.getProperty)(O)}`}mn.schemaRefOrVal=a;function l(M){return d(decodeURIComponent(M))}mn.unescapeFragment=l;function u(M){return encodeURIComponent(c(M))}mn.escapeFragment=u;function c(M){return typeof M=="number"?`${M}`:M.replace(/~/g,"~0").replace(/\//g,"~1")}mn.escapeJsonPointer=c;function d(M){return M.replace(/~1/g,"/").replace(/~0/g,"~")}mn.unescapeJsonPointer=d;function h(M,A){if(Array.isArray(M))for(const R of M)A(R);else A(M)}mn.eachItem=h;function g({mergeNames:M,mergeToName:A,mergeValues:R,resultToName:O}){return(I,k,G,$)=>{const U=G===void 0?k:G instanceof n.Name?(k instanceof n.Name?M(I,k,G):A(I,k,G),G):k instanceof n.Name?(A(I,G,k),k):R(k,G);return $===n.Name&&!(U instanceof n.Name)?O(I,U):U}}mn.mergeEvaluated={props:g({mergeNames:(M,A,R)=>M.if((0,n._)`${R} !== true && ${A} !== undefined`,()=>{M.if((0,n._)`${A} === true`,()=>M.assign(R,!0),()=>M.assign(R,(0,n._)`${R} || {}`).code((0,n._)`Object.assign(${R}, ${A})`))}),mergeToName:(M,A,R)=>M.if((0,n._)`${R} !== true`,()=>{A===!0?M.assign(R,!0):(M.assign(R,(0,n._)`${R} || {}`),E(M,R,A))}),mergeValues:(M,A)=>M===!0?!0:{...M,...A},resultToName:y}),items:g({mergeNames:(M,A,R)=>M.if((0,n._)`${R} !== true && ${A} !== undefined`,()=>M.assign(R,(0,n._)`${A} === true ? true : ${R} > ${A} ? ${R} : ${A}`)),mergeToName:(M,A,R)=>M.if((0,n._)`${R} !== true`,()=>M.assign(R,A===!0?!0:(0,n._)`${R} > ${A} ? ${R} : ${A}`)),mergeValues:(M,A)=>M===!0?!0:Math.max(M,A),resultToName:(M,A)=>M.var("items",A)})};function y(M,A){if(A===!0)return M.var("props",!0);const R=M.var("props",(0,n._)`{}`);return A!==void 0&&E(M,R,A),R}mn.evaluatedPropsToName=y;function E(M,A,R){Object.keys(R).forEach(O=>M.assign((0,n._)`${A}${(0,n.getProperty)(O)}`,!0))}mn.setEvaluated=E;const _={};function m(M,A){return M.scopeValue("func",{ref:A,code:_[A.code]||(_[A.code]=new e._Code(A.code))})}mn.useFunc=m;var v;(function(M){M[M.Num=0]="Num",M[M.Str=1]="Str"})(v||(mn.Type=v={}));function S(M,A,R){if(M instanceof n.Name){const O=A===v.Num;return R?O?(0,n._)`"[" + ${M} + "]"`:(0,n._)`"['" + ${M} + "']"`:O?(0,n._)`"/" + ${M}`:(0,n._)`"/" + ${M}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return R?(0,n.getProperty)(M).toString():"/"+c(M)}mn.getErrorPath=S;function T(M,A,R=M.opts.strictSchema){if(R){if(A=`strict mode: ${A}`,R===!0)throw new Error(A);M.self.logger.warn(A)}}return mn.checkStrictMode=T,mn}var w0={},wR;function Zc(){if(wR)return w0;wR=1,Object.defineProperty(w0,"__esModule",{value:!0});const n=gn(),e={data:new n.Name("data"),valCxt:new n.Name("valCxt"),instancePath:new n.Name("instancePath"),parentData:new n.Name("parentData"),parentDataProperty:new n.Name("parentDataProperty"),rootData:new n.Name("rootData"),dynamicAnchors:new n.Name("dynamicAnchors"),vErrors:new n.Name("vErrors"),errors:new n.Name("errors"),this:new n.Name("this"),self:new n.Name("self"),scope:new n.Name("scope"),json:new n.Name("json"),jsonPos:new n.Name("jsonPos"),jsonLen:new n.Name("jsonLen"),jsonPart:new n.Name("jsonPart")};return w0.default=e,w0}var SR;function _1(){return SR||(SR=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.extendErrors=n.resetErrorsCount=n.reportExtraError=n.reportError=n.keyword$DataError=n.keywordError=void 0;const e=gn(),t=Hn(),r=Zc();n.keywordError={message:({keyword:_})=>(0,e.str)`must pass "${_}" keyword validation`},n.keyword$DataError={message:({keyword:_,schemaType:m})=>m?(0,e.str)`"${_}" keyword must be ${m} ($data)`:(0,e.str)`"${_}" keyword is invalid ($data)`};function i(_,m=n.keywordError,v,S){const{it:T}=_,{gen:M,compositeRule:A,allErrors:R}=T,O=d(_,m,v);S??(A||R)?l(M,O):u(T,(0,e._)`[${O}]`)}n.reportError=i;function s(_,m=n.keywordError,v){const{it:S}=_,{gen:T,compositeRule:M,allErrors:A}=S,R=d(_,m,v);l(T,R),M||A||u(S,r.default.vErrors)}n.reportExtraError=s;function o(_,m){_.assign(r.default.errors,m),_.if((0,e._)`${r.default.vErrors} !== null`,()=>_.if(m,()=>_.assign((0,e._)`${r.default.vErrors}.length`,m),()=>_.assign(r.default.vErrors,null)))}n.resetErrorsCount=o;function a({gen:_,keyword:m,schemaValue:v,data:S,errsCount:T,it:M}){if(T===void 0)throw new Error("ajv implementation error");const A=_.name("err");_.forRange("i",T,r.default.errors,R=>{_.const(A,(0,e._)`${r.default.vErrors}[${R}]`),_.if((0,e._)`${A}.instancePath === undefined`,()=>_.assign((0,e._)`${A}.instancePath`,(0,e.strConcat)(r.default.instancePath,M.errorPath))),_.assign((0,e._)`${A}.schemaPath`,(0,e.str)`${M.errSchemaPath}/${m}`),M.opts.verbose&&(_.assign((0,e._)`${A}.schema`,v),_.assign((0,e._)`${A}.data`,S))})}n.extendErrors=a;function l(_,m){const v=_.const("err",m);_.if((0,e._)`${r.default.vErrors} === null`,()=>_.assign(r.default.vErrors,(0,e._)`[${v}]`),(0,e._)`${r.default.vErrors}.push(${v})`),_.code((0,e._)`${r.default.errors}++`)}function u(_,m){const{gen:v,validateName:S,schemaEnv:T}=_;T.$async?v.throw((0,e._)`new ${_.ValidationError}(${m})`):(v.assign((0,e._)`${S}.errors`,m),v.return(!1))}const c={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function d(_,m,v){const{createErrors:S}=_.it;return S===!1?(0,e._)`{}`:h(_,m,v)}function h(_,m,v={}){const{gen:S,it:T}=_,M=[g(T,v),y(_,v)];return E(_,m,M),S.object(...M)}function g({errorPath:_},{instancePath:m}){const v=m?(0,e.str)`${_}${(0,t.getErrorPath)(m,t.Type.Str)}`:_;return[r.default.instancePath,(0,e.strConcat)(r.default.instancePath,v)]}function y({keyword:_,it:{errSchemaPath:m}},{schemaPath:v,parentSchema:S}){let T=S?m:(0,e.str)`${m}/${_}`;return v&&(T=(0,e.str)`${T}${(0,t.getErrorPath)(v,t.Type.Str)}`),[c.schemaPath,T]}function E(_,{params:m,message:v},S){const{keyword:T,data:M,schemaValue:A,it:R}=_,{opts:O,propertyName:I,topSchemaRef:k,schemaPath:G}=R;S.push([c.keyword,T],[c.params,typeof m=="function"?m(_):m||(0,e._)`{}`]),O.messages&&S.push([c.message,typeof v=="function"?v(_):v]),O.verbose&&S.push([c.schema,A],[c.parentSchema,(0,e._)`${k}${G}`],[r.default.data,M]),I&&S.push([c.propertyName,I])}}(yS)),yS}var ER;function Z9(){if(ER)return Ff;ER=1,Object.defineProperty(Ff,"__esModule",{value:!0}),Ff.boolOrEmptySchema=Ff.topBoolOrEmptySchema=void 0;const n=_1(),e=gn(),t=Zc(),r={message:"boolean schema is false"};function i(a){const{gen:l,schema:u,validateName:c}=a;u===!1?o(a,!1):typeof u=="object"&&u.$async===!0?l.return(t.default.data):(l.assign((0,e._)`${c}.errors`,null),l.return(!0))}Ff.topBoolOrEmptySchema=i;function s(a,l){const{gen:u,schema:c}=a;c===!1?(u.var(l,!1),o(a)):u.var(l,!0)}Ff.boolOrEmptySchema=s;function o(a,l){const{gen:u,data:c}=a,d={gen:u,keyword:"false schema",data:c,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:a};(0,n.reportError)(d,r,void 0,l)}return Ff}var Ki={},zf={},bR;function S3(){if(bR)return zf;bR=1,Object.defineProperty(zf,"__esModule",{value:!0}),zf.getRules=zf.isJSONType=void 0;const n=["string","number","integer","boolean","null","object","array"],e=new Set(n);function t(i){return typeof i=="string"&&e.has(i)}zf.isJSONType=t;function r(){const i={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...i,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},i.number,i.string,i.array,i.object],post:{rules:[]},all:{},keywords:{}}}return zf.getRules=r,zf}var yu={},TR;function E3(){if(TR)return yu;TR=1,Object.defineProperty(yu,"__esModule",{value:!0}),yu.shouldUseRule=yu.shouldUseGroup=yu.schemaHasRulesForType=void 0;function n({schema:r,self:i},s){const o=i.RULES.types[s];return o&&o!==!0&&e(r,o)}yu.schemaHasRulesForType=n;function e(r,i){return i.rules.some(s=>t(r,s))}yu.shouldUseGroup=e;function t(r,i){var s;return r[i.keyword]!==void 0||((s=i.definition.implements)===null||s===void 0?void 0:s.some(o=>r[o]!==void 0))}return yu.shouldUseRule=t,yu}var MR;function $x(){if(MR)return Ki;MR=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.reportTypeError=Ki.checkDataTypes=Ki.checkDataType=Ki.coerceAndCheckDataType=Ki.getJSONTypes=Ki.getSchemaTypes=Ki.DataType=void 0;const n=S3(),e=E3(),t=_1(),r=gn(),i=Hn();var s;(function(v){v[v.Correct=0]="Correct",v[v.Wrong=1]="Wrong"})(s||(Ki.DataType=s={}));function o(v){const S=a(v.type);if(S.includes("null")){if(v.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!S.length&&v.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');v.nullable===!0&&S.push("null")}return S}Ki.getSchemaTypes=o;function a(v){const S=Array.isArray(v)?v:v?[v]:[];if(S.every(n.isJSONType))return S;throw new Error("type must be JSONType or JSONType[]: "+S.join(","))}Ki.getJSONTypes=a;function l(v,S){const{gen:T,data:M,opts:A}=v,R=c(S,A.coerceTypes),O=S.length>0&&!(R.length===0&&S.length===1&&(0,e.schemaHasRulesForType)(v,S[0]));if(O){const I=y(S,M,A.strictNumbers,s.Wrong);T.if(I,()=>{R.length?d(v,S,R):_(v)})}return O}Ki.coerceAndCheckDataType=l;const u=new Set(["string","number","integer","boolean","null"]);function c(v,S){return S?v.filter(T=>u.has(T)||S==="array"&&T==="array"):[]}function d(v,S,T){const{gen:M,data:A,opts:R}=v,O=M.let("dataType",(0,r._)`typeof ${A}`),I=M.let("coerced",(0,r._)`undefined`);R.coerceTypes==="array"&&M.if((0,r._)`${O} == 'object' && Array.isArray(${A}) && ${A}.length == 1`,()=>M.assign(A,(0,r._)`${A}[0]`).assign(O,(0,r._)`typeof ${A}`).if(y(S,A,R.strictNumbers),()=>M.assign(I,A))),M.if((0,r._)`${I} !== undefined`);for(const G of T)(u.has(G)||G==="array"&&R.coerceTypes==="array")&&k(G);M.else(),_(v),M.endIf(),M.if((0,r._)`${I} !== undefined`,()=>{M.assign(A,I),h(v,I)});function k(G){switch(G){case"string":M.elseIf((0,r._)`${O} == "number" || ${O} == "boolean"`).assign(I,(0,r._)`"" + ${A}`).elseIf((0,r._)`${A} === null`).assign(I,(0,r._)`""`);return;case"number":M.elseIf((0,r._)`${O} == "boolean" || ${A} === null
              || (${O} == "string" && ${A} && ${A} == +${A})`).assign(I,(0,r._)`+${A}`);return;case"integer":M.elseIf((0,r._)`${O} === "boolean" || ${A} === null
              || (${O} === "string" && ${A} && ${A} == +${A} && !(${A} % 1))`).assign(I,(0,r._)`+${A}`);return;case"boolean":M.elseIf((0,r._)`${A} === "false" || ${A} === 0 || ${A} === null`).assign(I,!1).elseIf((0,r._)`${A} === "true" || ${A} === 1`).assign(I,!0);return;case"null":M.elseIf((0,r._)`${A} === "" || ${A} === 0 || ${A} === false`),M.assign(I,null);return;case"array":M.elseIf((0,r._)`${O} === "string" || ${O} === "number"
              || ${O} === "boolean" || ${A} === null`).assign(I,(0,r._)`[${A}]`)}}}function h({gen:v,parentData:S,parentDataProperty:T},M){v.if((0,r._)`${S} !== undefined`,()=>v.assign((0,r._)`${S}[${T}]`,M))}function g(v,S,T,M=s.Correct){const A=M===s.Correct?r.operators.EQ:r.operators.NEQ;let R;switch(v){case"null":return(0,r._)`${S} ${A} null`;case"array":R=(0,r._)`Array.isArray(${S})`;break;case"object":R=(0,r._)`${S} && typeof ${S} == "object" && !Array.isArray(${S})`;break;case"integer":R=O((0,r._)`!(${S} % 1) && !isNaN(${S})`);break;case"number":R=O();break;default:return(0,r._)`typeof ${S} ${A} ${v}`}return M===s.Correct?R:(0,r.not)(R);function O(I=r.nil){return(0,r.and)((0,r._)`typeof ${S} == "number"`,I,T?(0,r._)`isFinite(${S})`:r.nil)}}Ki.checkDataType=g;function y(v,S,T,M){if(v.length===1)return g(v[0],S,T,M);let A;const R=(0,i.toHash)(v);if(R.array&&R.object){const O=(0,r._)`typeof ${S} != "object"`;A=R.null?O:(0,r._)`!${S} || ${O}`,delete R.null,delete R.array,delete R.object}else A=r.nil;R.number&&delete R.integer;for(const O in R)A=(0,r.and)(A,g(O,S,T,M));return A}Ki.checkDataTypes=y;const E={message:({schema:v})=>`must be ${v}`,params:({schema:v,schemaValue:S})=>typeof v=="string"?(0,r._)`{type: ${v}}`:(0,r._)`{type: ${S}}`};function _(v){const S=m(v);(0,t.reportError)(S,E)}Ki.reportTypeError=_;function m(v){const{gen:S,data:T,schema:M}=v,A=(0,i.schemaRefOrVal)(v,M,"type");return{gen:S,keyword:"type",data:T,schema:M.type,schemaCode:A,schemaValue:A,parentSchema:M,params:{},it:v}}return Ki}var ig={},AR;function Q9(){if(AR)return ig;AR=1,Object.defineProperty(ig,"__esModule",{value:!0}),ig.assignDefaults=void 0;const n=gn(),e=Hn();function t(i,s){const{properties:o,items:a}=i.schema;if(s==="object"&&o)for(const l in o)r(i,l,o[l].default);else s==="array"&&Array.isArray(a)&&a.forEach((l,u)=>r(i,u,l.default))}ig.assignDefaults=t;function r(i,s,o){const{gen:a,compositeRule:l,data:u,opts:c}=i;if(o===void 0)return;const d=(0,n._)`${u}${(0,n.getProperty)(s)}`;if(l){(0,e.checkStrictMode)(i,`default is ignored for: ${d}`);return}let h=(0,n._)`${d} === undefined`;c.useDefaults==="empty"&&(h=(0,n._)`${h} || ${d} === null || ${d} === ""`),a.if(h,(0,n._)`${d} = ${(0,n.stringify)(o)}`)}return ig}var Ra={},Yn={},CR;function Ya(){if(CR)return Yn;CR=1,Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.validateUnion=Yn.validateArray=Yn.usePattern=Yn.callValidateCode=Yn.schemaProperties=Yn.allSchemaProperties=Yn.noPropertyInData=Yn.propertyInData=Yn.isOwnProperty=Yn.hasPropFunc=Yn.reportMissingProp=Yn.checkMissingProp=Yn.checkReportMissingProp=void 0;const n=gn(),e=Hn(),t=Zc(),r=Hn();function i(v,S){const{gen:T,data:M,it:A}=v;T.if(c(T,M,S,A.opts.ownProperties),()=>{v.setParams({missingProperty:(0,n._)`${S}`},!0),v.error()})}Yn.checkReportMissingProp=i;function s({gen:v,data:S,it:{opts:T}},M,A){return(0,n.or)(...M.map(R=>(0,n.and)(c(v,S,R,T.ownProperties),(0,n._)`${A} = ${R}`)))}Yn.checkMissingProp=s;function o(v,S){v.setParams({missingProperty:S},!0),v.error()}Yn.reportMissingProp=o;function a(v){return v.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,n._)`Object.prototype.hasOwnProperty`})}Yn.hasPropFunc=a;function l(v,S,T){return(0,n._)`${a(v)}.call(${S}, ${T})`}Yn.isOwnProperty=l;function u(v,S,T,M){const A=(0,n._)`${S}${(0,n.getProperty)(T)} !== undefined`;return M?(0,n._)`${A} && ${l(v,S,T)}`:A}Yn.propertyInData=u;function c(v,S,T,M){const A=(0,n._)`${S}${(0,n.getProperty)(T)} === undefined`;return M?(0,n.or)(A,(0,n.not)(l(v,S,T))):A}Yn.noPropertyInData=c;function d(v){return v?Object.keys(v).filter(S=>S!=="__proto__"):[]}Yn.allSchemaProperties=d;function h(v,S){return d(S).filter(T=>!(0,e.alwaysValidSchema)(v,S[T]))}Yn.schemaProperties=h;function g({schemaCode:v,data:S,it:{gen:T,topSchemaRef:M,schemaPath:A,errorPath:R},it:O},I,k,G){const $=G?(0,n._)`${v}, ${S}, ${M}${A}`:S,U=[[t.default.instancePath,(0,n.strConcat)(t.default.instancePath,R)],[t.default.parentData,O.parentData],[t.default.parentDataProperty,O.parentDataProperty],[t.default.rootData,t.default.rootData]];O.opts.dynamicRef&&U.push([t.default.dynamicAnchors,t.default.dynamicAnchors]);const ee=(0,n._)`${$}, ${T.object(...U)}`;return k!==n.nil?(0,n._)`${I}.call(${k}, ${ee})`:(0,n._)`${I}(${ee})`}Yn.callValidateCode=g;const y=(0,n._)`new RegExp`;function E({gen:v,it:{opts:S}},T){const M=S.unicodeRegExp?"u":"",{regExp:A}=S.code,R=A(T,M);return v.scopeValue("pattern",{key:R.toString(),ref:R,code:(0,n._)`${A.code==="new RegExp"?y:(0,r.useFunc)(v,A)}(${T}, ${M})`})}Yn.usePattern=E;function _(v){const{gen:S,data:T,keyword:M,it:A}=v,R=S.name("valid");if(A.allErrors){const I=S.let("valid",!0);return O(()=>S.assign(I,!1)),I}return S.var(R,!0),O(()=>S.break()),R;function O(I){const k=S.const("len",(0,n._)`${T}.length`);S.forRange("i",0,k,G=>{v.subschema({keyword:M,dataProp:G,dataPropType:e.Type.Num},R),S.if((0,n.not)(R),I)})}}Yn.validateArray=_;function m(v){const{gen:S,schema:T,keyword:M,it:A}=v;if(!Array.isArray(T))throw new Error("ajv implementation error");if(T.some(k=>(0,e.alwaysValidSchema)(A,k))&&!A.opts.unevaluated)return;const O=S.let("valid",!1),I=S.name("_valid");S.block(()=>T.forEach((k,G)=>{const $=v.subschema({keyword:M,schemaProp:G,compositeRule:!0},I);S.assign(O,(0,n._)`${O} || ${I}`),v.mergeValidEvaluated($,I)||S.if((0,n.not)(O))})),v.result(O,()=>v.reset(),()=>v.error(!0))}return Yn.validateUnion=m,Yn}var RR;function e7(){if(RR)return Ra;RR=1,Object.defineProperty(Ra,"__esModule",{value:!0}),Ra.validateKeywordUsage=Ra.validSchemaType=Ra.funcKeywordCode=Ra.macroKeywordCode=void 0;const n=gn(),e=Zc(),t=Ya(),r=_1();function i(h,g){const{gen:y,keyword:E,schema:_,parentSchema:m,it:v}=h,S=g.macro.call(v.self,_,m,v),T=u(y,E,S);v.opts.validateSchema!==!1&&v.self.validateSchema(S,!0);const M=y.name("valid");h.subschema({schema:S,schemaPath:n.nil,errSchemaPath:`${v.errSchemaPath}/${E}`,topSchemaRef:T,compositeRule:!0},M),h.pass(M,()=>h.error(!0))}Ra.macroKeywordCode=i;function s(h,g){var y;const{gen:E,keyword:_,schema:m,parentSchema:v,$data:S,it:T}=h;l(T,g);const M=!S&&g.compile?g.compile.call(T.self,m,v,T):g.validate,A=u(E,_,M),R=E.let("valid");h.block$data(R,O),h.ok((y=g.valid)!==null&&y!==void 0?y:R);function O(){if(g.errors===!1)G(),g.modifying&&o(h),$(()=>h.error());else{const U=g.async?I():k();g.modifying&&o(h),$(()=>a(h,U))}}function I(){const U=E.let("ruleErrs",null);return E.try(()=>G((0,n._)`await `),ee=>E.assign(R,!1).if((0,n._)`${ee} instanceof ${T.ValidationError}`,()=>E.assign(U,(0,n._)`${ee}.errors`),()=>E.throw(ee))),U}function k(){const U=(0,n._)`${A}.errors`;return E.assign(U,null),G(n.nil),U}function G(U=g.async?(0,n._)`await `:n.nil){const ee=T.opts.passContext?e.default.this:e.default.self,re=!("compile"in g&&!S||g.schema===!1);E.assign(R,(0,n._)`${U}${(0,t.callValidateCode)(h,A,ee,re)}`,g.modifying)}function $(U){var ee;E.if((0,n.not)((ee=g.valid)!==null&&ee!==void 0?ee:R),U)}}Ra.funcKeywordCode=s;function o(h){const{gen:g,data:y,it:E}=h;g.if(E.parentData,()=>g.assign(y,(0,n._)`${E.parentData}[${E.parentDataProperty}]`))}function a(h,g){const{gen:y}=h;y.if((0,n._)`Array.isArray(${g})`,()=>{y.assign(e.default.vErrors,(0,n._)`${e.default.vErrors} === null ? ${g} : ${e.default.vErrors}.concat(${g})`).assign(e.default.errors,(0,n._)`${e.default.vErrors}.length`),(0,r.extendErrors)(h)},()=>h.error())}function l({schemaEnv:h},g){if(g.async&&!h.$async)throw new Error("async keyword in sync schema")}function u(h,g,y){if(y===void 0)throw new Error(`keyword "${g}" failed to compile`);return h.scopeValue("keyword",typeof y=="function"?{ref:y}:{ref:y,code:(0,n.stringify)(y)})}function c(h,g,y=!1){return!g.length||g.some(E=>E==="array"?Array.isArray(h):E==="object"?h&&typeof h=="object"&&!Array.isArray(h):typeof h==E||y&&typeof h>"u")}Ra.validSchemaType=c;function d({schema:h,opts:g,self:y,errSchemaPath:E},_,m){if(Array.isArray(_.keyword)?!_.keyword.includes(m):_.keyword!==m)throw new Error("ajv implementation error");const v=_.dependencies;if(v!=null&&v.some(S=>!Object.prototype.hasOwnProperty.call(h,S)))throw new Error(`parent schema must have dependencies of ${m}: ${v.join(",")}`);if(_.validateSchema&&!_.validateSchema(h[m])){const T=`keyword "${m}" value is invalid at path "${E}": `+y.errorsText(_.validateSchema.errors);if(g.validateSchema==="log")y.logger.error(T);else throw new Error(T)}}return Ra.validateKeywordUsage=d,Ra}var vu={},PR;function t7(){if(PR)return vu;PR=1,Object.defineProperty(vu,"__esModule",{value:!0}),vu.extendSubschemaMode=vu.extendSubschemaData=vu.getSubschema=void 0;const n=gn(),e=Hn();function t(s,{keyword:o,schemaProp:a,schema:l,schemaPath:u,errSchemaPath:c,topSchemaRef:d}){if(o!==void 0&&l!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(o!==void 0){const h=s.schema[o];return a===void 0?{schema:h,schemaPath:(0,n._)`${s.schemaPath}${(0,n.getProperty)(o)}`,errSchemaPath:`${s.errSchemaPath}/${o}`}:{schema:h[a],schemaPath:(0,n._)`${s.schemaPath}${(0,n.getProperty)(o)}${(0,n.getProperty)(a)}`,errSchemaPath:`${s.errSchemaPath}/${o}/${(0,e.escapeFragment)(a)}`}}if(l!==void 0){if(u===void 0||c===void 0||d===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:l,schemaPath:u,topSchemaRef:d,errSchemaPath:c}}throw new Error('either "keyword" or "schema" must be passed')}vu.getSubschema=t;function r(s,o,{dataProp:a,dataPropType:l,data:u,dataTypes:c,propertyName:d}){if(u!==void 0&&a!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:h}=o;if(a!==void 0){const{errorPath:y,dataPathArr:E,opts:_}=o,m=h.let("data",(0,n._)`${o.data}${(0,n.getProperty)(a)}`,!0);g(m),s.errorPath=(0,n.str)`${y}${(0,e.getErrorPath)(a,l,_.jsPropertySyntax)}`,s.parentDataProperty=(0,n._)`${a}`,s.dataPathArr=[...E,s.parentDataProperty]}if(u!==void 0){const y=u instanceof n.Name?u:h.let("data",u,!0);g(y),d!==void 0&&(s.propertyName=d)}c&&(s.dataTypes=c);function g(y){s.data=y,s.dataLevel=o.dataLevel+1,s.dataTypes=[],o.definedProperties=new Set,s.parentData=o.data,s.dataNames=[...o.dataNames,y]}}vu.extendSubschemaData=r;function i(s,{jtdDiscriminator:o,jtdMetadata:a,compositeRule:l,createErrors:u,allErrors:c}){l!==void 0&&(s.compositeRule=l),u!==void 0&&(s.createErrors=u),c!==void 0&&(s.allErrors=c),s.jtdDiscriminator=o,s.jtdMetadata=a}return vu.extendSubschemaMode=i,vu}var Cs={},wS,IR;function b3(){return IR||(IR=1,wS=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!n(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}),wS}var SS={exports:{}},LR;function n7(){if(LR)return SS.exports;LR=1;var n=SS.exports=function(r,i,s){typeof i=="function"&&(s=i,i={}),s=i.cb||s;var o=typeof s=="function"?s:s.pre||function(){},a=s.post||function(){};e(i,o,a,r,"",r)};n.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},n.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},n.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},n.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function e(r,i,s,o,a,l,u,c,d,h){if(o&&typeof o=="object"&&!Array.isArray(o)){i(o,a,l,u,c,d,h);for(var g in o){var y=o[g];if(Array.isArray(y)){if(g in n.arrayKeywords)for(var E=0;E<y.length;E++)e(r,i,s,y[E],a+"/"+g+"/"+E,l,a,g,o,E)}else if(g in n.propsKeywords){if(y&&typeof y=="object")for(var _ in y)e(r,i,s,y[_],a+"/"+g+"/"+t(_),l,a,g,o,_)}else(g in n.keywords||r.allKeys&&!(g in n.skipKeywords))&&e(r,i,s,y,a+"/"+g,l,a,g,o)}s(o,a,l,u,c,d,h)}}function t(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}return SS.exports}var NR;function x1(){if(NR)return Cs;NR=1,Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.getSchemaRefs=Cs.resolveUrl=Cs.normalizeId=Cs._getFullPath=Cs.getFullPath=Cs.inlineRef=void 0;const n=Hn(),e=b3(),t=n7(),r=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function i(E,_=!0){return typeof E=="boolean"?!0:_===!0?!o(E):_?a(E)<=_:!1}Cs.inlineRef=i;const s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function o(E){for(const _ in E){if(s.has(_))return!0;const m=E[_];if(Array.isArray(m)&&m.some(o)||typeof m=="object"&&o(m))return!0}return!1}function a(E){let _=0;for(const m in E){if(m==="$ref")return 1/0;if(_++,!r.has(m)&&(typeof E[m]=="object"&&(0,n.eachItem)(E[m],v=>_+=a(v)),_===1/0))return 1/0}return _}function l(E,_="",m){m!==!1&&(_=d(_));const v=E.parse(_);return u(E,v)}Cs.getFullPath=l;function u(E,_){return E.serialize(_).split("#")[0]+"#"}Cs._getFullPath=u;const c=/#\/?$/;function d(E){return E?E.replace(c,""):""}Cs.normalizeId=d;function h(E,_,m){return m=d(m),E.resolve(_,m)}Cs.resolveUrl=h;const g=/^[a-z_][-a-z0-9._]*$/i;function y(E,_){if(typeof E=="boolean")return{};const{schemaId:m,uriResolver:v}=this.opts,S=d(E[m]||_),T={"":S},M=l(v,S,!1),A={},R=new Set;return t(E,{allKeys:!0},(k,G,$,U)=>{if(U===void 0)return;const ee=M+G;let re=T[U];typeof k[m]=="string"&&(re=ne.call(this,k[m])),X.call(this,k.$anchor),X.call(this,k.$dynamicAnchor),T[G]=re;function ne(q){const K=this.opts.uriResolver.resolve;if(q=d(re?K(re,q):q),R.has(q))throw I(q);R.add(q);let F=this.refs[q];return typeof F=="string"&&(F=this.refs[F]),typeof F=="object"?O(k,F.schema,q):q!==d(ee)&&(q[0]==="#"?(O(k,A[q],q),A[q]=k):this.refs[q]=ee),q}function X(q){if(typeof q=="string"){if(!g.test(q))throw new Error(`invalid anchor "${q}"`);ne.call(this,`#${q}`)}}}),A;function O(k,G,$){if(G!==void 0&&!e(k,G))throw I($)}function I(k){return new Error(`reference "${k}" resolves to more than one schema`)}}return Cs.getSchemaRefs=y,Cs}var OR;function w1(){if(OR)return gu;OR=1,Object.defineProperty(gu,"__esModule",{value:!0}),gu.getData=gu.KeywordCxt=gu.validateFunctionCode=void 0;const n=Z9(),e=$x(),t=E3(),r=$x(),i=Q9(),s=e7(),o=t7(),a=gn(),l=Zc(),u=x1(),c=Hn(),d=_1();function h(te){if(M(te)&&(R(te),T(te))){_(te);return}g(te,()=>(0,n.topBoolOrEmptySchema)(te))}gu.validateFunctionCode=h;function g({gen:te,validateName:j,schema:ce,schemaEnv:fe,opts:ie},se){ie.code.es5?te.func(j,(0,a._)`${l.default.data}, ${l.default.valCxt}`,fe.$async,()=>{te.code((0,a._)`"use strict"; ${v(ce,ie)}`),E(te,ie),te.code(se)}):te.func(j,(0,a._)`${l.default.data}, ${y(ie)}`,fe.$async,()=>te.code(v(ce,ie)).code(se))}function y(te){return(0,a._)`{${l.default.instancePath}="", ${l.default.parentData}, ${l.default.parentDataProperty}, ${l.default.rootData}=${l.default.data}${te.dynamicRef?(0,a._)`, ${l.default.dynamicAnchors}={}`:a.nil}}={}`}function E(te,j){te.if(l.default.valCxt,()=>{te.var(l.default.instancePath,(0,a._)`${l.default.valCxt}.${l.default.instancePath}`),te.var(l.default.parentData,(0,a._)`${l.default.valCxt}.${l.default.parentData}`),te.var(l.default.parentDataProperty,(0,a._)`${l.default.valCxt}.${l.default.parentDataProperty}`),te.var(l.default.rootData,(0,a._)`${l.default.valCxt}.${l.default.rootData}`),j.dynamicRef&&te.var(l.default.dynamicAnchors,(0,a._)`${l.default.valCxt}.${l.default.dynamicAnchors}`)},()=>{te.var(l.default.instancePath,(0,a._)`""`),te.var(l.default.parentData,(0,a._)`undefined`),te.var(l.default.parentDataProperty,(0,a._)`undefined`),te.var(l.default.rootData,l.default.data),j.dynamicRef&&te.var(l.default.dynamicAnchors,(0,a._)`{}`)})}function _(te){const{schema:j,opts:ce,gen:fe}=te;g(te,()=>{ce.$comment&&j.$comment&&U(te),k(te),fe.let(l.default.vErrors,null),fe.let(l.default.errors,0),ce.unevaluated&&m(te),O(te),ee(te)})}function m(te){const{gen:j,validateName:ce}=te;te.evaluated=j.const("evaluated",(0,a._)`${ce}.evaluated`),j.if((0,a._)`${te.evaluated}.dynamicProps`,()=>j.assign((0,a._)`${te.evaluated}.props`,(0,a._)`undefined`)),j.if((0,a._)`${te.evaluated}.dynamicItems`,()=>j.assign((0,a._)`${te.evaluated}.items`,(0,a._)`undefined`))}function v(te,j){const ce=typeof te=="object"&&te[j.schemaId];return ce&&(j.code.source||j.code.process)?(0,a._)`/*# sourceURL=${ce} */`:a.nil}function S(te,j){if(M(te)&&(R(te),T(te))){A(te,j);return}(0,n.boolOrEmptySchema)(te,j)}function T({schema:te,self:j}){if(typeof te=="boolean")return!te;for(const ce in te)if(j.RULES.all[ce])return!0;return!1}function M(te){return typeof te.schema!="boolean"}function A(te,j){const{schema:ce,gen:fe,opts:ie}=te;ie.$comment&&ce.$comment&&U(te),G(te),$(te);const se=fe.const("_errs",l.default.errors);O(te,se),fe.var(j,(0,a._)`${se} === ${l.default.errors}`)}function R(te){(0,c.checkUnknownRules)(te),I(te)}function O(te,j){if(te.opts.jtd)return ne(te,[],!1,j);const ce=(0,e.getSchemaTypes)(te.schema),fe=(0,e.coerceAndCheckDataType)(te,ce);ne(te,ce,!fe,j)}function I(te){const{schema:j,errSchemaPath:ce,opts:fe,self:ie}=te;j.$ref&&fe.ignoreKeywordsWithRef&&(0,c.schemaHasRulesButRef)(j,ie.RULES)&&ie.logger.warn(`$ref: keywords ignored in schema at path "${ce}"`)}function k(te){const{schema:j,opts:ce}=te;j.default!==void 0&&ce.useDefaults&&ce.strictSchema&&(0,c.checkStrictMode)(te,"default is ignored in the schema root")}function G(te){const j=te.schema[te.opts.schemaId];j&&(te.baseId=(0,u.resolveUrl)(te.opts.uriResolver,te.baseId,j))}function $(te){if(te.schema.$async&&!te.schemaEnv.$async)throw new Error("async schema in sync schema")}function U({gen:te,schemaEnv:j,schema:ce,errSchemaPath:fe,opts:ie}){const se=ce.$comment;if(ie.$comment===!0)te.code((0,a._)`${l.default.self}.logger.log(${se})`);else if(typeof ie.$comment=="function"){const Ae=(0,a.str)`${fe}/$comment`,we=te.scopeValue("root",{ref:j.root});te.code((0,a._)`${l.default.self}.opts.$comment(${se}, ${Ae}, ${we}.schema)`)}}function ee(te){const{gen:j,schemaEnv:ce,validateName:fe,ValidationError:ie,opts:se}=te;ce.$async?j.if((0,a._)`${l.default.errors} === 0`,()=>j.return(l.default.data),()=>j.throw((0,a._)`new ${ie}(${l.default.vErrors})`)):(j.assign((0,a._)`${fe}.errors`,l.default.vErrors),se.unevaluated&&re(te),j.return((0,a._)`${l.default.errors} === 0`))}function re({gen:te,evaluated:j,props:ce,items:fe}){ce instanceof a.Name&&te.assign((0,a._)`${j}.props`,ce),fe instanceof a.Name&&te.assign((0,a._)`${j}.items`,fe)}function ne(te,j,ce,fe){const{gen:ie,schema:se,data:Ae,allErrors:we,opts:Re,self:Le}=te,{RULES:be}=Le;if(se.$ref&&(Re.ignoreKeywordsWithRef||!(0,c.schemaHasRulesButRef)(se,be))){ie.block(()=>pe(te,"$ref",be.all.$ref.definition));return}Re.jtd||q(te,j),ie.block(()=>{for(const ue of be.rules)Ye(ue);Ye(be.post)});function Ye(ue){(0,t.shouldUseGroup)(se,ue)&&(ue.type?(ie.if((0,r.checkDataType)(ue.type,Ae,Re.strictNumbers)),X(te,ue),j.length===1&&j[0]===ue.type&&ce&&(ie.else(),(0,r.reportTypeError)(te)),ie.endIf()):X(te,ue),we||ie.if((0,a._)`${l.default.errors} === ${fe||0}`))}}function X(te,j){const{gen:ce,schema:fe,opts:{useDefaults:ie}}=te;ie&&(0,i.assignDefaults)(te,j.type),ce.block(()=>{for(const se of j.rules)(0,t.shouldUseRule)(fe,se)&&pe(te,se.keyword,se.definition,j.type)})}function q(te,j){te.schemaEnv.meta||!te.opts.strictTypes||(K(te,j),te.opts.allowUnionTypes||F(te,j),L(te,te.dataTypes))}function K(te,j){if(j.length){if(!te.dataTypes.length){te.dataTypes=j;return}j.forEach(ce=>{Y(te.dataTypes,ce)||J(te,`type "${ce}" not allowed by context "${te.dataTypes.join(",")}"`)}),B(te,j)}}function F(te,j){j.length>1&&!(j.length===2&&j.includes("null"))&&J(te,"use allowUnionTypes to allow union type keyword")}function L(te,j){const ce=te.self.RULES.all;for(const fe in ce){const ie=ce[fe];if(typeof ie=="object"&&(0,t.shouldUseRule)(te.schema,ie)){const{type:se}=ie.definition;se.length&&!se.some(Ae=>z(j,Ae))&&J(te,`missing type "${se.join(",")}" for keyword "${fe}"`)}}}function z(te,j){return te.includes(j)||j==="number"&&te.includes("integer")}function Y(te,j){return te.includes(j)||j==="integer"&&te.includes("number")}function B(te,j){const ce=[];for(const fe of te.dataTypes)Y(j,fe)?ce.push(fe):j.includes("integer")&&fe==="number"&&ce.push("integer");te.dataTypes=ce}function J(te,j){const ce=te.schemaEnv.baseId+te.errSchemaPath;j+=` at "${ce}" (strictTypes)`,(0,c.checkStrictMode)(te,j,te.opts.strictTypes)}class le{constructor(j,ce,fe){if((0,s.validateKeywordUsage)(j,ce,fe),this.gen=j.gen,this.allErrors=j.allErrors,this.keyword=fe,this.data=j.data,this.schema=j.schema[fe],this.$data=ce.$data&&j.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,c.schemaRefOrVal)(j,this.schema,fe,this.$data),this.schemaType=ce.schemaType,this.parentSchema=j.schema,this.params={},this.it=j,this.def=ce,this.$data)this.schemaCode=j.gen.const("vSchema",_e(this.$data,j));else if(this.schemaCode=this.schemaValue,!(0,s.validSchemaType)(this.schema,ce.schemaType,ce.allowUndefined))throw new Error(`${fe} value must be ${JSON.stringify(ce.schemaType)}`);("code"in ce?ce.trackErrors:ce.errors!==!1)&&(this.errsCount=j.gen.const("_errs",l.default.errors))}result(j,ce,fe){this.failResult((0,a.not)(j),ce,fe)}failResult(j,ce,fe){this.gen.if(j),fe?fe():this.error(),ce?(this.gen.else(),ce(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(j,ce){this.failResult((0,a.not)(j),void 0,ce)}fail(j){if(j===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(j),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(j){if(!this.$data)return this.fail(j);const{schemaCode:ce}=this;this.fail((0,a._)`${ce} !== undefined && (${(0,a.or)(this.invalid$data(),j)})`)}error(j,ce,fe){if(ce){this.setParams(ce),this._error(j,fe),this.setParams({});return}this._error(j,fe)}_error(j,ce){(j?d.reportExtraError:d.reportError)(this,this.def.error,ce)}$dataError(){(0,d.reportError)(this,this.def.$dataError||d.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,d.resetErrorsCount)(this.gen,this.errsCount)}ok(j){this.allErrors||this.gen.if(j)}setParams(j,ce){ce?Object.assign(this.params,j):this.params=j}block$data(j,ce,fe=a.nil){this.gen.block(()=>{this.check$data(j,fe),ce()})}check$data(j=a.nil,ce=a.nil){if(!this.$data)return;const{gen:fe,schemaCode:ie,schemaType:se,def:Ae}=this;fe.if((0,a.or)((0,a._)`${ie} === undefined`,ce)),j!==a.nil&&fe.assign(j,!0),(se.length||Ae.validateSchema)&&(fe.elseIf(this.invalid$data()),this.$dataError(),j!==a.nil&&fe.assign(j,!1)),fe.else()}invalid$data(){const{gen:j,schemaCode:ce,schemaType:fe,def:ie,it:se}=this;return(0,a.or)(Ae(),we());function Ae(){if(fe.length){if(!(ce instanceof a.Name))throw new Error("ajv implementation error");const Re=Array.isArray(fe)?fe:[fe];return(0,a._)`${(0,r.checkDataTypes)(Re,ce,se.opts.strictNumbers,r.DataType.Wrong)}`}return a.nil}function we(){if(ie.validateSchema){const Re=j.scopeValue("validate$data",{ref:ie.validateSchema});return(0,a._)`!${Re}(${ce})`}return a.nil}}subschema(j,ce){const fe=(0,o.getSubschema)(this.it,j);(0,o.extendSubschemaData)(fe,this.it,j),(0,o.extendSubschemaMode)(fe,j);const ie={...this.it,...fe,items:void 0,props:void 0};return S(ie,ce),ie}mergeEvaluated(j,ce){const{it:fe,gen:ie}=this;fe.opts.unevaluated&&(fe.props!==!0&&j.props!==void 0&&(fe.props=c.mergeEvaluated.props(ie,j.props,fe.props,ce)),fe.items!==!0&&j.items!==void 0&&(fe.items=c.mergeEvaluated.items(ie,j.items,fe.items,ce)))}mergeValidEvaluated(j,ce){const{it:fe,gen:ie}=this;if(fe.opts.unevaluated&&(fe.props!==!0||fe.items!==!0))return ie.if(ce,()=>this.mergeEvaluated(j,a.Name)),!0}}gu.KeywordCxt=le;function pe(te,j,ce,fe){const ie=new le(te,ce,j);"code"in ce?ce.code(ie,fe):ie.$data&&ce.validate?(0,s.funcKeywordCode)(ie,ce):"macro"in ce?(0,s.macroKeywordCode)(ie,ce):(ce.compile||ce.validate)&&(0,s.funcKeywordCode)(ie,ce)}const he=/^\/(?:[^~]|~0|~1)*$/,Ee=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function _e(te,{dataLevel:j,dataNames:ce,dataPathArr:fe}){let ie,se;if(te==="")return l.default.rootData;if(te[0]==="/"){if(!he.test(te))throw new Error(`Invalid JSON-pointer: ${te}`);ie=te,se=l.default.rootData}else{const Le=Ee.exec(te);if(!Le)throw new Error(`Invalid JSON-pointer: ${te}`);const be=+Le[1];if(ie=Le[2],ie==="#"){if(be>=j)throw new Error(Re("property/index",be));return fe[j-be]}if(be>j)throw new Error(Re("data",be));if(se=ce[j-be],!ie)return se}let Ae=se;const we=ie.split("/");for(const Le of we)Le&&(se=(0,a._)`${se}${(0,a.getProperty)((0,c.unescapeJsonPointer)(Le))}`,Ae=(0,a._)`${Ae} && ${se}`);return Ae;function Re(Le,be){return`Cannot access ${Le} ${be} levels up, current level is ${j}`}}return gu.getData=_e,gu}var S0={},DR;function NM(){if(DR)return S0;DR=1,Object.defineProperty(S0,"__esModule",{value:!0});class n extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}return S0.default=n,S0}var E0={},kR;function S1(){if(kR)return E0;kR=1,Object.defineProperty(E0,"__esModule",{value:!0});const n=x1();class e extends Error{constructor(r,i,s,o){super(o||`can't resolve reference ${s} from id ${i}`),this.missingRef=(0,n.resolveUrl)(r,i,s),this.missingSchema=(0,n.normalizeId)((0,n.getFullPath)(r,this.missingRef))}}return E0.default=e,E0}var _o={},UR;function OM(){if(UR)return _o;UR=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.resolveSchema=_o.getCompilingSchema=_o.resolveRef=_o.compileSchema=_o.SchemaEnv=void 0;const n=gn(),e=NM(),t=Zc(),r=x1(),i=Hn(),s=w1();class o{constructor(m){var v;this.refs={},this.dynamicAnchors={};let S;typeof m.schema=="object"&&(S=m.schema),this.schema=m.schema,this.schemaId=m.schemaId,this.root=m.root||this,this.baseId=(v=m.baseId)!==null&&v!==void 0?v:(0,r.normalizeId)(S==null?void 0:S[m.schemaId||"$id"]),this.schemaPath=m.schemaPath,this.localRefs=m.localRefs,this.meta=m.meta,this.$async=S==null?void 0:S.$async,this.refs={}}}_o.SchemaEnv=o;function a(_){const m=c.call(this,_);if(m)return m;const v=(0,r.getFullPath)(this.opts.uriResolver,_.root.baseId),{es5:S,lines:T}=this.opts.code,{ownProperties:M}=this.opts,A=new n.CodeGen(this.scope,{es5:S,lines:T,ownProperties:M});let R;_.$async&&(R=A.scopeValue("Error",{ref:e.default,code:(0,n._)`require("ajv/dist/runtime/validation_error").default`}));const O=A.scopeName("validate");_.validateName=O;const I={gen:A,allErrors:this.opts.allErrors,data:t.default.data,parentData:t.default.parentData,parentDataProperty:t.default.parentDataProperty,dataNames:[t.default.data],dataPathArr:[n.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:A.scopeValue("schema",this.opts.code.source===!0?{ref:_.schema,code:(0,n.stringify)(_.schema)}:{ref:_.schema}),validateName:O,ValidationError:R,schema:_.schema,schemaEnv:_,rootId:v,baseId:_.baseId||v,schemaPath:n.nil,errSchemaPath:_.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,n._)`""`,opts:this.opts,self:this};let k;try{this._compilations.add(_),(0,s.validateFunctionCode)(I),A.optimize(this.opts.code.optimize);const G=A.toString();k=`${A.scopeRefs(t.default.scope)}return ${G}`,this.opts.code.process&&(k=this.opts.code.process(k,_));const U=new Function(`${t.default.self}`,`${t.default.scope}`,k)(this,this.scope.get());if(this.scope.value(O,{ref:U}),U.errors=null,U.schema=_.schema,U.schemaEnv=_,_.$async&&(U.$async=!0),this.opts.code.source===!0&&(U.source={validateName:O,validateCode:G,scopeValues:A._values}),this.opts.unevaluated){const{props:ee,items:re}=I;U.evaluated={props:ee instanceof n.Name?void 0:ee,items:re instanceof n.Name?void 0:re,dynamicProps:ee instanceof n.Name,dynamicItems:re instanceof n.Name},U.source&&(U.source.evaluated=(0,n.stringify)(U.evaluated))}return _.validate=U,_}catch(G){throw delete _.validate,delete _.validateName,k&&this.logger.error("Error compiling schema, function code:",k),G}finally{this._compilations.delete(_)}}_o.compileSchema=a;function l(_,m,v){var S;v=(0,r.resolveUrl)(this.opts.uriResolver,m,v);const T=_.refs[v];if(T)return T;let M=h.call(this,_,v);if(M===void 0){const A=(S=_.localRefs)===null||S===void 0?void 0:S[v],{schemaId:R}=this.opts;A&&(M=new o({schema:A,schemaId:R,root:_,baseId:m}))}if(M!==void 0)return _.refs[v]=u.call(this,M)}_o.resolveRef=l;function u(_){return(0,r.inlineRef)(_.schema,this.opts.inlineRefs)?_.schema:_.validate?_:a.call(this,_)}function c(_){for(const m of this._compilations)if(d(m,_))return m}_o.getCompilingSchema=c;function d(_,m){return _.schema===m.schema&&_.root===m.root&&_.baseId===m.baseId}function h(_,m){let v;for(;typeof(v=this.refs[m])=="string";)m=v;return v||this.schemas[m]||g.call(this,_,m)}function g(_,m){const v=this.opts.uriResolver.parse(m),S=(0,r._getFullPath)(this.opts.uriResolver,v);let T=(0,r.getFullPath)(this.opts.uriResolver,_.baseId,void 0);if(Object.keys(_.schema).length>0&&S===T)return E.call(this,v,_);const M=(0,r.normalizeId)(S),A=this.refs[M]||this.schemas[M];if(typeof A=="string"){const R=g.call(this,_,A);return typeof(R==null?void 0:R.schema)!="object"?void 0:E.call(this,v,R)}if(typeof(A==null?void 0:A.schema)=="object"){if(A.validate||a.call(this,A),M===(0,r.normalizeId)(m)){const{schema:R}=A,{schemaId:O}=this.opts,I=R[O];return I&&(T=(0,r.resolveUrl)(this.opts.uriResolver,T,I)),new o({schema:R,schemaId:O,root:_,baseId:T})}return E.call(this,v,A)}}_o.resolveSchema=g;const y=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function E(_,{baseId:m,schema:v,root:S}){var T;if(((T=_.fragment)===null||T===void 0?void 0:T[0])!=="/")return;for(const R of _.fragment.slice(1).split("/")){if(typeof v=="boolean")return;const O=v[(0,i.unescapeFragment)(R)];if(O===void 0)return;v=O;const I=typeof v=="object"&&v[this.opts.schemaId];!y.has(R)&&I&&(m=(0,r.resolveUrl)(this.opts.uriResolver,m,I))}let M;if(typeof v!="boolean"&&v.$ref&&!(0,i.schemaHasRulesButRef)(v,this.RULES)){const R=(0,r.resolveUrl)(this.opts.uriResolver,m,v.$ref);M=g.call(this,S,R)}const{schemaId:A}=this.opts;if(M=M||new o({schema:v,schemaId:A,root:S,baseId:m}),M.schema!==M.root.schema)return M}return _o}const r7="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",i7="Meta-schema for $data reference (JSON AnySchema extension proposal)",s7="object",o7=["$data"],a7={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},l7=!1,u7={$id:r7,description:i7,type:s7,required:o7,properties:a7,additionalProperties:l7};var b0={},sg={exports:{}},ES,FR;function c7(){return FR||(FR=1,ES={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}),ES}var bS,zR;function f7(){if(zR)return bS;zR=1;const{HEX:n}=c7();function e(y){if(o(y,".")<3)return{host:y,isIPV4:!1};const E=y.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u)||[],[_]=E;return _?{host:s(_,"."),isIPV4:!0}:{host:y,isIPV4:!1}}function t(y,E=!1){let _="",m=!0;for(const v of y){if(n[v]===void 0)return;v!=="0"&&m===!0&&(m=!1),m||(_+=v)}return E&&_.length===0&&(_="0"),_}function r(y){let E=0;const _={error:!1,address:"",zone:""},m=[],v=[];let S=!1,T=!1,M=!1;function A(){if(v.length){if(S===!1){const R=t(v);if(R!==void 0)m.push(R);else return _.error=!0,!1}v.length=0}return!0}for(let R=0;R<y.length;R++){const O=y[R];if(!(O==="["||O==="]"))if(O===":"){if(T===!0&&(M=!0),!A())break;if(E++,m.push(":"),E>7){_.error=!0;break}R-1>=0&&y[R-1]===":"&&(T=!0);continue}else if(O==="%"){if(!A())break;S=!0}else{v.push(O);continue}}return v.length&&(S?_.zone=v.join(""):M?m.push(v.join("")):m.push(t(v))),_.address=m.join(""),_}function i(y,E={}){if(o(y,":")<2)return{host:y,isIPV6:!1};const _=r(y);if(_.error)return{host:y,isIPV6:!1};{let m=_.address,v=_.address;return _.zone&&(m+="%"+_.zone,v+="%25"+_.zone),{host:m,escapedHost:v,isIPV6:!0}}}function s(y,E){let _="",m=!0;const v=y.length;for(let S=0;S<v;S++){const T=y[S];T==="0"&&m?(S+1<=v&&y[S+1]===E||S+1===v)&&(_+=T,m=!1):(T===E?m=!0:m=!1,_+=T)}return _}function o(y,E){let _=0;for(let m=0;m<y.length;m++)y[m]===E&&_++;return _}const a=/^\.\.?\//u,l=/^\/\.(?:\/|$)/u,u=/^\/\.\.(?:\/|$)/u,c=/^\/?(?:.|\n)*?(?=\/|$)/u;function d(y){const E=[];for(;y.length;)if(y.match(a))y=y.replace(a,"");else if(y.match(l))y=y.replace(l,"/");else if(y.match(u))y=y.replace(u,"/"),E.pop();else if(y==="."||y==="..")y="";else{const _=y.match(c);if(_){const m=_[0];y=y.slice(m.length),E.push(m)}else throw new Error("Unexpected dot segment condition")}return E.join("")}function h(y,E){const _=E!==!0?escape:unescape;return y.scheme!==void 0&&(y.scheme=_(y.scheme)),y.userinfo!==void 0&&(y.userinfo=_(y.userinfo)),y.host!==void 0&&(y.host=_(y.host)),y.path!==void 0&&(y.path=_(y.path)),y.query!==void 0&&(y.query=_(y.query)),y.fragment!==void 0&&(y.fragment=_(y.fragment)),y}function g(y,E){const _=[];if(y.userinfo!==void 0&&(_.push(y.userinfo),_.push("@")),y.host!==void 0){let m=unescape(y.host);const v=e(m);if(v.isIPV4)m=v.host;else{const S=i(v.host,{});S.isIPV6===!0?m=`[${S.escapedHost}]`:m=y.host}_.push(m)}return(typeof y.port=="number"||typeof y.port=="string")&&(_.push(":"),_.push(String(y.port))),_.length?_.join(""):void 0}return bS={recomposeAuthority:g,normalizeComponentEncoding:h,removeDotSegments:d,normalizeIPv4:e,normalizeIPv6:i,stringArrayToHexStripped:t},bS}var TS,BR;function d7(){if(BR)return TS;BR=1;const n=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,e=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function t(v){return typeof v.secure=="boolean"?v.secure:String(v.scheme).toLowerCase()==="wss"}function r(v){return v.host||(v.error=v.error||"HTTP URIs must have a host."),v}function i(v){const S=String(v.scheme).toLowerCase()==="https";return(v.port===(S?443:80)||v.port==="")&&(v.port=void 0),v.path||(v.path="/"),v}function s(v){return v.secure=t(v),v.resourceName=(v.path||"/")+(v.query?"?"+v.query:""),v.path=void 0,v.query=void 0,v}function o(v){if((v.port===(t(v)?443:80)||v.port==="")&&(v.port=void 0),typeof v.secure=="boolean"&&(v.scheme=v.secure?"wss":"ws",v.secure=void 0),v.resourceName){const[S,T]=v.resourceName.split("?");v.path=S&&S!=="/"?S:void 0,v.query=T,v.resourceName=void 0}return v.fragment=void 0,v}function a(v,S){if(!v.path)return v.error="URN can not be parsed",v;const T=v.path.match(e);if(T){const M=S.scheme||v.scheme||"urn";v.nid=T[1].toLowerCase(),v.nss=T[2];const A=`${M}:${S.nid||v.nid}`,R=m[A];v.path=void 0,R&&(v=R.parse(v,S))}else v.error=v.error||"URN can not be parsed.";return v}function l(v,S){const T=S.scheme||v.scheme||"urn",M=v.nid.toLowerCase(),A=`${T}:${S.nid||M}`,R=m[A];R&&(v=R.serialize(v,S));const O=v,I=v.nss;return O.path=`${M||S.nid}:${I}`,S.skipEscape=!0,O}function u(v,S){const T=v;return T.uuid=T.nss,T.nss=void 0,!S.tolerant&&(!T.uuid||!n.test(T.uuid))&&(T.error=T.error||"UUID is not valid."),T}function c(v){const S=v;return S.nss=(v.uuid||"").toLowerCase(),S}const d={scheme:"http",domainHost:!0,parse:r,serialize:i},h={scheme:"https",domainHost:d.domainHost,parse:r,serialize:i},g={scheme:"ws",domainHost:!0,parse:s,serialize:o},y={scheme:"wss",domainHost:g.domainHost,parse:g.parse,serialize:g.serialize},m={http:d,https:h,ws:g,wss:y,urn:{scheme:"urn",parse:a,serialize:l,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:u,serialize:c,skipNormalize:!0}};return TS=m,TS}var HR;function h7(){if(HR)return sg.exports;HR=1;const{normalizeIPv6:n,normalizeIPv4:e,removeDotSegments:t,recomposeAuthority:r,normalizeComponentEncoding:i}=f7(),s=d7();function o(_,m){return typeof _=="string"?_=c(y(_,m),m):typeof _=="object"&&(_=y(c(_,m),m)),_}function a(_,m,v){const S=Object.assign({scheme:"null"},v),T=l(y(_,S),y(m,S),S,!0);return c(T,{...S,skipEscape:!0})}function l(_,m,v,S){const T={};return S||(_=y(c(_,v),v),m=y(c(m,v),v)),v=v||{},!v.tolerant&&m.scheme?(T.scheme=m.scheme,T.userinfo=m.userinfo,T.host=m.host,T.port=m.port,T.path=t(m.path||""),T.query=m.query):(m.userinfo!==void 0||m.host!==void 0||m.port!==void 0?(T.userinfo=m.userinfo,T.host=m.host,T.port=m.port,T.path=t(m.path||""),T.query=m.query):(m.path?(m.path.charAt(0)==="/"?T.path=t(m.path):((_.userinfo!==void 0||_.host!==void 0||_.port!==void 0)&&!_.path?T.path="/"+m.path:_.path?T.path=_.path.slice(0,_.path.lastIndexOf("/")+1)+m.path:T.path=m.path,T.path=t(T.path)),T.query=m.query):(T.path=_.path,m.query!==void 0?T.query=m.query:T.query=_.query),T.userinfo=_.userinfo,T.host=_.host,T.port=_.port),T.scheme=_.scheme),T.fragment=m.fragment,T}function u(_,m,v){return typeof _=="string"?(_=unescape(_),_=c(i(y(_,v),!0),{...v,skipEscape:!0})):typeof _=="object"&&(_=c(i(_,!0),{...v,skipEscape:!0})),typeof m=="string"?(m=unescape(m),m=c(i(y(m,v),!0),{...v,skipEscape:!0})):typeof m=="object"&&(m=c(i(m,!0),{...v,skipEscape:!0})),_.toLowerCase()===m.toLowerCase()}function c(_,m){const v={host:_.host,scheme:_.scheme,userinfo:_.userinfo,port:_.port,path:_.path,query:_.query,nid:_.nid,nss:_.nss,uuid:_.uuid,fragment:_.fragment,reference:_.reference,resourceName:_.resourceName,secure:_.secure,error:""},S=Object.assign({},m),T=[],M=s[(S.scheme||v.scheme||"").toLowerCase()];M&&M.serialize&&M.serialize(v,S),v.path!==void 0&&(S.skipEscape?v.path=unescape(v.path):(v.path=escape(v.path),v.scheme!==void 0&&(v.path=v.path.split("%3A").join(":")))),S.reference!=="suffix"&&v.scheme&&T.push(v.scheme,":");const A=r(v,S);if(A!==void 0&&(S.reference!=="suffix"&&T.push("//"),T.push(A),v.path&&v.path.charAt(0)!=="/"&&T.push("/")),v.path!==void 0){let R=v.path;!S.absolutePath&&(!M||!M.absolutePath)&&(R=t(R)),A===void 0&&(R=R.replace(/^\/\//u,"/%2F")),T.push(R)}return v.query!==void 0&&T.push("?",v.query),v.fragment!==void 0&&T.push("#",v.fragment),T.join("")}const d=Array.from({length:127},(_,m)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(m)));function h(_){let m=0;for(let v=0,S=_.length;v<S;++v)if(m=_.charCodeAt(v),m>126||d[m])return!0;return!1}const g=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function y(_,m){const v=Object.assign({},m),S={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},T=_.indexOf("%")!==-1;let M=!1;v.reference==="suffix"&&(_=(v.scheme?v.scheme+":":"")+"//"+_);const A=_.match(g);if(A){if(S.scheme=A[1],S.userinfo=A[3],S.host=A[4],S.port=parseInt(A[5],10),S.path=A[6]||"",S.query=A[7],S.fragment=A[8],isNaN(S.port)&&(S.port=A[5]),S.host){const O=e(S.host);if(O.isIPV4===!1){const I=n(O.host,{isIPV4:!1});S.host=I.host.toLowerCase(),M=I.isIPV6}else S.host=O.host,M=!0}S.scheme===void 0&&S.userinfo===void 0&&S.host===void 0&&S.port===void 0&&!S.path&&S.query===void 0?S.reference="same-document":S.scheme===void 0?S.reference="relative":S.fragment===void 0?S.reference="absolute":S.reference="uri",v.reference&&v.reference!=="suffix"&&v.reference!==S.reference&&(S.error=S.error||"URI is not a "+v.reference+" reference.");const R=s[(v.scheme||S.scheme||"").toLowerCase()];if(!v.unicodeSupport&&(!R||!R.unicodeSupport)&&S.host&&(v.domainHost||R&&R.domainHost)&&M===!1&&h(S.host))try{S.host=URL.domainToASCII(S.host.toLowerCase())}catch(O){S.error=S.error||"Host's domain name can not be converted to ASCII: "+O}(!R||R&&!R.skipNormalize)&&(T&&S.scheme!==void 0&&(S.scheme=unescape(S.scheme)),T&&S.host!==void 0&&(S.host=unescape(S.host)),S.path!==void 0&&S.path.length&&(S.path=escape(unescape(S.path))),S.fragment!==void 0&&S.fragment.length&&(S.fragment=encodeURI(decodeURIComponent(S.fragment)))),R&&R.parse&&R.parse(S,v)}else S.error=S.error||"URI can not be parsed.";return S}const E={SCHEMES:s,normalize:o,resolve:a,resolveComponents:l,equal:u,serialize:c,parse:y};return sg.exports=E,sg.exports.default=E,sg.exports.fastUri=E,sg.exports}var $R;function p7(){if($R)return b0;$R=1,Object.defineProperty(b0,"__esModule",{value:!0});const n=h7();return n.code='require("ajv/dist/runtime/uri").default',b0.default=n,b0}var GR;function m7(){return GR||(GR=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.CodeGen=n.Name=n.nil=n.stringify=n.str=n._=n.KeywordCxt=void 0;var e=w1();Object.defineProperty(n,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var t=gn();Object.defineProperty(n,"_",{enumerable:!0,get:function(){return t._}}),Object.defineProperty(n,"str",{enumerable:!0,get:function(){return t.str}}),Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return t.stringify}}),Object.defineProperty(n,"nil",{enumerable:!0,get:function(){return t.nil}}),Object.defineProperty(n,"Name",{enumerable:!0,get:function(){return t.Name}}),Object.defineProperty(n,"CodeGen",{enumerable:!0,get:function(){return t.CodeGen}});const r=NM(),i=S1(),s=S3(),o=OM(),a=gn(),l=x1(),u=$x(),c=Hn(),d=u7,h=p7(),g=(F,L)=>new RegExp(F,L);g.code="new RegExp";const y=["removeAdditional","useDefaults","coerceTypes"],E=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),_={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},m={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function S(F){var L,z,Y,B,J,le,pe,he,Ee,_e,te,j,ce,fe,ie,se,Ae,we,Re,Le,be,Ye,ue,oe,ye;const Fe=F.strict,ze=(L=F.code)===null||L===void 0?void 0:L.optimize,He=ze===!0||ze===void 0?1:ze||0,Ze=(Y=(z=F.code)===null||z===void 0?void 0:z.regExp)!==null&&Y!==void 0?Y:g,Ke=(B=F.uriResolver)!==null&&B!==void 0?B:h.default;return{strictSchema:(le=(J=F.strictSchema)!==null&&J!==void 0?J:Fe)!==null&&le!==void 0?le:!0,strictNumbers:(he=(pe=F.strictNumbers)!==null&&pe!==void 0?pe:Fe)!==null&&he!==void 0?he:!0,strictTypes:(_e=(Ee=F.strictTypes)!==null&&Ee!==void 0?Ee:Fe)!==null&&_e!==void 0?_e:"log",strictTuples:(j=(te=F.strictTuples)!==null&&te!==void 0?te:Fe)!==null&&j!==void 0?j:"log",strictRequired:(fe=(ce=F.strictRequired)!==null&&ce!==void 0?ce:Fe)!==null&&fe!==void 0?fe:!1,code:F.code?{...F.code,optimize:He,regExp:Ze}:{optimize:He,regExp:Ze},loopRequired:(ie=F.loopRequired)!==null&&ie!==void 0?ie:v,loopEnum:(se=F.loopEnum)!==null&&se!==void 0?se:v,meta:(Ae=F.meta)!==null&&Ae!==void 0?Ae:!0,messages:(we=F.messages)!==null&&we!==void 0?we:!0,inlineRefs:(Re=F.inlineRefs)!==null&&Re!==void 0?Re:!0,schemaId:(Le=F.schemaId)!==null&&Le!==void 0?Le:"$id",addUsedSchema:(be=F.addUsedSchema)!==null&&be!==void 0?be:!0,validateSchema:(Ye=F.validateSchema)!==null&&Ye!==void 0?Ye:!0,validateFormats:(ue=F.validateFormats)!==null&&ue!==void 0?ue:!0,unicodeRegExp:(oe=F.unicodeRegExp)!==null&&oe!==void 0?oe:!0,int32range:(ye=F.int32range)!==null&&ye!==void 0?ye:!0,uriResolver:Ke}}class T{constructor(L={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,L=this.opts={...L,...S(L)};const{es5:z,lines:Y}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:E,es5:z,lines:Y}),this.logger=$(L.logger);const B=L.validateFormats;L.validateFormats=!1,this.RULES=(0,s.getRules)(),M.call(this,_,L,"NOT SUPPORTED"),M.call(this,m,L,"DEPRECATED","warn"),this._metaOpts=k.call(this),L.formats&&O.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),L.keywords&&I.call(this,L.keywords),typeof L.meta=="object"&&this.addMetaSchema(L.meta),R.call(this),L.validateFormats=B}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:L,meta:z,schemaId:Y}=this.opts;let B=d;Y==="id"&&(B={...d},B.id=B.$id,delete B.$id),z&&L&&this.addMetaSchema(B,B[Y],!1)}defaultMeta(){const{meta:L,schemaId:z}=this.opts;return this.opts.defaultMeta=typeof L=="object"?L[z]||L:void 0}validate(L,z){let Y;if(typeof L=="string"){if(Y=this.getSchema(L),!Y)throw new Error(`no schema with key or ref "${L}"`)}else Y=this.compile(L);const B=Y(z);return"$async"in Y||(this.errors=Y.errors),B}compile(L,z){const Y=this._addSchema(L,z);return Y.validate||this._compileSchemaEnv(Y)}compileAsync(L,z){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:Y}=this.opts;return B.call(this,L,z);async function B(_e,te){await J.call(this,_e.$schema);const j=this._addSchema(_e,te);return j.validate||le.call(this,j)}async function J(_e){_e&&!this.getSchema(_e)&&await B.call(this,{$ref:_e},!0)}async function le(_e){try{return this._compileSchemaEnv(_e)}catch(te){if(!(te instanceof i.default))throw te;return pe.call(this,te),await he.call(this,te.missingSchema),le.call(this,_e)}}function pe({missingSchema:_e,missingRef:te}){if(this.refs[_e])throw new Error(`AnySchema ${_e} is loaded but ${te} cannot be resolved`)}async function he(_e){const te=await Ee.call(this,_e);this.refs[_e]||await J.call(this,te.$schema),this.refs[_e]||this.addSchema(te,_e,z)}async function Ee(_e){const te=this._loading[_e];if(te)return te;try{return await(this._loading[_e]=Y(_e))}finally{delete this._loading[_e]}}}addSchema(L,z,Y,B=this.opts.validateSchema){if(Array.isArray(L)){for(const le of L)this.addSchema(le,void 0,Y,B);return this}let J;if(typeof L=="object"){const{schemaId:le}=this.opts;if(J=L[le],J!==void 0&&typeof J!="string")throw new Error(`schema ${le} must be string`)}return z=(0,l.normalizeId)(z||J),this._checkUnique(z),this.schemas[z]=this._addSchema(L,Y,z,B,!0),this}addMetaSchema(L,z,Y=this.opts.validateSchema){return this.addSchema(L,z,!0,Y),this}validateSchema(L,z){if(typeof L=="boolean")return!0;let Y;if(Y=L.$schema,Y!==void 0&&typeof Y!="string")throw new Error("$schema must be a string");if(Y=Y||this.opts.defaultMeta||this.defaultMeta(),!Y)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const B=this.validate(Y,L);if(!B&&z){const J="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(J);else throw new Error(J)}return B}getSchema(L){let z;for(;typeof(z=A.call(this,L))=="string";)L=z;if(z===void 0){const{schemaId:Y}=this.opts,B=new o.SchemaEnv({schema:{},schemaId:Y});if(z=o.resolveSchema.call(this,B,L),!z)return;this.refs[L]=z}return z.validate||this._compileSchemaEnv(z)}removeSchema(L){if(L instanceof RegExp)return this._removeAllSchemas(this.schemas,L),this._removeAllSchemas(this.refs,L),this;switch(typeof L){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const z=A.call(this,L);return typeof z=="object"&&this._cache.delete(z.schema),delete this.schemas[L],delete this.refs[L],this}case"object":{const z=L;this._cache.delete(z);let Y=L[this.opts.schemaId];return Y&&(Y=(0,l.normalizeId)(Y),delete this.schemas[Y],delete this.refs[Y]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(L){for(const z of L)this.addKeyword(z);return this}addKeyword(L,z){let Y;if(typeof L=="string")Y=L,typeof z=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),z.keyword=Y);else if(typeof L=="object"&&z===void 0){if(z=L,Y=z.keyword,Array.isArray(Y)&&!Y.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(ee.call(this,Y,z),!z)return(0,c.eachItem)(Y,J=>re.call(this,J)),this;X.call(this,z);const B={...z,type:(0,u.getJSONTypes)(z.type),schemaType:(0,u.getJSONTypes)(z.schemaType)};return(0,c.eachItem)(Y,B.type.length===0?J=>re.call(this,J,B):J=>B.type.forEach(le=>re.call(this,J,B,le))),this}getKeyword(L){const z=this.RULES.all[L];return typeof z=="object"?z.definition:!!z}removeKeyword(L){const{RULES:z}=this;delete z.keywords[L],delete z.all[L];for(const Y of z.rules){const B=Y.rules.findIndex(J=>J.keyword===L);B>=0&&Y.rules.splice(B,1)}return this}addFormat(L,z){return typeof z=="string"&&(z=new RegExp(z)),this.formats[L]=z,this}errorsText(L=this.errors,{separator:z=", ",dataVar:Y="data"}={}){return!L||L.length===0?"No errors":L.map(B=>`${Y}${B.instancePath} ${B.message}`).reduce((B,J)=>B+z+J)}$dataMetaSchema(L,z){const Y=this.RULES.all;L=JSON.parse(JSON.stringify(L));for(const B of z){const J=B.split("/").slice(1);let le=L;for(const pe of J)le=le[pe];for(const pe in Y){const he=Y[pe];if(typeof he!="object")continue;const{$data:Ee}=he.definition,_e=le[pe];Ee&&_e&&(le[pe]=K(_e))}}return L}_removeAllSchemas(L,z){for(const Y in L){const B=L[Y];(!z||z.test(Y))&&(typeof B=="string"?delete L[Y]:B&&!B.meta&&(this._cache.delete(B.schema),delete L[Y]))}}_addSchema(L,z,Y,B=this.opts.validateSchema,J=this.opts.addUsedSchema){let le;const{schemaId:pe}=this.opts;if(typeof L=="object")le=L[pe];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof L!="boolean")throw new Error("schema must be object or boolean")}let he=this._cache.get(L);if(he!==void 0)return he;Y=(0,l.normalizeId)(le||Y);const Ee=l.getSchemaRefs.call(this,L,Y);return he=new o.SchemaEnv({schema:L,schemaId:pe,meta:z,baseId:Y,localRefs:Ee}),this._cache.set(he.schema,he),J&&!Y.startsWith("#")&&(Y&&this._checkUnique(Y),this.refs[Y]=he),B&&this.validateSchema(L,!0),he}_checkUnique(L){if(this.schemas[L]||this.refs[L])throw new Error(`schema with key or id "${L}" already exists`)}_compileSchemaEnv(L){if(L.meta?this._compileMetaSchema(L):o.compileSchema.call(this,L),!L.validate)throw new Error("ajv implementation error");return L.validate}_compileMetaSchema(L){const z=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,L)}finally{this.opts=z}}}T.ValidationError=r.default,T.MissingRefError=i.default,n.default=T;function M(F,L,z,Y="error"){for(const B in F){const J=B;J in L&&this.logger[Y](`${z}: option ${B}. ${F[J]}`)}}function A(F){return F=(0,l.normalizeId)(F),this.schemas[F]||this.refs[F]}function R(){const F=this.opts.schemas;if(F)if(Array.isArray(F))this.addSchema(F);else for(const L in F)this.addSchema(F[L],L)}function O(){for(const F in this.opts.formats){const L=this.opts.formats[F];L&&this.addFormat(F,L)}}function I(F){if(Array.isArray(F)){this.addVocabulary(F);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const L in F){const z=F[L];z.keyword||(z.keyword=L),this.addKeyword(z)}}function k(){const F={...this.opts};for(const L of y)delete F[L];return F}const G={log(){},warn(){},error(){}};function $(F){if(F===!1)return G;if(F===void 0)return console;if(F.log&&F.warn&&F.error)return F;throw new Error("logger must implement log, warn and error methods")}const U=/^[a-z_$][a-z0-9_$:-]*$/i;function ee(F,L){const{RULES:z}=this;if((0,c.eachItem)(F,Y=>{if(z.keywords[Y])throw new Error(`Keyword ${Y} is already defined`);if(!U.test(Y))throw new Error(`Keyword ${Y} has invalid name`)}),!!L&&L.$data&&!("code"in L||"validate"in L))throw new Error('$data keyword must have "code" or "validate" function')}function re(F,L,z){var Y;const B=L==null?void 0:L.post;if(z&&B)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:J}=this;let le=B?J.post:J.rules.find(({type:he})=>he===z);if(le||(le={type:z,rules:[]},J.rules.push(le)),J.keywords[F]=!0,!L)return;const pe={keyword:F,definition:{...L,type:(0,u.getJSONTypes)(L.type),schemaType:(0,u.getJSONTypes)(L.schemaType)}};L.before?ne.call(this,le,pe,L.before):le.rules.push(pe),J.all[F]=pe,(Y=L.implements)===null||Y===void 0||Y.forEach(he=>this.addKeyword(he))}function ne(F,L,z){const Y=F.rules.findIndex(B=>B.keyword===z);Y>=0?F.rules.splice(Y,0,L):(F.rules.push(L),this.logger.warn(`rule ${z} is not defined`))}function X(F){let{metaSchema:L}=F;L!==void 0&&(F.$data&&this.opts.$data&&(L=K(L)),F.validateSchema=this.compile(L,!0))}const q={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function K(F){return{anyOf:[F,q]}}}(gS)),gS}var T0={},M0={},A0={},VR;function g7(){if(VR)return A0;VR=1,Object.defineProperty(A0,"__esModule",{value:!0});const n={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return A0.default=n,A0}var Ac={},jR;function y7(){if(jR)return Ac;jR=1,Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.callRef=Ac.getValidate=void 0;const n=S1(),e=Ya(),t=gn(),r=Zc(),i=OM(),s=Hn(),o={keyword:"$ref",schemaType:"string",code(u){const{gen:c,schema:d,it:h}=u,{baseId:g,schemaEnv:y,validateName:E,opts:_,self:m}=h,{root:v}=y;if((d==="#"||d==="#/")&&g===v.baseId)return T();const S=i.resolveRef.call(m,v,g,d);if(S===void 0)throw new n.default(h.opts.uriResolver,g,d);if(S instanceof i.SchemaEnv)return M(S);return A(S);function T(){if(y===v)return l(u,E,y,y.$async);const R=c.scopeValue("root",{ref:v});return l(u,(0,t._)`${R}.validate`,v,v.$async)}function M(R){const O=a(u,R);l(u,O,R,R.$async)}function A(R){const O=c.scopeValue("schema",_.code.source===!0?{ref:R,code:(0,t.stringify)(R)}:{ref:R}),I=c.name("valid"),k=u.subschema({schema:R,dataTypes:[],schemaPath:t.nil,topSchemaRef:O,errSchemaPath:d},I);u.mergeEvaluated(k),u.ok(I)}}};function a(u,c){const{gen:d}=u;return c.validate?d.scopeValue("validate",{ref:c.validate}):(0,t._)`${d.scopeValue("wrapper",{ref:c})}.validate`}Ac.getValidate=a;function l(u,c,d,h){const{gen:g,it:y}=u,{allErrors:E,schemaEnv:_,opts:m}=y,v=m.passContext?r.default.this:t.nil;h?S():T();function S(){if(!_.$async)throw new Error("async schema referenced by sync schema");const R=g.let("valid");g.try(()=>{g.code((0,t._)`await ${(0,e.callValidateCode)(u,c,v)}`),A(c),E||g.assign(R,!0)},O=>{g.if((0,t._)`!(${O} instanceof ${y.ValidationError})`,()=>g.throw(O)),M(O),E||g.assign(R,!1)}),u.ok(R)}function T(){u.result((0,e.callValidateCode)(u,c,v),()=>A(c),()=>M(c))}function M(R){const O=(0,t._)`${R}.errors`;g.assign(r.default.vErrors,(0,t._)`${r.default.vErrors} === null ? ${O} : ${r.default.vErrors}.concat(${O})`),g.assign(r.default.errors,(0,t._)`${r.default.vErrors}.length`)}function A(R){var O;if(!y.opts.unevaluated)return;const I=(O=d==null?void 0:d.validate)===null||O===void 0?void 0:O.evaluated;if(y.props!==!0)if(I&&!I.dynamicProps)I.props!==void 0&&(y.props=s.mergeEvaluated.props(g,I.props,y.props));else{const k=g.var("props",(0,t._)`${R}.evaluated.props`);y.props=s.mergeEvaluated.props(g,k,y.props,t.Name)}if(y.items!==!0)if(I&&!I.dynamicItems)I.items!==void 0&&(y.items=s.mergeEvaluated.items(g,I.items,y.items));else{const k=g.var("items",(0,t._)`${R}.evaluated.items`);y.items=s.mergeEvaluated.items(g,k,y.items,t.Name)}}}return Ac.callRef=l,Ac.default=o,Ac}var WR;function v7(){if(WR)return M0;WR=1,Object.defineProperty(M0,"__esModule",{value:!0});const n=g7(),e=y7(),t=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",n.default,e.default];return M0.default=t,M0}var C0={},R0={},qR;function _7(){if(qR)return R0;qR=1,Object.defineProperty(R0,"__esModule",{value:!0});const n=gn(),e=n.operators,t={maximum:{okStr:"<=",ok:e.LTE,fail:e.GT},minimum:{okStr:">=",ok:e.GTE,fail:e.LT},exclusiveMaximum:{okStr:"<",ok:e.LT,fail:e.GTE},exclusiveMinimum:{okStr:">",ok:e.GT,fail:e.LTE}},r={message:({keyword:s,schemaCode:o})=>(0,n.str)`must be ${t[s].okStr} ${o}`,params:({keyword:s,schemaCode:o})=>(0,n._)`{comparison: ${t[s].okStr}, limit: ${o}}`},i={keyword:Object.keys(t),type:"number",schemaType:"number",$data:!0,error:r,code(s){const{keyword:o,data:a,schemaCode:l}=s;s.fail$data((0,n._)`${a} ${t[o].fail} ${l} || isNaN(${a})`)}};return R0.default=i,R0}var P0={},XR;function x7(){if(XR)return P0;XR=1,Object.defineProperty(P0,"__esModule",{value:!0});const n=gn(),t={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:r})=>(0,n.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,n._)`{multipleOf: ${r}}`},code(r){const{gen:i,data:s,schemaCode:o,it:a}=r,l=a.opts.multipleOfPrecision,u=i.let("res"),c=l?(0,n._)`Math.abs(Math.round(${u}) - ${u}) > 1e-${l}`:(0,n._)`${u} !== parseInt(${u})`;r.fail$data((0,n._)`(${o} === 0 || (${u} = ${s}/${o}, ${c}))`)}};return P0.default=t,P0}var I0={},L0={},YR;function w7(){if(YR)return L0;YR=1,Object.defineProperty(L0,"__esModule",{value:!0});function n(e){const t=e.length;let r=0,i=0,s;for(;i<t;)r++,s=e.charCodeAt(i++),s>=55296&&s<=56319&&i<t&&(s=e.charCodeAt(i),(s&64512)===56320&&i++);return r}return L0.default=n,n.code='require("ajv/dist/runtime/ucs2length").default',L0}var KR;function S7(){if(KR)return I0;KR=1,Object.defineProperty(I0,"__esModule",{value:!0});const n=gn(),e=Hn(),t=w7(),i={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:s,schemaCode:o}){const a=s==="maxLength"?"more":"fewer";return(0,n.str)`must NOT have ${a} than ${o} characters`},params:({schemaCode:s})=>(0,n._)`{limit: ${s}}`},code(s){const{keyword:o,data:a,schemaCode:l,it:u}=s,c=o==="maxLength"?n.operators.GT:n.operators.LT,d=u.opts.unicode===!1?(0,n._)`${a}.length`:(0,n._)`${(0,e.useFunc)(s.gen,t.default)}(${a})`;s.fail$data((0,n._)`${d} ${c} ${l}`)}};return I0.default=i,I0}var N0={},JR;function E7(){if(JR)return N0;JR=1,Object.defineProperty(N0,"__esModule",{value:!0});const n=Ya(),e=gn(),r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:i})=>(0,e.str)`must match pattern "${i}"`,params:({schemaCode:i})=>(0,e._)`{pattern: ${i}}`},code(i){const{data:s,$data:o,schema:a,schemaCode:l,it:u}=i,c=u.opts.unicodeRegExp?"u":"",d=o?(0,e._)`(new RegExp(${l}, ${c}))`:(0,n.usePattern)(i,a);i.fail$data((0,e._)`!${d}.test(${s})`)}};return N0.default=r,N0}var O0={},ZR;function b7(){if(ZR)return O0;ZR=1,Object.defineProperty(O0,"__esModule",{value:!0});const n=gn(),t={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const s=r==="maxProperties"?"more":"fewer";return(0,n.str)`must NOT have ${s} than ${i} properties`},params:({schemaCode:r})=>(0,n._)`{limit: ${r}}`},code(r){const{keyword:i,data:s,schemaCode:o}=r,a=i==="maxProperties"?n.operators.GT:n.operators.LT;r.fail$data((0,n._)`Object.keys(${s}).length ${a} ${o}`)}};return O0.default=t,O0}var D0={},QR;function T7(){if(QR)return D0;QR=1,Object.defineProperty(D0,"__esModule",{value:!0});const n=Ya(),e=gn(),t=Hn(),i={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:s}})=>(0,e.str)`must have required property '${s}'`,params:({params:{missingProperty:s}})=>(0,e._)`{missingProperty: ${s}}`},code(s){const{gen:o,schema:a,schemaCode:l,data:u,$data:c,it:d}=s,{opts:h}=d;if(!c&&a.length===0)return;const g=a.length>=h.loopRequired;if(d.allErrors?y():E(),h.strictRequired){const v=s.parentSchema.properties,{definedProperties:S}=s.it;for(const T of a)if((v==null?void 0:v[T])===void 0&&!S.has(T)){const M=d.schemaEnv.baseId+d.errSchemaPath,A=`required property "${T}" is not defined at "${M}" (strictRequired)`;(0,t.checkStrictMode)(d,A,d.opts.strictRequired)}}function y(){if(g||c)s.block$data(e.nil,_);else for(const v of a)(0,n.checkReportMissingProp)(s,v)}function E(){const v=o.let("missing");if(g||c){const S=o.let("valid",!0);s.block$data(S,()=>m(v,S)),s.ok(S)}else o.if((0,n.checkMissingProp)(s,a,v)),(0,n.reportMissingProp)(s,v),o.else()}function _(){o.forOf("prop",l,v=>{s.setParams({missingProperty:v}),o.if((0,n.noPropertyInData)(o,u,v,h.ownProperties),()=>s.error())})}function m(v,S){s.setParams({missingProperty:v}),o.forOf(v,l,()=>{o.assign(S,(0,n.propertyInData)(o,u,v,h.ownProperties)),o.if((0,e.not)(S),()=>{s.error(),o.break()})},e.nil)}}};return D0.default=i,D0}var k0={},eP;function M7(){if(eP)return k0;eP=1,Object.defineProperty(k0,"__esModule",{value:!0});const n=gn(),t={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const s=r==="maxItems"?"more":"fewer";return(0,n.str)`must NOT have ${s} than ${i} items`},params:({schemaCode:r})=>(0,n._)`{limit: ${r}}`},code(r){const{keyword:i,data:s,schemaCode:o}=r,a=i==="maxItems"?n.operators.GT:n.operators.LT;r.fail$data((0,n._)`${s}.length ${a} ${o}`)}};return k0.default=t,k0}var U0={},F0={},tP;function DM(){if(tP)return F0;tP=1,Object.defineProperty(F0,"__esModule",{value:!0});const n=b3();return n.code='require("ajv/dist/runtime/equal").default',F0.default=n,F0}var nP;function A7(){if(nP)return U0;nP=1,Object.defineProperty(U0,"__esModule",{value:!0});const n=$x(),e=gn(),t=Hn(),r=DM(),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:o,j:a}})=>(0,e.str)`must NOT have duplicate items (items ## ${a} and ${o} are identical)`,params:({params:{i:o,j:a}})=>(0,e._)`{i: ${o}, j: ${a}}`},code(o){const{gen:a,data:l,$data:u,schema:c,parentSchema:d,schemaCode:h,it:g}=o;if(!u&&!c)return;const y=a.let("valid"),E=d.items?(0,n.getSchemaTypes)(d.items):[];o.block$data(y,_,(0,e._)`${h} === false`),o.ok(y);function _(){const T=a.let("i",(0,e._)`${l}.length`),M=a.let("j");o.setParams({i:T,j:M}),a.assign(y,!0),a.if((0,e._)`${T} > 1`,()=>(m()?v:S)(T,M))}function m(){return E.length>0&&!E.some(T=>T==="object"||T==="array")}function v(T,M){const A=a.name("item"),R=(0,n.checkDataTypes)(E,A,g.opts.strictNumbers,n.DataType.Wrong),O=a.const("indices",(0,e._)`{}`);a.for((0,e._)`;${T}--;`,()=>{a.let(A,(0,e._)`${l}[${T}]`),a.if(R,(0,e._)`continue`),E.length>1&&a.if((0,e._)`typeof ${A} == "string"`,(0,e._)`${A} += "_"`),a.if((0,e._)`typeof ${O}[${A}] == "number"`,()=>{a.assign(M,(0,e._)`${O}[${A}]`),o.error(),a.assign(y,!1).break()}).code((0,e._)`${O}[${A}] = ${T}`)})}function S(T,M){const A=(0,t.useFunc)(a,r.default),R=a.name("outer");a.label(R).for((0,e._)`;${T}--;`,()=>a.for((0,e._)`${M} = ${T}; ${M}--;`,()=>a.if((0,e._)`${A}(${l}[${T}], ${l}[${M}])`,()=>{o.error(),a.assign(y,!1).break(R)})))}}};return U0.default=s,U0}var z0={},rP;function C7(){if(rP)return z0;rP=1,Object.defineProperty(z0,"__esModule",{value:!0});const n=gn(),e=Hn(),t=DM(),i={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:s})=>(0,n._)`{allowedValue: ${s}}`},code(s){const{gen:o,data:a,$data:l,schemaCode:u,schema:c}=s;l||c&&typeof c=="object"?s.fail$data((0,n._)`!${(0,e.useFunc)(o,t.default)}(${a}, ${u})`):s.fail((0,n._)`${c} !== ${a}`)}};return z0.default=i,z0}var B0={},iP;function R7(){if(iP)return B0;iP=1,Object.defineProperty(B0,"__esModule",{value:!0});const n=gn(),e=Hn(),t=DM(),i={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:s})=>(0,n._)`{allowedValues: ${s}}`},code(s){const{gen:o,data:a,$data:l,schema:u,schemaCode:c,it:d}=s;if(!l&&u.length===0)throw new Error("enum must have non-empty array");const h=u.length>=d.opts.loopEnum;let g;const y=()=>g??(g=(0,e.useFunc)(o,t.default));let E;if(h||l)E=o.let("valid"),s.block$data(E,_);else{if(!Array.isArray(u))throw new Error("ajv implementation error");const v=o.const("vSchema",c);E=(0,n.or)(...u.map((S,T)=>m(v,T)))}s.pass(E);function _(){o.assign(E,!1),o.forOf("v",c,v=>o.if((0,n._)`${y()}(${a}, ${v})`,()=>o.assign(E,!0).break()))}function m(v,S){const T=u[S];return typeof T=="object"&&T!==null?(0,n._)`${y()}(${a}, ${v}[${S}])`:(0,n._)`${a} === ${T}`}}};return B0.default=i,B0}var sP;function P7(){if(sP)return C0;sP=1,Object.defineProperty(C0,"__esModule",{value:!0});const n=_7(),e=x7(),t=S7(),r=E7(),i=b7(),s=T7(),o=M7(),a=A7(),l=C7(),u=R7(),c=[n.default,e.default,t.default,r.default,i.default,s.default,o.default,a.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},l.default,u.default];return C0.default=c,C0}var H0={},kh={},oP;function T3(){if(oP)return kh;oP=1,Object.defineProperty(kh,"__esModule",{value:!0}),kh.validateAdditionalItems=void 0;const n=gn(),e=Hn(),r={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:s}})=>(0,n.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,n._)`{limit: ${s}}`},code(s){const{parentSchema:o,it:a}=s,{items:l}=o;if(!Array.isArray(l)){(0,e.checkStrictMode)(a,'"additionalItems" is ignored when "items" is not an array of schemas');return}i(s,l)}};function i(s,o){const{gen:a,schema:l,data:u,keyword:c,it:d}=s;d.items=!0;const h=a.const("len",(0,n._)`${u}.length`);if(l===!1)s.setParams({len:o.length}),s.pass((0,n._)`${h} <= ${o.length}`);else if(typeof l=="object"&&!(0,e.alwaysValidSchema)(d,l)){const y=a.var("valid",(0,n._)`${h} <= ${o.length}`);a.if((0,n.not)(y),()=>g(y)),s.ok(y)}function g(y){a.forRange("i",o.length,h,E=>{s.subschema({keyword:c,dataProp:E,dataPropType:e.Type.Num},y),d.allErrors||a.if((0,n.not)(y),()=>a.break())})}}return kh.validateAdditionalItems=i,kh.default=r,kh}var $0={},Uh={},aP;function M3(){if(aP)return Uh;aP=1,Object.defineProperty(Uh,"__esModule",{value:!0}),Uh.validateTuple=void 0;const n=gn(),e=Hn(),t=Ya(),r={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(s){const{schema:o,it:a}=s;if(Array.isArray(o))return i(s,"additionalItems",o);a.items=!0,!(0,e.alwaysValidSchema)(a,o)&&s.ok((0,t.validateArray)(s))}};function i(s,o,a=s.schema){const{gen:l,parentSchema:u,data:c,keyword:d,it:h}=s;E(u),h.opts.unevaluated&&a.length&&h.items!==!0&&(h.items=e.mergeEvaluated.items(l,a.length,h.items));const g=l.name("valid"),y=l.const("len",(0,n._)`${c}.length`);a.forEach((_,m)=>{(0,e.alwaysValidSchema)(h,_)||(l.if((0,n._)`${y} > ${m}`,()=>s.subschema({keyword:d,schemaProp:m,dataProp:m},g)),s.ok(g))});function E(_){const{opts:m,errSchemaPath:v}=h,S=a.length,T=S===_.minItems&&(S===_.maxItems||_[o]===!1);if(m.strictTuples&&!T){const M=`"${d}" is ${S}-tuple, but minItems or maxItems/${o} are not specified or different at path "${v}"`;(0,e.checkStrictMode)(h,M,m.strictTuples)}}}return Uh.validateTuple=i,Uh.default=r,Uh}var lP;function I7(){if(lP)return $0;lP=1,Object.defineProperty($0,"__esModule",{value:!0});const n=M3(),e={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,n.validateTuple)(t,"items")};return $0.default=e,$0}var G0={},uP;function L7(){if(uP)return G0;uP=1,Object.defineProperty(G0,"__esModule",{value:!0});const n=gn(),e=Hn(),t=Ya(),r=T3(),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,n.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,n._)`{limit: ${o}}`},code(o){const{schema:a,parentSchema:l,it:u}=o,{prefixItems:c}=l;u.items=!0,!(0,e.alwaysValidSchema)(u,a)&&(c?(0,r.validateAdditionalItems)(o,c):o.ok((0,t.validateArray)(o)))}};return G0.default=s,G0}var V0={},cP;function N7(){if(cP)return V0;cP=1,Object.defineProperty(V0,"__esModule",{value:!0});const n=gn(),e=Hn(),r={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:i,max:s}})=>s===void 0?(0,n.str)`must contain at least ${i} valid item(s)`:(0,n.str)`must contain at least ${i} and no more than ${s} valid item(s)`,params:({params:{min:i,max:s}})=>s===void 0?(0,n._)`{minContains: ${i}}`:(0,n._)`{minContains: ${i}, maxContains: ${s}}`},code(i){const{gen:s,schema:o,parentSchema:a,data:l,it:u}=i;let c,d;const{minContains:h,maxContains:g}=a;u.opts.next?(c=h===void 0?1:h,d=g):c=1;const y=s.const("len",(0,n._)`${l}.length`);if(i.setParams({min:c,max:d}),d===void 0&&c===0){(0,e.checkStrictMode)(u,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(d!==void 0&&c>d){(0,e.checkStrictMode)(u,'"minContains" > "maxContains" is always invalid'),i.fail();return}if((0,e.alwaysValidSchema)(u,o)){let S=(0,n._)`${y} >= ${c}`;d!==void 0&&(S=(0,n._)`${S} && ${y} <= ${d}`),i.pass(S);return}u.items=!0;const E=s.name("valid");d===void 0&&c===1?m(E,()=>s.if(E,()=>s.break())):c===0?(s.let(E,!0),d!==void 0&&s.if((0,n._)`${l}.length > 0`,_)):(s.let(E,!1),_()),i.result(E,()=>i.reset());function _(){const S=s.name("_valid"),T=s.let("count",0);m(S,()=>s.if(S,()=>v(T)))}function m(S,T){s.forRange("i",0,y,M=>{i.subschema({keyword:"contains",dataProp:M,dataPropType:e.Type.Num,compositeRule:!0},S),T()})}function v(S){s.code((0,n._)`${S}++`),d===void 0?s.if((0,n._)`${S} >= ${c}`,()=>s.assign(E,!0).break()):(s.if((0,n._)`${S} > ${d}`,()=>s.assign(E,!1).break()),c===1?s.assign(E,!0):s.if((0,n._)`${S} >= ${c}`,()=>s.assign(E,!0)))}}};return V0.default=r,V0}var MS={},fP;function O7(){return fP||(fP=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateSchemaDeps=n.validatePropertyDeps=n.error=void 0;const e=gn(),t=Hn(),r=Ya();n.error={message:({params:{property:l,depsCount:u,deps:c}})=>{const d=u===1?"property":"properties";return(0,e.str)`must have ${d} ${c} when property ${l} is present`},params:({params:{property:l,depsCount:u,deps:c,missingProperty:d}})=>(0,e._)`{property: ${l},
    missingProperty: ${d},
    depsCount: ${u},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:n.error,code(l){const[u,c]=s(l);o(l,u),a(l,c)}};function s({schema:l}){const u={},c={};for(const d in l){if(d==="__proto__")continue;const h=Array.isArray(l[d])?u:c;h[d]=l[d]}return[u,c]}function o(l,u=l.schema){const{gen:c,data:d,it:h}=l;if(Object.keys(u).length===0)return;const g=c.let("missing");for(const y in u){const E=u[y];if(E.length===0)continue;const _=(0,r.propertyInData)(c,d,y,h.opts.ownProperties);l.setParams({property:y,depsCount:E.length,deps:E.join(", ")}),h.allErrors?c.if(_,()=>{for(const m of E)(0,r.checkReportMissingProp)(l,m)}):(c.if((0,e._)`${_} && (${(0,r.checkMissingProp)(l,E,g)})`),(0,r.reportMissingProp)(l,g),c.else())}}n.validatePropertyDeps=o;function a(l,u=l.schema){const{gen:c,data:d,keyword:h,it:g}=l,y=c.name("valid");for(const E in u)(0,t.alwaysValidSchema)(g,u[E])||(c.if((0,r.propertyInData)(c,d,E,g.opts.ownProperties),()=>{const _=l.subschema({keyword:h,schemaProp:E},y);l.mergeValidEvaluated(_,y)},()=>c.var(y,!0)),l.ok(y))}n.validateSchemaDeps=a,n.default=i}(MS)),MS}var j0={},dP;function D7(){if(dP)return j0;dP=1,Object.defineProperty(j0,"__esModule",{value:!0});const n=gn(),e=Hn(),r={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:i})=>(0,n._)`{propertyName: ${i.propertyName}}`},code(i){const{gen:s,schema:o,data:a,it:l}=i;if((0,e.alwaysValidSchema)(l,o))return;const u=s.name("valid");s.forIn("key",a,c=>{i.setParams({propertyName:c}),i.subschema({keyword:"propertyNames",data:c,dataTypes:["string"],propertyName:c,compositeRule:!0},u),s.if((0,n.not)(u),()=>{i.error(!0),l.allErrors||s.break()})}),i.ok(u)}};return j0.default=r,j0}var W0={},hP;function A3(){if(hP)return W0;hP=1,Object.defineProperty(W0,"__esModule",{value:!0});const n=Ya(),e=gn(),t=Zc(),r=Hn(),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:o})=>(0,e._)`{additionalProperty: ${o.additionalProperty}}`},code(o){const{gen:a,schema:l,parentSchema:u,data:c,errsCount:d,it:h}=o;if(!d)throw new Error("ajv implementation error");const{allErrors:g,opts:y}=h;if(h.props=!0,y.removeAdditional!=="all"&&(0,r.alwaysValidSchema)(h,l))return;const E=(0,n.allSchemaProperties)(u.properties),_=(0,n.allSchemaProperties)(u.patternProperties);m(),o.ok((0,e._)`${d} === ${t.default.errors}`);function m(){a.forIn("key",c,A=>{!E.length&&!_.length?T(A):a.if(v(A),()=>T(A))})}function v(A){let R;if(E.length>8){const O=(0,r.schemaRefOrVal)(h,u.properties,"properties");R=(0,n.isOwnProperty)(a,O,A)}else E.length?R=(0,e.or)(...E.map(O=>(0,e._)`${A} === ${O}`)):R=e.nil;return _.length&&(R=(0,e.or)(R,..._.map(O=>(0,e._)`${(0,n.usePattern)(o,O)}.test(${A})`))),(0,e.not)(R)}function S(A){a.code((0,e._)`delete ${c}[${A}]`)}function T(A){if(y.removeAdditional==="all"||y.removeAdditional&&l===!1){S(A);return}if(l===!1){o.setParams({additionalProperty:A}),o.error(),g||a.break();return}if(typeof l=="object"&&!(0,r.alwaysValidSchema)(h,l)){const R=a.name("valid");y.removeAdditional==="failing"?(M(A,R,!1),a.if((0,e.not)(R),()=>{o.reset(),S(A)})):(M(A,R),g||a.if((0,e.not)(R),()=>a.break()))}}function M(A,R,O){const I={keyword:"additionalProperties",dataProp:A,dataPropType:r.Type.Str};O===!1&&Object.assign(I,{compositeRule:!0,createErrors:!1,allErrors:!1}),o.subschema(I,R)}}};return W0.default=s,W0}var q0={},pP;function k7(){if(pP)return q0;pP=1,Object.defineProperty(q0,"__esModule",{value:!0});const n=w1(),e=Ya(),t=Hn(),r=A3(),i={keyword:"properties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,parentSchema:l,data:u,it:c}=s;c.opts.removeAdditional==="all"&&l.additionalProperties===void 0&&r.default.code(new n.KeywordCxt(c,r.default,"additionalProperties"));const d=(0,e.allSchemaProperties)(a);for(const _ of d)c.definedProperties.add(_);c.opts.unevaluated&&d.length&&c.props!==!0&&(c.props=t.mergeEvaluated.props(o,(0,t.toHash)(d),c.props));const h=d.filter(_=>!(0,t.alwaysValidSchema)(c,a[_]));if(h.length===0)return;const g=o.name("valid");for(const _ of h)y(_)?E(_):(o.if((0,e.propertyInData)(o,u,_,c.opts.ownProperties)),E(_),c.allErrors||o.else().var(g,!0),o.endIf()),s.it.definedProperties.add(_),s.ok(g);function y(_){return c.opts.useDefaults&&!c.compositeRule&&a[_].default!==void 0}function E(_){s.subschema({keyword:"properties",schemaProp:_,dataProp:_},g)}}};return q0.default=i,q0}var X0={},mP;function U7(){if(mP)return X0;mP=1,Object.defineProperty(X0,"__esModule",{value:!0});const n=Ya(),e=gn(),t=Hn(),r=Hn(),i={keyword:"patternProperties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,data:l,parentSchema:u,it:c}=s,{opts:d}=c,h=(0,n.allSchemaProperties)(a),g=h.filter(T=>(0,t.alwaysValidSchema)(c,a[T]));if(h.length===0||g.length===h.length&&(!c.opts.unevaluated||c.props===!0))return;const y=d.strictSchema&&!d.allowMatchingProperties&&u.properties,E=o.name("valid");c.props!==!0&&!(c.props instanceof e.Name)&&(c.props=(0,r.evaluatedPropsToName)(o,c.props));const{props:_}=c;m();function m(){for(const T of h)y&&v(T),c.allErrors?S(T):(o.var(E,!0),S(T),o.if(E))}function v(T){for(const M in y)new RegExp(T).test(M)&&(0,t.checkStrictMode)(c,`property ${M} matches pattern ${T} (use allowMatchingProperties)`)}function S(T){o.forIn("key",l,M=>{o.if((0,e._)`${(0,n.usePattern)(s,T)}.test(${M})`,()=>{const A=g.includes(T);A||s.subschema({keyword:"patternProperties",schemaProp:T,dataProp:M,dataPropType:r.Type.Str},E),c.opts.unevaluated&&_!==!0?o.assign((0,e._)`${_}[${M}]`,!0):!A&&!c.allErrors&&o.if((0,e.not)(E),()=>o.break())})})}}};return X0.default=i,X0}var Y0={},gP;function F7(){if(gP)return Y0;gP=1,Object.defineProperty(Y0,"__esModule",{value:!0});const n=Hn(),e={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:r,schema:i,it:s}=t;if((0,n.alwaysValidSchema)(s,i)){t.fail();return}const o=r.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),t.failResult(o,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};return Y0.default=e,Y0}var K0={},yP;function z7(){if(yP)return K0;yP=1,Object.defineProperty(K0,"__esModule",{value:!0});const e={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Ya().validateUnion,error:{message:"must match a schema in anyOf"}};return K0.default=e,K0}var J0={},vP;function B7(){if(vP)return J0;vP=1,Object.defineProperty(J0,"__esModule",{value:!0});const n=gn(),e=Hn(),r={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:i})=>(0,n._)`{passingSchemas: ${i.passing}}`},code(i){const{gen:s,schema:o,parentSchema:a,it:l}=i;if(!Array.isArray(o))throw new Error("ajv implementation error");if(l.opts.discriminator&&a.discriminator)return;const u=o,c=s.let("valid",!1),d=s.let("passing",null),h=s.name("_valid");i.setParams({passing:d}),s.block(g),i.result(c,()=>i.reset(),()=>i.error(!0));function g(){u.forEach((y,E)=>{let _;(0,e.alwaysValidSchema)(l,y)?s.var(h,!0):_=i.subschema({keyword:"oneOf",schemaProp:E,compositeRule:!0},h),E>0&&s.if((0,n._)`${h} && ${c}`).assign(c,!1).assign(d,(0,n._)`[${d}, ${E}]`).else(),s.if(h,()=>{s.assign(c,!0),s.assign(d,E),_&&i.mergeEvaluated(_,n.Name)})})}}};return J0.default=r,J0}var Z0={},_P;function H7(){if(_P)return Z0;_P=1,Object.defineProperty(Z0,"__esModule",{value:!0});const n=Hn(),e={keyword:"allOf",schemaType:"array",code(t){const{gen:r,schema:i,it:s}=t;if(!Array.isArray(i))throw new Error("ajv implementation error");const o=r.name("valid");i.forEach((a,l)=>{if((0,n.alwaysValidSchema)(s,a))return;const u=t.subschema({keyword:"allOf",schemaProp:l},o);t.ok(o),t.mergeEvaluated(u)})}};return Z0.default=e,Z0}var Q0={},xP;function $7(){if(xP)return Q0;xP=1,Object.defineProperty(Q0,"__esModule",{value:!0});const n=gn(),e=Hn(),r={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:s})=>(0,n.str)`must match "${s.ifClause}" schema`,params:({params:s})=>(0,n._)`{failingKeyword: ${s.ifClause}}`},code(s){const{gen:o,parentSchema:a,it:l}=s;a.then===void 0&&a.else===void 0&&(0,e.checkStrictMode)(l,'"if" without "then" and "else" is ignored');const u=i(l,"then"),c=i(l,"else");if(!u&&!c)return;const d=o.let("valid",!0),h=o.name("_valid");if(g(),s.reset(),u&&c){const E=o.let("ifClause");s.setParams({ifClause:E}),o.if(h,y("then",E),y("else",E))}else u?o.if(h,y("then")):o.if((0,n.not)(h),y("else"));s.pass(d,()=>s.error(!0));function g(){const E=s.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},h);s.mergeEvaluated(E)}function y(E,_){return()=>{const m=s.subschema({keyword:E},h);o.assign(d,h),s.mergeValidEvaluated(m,d),_?o.assign(_,(0,n._)`${E}`):s.setParams({ifClause:E})}}}};function i(s,o){const a=s.schema[o];return a!==void 0&&!(0,e.alwaysValidSchema)(s,a)}return Q0.default=r,Q0}var e_={},wP;function G7(){if(wP)return e_;wP=1,Object.defineProperty(e_,"__esModule",{value:!0});const n=Hn(),e={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:r,it:i}){r.if===void 0&&(0,n.checkStrictMode)(i,`"${t}" without "if" is ignored`)}};return e_.default=e,e_}var SP;function V7(){if(SP)return H0;SP=1,Object.defineProperty(H0,"__esModule",{value:!0});const n=T3(),e=I7(),t=M3(),r=L7(),i=N7(),s=O7(),o=D7(),a=A3(),l=k7(),u=U7(),c=F7(),d=z7(),h=B7(),g=H7(),y=$7(),E=G7();function _(m=!1){const v=[c.default,d.default,h.default,g.default,y.default,E.default,o.default,a.default,s.default,l.default,u.default];return m?v.push(e.default,r.default):v.push(n.default,t.default),v.push(i.default),v}return H0.default=_,H0}var t_={},n_={},EP;function j7(){if(EP)return n_;EP=1,Object.defineProperty(n_,"__esModule",{value:!0});const n=gn(),t={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,n.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,n._)`{format: ${r}}`},code(r,i){const{gen:s,data:o,$data:a,schema:l,schemaCode:u,it:c}=r,{opts:d,errSchemaPath:h,schemaEnv:g,self:y}=c;if(!d.validateFormats)return;a?E():_();function E(){const m=s.scopeValue("formats",{ref:y.formats,code:d.code.formats}),v=s.const("fDef",(0,n._)`${m}[${u}]`),S=s.let("fType"),T=s.let("format");s.if((0,n._)`typeof ${v} == "object" && !(${v} instanceof RegExp)`,()=>s.assign(S,(0,n._)`${v}.type || "string"`).assign(T,(0,n._)`${v}.validate`),()=>s.assign(S,(0,n._)`"string"`).assign(T,v)),r.fail$data((0,n.or)(M(),A()));function M(){return d.strictSchema===!1?n.nil:(0,n._)`${u} && !${T}`}function A(){const R=g.$async?(0,n._)`(${v}.async ? await ${T}(${o}) : ${T}(${o}))`:(0,n._)`${T}(${o})`,O=(0,n._)`(typeof ${T} == "function" ? ${R} : ${T}.test(${o}))`;return(0,n._)`${T} && ${T} !== true && ${S} === ${i} && !${O}`}}function _(){const m=y.formats[l];if(!m){M();return}if(m===!0)return;const[v,S,T]=A(m);v===i&&r.pass(R());function M(){if(d.strictSchema===!1){y.logger.warn(O());return}throw new Error(O());function O(){return`unknown format "${l}" ignored in schema at path "${h}"`}}function A(O){const I=O instanceof RegExp?(0,n.regexpCode)(O):d.code.formats?(0,n._)`${d.code.formats}${(0,n.getProperty)(l)}`:void 0,k=s.scopeValue("formats",{key:l,ref:O,code:I});return typeof O=="object"&&!(O instanceof RegExp)?[O.type||"string",O.validate,(0,n._)`${k}.validate`]:["string",O,k]}function R(){if(typeof m=="object"&&!(m instanceof RegExp)&&m.async){if(!g.$async)throw new Error("async format in sync schema");return(0,n._)`await ${T}(${o})`}return typeof S=="function"?(0,n._)`${T}(${o})`:(0,n._)`${T}.test(${o})`}}}};return n_.default=t,n_}var bP;function W7(){if(bP)return t_;bP=1,Object.defineProperty(t_,"__esModule",{value:!0});const e=[j7().default];return t_.default=e,t_}var Bf={},TP;function q7(){return TP||(TP=1,Object.defineProperty(Bf,"__esModule",{value:!0}),Bf.contentVocabulary=Bf.metadataVocabulary=void 0,Bf.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],Bf.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),Bf}var MP;function X7(){if(MP)return T0;MP=1,Object.defineProperty(T0,"__esModule",{value:!0});const n=v7(),e=P7(),t=V7(),r=W7(),i=q7(),s=[n.default,e.default,(0,t.default)(),r.default,i.metadataVocabulary,i.contentVocabulary];return T0.default=s,T0}var r_={},og={},AP;function Y7(){if(AP)return og;AP=1,Object.defineProperty(og,"__esModule",{value:!0}),og.DiscrError=void 0;var n;return function(e){e.Tag="tag",e.Mapping="mapping"}(n||(og.DiscrError=n={})),og}var CP;function K7(){if(CP)return r_;CP=1,Object.defineProperty(r_,"__esModule",{value:!0});const n=gn(),e=Y7(),t=OM(),r=S1(),i=Hn(),o={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:a,tagName:l}})=>a===e.DiscrError.Tag?`tag "${l}" must be string`:`value of tag "${l}" must be in oneOf`,params:({params:{discrError:a,tag:l,tagName:u}})=>(0,n._)`{error: ${a}, tag: ${u}, tagValue: ${l}}`},code(a){const{gen:l,data:u,schema:c,parentSchema:d,it:h}=a,{oneOf:g}=d;if(!h.opts.discriminator)throw new Error("discriminator: requires discriminator option");const y=c.propertyName;if(typeof y!="string")throw new Error("discriminator: requires propertyName");if(c.mapping)throw new Error("discriminator: mapping is not supported");if(!g)throw new Error("discriminator: requires oneOf keyword");const E=l.let("valid",!1),_=l.const("tag",(0,n._)`${u}${(0,n.getProperty)(y)}`);l.if((0,n._)`typeof ${_} == "string"`,()=>m(),()=>a.error(!1,{discrError:e.DiscrError.Tag,tag:_,tagName:y})),a.ok(E);function m(){const T=S();l.if(!1);for(const M in T)l.elseIf((0,n._)`${_} === ${M}`),l.assign(E,v(T[M]));l.else(),a.error(!1,{discrError:e.DiscrError.Mapping,tag:_,tagName:y}),l.endIf()}function v(T){const M=l.name("valid"),A=a.subschema({keyword:"oneOf",schemaProp:T},M);return a.mergeEvaluated(A,n.Name),M}function S(){var T;const M={},A=O(d);let R=!0;for(let G=0;G<g.length;G++){let $=g[G];if($!=null&&$.$ref&&!(0,i.schemaHasRulesButRef)($,h.self.RULES)){const ee=$.$ref;if($=t.resolveRef.call(h.self,h.schemaEnv.root,h.baseId,ee),$ instanceof t.SchemaEnv&&($=$.schema),$===void 0)throw new r.default(h.opts.uriResolver,h.baseId,ee)}const U=(T=$==null?void 0:$.properties)===null||T===void 0?void 0:T[y];if(typeof U!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${y}"`);R=R&&(A||O($)),I(U,G)}if(!R)throw new Error(`discriminator: "${y}" must be required`);return M;function O({required:G}){return Array.isArray(G)&&G.includes(y)}function I(G,$){if(G.const)k(G.const,$);else if(G.enum)for(const U of G.enum)k(U,$);else throw new Error(`discriminator: "properties/${y}" must have "const" or "enum"`)}function k(G,$){if(typeof G!="string"||G in M)throw new Error(`discriminator: "${y}" values must be unique strings`);M[G]=$}}}};return r_.default=o,r_}const J7="http://json-schema.org/draft-07/schema#",Z7="http://json-schema.org/draft-07/schema#",Q7="Core schema meta-schema",eq={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},tq=["object","boolean"],nq={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},rq={$schema:J7,$id:Z7,title:Q7,definitions:eq,type:tq,properties:nq,default:!0};var RP;function C3(){return RP||(RP=1,function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;const t=m7(),r=X7(),i=K7(),s=rq,o=["/properties"],a="http://json-schema.org/draft-07/schema";class l extends t.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(y=>this.addVocabulary(y)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const y=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(y,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}e.Ajv=l,n.exports=e=l,n.exports.Ajv=l,Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var u=w1();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return u.KeywordCxt}});var c=gn();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var d=NM();Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return d.default}});var h=S1();Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return h.default}})}(x0,x0.exports)),x0.exports}var iq=C3();const R3=Bi(iq),sq="http://json-schema.org/draft-07/schema#",oq={EntityConfiguration:{properties:{entity:{type:"string"},header:{$ref:"#/definitions/JWTHeader"},invalidReason:{type:"string"},jwt:{type:"string"},payload:{$ref:"#/definitions/EntityConfigurationPayload"},startNode:{type:"boolean"},subordinate:{$ref:"#/definitions/SubordianteStatement"},valid:{type:"boolean"}},type:"object"},EntityConfigurationPayload:{properties:{authority_hints:{items:{type:"string"},type:"array"},exp:{type:"number"},iat:{type:"number"},iss:{type:"string"},jwks:{properties:{keys:{items:{},type:"array"}},type:"object"},metadata:{properties:{federation_entity:{properties:{contacts:{items:{type:"string"},type:"array"},federation_fetch_endpoint:{type:"string"},federation_list_endpoint:{type:"string"},homepage_uri:{type:"string"},organization_name:{type:"string"}},type:"object"},openid_provider:{properties:{authorization_endpoint:{type:"string"},client_registration_types_supported:{items:{type:"string"},type:"array"},federation_registration_endpoint:{type:"string"},grant_types_supported:{items:{type:"string"},type:"array"},id_token_signing_alg_values_supported:{items:{type:"string"},type:"array"},issuer:{type:"string"},logo_uri:{type:"string"},op_policy_uri:{type:"string"},response_types_supported:{items:{type:"string"},type:"array"},signed_jwks_uri:{type:"string"},subject_types_supported:{items:{type:"string"},type:"array"},token_endpoint:{type:"string"},token_endpoint_auth_methods_supported:{items:{type:"string"},type:"array"}},type:"object"}},type:"object"},sub:{type:"string"}},type:"object"},EntityType:{enum:["Trust Anchor","Intermediate","Leaf","StartNode","Undiscovered"],type:"string"},GraphEdge:{properties:{id:{type:"string"},label:{type:"string"},source:{type:"string"},subStatement:{$ref:"#/definitions/SubordianteStatement"},target:{type:"string"}},type:"object"},GraphNode:{properties:{id:{type:"string"},info:{$ref:"#/definitions/NodeInfo"},label:{type:"string"}},type:"object"},JWTHeader:{properties:{alg:{type:"string"},kid:{type:"string"},typ:{type:"string"}},type:"object"},NodeInfo:{properties:{ec:{$ref:"#/definitions/EntityConfiguration"},immDependants:{items:{type:"string"},type:"array"},startNode:{type:"boolean"},type:{$ref:"#/definitions/EntityType"}},type:"object"},SubordianteStatement:{properties:{header:{$ref:"#/definitions/JWTHeader"},invalidReason:{type:"string"},jwt:{type:"string"},payload:{$ref:"#/definitions/SubordinateStatementPayload"},valid:{type:"boolean"}},type:"object"},SubordinateStatementPayload:{properties:{exp:{type:"number"},iat:{type:"number"},iss:{type:"string"},jwks:{properties:{keys:{items:{},type:"array"}},type:"object"},metadata_policy:{properties:{openid_provider:{properties:{contacts:{properties:{add:{items:{type:"string"},type:"array"}},type:"object"},organization_name:{properties:{value:{type:"string"}},type:"object"},subject_types_supported:{properties:{value:{items:{type:"string"},type:"array"}},type:"object"},token_endpoint_auth_methods_supported:{properties:{default:{items:{type:"string"},type:"array"},subset_of:{items:{type:"string"},type:"array"},superset_of:{items:{type:"string"},type:"array"}},type:"object"}},type:"object"}},type:"object"},source_endpoint:{type:"string"},sub:{type:"string"}},type:"object"}},aq={edges:{items:{$ref:"#/definitions/GraphEdge"},type:"array"},nodes:{items:{$ref:"#/definitions/GraphNode"},type:"array"}},lq="object",uq={$schema:sq,definitions:oq,properties:aq,type:lq},cq=new R3().compile(uq),kM="",eT=async(n,e,t)=>{const r=`${n}?sub=${e}`,i=await fr.get(kM+r),s=LM(i.data),o=IM(i.data),a=s.jwks.keys;s.jwks.keys=a.map(u=>_3(u));const l={jwt:i.data,header:o,payload:s,valid:!1};return await j9(l,t),l},fq=async(n,e=".well-known/openid-federation")=>{const t=n.endsWith("/")?n:n+"/",{data:r}=await fr.get(kM+t+e),i=IM(r),s=LM(r),o=s.jwks.keys;s.jwks.keys=o.map(l=>_3(l));const a={entity:n,jwt:r,header:i,payload:s,valid:!1,subordinates:{}};return await V9(a),a},py=async(n,e={nodes:[],edges:[]})=>{var o,a,l,u,c;const t=await fq(n),r=(a=(o=t.payload.metadata)==null?void 0:o.federation_entity)==null?void 0:a.federation_list_endpoint,i={ec:t,immDependants:[],type:Zg.Leaf};if(r){const d=await fr.get(kM+r);if(!Array.isArray(d.data))throw new Error("Invalid subordinate list response");i.immDependants=d.data}t.payload.trust_marks&&(i.trustMarks=t.payload.trust_marks.map(d=>({id:d.id,header:IM(d.trust_mark),payload:LM(d.trust_mark),jwt:d.trust_mark}))),$9(i);const s=i.ec.payload.authority_hints;if(s){const d=e.nodes.filter(h=>s.some(g=>g.startsWith(h.id)));await Promise.all(d.map(async h=>{var y,E,_;const g=(_=(E=(y=h.info.ec.payload)==null?void 0:y.metadata)==null?void 0:E.federation_entity)==null?void 0:_.federation_fetch_endpoint;if(g)try{const m=await eT(g,n,h.info.ec);i.ec.subordinates[h.info.ec.entity]=m}catch(m){console.error(m)}}))}if(i.immDependants.length>0){const d=e.nodes.filter(g=>i.immDependants.includes(g.id)),h=(c=(u=(l=i.ec.payload)==null?void 0:l.metadata)==null?void 0:u.federation_entity)==null?void 0:c.federation_fetch_endpoint;await Promise.all(d.map(async g=>{if(h)try{const y=await eT(h,g.id,i.ec);g.info.ec.subordinates[i.ec.entity]=y}catch(y){console.error(y)}}))}return X9(i,e)},dq=async(n,e={nodes:[],edges:[]})=>{let t=e;const r=[];for(const i of n)try{t=await py(i,t)}catch(s){console.error(s),r.push({entity:i,error:s})}return{graph:t,failed:r}},P3=async(n,e=void 0,t={nodes:[],edges:[]})=>{var o;const r=await py(n,t),i=r.nodes.find(a=>a.id===n);if(!i)return r;e&&r.edges.push(Gg(i.info,e));const s=(o=i.info.ec.payload)==null?void 0:o.authority_hints;return s&&s.length>0?P3(s[0],i.info,r):r},hq=({nodes:n,edges:e},t)=>{var c,d;const r=n.filter(h=>t.includes(h.id)),i=r.filter(h=>h.info.type==="Leaf").length,s=r.filter(h=>h.info.type==="Trust Anchor").length;if(i!==1||s!==1)return;const o=e.filter(h=>t.find(g=>g===h.source&&t.includes(h.target))||t.find(g=>g===h.target&&t.includes(h.source)));if(o.length===0)return;if(o.length!==r.length-1)return;const a=o.sort((h,g)=>{const y=r.find(v=>v.id===h.source),E=r.find(v=>v.id===h.target),_=r.find(v=>v.id===g.source),m=r.find(v=>v.id===g.target);return y&&E&&_&&m?y.info.type==="Trust Anchor"&&E.info.type==="Intermediate"?-1:_.info.type==="Trust Anchor"&&m.info.type==="Intermediate"?1:y.info.type==="Intermediate"&&E.info.type==="Leaf"?-1:_.info.type==="Intermediate"&&m.info.type==="Leaf"?1:0:0});if(a.length===0){let h=a[0];for(let g=1;g<a.length;g++)if(h.target===a[g].source)h=a[g];else return}const l=a.reverse(),u=l.map(h=>{var g;return(g=h.subStatement)==null?void 0:g.jwt});return u.unshift((c=r.find(h=>h.id===l[0].target))==null?void 0:c.info.ec.jwt),u.push((d=r.find(h=>h.id===l[l.length-1].source))==null?void 0:d.info.ec.jwt),JSON.stringify(u)},PP=(n,e=!1)=>JSON.stringify(e?n:{nodes:n.nodes.map(t=>t.id),edges:n.edges.map(t=>({source:t.source,target:t.target}))},null,2),pq=async n=>{let e;try{e=JSON.parse(n)}catch{throw new Error("Not a valid JSON")}if(e.nodes.length===0)throw new Error("Empty view data");if(typeof e.nodes[0]=="object"){if(!cq(e))throw new Error("Invalid view data");return{graph:e,errors:[]}}if(e=e,!G9(e))throw new Error("Invalid view data");const t=[],r=[];await Promise.all(e.nodes.map(async s=>{try{r.push((await py(s)).nodes[0])}catch(o){t.push([s,o])}}));const i=(await Promise.all(e.edges.map(async s=>{var c,d,h;const o=r.find(g=>g.id===s.source),a=r.find(g=>g.id===s.target);if(!o||!a)return;const l=`${s.source}-${s.target}`,u=(h=(d=(c=o.info.ec.payload)==null?void 0:c.metadata)==null?void 0:d.federation_entity)==null?void 0:h.federation_fetch_endpoint;if(u)try{const g=await eT(u,s.target,o.info.ec);a.info.ec.subordinates[o.info.ec.entity]=g}catch(g){console.error(g)}return{id:l,label:l,subStatement:a.info.ec.subordinates[o.info.ec.entity],source:s.source,target:s.target}}))).filter(s=>s!==void 0);return{graph:{nodes:r,edges:i},errors:t}};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const E1="154",I3={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},mq={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},L3=0,tT=1,N3=2,gq=3,O3=0,b1=1,Qg=2,Fa=3,Dl=0,ps=1,Lr=2,yq=2,Fu=0,gd=1,nT=2,rT=3,iT=4,D3=5,od=100,k3=101,U3=102,sT=103,oT=104,F3=200,z3=201,B3=202,H3=203,UM=204,FM=205,$3=206,G3=207,V3=208,j3=209,W3=210,q3=0,X3=1,Y3=2,Gx=3,K3=4,J3=5,Z3=6,Q3=7,iv=0,eU=1,tU=2,Ga=0,nU=1,rU=2,iU=3,zM=4,sU=5,T1=300,Wc=301,qc=302,my=303,gy=304,nm=306,yy=1e3,hs=1001,vy=1002,ei=1003,Vx=1004,vq=1004,ey=1005,_q=1005,br=1006,BM=1007,xq=1007,Xc=1008,wq=1008,Il=1009,oU=1010,aU=1011,M1=1012,HM=1013,ku=1014,Rl=1015,Fp=1016,$M=1017,GM=1018,Bc=1020,lU=1021,Qs=1023,uU=1024,cU=1025,Hc=1026,Ad=1027,fU=1028,VM=1029,dU=1030,jM=1031,WM=1033,wx=33776,Sx=33777,Ex=33778,bx=33779,aT=35840,lT=35841,uT=35842,cT=35843,hU=36196,fT=37492,dT=37496,hT=37808,pT=37809,mT=37810,gT=37811,yT=37812,vT=37813,_T=37814,xT=37815,wT=37816,ST=37817,ET=37818,bT=37819,TT=37820,MT=37821,Tx=36492,pU=36283,AT=36284,CT=36285,RT=36286,mU=2200,gU=2201,yU=2202,_y=2300,xy=2301,Mx=2302,cd=2400,fd=2401,wy=2402,A1=2500,qM=2501,Sq=0,Eq=1,bq=2,XM=3e3,$c=3001,vU=3200,YM=3201,Qc=0,_U=1,Gc="",an="srgb",ja="srgb-linear",KM="display-p3",Tq=0,Ax=7680,Mq=7681,Aq=7682,Cq=7683,Rq=34055,Pq=34056,Iq=5386,Lq=512,Nq=513,Oq=514,Dq=515,kq=516,Uq=517,Fq=518,xU=519,wU=512,SU=513,EU=514,bU=515,TU=516,MU=517,AU=518,CU=519,Sy=35044,zq=35048,Bq=35040,Hq=35045,$q=35049,Gq=35041,Vq=35046,jq=35050,Wq=35042,qq="100",PT="300 es",jx=1035,Pl=2e3,Ey=2001;let ju=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}};const cs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let IP=1234567;const yd=Math.PI/180,zp=180/Math.PI;function Eo(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(cs[n&255]+cs[n>>8&255]+cs[n>>16&255]+cs[n>>24&255]+"-"+cs[e&255]+cs[e>>8&255]+"-"+cs[e>>16&15|64]+cs[e>>24&255]+"-"+cs[t&63|128]+cs[t>>8&255]+"-"+cs[t>>16&255]+cs[t>>24&255]+cs[r&255]+cs[r>>8&255]+cs[r>>16&255]+cs[r>>24&255]).toLowerCase()}function jr(n,e,t){return Math.max(e,Math.min(t,n))}function JM(n,e){return(n%e+e)%e}function Xq(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function Yq(n,e,t){return n!==e?(t-n)/(e-n):0}function ty(n,e,t){return(1-t)*n+t*e}function Kq(n,e,t,r){return ty(n,e,1-Math.exp(-t*r))}function Jq(n,e=1){return e-Math.abs(JM(n,e*2)-e)}function Zq(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Qq(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function eX(n,e){return n+Math.floor(Math.random()*(e-n+1))}function tX(n,e){return n+Math.random()*(e-n)}function nX(n){return n*(.5-Math.random())}function rX(n){n!==void 0&&(IP=n);let e=IP+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function iX(n){return n*yd}function sX(n){return n*zp}function IT(n){return(n&n-1)===0&&n!==0}function RU(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Wx(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function oX(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+r)/2),c=o((e+r)/2),d=s((e-r)/2),h=o((e-r)/2),g=s((r-e)/2),y=o((r-e)/2);switch(i){case"XYX":n.set(a*c,l*d,l*h,a*u);break;case"YZY":n.set(l*h,a*c,l*d,a*u);break;case"ZXZ":n.set(l*d,l*h,a*c,a*u);break;case"XZX":n.set(a*c,l*y,l*g,a*u);break;case"YXY":n.set(l*g,a*c,l*y,a*u);break;case"ZYZ":n.set(l*y,l*g,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function So(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function dn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const qx={DEG2RAD:yd,RAD2DEG:zp,generateUUID:Eo,clamp:jr,euclideanModulo:JM,mapLinear:Xq,inverseLerp:Yq,lerp:ty,damp:Kq,pingpong:Jq,smoothstep:Zq,smootherstep:Qq,randInt:eX,randFloat:tX,randFloatSpread:nX,seededRandom:rX,degToRad:iX,radToDeg:sX,isPowerOfTwo:IT,ceilPowerOfTwo:RU,floorPowerOfTwo:Wx,setQuaternionFromProperEuler:oX,normalize:dn,denormalize:So};class Je{constructor(e=0,t=0){Je.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(jr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class fn{constructor(e,t,r,i,s,o,a,l,u){fn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,u)}set(e,t,r,i,s,o,a,l,u){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=s,c[5]=l,c[6]=r,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],u=r[1],c=r[4],d=r[7],h=r[2],g=r[5],y=r[8],E=i[0],_=i[3],m=i[6],v=i[1],S=i[4],T=i[7],M=i[2],A=i[5],R=i[8];return s[0]=o*E+a*v+l*M,s[3]=o*_+a*S+l*A,s[6]=o*m+a*T+l*R,s[1]=u*E+c*v+d*M,s[4]=u*_+c*S+d*A,s[7]=u*m+c*T+d*R,s[2]=h*E+g*v+y*M,s[5]=h*_+g*S+y*A,s[8]=h*m+g*T+y*R,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return t*o*c-t*a*u-r*s*c+r*a*l+i*s*u-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],d=c*o-a*u,h=a*l-c*s,g=u*s-o*l,y=t*d+r*h+i*g;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const E=1/y;return e[0]=d*E,e[1]=(i*u-c*r)*E,e[2]=(a*r-i*o)*E,e[3]=h*E,e[4]=(c*t-i*l)*E,e[5]=(i*s-a*t)*E,e[6]=g*E,e[7]=(r*l-u*t)*E,e[8]=(o*t-r*s)*E,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(r*l,r*u,-r*(l*o+u*a)+o+e,-i*u,i*l,-i*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(AS.makeScale(e,t)),this}rotate(e){return this.premultiply(AS.makeRotation(-e)),this}translate(e,t){return this.premultiply(AS.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const AS=new fn;function PU(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const aX={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Sp(n,e){return new aX[n](e)}function by(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const LP={};function ny(n){n in LP||(LP[n]=!0,console.warn(n))}function Pp(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function CS(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const lX=new fn().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),uX=new fn().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function cX(n){return n.convertSRGBToLinear().applyMatrix3(uX)}function fX(n){return n.applyMatrix3(lX).convertLinearToSRGB()}const dX={[ja]:n=>n,[an]:n=>n.convertSRGBToLinear(),[KM]:cX},hX={[ja]:n=>n,[an]:n=>n.convertLinearToSRGB(),[KM]:fX},Wo={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return ja},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=dX[e],i=hX[t];if(r===void 0||i===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let Fh;class ZM{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Fh===void 0&&(Fh=by("canvas")),Fh.width=e.width,Fh.height=e.height;const r=Fh.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Fh}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=by("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Pp(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Pp(t[r]/255)*255):t[r]=Pp(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let pX=0;class dd{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:pX++}),this.uuid=Eo(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(RS(i[o].image)):s.push(RS(i[o]))}else s=RS(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function RS(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?ZM.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let mX=0;class Fr extends ju{constructor(e=Fr.DEFAULT_IMAGE,t=Fr.DEFAULT_MAPPING,r=hs,i=hs,s=br,o=Xc,a=Qs,l=Il,u=Fr.DEFAULT_ANISOTROPY,c=Gc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:mX++}),this.uuid=Eo(),this.name="",this.source=new dd(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Je(0,0),this.repeat=new Je(1,1),this.center=new Je(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new fn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof c=="string"?this.colorSpace=c:(ny("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===$c?an:Gc),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==T1)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case yy:e.x=e.x-Math.floor(e.x);break;case hs:e.x=e.x<0?0:1;break;case vy:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case yy:e.y=e.y-Math.floor(e.y);break;case hs:e.y=e.y<0?0:1;break;case vy:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return ny("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===an?$c:XM}set encoding(e){ny("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===$c?an:Gc}}Fr.DEFAULT_IMAGE=null;Fr.DEFAULT_MAPPING=T1;Fr.DEFAULT_ANISOTROPY=1;class zn{constructor(e=0,t=0,r=0,i=1){zn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,u=l[0],c=l[4],d=l[8],h=l[1],g=l[5],y=l[9],E=l[2],_=l[6],m=l[10];if(Math.abs(c-h)<.01&&Math.abs(d-E)<.01&&Math.abs(y-_)<.01){if(Math.abs(c+h)<.1&&Math.abs(d+E)<.1&&Math.abs(y+_)<.1&&Math.abs(u+g+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(u+1)/2,T=(g+1)/2,M=(m+1)/2,A=(c+h)/4,R=(d+E)/4,O=(y+_)/4;return S>T&&S>M?S<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(S),i=A/r,s=R/r):T>M?T<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(T),r=A/i,s=O/i):M<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(M),r=R/s,i=O/s),this.set(r,i,s,t),this}let v=Math.sqrt((_-y)*(_-y)+(d-E)*(d-E)+(h-c)*(h-c));return Math.abs(v)<.001&&(v=1),this.x=(_-y)/v,this.y=(d-E)/v,this.z=(h-c)/v,this.w=Math.acos((u+g+m-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Wa extends ju{constructor(e=1,t=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new zn(0,0,e,t),this.scissorTest=!1,this.viewport=new zn(0,0,e,t);const i={width:e,height:t,depth:1};r.encoding!==void 0&&(ny("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===$c?an:Gc),this.texture=new Fr(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:br,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new dd(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class C1 extends Fr{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=ei,this.minFilter=ei,this.wrapR=hs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class gX extends Wa{constructor(e=1,t=1,r=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new C1(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class QM extends Fr{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=ei,this.minFilter=ei,this.wrapR=hs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class yX extends Wa{constructor(e=1,t=1,r=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new QM(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class vX extends Wa{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Qi{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],u=r[i+1],c=r[i+2],d=r[i+3];const h=s[o+0],g=s[o+1],y=s[o+2],E=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=d;return}if(a===1){e[t+0]=h,e[t+1]=g,e[t+2]=y,e[t+3]=E;return}if(d!==E||l!==h||u!==g||c!==y){let _=1-a;const m=l*h+u*g+c*y+d*E,v=m>=0?1:-1,S=1-m*m;if(S>Number.EPSILON){const M=Math.sqrt(S),A=Math.atan2(M,m*v);_=Math.sin(_*A)/M,a=Math.sin(a*A)/M}const T=a*v;if(l=l*_+h*T,u=u*_+g*T,c=c*_+y*T,d=d*_+E*T,_===1-a){const M=1/Math.sqrt(l*l+u*u+c*c+d*d);l*=M,u*=M,c*=M,d*=M}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],u=r[i+2],c=r[i+3],d=s[o],h=s[o+1],g=s[o+2],y=s[o+3];return e[t]=a*y+c*d+l*g-u*h,e[t+1]=l*y+c*h+u*d-a*g,e[t+2]=u*y+c*g+a*h-l*d,e[t+3]=c*y-a*d-l*h-u*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(r/2),c=a(i/2),d=a(s/2),h=l(r/2),g=l(i/2),y=l(s/2);switch(o){case"XYZ":this._x=h*c*d+u*g*y,this._y=u*g*d-h*c*y,this._z=u*c*y+h*g*d,this._w=u*c*d-h*g*y;break;case"YXZ":this._x=h*c*d+u*g*y,this._y=u*g*d-h*c*y,this._z=u*c*y-h*g*d,this._w=u*c*d+h*g*y;break;case"ZXY":this._x=h*c*d-u*g*y,this._y=u*g*d+h*c*y,this._z=u*c*y+h*g*d,this._w=u*c*d-h*g*y;break;case"ZYX":this._x=h*c*d-u*g*y,this._y=u*g*d+h*c*y,this._z=u*c*y-h*g*d,this._w=u*c*d+h*g*y;break;case"YZX":this._x=h*c*d+u*g*y,this._y=u*g*d+h*c*y,this._z=u*c*y-h*g*d,this._w=u*c*d-h*g*y;break;case"XZY":this._x=h*c*d-u*g*y,this._y=u*g*d-h*c*y,this._z=u*c*y+h*g*d,this._w=u*c*d+h*g*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],c=t[6],d=t[10],h=r+a+d;if(h>0){const g=.5/Math.sqrt(h+1);this._w=.25/g,this._x=(c-l)*g,this._y=(s-u)*g,this._z=(o-i)*g}else if(r>a&&r>d){const g=2*Math.sqrt(1+r-a-d);this._w=(c-l)/g,this._x=.25*g,this._y=(i+o)/g,this._z=(s+u)/g}else if(a>d){const g=2*Math.sqrt(1+a-r-d);this._w=(s-u)/g,this._x=(i+o)/g,this._y=.25*g,this._z=(l+c)/g}else{const g=2*Math.sqrt(1+d-r-a);this._w=(o-i)/g,this._x=(s+u)/g,this._y=(l+c)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(jr(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,c=t._w;return this._x=r*c+o*a+i*u-s*l,this._y=i*c+o*l+s*a-r*u,this._z=s*c+o*u+r*l-i*a,this._w=o*c-r*a-i*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const g=1-t;return this._w=g*o+t*this._w,this._x=g*r+t*this._x,this._y=g*i+t*this._y,this._z=g*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),c=Math.atan2(u,a),d=Math.sin((1-t)*c)/u,h=Math.sin(t*c)/u;return this._w=o*d+this._w*h,this._x=r*d+this._x*h,this._y=i*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class de{constructor(e=0,t=0,r=0){de.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(NP.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(NP.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=l*t+o*i-a*r,c=l*r+a*t-s*i,d=l*i+s*r-o*t,h=-s*t-o*r-a*i;return this.x=u*l+h*-s+c*-a-d*-o,this.y=c*l+h*-o+d*-s-u*-a,this.z=d*l+h*-a+u*-o-c*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return PS.copy(this).projectOnVector(e),this.sub(PS)}reflect(e){return this.sub(PS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(jr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const PS=new de,NP=new Qi;class Mo{constructor(e=new de(1/0,1/0,1/0),t=new de(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(xu.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(xu.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=xu.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),zh.copy(e.boundingBox),zh.applyMatrix4(e.matrixWorld),this.union(zh);else{const i=e.geometry;if(i!==void 0)if(t&&i.attributes!==void 0&&i.attributes.position!==void 0){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)xu.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(xu)}else i.boundingBox===null&&i.computeBoundingBox(),zh.copy(i.boundingBox),zh.applyMatrix4(e.matrixWorld),this.union(zh)}const r=e.children;for(let i=0,s=r.length;i<s;i++)this.expandByObject(r[i],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,xu),xu.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ag),i_.subVectors(this.max,ag),Bh.subVectors(e.a,ag),Hh.subVectors(e.b,ag),$h.subVectors(e.c,ag),Cc.subVectors(Hh,Bh),Rc.subVectors($h,Hh),Hf.subVectors(Bh,$h);let t=[0,-Cc.z,Cc.y,0,-Rc.z,Rc.y,0,-Hf.z,Hf.y,Cc.z,0,-Cc.x,Rc.z,0,-Rc.x,Hf.z,0,-Hf.x,-Cc.y,Cc.x,0,-Rc.y,Rc.x,0,-Hf.y,Hf.x,0];return!IS(t,Bh,Hh,$h,i_)||(t=[1,0,0,0,1,0,0,0,1],!IS(t,Bh,Hh,$h,i_))?!1:(s_.crossVectors(Cc,Rc),t=[s_.x,s_.y,s_.z],IS(t,Bh,Hh,$h,i_))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,xu).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(xu).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(_u[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),_u[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),_u[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),_u[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),_u[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),_u[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),_u[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),_u[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(_u),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const _u=[new de,new de,new de,new de,new de,new de,new de,new de],xu=new de,zh=new Mo,Bh=new de,Hh=new de,$h=new de,Cc=new de,Rc=new de,Hf=new de,ag=new de,i_=new de,s_=new de,$f=new de;function IS(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){$f.fromArray(n,s);const a=i.x*Math.abs($f.x)+i.y*Math.abs($f.y)+i.z*Math.abs($f.z),l=e.dot($f),u=t.dot($f),c=r.dot($f);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>a)return!1}return!0}const _X=new Mo,lg=new de,LS=new de;let Ao=class{constructor(e=new de,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):_X.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;lg.subVectors(e,this.center);const t=lg.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(lg,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(LS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(lg.copy(e.center).add(LS)),this.expandByPoint(lg.copy(e.center).sub(LS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const wu=new de,NS=new de,o_=new de,Pc=new de,OS=new de,a_=new de,DS=new de;class rm{constructor(e=new de,t=new de(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,wu)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=wu.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(wu.copy(this.origin).addScaledVector(this.direction,t),wu.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){NS.copy(e).add(t).multiplyScalar(.5),o_.copy(t).sub(e).normalize(),Pc.copy(this.origin).sub(NS);const s=e.distanceTo(t)*.5,o=-this.direction.dot(o_),a=Pc.dot(this.direction),l=-Pc.dot(o_),u=Pc.lengthSq(),c=Math.abs(1-o*o);let d,h,g,y;if(c>0)if(d=o*l-a,h=o*a-l,y=s*c,d>=0)if(h>=-y)if(h<=y){const E=1/c;d*=E,h*=E,g=d*(d+o*h+2*a)+h*(o*d+h+2*l)+u}else h=s,d=Math.max(0,-(o*h+a)),g=-d*d+h*(h+2*l)+u;else h=-s,d=Math.max(0,-(o*h+a)),g=-d*d+h*(h+2*l)+u;else h<=-y?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-l),s),g=-d*d+h*(h+2*l)+u):h<=y?(d=0,h=Math.min(Math.max(-s,-l),s),g=h*(h+2*l)+u):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-l),s),g=-d*d+h*(h+2*l)+u);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),g=-d*d+h*(h+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(NS).addScaledVector(o_,h),g}intersectSphere(e,t){wu.subVectors(e.center,this.origin);const r=wu.dot(this.direction),i=wu.dot(wu)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const u=1/this.direction.x,c=1/this.direction.y,d=1/this.direction.z,h=this.origin;return u>=0?(r=(e.min.x-h.x)*u,i=(e.max.x-h.x)*u):(r=(e.max.x-h.x)*u,i=(e.min.x-h.x)*u),c>=0?(s=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(s=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),d>=0?(a=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,wu)!==null}intersectTriangle(e,t,r,i,s){OS.subVectors(t,e),a_.subVectors(r,e),DS.crossVectors(OS,a_);let o=this.direction.dot(DS),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Pc.subVectors(this.origin,e);const l=a*this.direction.dot(a_.crossVectors(Pc,a_));if(l<0)return null;const u=a*this.direction.dot(OS.cross(Pc));if(u<0||l+u>o)return null;const c=-a*Pc.dot(DS);return c<0?null:this.at(c/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Qt{constructor(e,t,r,i,s,o,a,l,u,c,d,h,g,y,E,_){Qt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,u,c,d,h,g,y,E,_)}set(e,t,r,i,s,o,a,l,u,c,d,h,g,y,E,_){const m=this.elements;return m[0]=e,m[4]=t,m[8]=r,m[12]=i,m[1]=s,m[5]=o,m[9]=a,m[13]=l,m[2]=u,m[6]=c,m[10]=d,m[14]=h,m[3]=g,m[7]=y,m[11]=E,m[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Qt().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Gh.setFromMatrixColumn(e,0).length(),s=1/Gh.setFromMatrixColumn(e,1).length(),o=1/Gh.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const h=o*c,g=o*d,y=a*c,E=a*d;t[0]=l*c,t[4]=-l*d,t[8]=u,t[1]=g+y*u,t[5]=h-E*u,t[9]=-a*l,t[2]=E-h*u,t[6]=y+g*u,t[10]=o*l}else if(e.order==="YXZ"){const h=l*c,g=l*d,y=u*c,E=u*d;t[0]=h+E*a,t[4]=y*a-g,t[8]=o*u,t[1]=o*d,t[5]=o*c,t[9]=-a,t[2]=g*a-y,t[6]=E+h*a,t[10]=o*l}else if(e.order==="ZXY"){const h=l*c,g=l*d,y=u*c,E=u*d;t[0]=h-E*a,t[4]=-o*d,t[8]=y+g*a,t[1]=g+y*a,t[5]=o*c,t[9]=E-h*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const h=o*c,g=o*d,y=a*c,E=a*d;t[0]=l*c,t[4]=y*u-g,t[8]=h*u+E,t[1]=l*d,t[5]=E*u+h,t[9]=g*u-y,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const h=o*l,g=o*u,y=a*l,E=a*u;t[0]=l*c,t[4]=E-h*d,t[8]=y*d+g,t[1]=d,t[5]=o*c,t[9]=-a*c,t[2]=-u*c,t[6]=g*d+y,t[10]=h-E*d}else if(e.order==="XZY"){const h=o*l,g=o*u,y=a*l,E=a*u;t[0]=l*c,t[4]=-d,t[8]=u*c,t[1]=h*d+E,t[5]=o*c,t[9]=g*d-y,t[2]=y*d-g,t[6]=a*c,t[10]=E*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(xX,e,wX)}lookAt(e,t,r){const i=this.elements;return xo.subVectors(e,t),xo.lengthSq()===0&&(xo.z=1),xo.normalize(),Ic.crossVectors(r,xo),Ic.lengthSq()===0&&(Math.abs(r.z)===1?xo.x+=1e-4:xo.z+=1e-4,xo.normalize(),Ic.crossVectors(r,xo)),Ic.normalize(),l_.crossVectors(xo,Ic),i[0]=Ic.x,i[4]=l_.x,i[8]=xo.x,i[1]=Ic.y,i[5]=l_.y,i[9]=xo.y,i[2]=Ic.z,i[6]=l_.z,i[10]=xo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],u=r[12],c=r[1],d=r[5],h=r[9],g=r[13],y=r[2],E=r[6],_=r[10],m=r[14],v=r[3],S=r[7],T=r[11],M=r[15],A=i[0],R=i[4],O=i[8],I=i[12],k=i[1],G=i[5],$=i[9],U=i[13],ee=i[2],re=i[6],ne=i[10],X=i[14],q=i[3],K=i[7],F=i[11],L=i[15];return s[0]=o*A+a*k+l*ee+u*q,s[4]=o*R+a*G+l*re+u*K,s[8]=o*O+a*$+l*ne+u*F,s[12]=o*I+a*U+l*X+u*L,s[1]=c*A+d*k+h*ee+g*q,s[5]=c*R+d*G+h*re+g*K,s[9]=c*O+d*$+h*ne+g*F,s[13]=c*I+d*U+h*X+g*L,s[2]=y*A+E*k+_*ee+m*q,s[6]=y*R+E*G+_*re+m*K,s[10]=y*O+E*$+_*ne+m*F,s[14]=y*I+E*U+_*X+m*L,s[3]=v*A+S*k+T*ee+M*q,s[7]=v*R+S*G+T*re+M*K,s[11]=v*O+S*$+T*ne+M*F,s[15]=v*I+S*U+T*X+M*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],c=e[2],d=e[6],h=e[10],g=e[14],y=e[3],E=e[7],_=e[11],m=e[15];return y*(+s*l*d-i*u*d-s*a*h+r*u*h+i*a*g-r*l*g)+E*(+t*l*g-t*u*h+s*o*h-i*o*g+i*u*c-s*l*c)+_*(+t*u*d-t*a*g-s*o*d+r*o*g+s*a*c-r*u*c)+m*(-i*a*c-t*l*d+t*a*h+i*o*d-r*o*h+r*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],d=e[9],h=e[10],g=e[11],y=e[12],E=e[13],_=e[14],m=e[15],v=d*_*u-E*h*u+E*l*g-a*_*g-d*l*m+a*h*m,S=y*h*u-c*_*u-y*l*g+o*_*g+c*l*m-o*h*m,T=c*E*u-y*d*u+y*a*g-o*E*g-c*a*m+o*d*m,M=y*d*l-c*E*l-y*a*h+o*E*h+c*a*_-o*d*_,A=t*v+r*S+i*T+s*M;if(A===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/A;return e[0]=v*R,e[1]=(E*h*s-d*_*s-E*i*g+r*_*g+d*i*m-r*h*m)*R,e[2]=(a*_*s-E*l*s+E*i*u-r*_*u-a*i*m+r*l*m)*R,e[3]=(d*l*s-a*h*s-d*i*u+r*h*u+a*i*g-r*l*g)*R,e[4]=S*R,e[5]=(c*_*s-y*h*s+y*i*g-t*_*g-c*i*m+t*h*m)*R,e[6]=(y*l*s-o*_*s-y*i*u+t*_*u+o*i*m-t*l*m)*R,e[7]=(o*h*s-c*l*s+c*i*u-t*h*u-o*i*g+t*l*g)*R,e[8]=T*R,e[9]=(y*d*s-c*E*s-y*r*g+t*E*g+c*r*m-t*d*m)*R,e[10]=(o*E*s-y*a*s+y*r*u-t*E*u-o*r*m+t*a*m)*R,e[11]=(c*a*s-o*d*s-c*r*u+t*d*u+o*r*g-t*a*g)*R,e[12]=M*R,e[13]=(c*E*i-y*d*i+y*r*h-t*E*h-c*r*_+t*d*_)*R,e[14]=(y*a*i-o*E*i-y*r*l+t*E*l+o*r*_-t*a*_)*R,e[15]=(o*d*i-c*a*i+c*r*l-t*d*l-o*r*h+t*a*h)*R,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,u=s*o,c=s*a;return this.set(u*o+r,u*a-i*l,u*l+i*a,0,u*a+i*l,c*a+r,c*l-i*o,0,u*l-i*a,c*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,c=o+o,d=a+a,h=s*u,g=s*c,y=s*d,E=o*c,_=o*d,m=a*d,v=l*u,S=l*c,T=l*d,M=r.x,A=r.y,R=r.z;return i[0]=(1-(E+m))*M,i[1]=(g+T)*M,i[2]=(y-S)*M,i[3]=0,i[4]=(g-T)*A,i[5]=(1-(h+m))*A,i[6]=(_+v)*A,i[7]=0,i[8]=(y+S)*R,i[9]=(_-v)*R,i[10]=(1-(h+E))*R,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=Gh.set(i[0],i[1],i[2]).length();const o=Gh.set(i[4],i[5],i[6]).length(),a=Gh.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Pa.copy(this);const u=1/s,c=1/o,d=1/a;return Pa.elements[0]*=u,Pa.elements[1]*=u,Pa.elements[2]*=u,Pa.elements[4]*=c,Pa.elements[5]*=c,Pa.elements[6]*=c,Pa.elements[8]*=d,Pa.elements[9]*=d,Pa.elements[10]*=d,t.setFromRotationMatrix(Pa),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=Pl){const l=this.elements,u=2*s/(t-e),c=2*s/(r-i),d=(t+e)/(t-e),h=(r+i)/(r-i);let g,y;if(a===Pl)g=-(o+s)/(o-s),y=-2*o*s/(o-s);else if(a===Ey)g=-o/(o-s),y=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=c,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=g,l[14]=y,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=Pl){const l=this.elements,u=1/(t-e),c=1/(r-i),d=1/(o-s),h=(t+e)*u,g=(r+i)*c;let y,E;if(a===Pl)y=(o+s)*d,E=-2*d;else if(a===Ey)y=s*d,E=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-g,l[2]=0,l[6]=0,l[10]=E,l[14]=-y,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Gh=new de,Pa=new Qt,xX=new de(0,0,0),wX=new de(1,1,1),Ic=new de,l_=new de,xo=new de,OP=new Qt,DP=new Qi;class Yc{constructor(e=0,t=0,r=0,i=Yc.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],u=i[5],c=i[9],d=i[2],h=i[6],g=i[10];switch(t){case"XYZ":this._y=Math.asin(jr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,g),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-jr(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,g),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(jr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,g),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-jr(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,g),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(jr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,g));break;case"XZY":this._z=Math.asin(-jr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return OP.makeRotationFromQuaternion(e),this.setFromRotationMatrix(OP,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return DP.setFromEuler(this),this.setFromQuaternion(DP,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Yc.DEFAULT_ORDER="XYZ";class vd{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let SX=0;const kP=new de,Vh=new Qi,Su=new Qt,u_=new de,ug=new de,EX=new de,bX=new Qi,UP=new de(1,0,0),FP=new de(0,1,0),zP=new de(0,0,1),TX={type:"added"},BP={type:"removed"};class Bn extends ju{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:SX++}),this.uuid=Eo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Bn.DEFAULT_UP.clone();const e=new de,t=new Yc,r=new Qi,i=new de(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Qt},normalMatrix:{value:new fn}}),this.matrix=new Qt,this.matrixWorld=new Qt,this.matrixAutoUpdate=Bn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Bn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new vd,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Vh.setFromAxisAngle(e,t),this.quaternion.multiply(Vh),this}rotateOnWorldAxis(e,t){return Vh.setFromAxisAngle(e,t),this.quaternion.premultiply(Vh),this}rotateX(e){return this.rotateOnAxis(UP,e)}rotateY(e){return this.rotateOnAxis(FP,e)}rotateZ(e){return this.rotateOnAxis(zP,e)}translateOnAxis(e,t){return kP.copy(e).applyQuaternion(this.quaternion),this.position.add(kP.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(UP,e)}translateY(e){return this.translateOnAxis(FP,e)}translateZ(e){return this.translateOnAxis(zP,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Su.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?u_.copy(e):u_.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),ug.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Su.lookAt(ug,u_,this.up):Su.lookAt(u_,ug,this.up),this.quaternion.setFromRotationMatrix(Su),i&&(Su.extractRotation(i.matrixWorld),Vh.setFromRotationMatrix(Su),this.quaternion.premultiply(Vh.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(TX)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(BP)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(BP)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Su.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Su.multiply(e.parent.matrixWorld)),e.applyMatrix4(Su),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let r=[];this[e]===t&&r.push(this);for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectsByProperty(e,t);o.length>0&&(r=r.concat(o))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ug,e,EX),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ug,bX,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const d=l[u];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),c=o(e.images),d=o(e.shapes),h=o(e.skeletons),g=o(e.animations),y=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),c.length>0&&(r.images=c),d.length>0&&(r.shapes=d),h.length>0&&(r.skeletons=h),g.length>0&&(r.animations=g),y.length>0&&(r.nodes=y)}return r.object=i,r;function o(a){const l=[];for(const u in a){const c=a[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Bn.DEFAULT_UP=new de(0,1,0);Bn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Bn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ia=new de,Eu=new de,kS=new de,bu=new de,jh=new de,Wh=new de,HP=new de,US=new de,FS=new de,zS=new de;let c_=!1;class Zs{constructor(e=new de,t=new de,r=new de){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Ia.subVectors(e,t),i.cross(Ia);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Ia.subVectors(i,t),Eu.subVectors(r,t),kS.subVectors(e,t);const o=Ia.dot(Ia),a=Ia.dot(Eu),l=Ia.dot(kS),u=Eu.dot(Eu),c=Eu.dot(kS),d=o*u-a*a;if(d===0)return s.set(-2,-1,-1);const h=1/d,g=(u*l-a*c)*h,y=(o*c-a*l)*h;return s.set(1-g-y,y,g)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,bu),bu.x>=0&&bu.y>=0&&bu.x+bu.y<=1}static getUV(e,t,r,i,s,o,a,l){return c_===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),c_=!0),this.getInterpolation(e,t,r,i,s,o,a,l)}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,bu),l.setScalar(0),l.addScaledVector(s,bu.x),l.addScaledVector(o,bu.y),l.addScaledVector(a,bu.z),l}static isFrontFacing(e,t,r,i){return Ia.subVectors(r,t),Eu.subVectors(e,t),Ia.cross(Eu).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ia.subVectors(this.c,this.b),Eu.subVectors(this.a,this.b),Ia.cross(Eu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Zs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Zs.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return c_===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),c_=!0),Zs.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}getInterpolation(e,t,r,i,s){return Zs.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return Zs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Zs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;jh.subVectors(i,r),Wh.subVectors(s,r),US.subVectors(e,r);const l=jh.dot(US),u=Wh.dot(US);if(l<=0&&u<=0)return t.copy(r);FS.subVectors(e,i);const c=jh.dot(FS),d=Wh.dot(FS);if(c>=0&&d<=c)return t.copy(i);const h=l*d-c*u;if(h<=0&&l>=0&&c<=0)return o=l/(l-c),t.copy(r).addScaledVector(jh,o);zS.subVectors(e,s);const g=jh.dot(zS),y=Wh.dot(zS);if(y>=0&&g<=y)return t.copy(s);const E=g*u-l*y;if(E<=0&&u>=0&&y<=0)return a=u/(u-y),t.copy(r).addScaledVector(Wh,a);const _=c*y-g*d;if(_<=0&&d-c>=0&&g-y>=0)return HP.subVectors(s,i),a=(d-c)/(d-c+(g-y)),t.copy(i).addScaledVector(HP,a);const m=1/(_+E+h);return o=E*m,a=h*m,t.copy(r).addScaledVector(jh,o).addScaledVector(Wh,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let MX=0;class es extends ju{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:MX++}),this.uuid=Eo(),this.name="",this.type="Material",this.blending=gd,this.side=Dl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=UM,this.blendDst=FM,this.blendEquation=od,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Gx,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=xU,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ax,this.stencilZFail=Ax,this.stencilZPass=Ax,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==gd&&(r.blending=this.blending),this.side!==Dl&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const IU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},La={h:0,s:0,l:0},f_={h:0,s:0,l:0};function BS(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let gt=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=an){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Wo.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Wo.workingColorSpace){return this.r=e,this.g=t,this.b=r,Wo.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Wo.workingColorSpace){if(e=JM(e,1),t=jr(t,0,1),r=jr(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=BS(o,s,e+1/3),this.g=BS(o,s,e),this.b=BS(o,s,e-1/3)}return Wo.toWorkingColorSpace(this,i),this}setStyle(e,t=an){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=an){const r=IU[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Pp(e.r),this.g=Pp(e.g),this.b=Pp(e.b),this}copyLinearToSRGB(e){return this.r=CS(e.r),this.g=CS(e.g),this.b=CS(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=an){return Wo.fromWorkingColorSpace(fs.copy(this),e),Math.round(jr(fs.r*255,0,255))*65536+Math.round(jr(fs.g*255,0,255))*256+Math.round(jr(fs.b*255,0,255))}getHexString(e=an){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Wo.workingColorSpace){Wo.fromWorkingColorSpace(fs.copy(this),t);const r=fs.r,i=fs.g,s=fs.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,u;const c=(a+o)/2;if(a===o)l=0,u=0;else{const d=o-a;switch(u=c<=.5?d/(o+a):d/(2-o-a),o){case r:l=(i-s)/d+(i<s?6:0);break;case i:l=(s-r)/d+2;break;case s:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=Wo.workingColorSpace){return Wo.fromWorkingColorSpace(fs.copy(this),t),e.r=fs.r,e.g=fs.g,e.b=fs.b,e}getStyle(e=an){Wo.fromWorkingColorSpace(fs.copy(this),e);const t=fs.r,r=fs.g,i=fs.b;return e!==an?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(La),La.h+=e,La.s+=t,La.l+=r,this.setHSL(La.h,La.s,La.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(La),e.getHSL(f_);const r=ty(La.h,f_.h,t),i=ty(La.s,f_.s,t),s=ty(La.l,f_.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const fs=new gt;gt.NAMES=IU;class Wu extends es{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new gt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=iv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ou=AX();function AX(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;(u&8388608)===0;)u<<=1,c-=8388608;u&=-8388609,c+=947912704,s[l]=u|c}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function Js(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=jr(n,-65504,65504),Ou.floatView[0]=n;const e=Ou.uint32View[0],t=e>>23&511;return Ou.baseTable[t]+((e&8388607)>>Ou.shiftTable[t])}function Vg(n){const e=n>>10;return Ou.uint32View[0]=Ou.mantissaTable[Ou.offsetTable[e]+(n&1023)]+Ou.exponentTable[e],Ou.floatView[0]}const CX={toHalfFloat:Js,fromHalfFloat:Vg},hi=new de,d_=new Je;class Kn{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=Sy,this.updateRange={offset:0,count:-1},this.gpuType=Rl,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)d_.fromBufferAttribute(this,t),d_.applyMatrix3(e),this.setXY(t,d_.x,d_.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)hi.fromBufferAttribute(this,t),hi.applyMatrix3(e),this.setXYZ(t,hi.x,hi.y,hi.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)hi.fromBufferAttribute(this,t),hi.applyMatrix4(e),this.setXYZ(t,hi.x,hi.y,hi.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)hi.fromBufferAttribute(this,t),hi.applyNormalMatrix(e),this.setXYZ(t,hi.x,hi.y,hi.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)hi.fromBufferAttribute(this,t),hi.transformDirection(e),this.setXYZ(t,hi.x,hi.y,hi.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=So(t,this.array)),t}setX(e,t){return this.normalized&&(t=dn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=So(t,this.array)),t}setY(e,t){return this.normalized&&(t=dn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=So(t,this.array)),t}setZ(e,t){return this.normalized&&(t=dn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=So(t,this.array)),t}setW(e,t){return this.normalized&&(t=dn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=dn(t,this.array),r=dn(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=dn(t,this.array),r=dn(r,this.array),i=dn(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=dn(t,this.array),r=dn(r,this.array),i=dn(i,this.array),s=dn(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Sy&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class RX extends Kn{constructor(e,t,r){super(new Int8Array(e),t,r)}}class PX extends Kn{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class IX extends Kn{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class LX extends Kn{constructor(e,t,r){super(new Int16Array(e),t,r)}}class eA extends Kn{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class NX extends Kn{constructor(e,t,r){super(new Int32Array(e),t,r)}}class tA extends Kn{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class OX extends Kn{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=Vg(this.array[e*this.itemSize]);return this.normalized&&(t=So(t,this.array)),t}setX(e,t){return this.normalized&&(t=dn(t,this.array)),this.array[e*this.itemSize]=Js(t),this}getY(e){let t=Vg(this.array[e*this.itemSize+1]);return this.normalized&&(t=So(t,this.array)),t}setY(e,t){return this.normalized&&(t=dn(t,this.array)),this.array[e*this.itemSize+1]=Js(t),this}getZ(e){let t=Vg(this.array[e*this.itemSize+2]);return this.normalized&&(t=So(t,this.array)),t}setZ(e,t){return this.normalized&&(t=dn(t,this.array)),this.array[e*this.itemSize+2]=Js(t),this}getW(e){let t=Vg(this.array[e*this.itemSize+3]);return this.normalized&&(t=So(t,this.array)),t}setW(e,t){return this.normalized&&(t=dn(t,this.array)),this.array[e*this.itemSize+3]=Js(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=dn(t,this.array),r=dn(r,this.array)),this.array[e+0]=Js(t),this.array[e+1]=Js(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=dn(t,this.array),r=dn(r,this.array),i=dn(i,this.array)),this.array[e+0]=Js(t),this.array[e+1]=Js(r),this.array[e+2]=Js(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=dn(t,this.array),r=dn(r,this.array),i=dn(i,this.array),s=dn(s,this.array)),this.array[e+0]=Js(t),this.array[e+1]=Js(r),this.array[e+2]=Js(i),this.array[e+3]=Js(s),this}}class Ct extends Kn{constructor(e,t,r){super(new Float32Array(e),t,r)}}class DX extends Kn{constructor(e,t,r){super(new Float64Array(e),t,r)}}let kX=0;const Go=new Qt,HS=new Bn,qh=new de,wo=new Mo,cg=new Mo,ki=new de;class un extends ju{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:kX++}),this.uuid=Eo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(PU(e)?tA:eA)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new fn().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Go.makeRotationFromQuaternion(e),this.applyMatrix4(Go),this}rotateX(e){return Go.makeRotationX(e),this.applyMatrix4(Go),this}rotateY(e){return Go.makeRotationY(e),this.applyMatrix4(Go),this}rotateZ(e){return Go.makeRotationZ(e),this.applyMatrix4(Go),this}translate(e,t,r){return Go.makeTranslation(e,t,r),this.applyMatrix4(Go),this}scale(e,t,r){return Go.makeScale(e,t,r),this.applyMatrix4(Go),this}lookAt(e){return HS.lookAt(e),HS.updateMatrix(),this.applyMatrix4(HS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(qh).negate(),this.translate(qh.x,qh.y,qh.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ct(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Mo);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new de(-1/0,-1/0,-1/0),new de(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];wo.setFromBufferAttribute(s),this.morphTargetsRelative?(ki.addVectors(this.boundingBox.min,wo.min),this.boundingBox.expandByPoint(ki),ki.addVectors(this.boundingBox.max,wo.max),this.boundingBox.expandByPoint(ki)):(this.boundingBox.expandByPoint(wo.min),this.boundingBox.expandByPoint(wo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ao);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new de,1/0);return}if(e){const r=this.boundingSphere.center;if(wo.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];cg.setFromBufferAttribute(a),this.morphTargetsRelative?(ki.addVectors(wo.min,cg.min),wo.expandByPoint(ki),ki.addVectors(wo.max,cg.max),wo.expandByPoint(ki)):(wo.expandByPoint(cg.min),wo.expandByPoint(cg.max))}wo.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)ki.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(ki));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,c=a.count;u<c;u++)ki.fromBufferAttribute(a,u),l&&(qh.fromBufferAttribute(e,u),ki.add(qh)),i=Math.max(i,r.distanceToSquared(ki))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Kn(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,u=[],c=[];for(let k=0;k<a;k++)u[k]=new de,c[k]=new de;const d=new de,h=new de,g=new de,y=new Je,E=new Je,_=new Je,m=new de,v=new de;function S(k,G,$){d.fromArray(i,k*3),h.fromArray(i,G*3),g.fromArray(i,$*3),y.fromArray(o,k*2),E.fromArray(o,G*2),_.fromArray(o,$*2),h.sub(d),g.sub(d),E.sub(y),_.sub(y);const U=1/(E.x*_.y-_.x*E.y);isFinite(U)&&(m.copy(h).multiplyScalar(_.y).addScaledVector(g,-E.y).multiplyScalar(U),v.copy(g).multiplyScalar(E.x).addScaledVector(h,-_.x).multiplyScalar(U),u[k].add(m),u[G].add(m),u[$].add(m),c[k].add(v),c[G].add(v),c[$].add(v))}let T=this.groups;T.length===0&&(T=[{start:0,count:r.length}]);for(let k=0,G=T.length;k<G;++k){const $=T[k],U=$.start,ee=$.count;for(let re=U,ne=U+ee;re<ne;re+=3)S(r[re+0],r[re+1],r[re+2])}const M=new de,A=new de,R=new de,O=new de;function I(k){R.fromArray(s,k*3),O.copy(R);const G=u[k];M.copy(G),M.sub(R.multiplyScalar(R.dot(G))).normalize(),A.crossVectors(O,G);const U=A.dot(c[k])<0?-1:1;l[k*4]=M.x,l[k*4+1]=M.y,l[k*4+2]=M.z,l[k*4+3]=U}for(let k=0,G=T.length;k<G;++k){const $=T[k],U=$.start,ee=$.count;for(let re=U,ne=U+ee;re<ne;re+=3)I(r[re+0]),I(r[re+1]),I(r[re+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Kn(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let h=0,g=r.count;h<g;h++)r.setXYZ(h,0,0,0);const i=new de,s=new de,o=new de,a=new de,l=new de,u=new de,c=new de,d=new de;if(e)for(let h=0,g=e.count;h<g;h+=3){const y=e.getX(h+0),E=e.getX(h+1),_=e.getX(h+2);i.fromBufferAttribute(t,y),s.fromBufferAttribute(t,E),o.fromBufferAttribute(t,_),c.subVectors(o,s),d.subVectors(i,s),c.cross(d),a.fromBufferAttribute(r,y),l.fromBufferAttribute(r,E),u.fromBufferAttribute(r,_),a.add(c),l.add(c),u.add(c),r.setXYZ(y,a.x,a.y,a.z),r.setXYZ(E,l.x,l.y,l.z),r.setXYZ(_,u.x,u.y,u.z)}else for(let h=0,g=t.count;h<g;h+=3)i.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),c.subVectors(o,s),d.subVectors(i,s),c.cross(d),r.setXYZ(h+0,c.x,c.y,c.z),r.setXYZ(h+1,c.x,c.y,c.z),r.setXYZ(h+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)ki.fromBufferAttribute(e,t),ki.normalize(),e.setXYZ(t,ki.x,ki.y,ki.z)}toNonIndexed(){function e(a,l){const u=a.array,c=a.itemSize,d=a.normalized,h=new u.constructor(l.length*c);let g=0,y=0;for(let E=0,_=l.length;E<_;E++){a.isInterleavedBufferAttribute?g=l[E]*a.data.stride+a.offset:g=l[E]*c;for(let m=0;m<c;m++)h[y++]=u[g++]}return new Kn(h,c,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new un,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],u=e(l,r);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let c=0,d=u.length;c<d;c++){const h=u[c],g=e(h,r);l.push(g)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let d=0,h=u.length;d<h;d++){const g=u[d];c.push(g.toJSON(e.data))}c.length>0&&(i[l]=c,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(t))}const s=e.morphAttributes;for(const u in s){const c=[],d=s[u];for(let h=0,g=d.length;h<g;h++)c.push(d[h].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,c=o.length;u<c;u++){const d=o[u];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const $P=new Qt,Gf=new rm,h_=new Ao,GP=new de,Xh=new de,Yh=new de,Kh=new de,$S=new de,p_=new de,m_=new Je,g_=new Je,y_=new Je,VP=new de,jP=new de,WP=new de,v_=new de,__=new de;class Or extends Bn{constructor(e=new un,t=new Wu){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){p_.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const c=a[l],d=s[l];c!==0&&($S.fromBufferAttribute(d,e),o?p_.addScaledVector($S,c):p_.addScaledVector($S.sub(t),c))}t.add(p_)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),h_.copy(r.boundingSphere),h_.applyMatrix4(s),Gf.copy(e.ray).recast(e.near),!(h_.containsPoint(Gf.origin)===!1&&(Gf.intersectSphere(h_,GP)===null||Gf.origin.distanceToSquared(GP)>(e.far-e.near)**2))&&($P.copy(s).invert(),Gf.copy(e.ray).applyMatrix4($P),!(r.boundingBox!==null&&Gf.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,Gf)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,u=s.attributes.uv,c=s.attributes.uv1,d=s.attributes.normal,h=s.groups,g=s.drawRange;if(a!==null)if(Array.isArray(o))for(let y=0,E=h.length;y<E;y++){const _=h[y],m=o[_.materialIndex],v=Math.max(_.start,g.start),S=Math.min(a.count,Math.min(_.start+_.count,g.start+g.count));for(let T=v,M=S;T<M;T+=3){const A=a.getX(T),R=a.getX(T+1),O=a.getX(T+2);i=x_(this,m,e,r,u,c,d,A,R,O),i&&(i.faceIndex=Math.floor(T/3),i.face.materialIndex=_.materialIndex,t.push(i))}}else{const y=Math.max(0,g.start),E=Math.min(a.count,g.start+g.count);for(let _=y,m=E;_<m;_+=3){const v=a.getX(_),S=a.getX(_+1),T=a.getX(_+2);i=x_(this,o,e,r,u,c,d,v,S,T),i&&(i.faceIndex=Math.floor(_/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let y=0,E=h.length;y<E;y++){const _=h[y],m=o[_.materialIndex],v=Math.max(_.start,g.start),S=Math.min(l.count,Math.min(_.start+_.count,g.start+g.count));for(let T=v,M=S;T<M;T+=3){const A=T,R=T+1,O=T+2;i=x_(this,m,e,r,u,c,d,A,R,O),i&&(i.faceIndex=Math.floor(T/3),i.face.materialIndex=_.materialIndex,t.push(i))}}else{const y=Math.max(0,g.start),E=Math.min(l.count,g.start+g.count);for(let _=y,m=E;_<m;_+=3){const v=_,S=_+1,T=_+2;i=x_(this,o,e,r,u,c,d,v,S,T),i&&(i.faceIndex=Math.floor(_/3),t.push(i))}}}}function UX(n,e,t,r,i,s,o,a){let l;if(e.side===ps?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Dl,a),l===null)return null;__.copy(a),__.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(__);return u<t.near||u>t.far?null:{distance:u,point:__.clone(),object:n}}function x_(n,e,t,r,i,s,o,a,l,u){n.getVertexPosition(a,Xh),n.getVertexPosition(l,Yh),n.getVertexPosition(u,Kh);const c=UX(n,e,t,r,Xh,Yh,Kh,v_);if(c){i&&(m_.fromBufferAttribute(i,a),g_.fromBufferAttribute(i,l),y_.fromBufferAttribute(i,u),c.uv=Zs.getInterpolation(v_,Xh,Yh,Kh,m_,g_,y_,new Je)),s&&(m_.fromBufferAttribute(s,a),g_.fromBufferAttribute(s,l),y_.fromBufferAttribute(s,u),c.uv1=Zs.getInterpolation(v_,Xh,Yh,Kh,m_,g_,y_,new Je),c.uv2=c.uv1),o&&(VP.fromBufferAttribute(o,a),jP.fromBufferAttribute(o,l),WP.fromBufferAttribute(o,u),c.normal=Zs.getInterpolation(v_,Xh,Yh,Kh,VP,jP,WP,new de),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));const d={a,b:l,c:u,normal:new de,materialIndex:0};Zs.getNormal(Xh,Yh,Kh,d.normal),c.face=d}return c}class qu extends un{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],c=[],d=[];let h=0,g=0;y("z","y","x",-1,-1,r,t,e,o,s,0),y("z","y","x",1,-1,r,t,-e,o,s,1),y("x","z","y",1,1,e,r,t,i,o,2),y("x","z","y",1,-1,e,r,-t,i,o,3),y("x","y","z",1,-1,e,t,r,i,s,4),y("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new Ct(u,3)),this.setAttribute("normal",new Ct(c,3)),this.setAttribute("uv",new Ct(d,2));function y(E,_,m,v,S,T,M,A,R,O,I){const k=T/R,G=M/O,$=T/2,U=M/2,ee=A/2,re=R+1,ne=O+1;let X=0,q=0;const K=new de;for(let F=0;F<ne;F++){const L=F*G-U;for(let z=0;z<re;z++){const Y=z*k-$;K[E]=Y*v,K[_]=L*S,K[m]=ee,u.push(K.x,K.y,K.z),K[E]=0,K[_]=0,K[m]=A>0?1:-1,c.push(K.x,K.y,K.z),d.push(z/R),d.push(1-F/O),X+=1}}for(let F=0;F<O;F++)for(let L=0;L<R;L++){const z=h+L+re*F,Y=h+L+re*(F+1),B=h+(L+1)+re*(F+1),J=h+(L+1)+re*F;l.push(z,Y,J),l.push(Y,B,J),q+=6}a.addGroup(g,q,I),g+=q,h+=X}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Bp(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Ps(n){const e={};for(let t=0;t<n.length;t++){const r=Bp(n[t]);for(const i in r)e[i]=r[i]}return e}function FX(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function LU(n){return n.getRenderTarget()===null?n.outputColorSpace:ja}const nA={clone:Bp,merge:Ps};var zX=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,BX=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class kl extends es{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=zX,this.fragmentShader=BX,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Bp(e.uniforms),this.uniformsGroups=FX(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class sv extends Bn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Qt,this.projectionMatrix=new Qt,this.projectionMatrixInverse=new Qt,this.coordinateSystem=Pl}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class mi extends sv{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=zp*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(yd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return zp*2*Math.atan(Math.tan(yd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(yd*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/u,i*=o.width/l,r*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Jh=-90,Zh=1;class NU extends Bn{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null;const i=new mi(Jh,Zh,e,t);i.layers=this.layers,this.add(i);const s=new mi(Jh,Zh,e,t);s.layers=this.layers,this.add(s);const o=new mi(Jh,Zh,e,t);o.layers=this.layers,this.add(o);const a=new mi(Jh,Zh,e,t);a.layers=this.layers,this.add(a);const l=new mi(Jh,Zh,e,t);l.layers=this.layers,this.add(l);const u=new mi(Jh,Zh,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,l]=t;for(const u of t)this.remove(u);if(e===Pl)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Ey)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[i,s,o,a,l,u]=this.children,c=e.getRenderTarget(),d=e.toneMapping,h=e.xr.enabled;e.toneMapping=Ga,e.xr.enabled=!1;const g=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,s),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=g,e.setRenderTarget(r,5),e.render(t,u),e.setRenderTarget(c),e.toneMapping=d,e.xr.enabled=h,r.texture.needsPMREMUpdate=!0}}class ov extends Fr{constructor(e,t,r,i,s,o,a,l,u,c){e=e!==void 0?e:[],t=t!==void 0?t:Wc,super(e,t,r,i,s,o,a,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class OU extends Wa{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];t.encoding!==void 0&&(ny("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===$c?an:Gc),this.texture=new ov(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:br}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new qu(5,5,5),s=new kl({name:"CubemapFromEquirect",uniforms:Bp(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:ps,blending:Fu});s.uniforms.tEquirect.value=t;const o=new Or(i,s),a=t.minFilter;return t.minFilter===Xc&&(t.minFilter=br),new NU(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const GS=new de,HX=new de,$X=new fn;class Lu{constructor(e=new de(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=GS.subVectors(r,t).cross(HX.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(GS),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||$X.getNormalMatrix(e),i=this.coplanarPoint(GS).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Vf=new Ao,w_=new de;class av{constructor(e=new Lu,t=new Lu,r=new Lu,i=new Lu,s=new Lu,o=new Lu){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=Pl){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],u=i[4],c=i[5],d=i[6],h=i[7],g=i[8],y=i[9],E=i[10],_=i[11],m=i[12],v=i[13],S=i[14],T=i[15];if(r[0].setComponents(l-s,h-u,_-g,T-m).normalize(),r[1].setComponents(l+s,h+u,_+g,T+m).normalize(),r[2].setComponents(l+o,h+c,_+y,T+v).normalize(),r[3].setComponents(l-o,h-c,_-y,T-v).normalize(),r[4].setComponents(l-a,h-d,_-E,T-S).normalize(),t===Pl)r[5].setComponents(l+a,h+d,_+E,T+S).normalize();else if(t===Ey)r[5].setComponents(a,d,E,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Vf.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Vf.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Vf)}intersectsSprite(e){return Vf.center.set(0,0,0),Vf.radius=.7071067811865476,Vf.applyMatrix4(e.matrixWorld),this.intersectsSphere(Vf)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(w_.x=i.normal.x>0?e.max.x:e.min.x,w_.y=i.normal.y>0?e.max.y:e.min.y,w_.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(w_)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function DU(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function GX(n,e){const t=e.isWebGL2,r=new WeakMap;function i(u,c){const d=u.array,h=u.usage,g=n.createBuffer();n.bindBuffer(c,g),n.bufferData(c,d,h),u.onUploadCallback();let y;if(d instanceof Float32Array)y=n.FLOAT;else if(d instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)y=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else y=n.UNSIGNED_SHORT;else if(d instanceof Int16Array)y=n.SHORT;else if(d instanceof Uint32Array)y=n.UNSIGNED_INT;else if(d instanceof Int32Array)y=n.INT;else if(d instanceof Int8Array)y=n.BYTE;else if(d instanceof Uint8Array)y=n.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)y=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:g,type:y,bytesPerElement:d.BYTES_PER_ELEMENT,version:u.version}}function s(u,c,d){const h=c.array,g=c.updateRange;n.bindBuffer(d,u),g.count===-1?n.bufferSubData(d,0,h):(t?n.bufferSubData(d,g.offset*h.BYTES_PER_ELEMENT,h,g.offset,g.count):n.bufferSubData(d,g.offset*h.BYTES_PER_ELEMENT,h.subarray(g.offset,g.offset+g.count)),g.count=-1),c.onUploadCallback()}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const c=r.get(u);c&&(n.deleteBuffer(c.buffer),r.delete(u))}function l(u,c){if(u.isGLBufferAttribute){const h=r.get(u);(!h||h.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const d=r.get(u);d===void 0?r.set(u,i(u,c)):d.version<u.version&&(s(d.buffer,u,c),d.version=u.version)}return{get:o,remove:a,update:l}}class ef extends un{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),u=a+1,c=l+1,d=e/a,h=t/l,g=[],y=[],E=[],_=[];for(let m=0;m<c;m++){const v=m*h-o;for(let S=0;S<u;S++){const T=S*d-s;y.push(T,-v,0),E.push(0,0,1),_.push(S/a),_.push(1-m/l)}}for(let m=0;m<l;m++)for(let v=0;v<a;v++){const S=v+u*m,T=v+u*(m+1),M=v+1+u*(m+1),A=v+1+u*m;g.push(S,T,A),g.push(T,M,A)}this.setIndex(g),this.setAttribute("position",new Ct(y,3)),this.setAttribute("normal",new Ct(E,3)),this.setAttribute("uv",new Ct(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ef(e.width,e.height,e.widthSegments,e.heightSegments)}}var VX=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,jX=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,WX=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,qX=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,XX=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,YX=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,KX=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,JX=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,ZX=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,QX=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,eY=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,tY=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,nY=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,rY=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,iY=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,sY=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,oY=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,aY=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,lY=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,uY=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,cY=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,fY=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,dY=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,hY=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,pY=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,mY=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,gY=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,yY=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,vY="gl_FragColor = linearToOutputTexel( gl_FragColor );",_Y=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,xY=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,wY=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,SY=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,EY=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,bY=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,TY=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,MY=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,AY=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,CY=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,RY=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,PY=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,IY=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,LY=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,NY=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,OY=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,DY=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,kY=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,UY=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,FY=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,zY=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,BY=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,HY=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,$Y=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,GY=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,VY=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,jY=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,WY=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,qY=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,XY=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,YY=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,KY=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,JY=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,ZY=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,QY=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,eK=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,tK=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,nK=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,rK=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,iK=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,sK=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,oK=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,aK=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,lK=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,uK=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,cK=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,fK=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,dK=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,hK=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,pK=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,mK=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,gK=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,yK=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,vK=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,_K=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,xK=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,wK=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,SK=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,EK=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,bK=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,TK=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,MK=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,AK=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,CK=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,RK=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,PK=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,IK=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,LK=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,NK=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,OK=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,DK=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,kK=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,UK=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,FK=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,zK=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,BK=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const HK=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,$K=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,GK=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,VK=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,jK=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,WK=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,qK=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,XK=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,YK=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,KK=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,JK=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,ZK=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,QK=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,eJ=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,tJ=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,nJ=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rJ=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,iJ=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sJ=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,oJ=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,aJ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,lJ=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,uJ=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,cJ=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fJ=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,dJ=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hJ=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,pJ=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mJ=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,gJ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,yJ=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,vJ=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,_J=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,xJ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,on={alphahash_fragment:VX,alphahash_pars_fragment:jX,alphamap_fragment:WX,alphamap_pars_fragment:qX,alphatest_fragment:XX,alphatest_pars_fragment:YX,aomap_fragment:KX,aomap_pars_fragment:JX,begin_vertex:ZX,beginnormal_vertex:QX,bsdfs:eY,iridescence_fragment:tY,bumpmap_pars_fragment:nY,clipping_planes_fragment:rY,clipping_planes_pars_fragment:iY,clipping_planes_pars_vertex:sY,clipping_planes_vertex:oY,color_fragment:aY,color_pars_fragment:lY,color_pars_vertex:uY,color_vertex:cY,common:fY,cube_uv_reflection_fragment:dY,defaultnormal_vertex:hY,displacementmap_pars_vertex:pY,displacementmap_vertex:mY,emissivemap_fragment:gY,emissivemap_pars_fragment:yY,colorspace_fragment:vY,colorspace_pars_fragment:_Y,envmap_fragment:xY,envmap_common_pars_fragment:wY,envmap_pars_fragment:SY,envmap_pars_vertex:EY,envmap_physical_pars_fragment:DY,envmap_vertex:bY,fog_vertex:TY,fog_pars_vertex:MY,fog_fragment:AY,fog_pars_fragment:CY,gradientmap_pars_fragment:RY,lightmap_fragment:PY,lightmap_pars_fragment:IY,lights_lambert_fragment:LY,lights_lambert_pars_fragment:NY,lights_pars_begin:OY,lights_toon_fragment:kY,lights_toon_pars_fragment:UY,lights_phong_fragment:FY,lights_phong_pars_fragment:zY,lights_physical_fragment:BY,lights_physical_pars_fragment:HY,lights_fragment_begin:$Y,lights_fragment_maps:GY,lights_fragment_end:VY,logdepthbuf_fragment:jY,logdepthbuf_pars_fragment:WY,logdepthbuf_pars_vertex:qY,logdepthbuf_vertex:XY,map_fragment:YY,map_pars_fragment:KY,map_particle_fragment:JY,map_particle_pars_fragment:ZY,metalnessmap_fragment:QY,metalnessmap_pars_fragment:eK,morphcolor_vertex:tK,morphnormal_vertex:nK,morphtarget_pars_vertex:rK,morphtarget_vertex:iK,normal_fragment_begin:sK,normal_fragment_maps:oK,normal_pars_fragment:aK,normal_pars_vertex:lK,normal_vertex:uK,normalmap_pars_fragment:cK,clearcoat_normal_fragment_begin:fK,clearcoat_normal_fragment_maps:dK,clearcoat_pars_fragment:hK,iridescence_pars_fragment:pK,opaque_fragment:mK,packing:gK,premultiplied_alpha_fragment:yK,project_vertex:vK,dithering_fragment:_K,dithering_pars_fragment:xK,roughnessmap_fragment:wK,roughnessmap_pars_fragment:SK,shadowmap_pars_fragment:EK,shadowmap_pars_vertex:bK,shadowmap_vertex:TK,shadowmask_pars_fragment:MK,skinbase_vertex:AK,skinning_pars_vertex:CK,skinning_vertex:RK,skinnormal_vertex:PK,specularmap_fragment:IK,specularmap_pars_fragment:LK,tonemapping_fragment:NK,tonemapping_pars_fragment:OK,transmission_fragment:DK,transmission_pars_fragment:kK,uv_pars_fragment:UK,uv_pars_vertex:FK,uv_vertex:zK,worldpos_vertex:BK,background_vert:HK,background_frag:$K,backgroundCube_vert:GK,backgroundCube_frag:VK,cube_vert:jK,cube_frag:WK,depth_vert:qK,depth_frag:XK,distanceRGBA_vert:YK,distanceRGBA_frag:KK,equirect_vert:JK,equirect_frag:ZK,linedashed_vert:QK,linedashed_frag:eJ,meshbasic_vert:tJ,meshbasic_frag:nJ,meshlambert_vert:rJ,meshlambert_frag:iJ,meshmatcap_vert:sJ,meshmatcap_frag:oJ,meshnormal_vert:aJ,meshnormal_frag:lJ,meshphong_vert:uJ,meshphong_frag:cJ,meshphysical_vert:fJ,meshphysical_frag:dJ,meshtoon_vert:hJ,meshtoon_frag:pJ,points_vert:mJ,points_frag:gJ,shadow_vert:yJ,shadow_frag:vJ,sprite_vert:_J,sprite_frag:xJ},yt={common:{diffuse:{value:new gt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new fn},alphaMap:{value:null},alphaMapTransform:{value:new fn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new fn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new fn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new fn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new fn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new fn},normalScale:{value:new Je(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new fn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new fn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new fn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new fn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new gt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new gt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new fn},alphaTest:{value:0},uvTransform:{value:new fn}},sprite:{diffuse:{value:new gt(16777215)},opacity:{value:1},center:{value:new Je(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new fn},alphaMap:{value:null},alphaMapTransform:{value:new fn},alphaTest:{value:0}}},za={basic:{uniforms:Ps([yt.common,yt.specularmap,yt.envmap,yt.aomap,yt.lightmap,yt.fog]),vertexShader:on.meshbasic_vert,fragmentShader:on.meshbasic_frag},lambert:{uniforms:Ps([yt.common,yt.specularmap,yt.envmap,yt.aomap,yt.lightmap,yt.emissivemap,yt.bumpmap,yt.normalmap,yt.displacementmap,yt.fog,yt.lights,{emissive:{value:new gt(0)}}]),vertexShader:on.meshlambert_vert,fragmentShader:on.meshlambert_frag},phong:{uniforms:Ps([yt.common,yt.specularmap,yt.envmap,yt.aomap,yt.lightmap,yt.emissivemap,yt.bumpmap,yt.normalmap,yt.displacementmap,yt.fog,yt.lights,{emissive:{value:new gt(0)},specular:{value:new gt(1118481)},shininess:{value:30}}]),vertexShader:on.meshphong_vert,fragmentShader:on.meshphong_frag},standard:{uniforms:Ps([yt.common,yt.envmap,yt.aomap,yt.lightmap,yt.emissivemap,yt.bumpmap,yt.normalmap,yt.displacementmap,yt.roughnessmap,yt.metalnessmap,yt.fog,yt.lights,{emissive:{value:new gt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:on.meshphysical_vert,fragmentShader:on.meshphysical_frag},toon:{uniforms:Ps([yt.common,yt.aomap,yt.lightmap,yt.emissivemap,yt.bumpmap,yt.normalmap,yt.displacementmap,yt.gradientmap,yt.fog,yt.lights,{emissive:{value:new gt(0)}}]),vertexShader:on.meshtoon_vert,fragmentShader:on.meshtoon_frag},matcap:{uniforms:Ps([yt.common,yt.bumpmap,yt.normalmap,yt.displacementmap,yt.fog,{matcap:{value:null}}]),vertexShader:on.meshmatcap_vert,fragmentShader:on.meshmatcap_frag},points:{uniforms:Ps([yt.points,yt.fog]),vertexShader:on.points_vert,fragmentShader:on.points_frag},dashed:{uniforms:Ps([yt.common,yt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:on.linedashed_vert,fragmentShader:on.linedashed_frag},depth:{uniforms:Ps([yt.common,yt.displacementmap]),vertexShader:on.depth_vert,fragmentShader:on.depth_frag},normal:{uniforms:Ps([yt.common,yt.bumpmap,yt.normalmap,yt.displacementmap,{opacity:{value:1}}]),vertexShader:on.meshnormal_vert,fragmentShader:on.meshnormal_frag},sprite:{uniforms:Ps([yt.sprite,yt.fog]),vertexShader:on.sprite_vert,fragmentShader:on.sprite_frag},background:{uniforms:{uvTransform:{value:new fn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:on.background_vert,fragmentShader:on.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:on.backgroundCube_vert,fragmentShader:on.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:on.cube_vert,fragmentShader:on.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:on.equirect_vert,fragmentShader:on.equirect_frag},distanceRGBA:{uniforms:Ps([yt.common,yt.displacementmap,{referencePosition:{value:new de},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:on.distanceRGBA_vert,fragmentShader:on.distanceRGBA_frag},shadow:{uniforms:Ps([yt.lights,yt.fog,{color:{value:new gt(0)},opacity:{value:1}}]),vertexShader:on.shadow_vert,fragmentShader:on.shadow_frag}};za.physical={uniforms:Ps([za.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new fn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new fn},clearcoatNormalScale:{value:new Je(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new fn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new fn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new fn},sheen:{value:0},sheenColor:{value:new gt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new fn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new fn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new fn},transmissionSamplerSize:{value:new Je},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new fn},attenuationDistance:{value:0},attenuationColor:{value:new gt(0)},specularColor:{value:new gt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new fn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new fn},anisotropyVector:{value:new Je},anisotropyMap:{value:null},anisotropyMapTransform:{value:new fn}}]),vertexShader:on.meshphysical_vert,fragmentShader:on.meshphysical_frag};const S_={r:0,b:0,g:0};function wJ(n,e,t,r,i,s,o){const a=new gt(0);let l=s===!0?0:1,u,c,d=null,h=0,g=null;function y(_,m){let v=!1,S=m.isScene===!0?m.background:null;switch(S&&S.isTexture&&(S=(m.backgroundBlurriness>0?t:e).get(S)),S===null?E(a,l):S&&S.isColor&&(E(S,1),v=!0),n.xr.getEnvironmentBlendMode()){case"opaque":v=!0;break;case"additive":r.buffers.color.setClear(0,0,0,1,o),v=!0;break;case"alpha-blend":r.buffers.color.setClear(0,0,0,0,o),v=!0;break}(n.autoClear||v)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),S&&(S.isCubeTexture||S.mapping===nm)?(c===void 0&&(c=new Or(new qu(1,1,1),new kl({name:"BackgroundCubeMaterial",uniforms:Bp(za.backgroundCube.uniforms),vertexShader:za.backgroundCube.vertexShader,fragmentShader:za.backgroundCube.fragmentShader,side:ps,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(A,R,O){this.matrixWorld.copyPosition(O.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=S,c.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,c.material.toneMapped=S.colorSpace!==an,(d!==S||h!==S.version||g!==n.toneMapping)&&(c.material.needsUpdate=!0,d=S,h=S.version,g=n.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null)):S&&S.isTexture&&(u===void 0&&(u=new Or(new ef(2,2),new kl({name:"BackgroundMaterial",uniforms:Bp(za.background.uniforms),vertexShader:za.background.vertexShader,fragmentShader:za.background.fragmentShader,side:Dl,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=S,u.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,u.material.toneMapped=S.colorSpace!==an,S.matrixAutoUpdate===!0&&S.updateMatrix(),u.material.uniforms.uvTransform.value.copy(S.matrix),(d!==S||h!==S.version||g!==n.toneMapping)&&(u.material.needsUpdate=!0,d=S,h=S.version,g=n.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null))}function E(_,m){_.getRGB(S_,LU(n)),r.buffers.color.setClear(S_.r,S_.g,S_.b,m,o)}return{getClearColor:function(){return a},setClearColor:function(_,m=1){a.set(_),l=m,E(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,E(a,l)},render:y}}function SJ(n,e,t,r){const i=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=_(null);let u=l,c=!1;function d(ee,re,ne,X,q){let K=!1;if(o){const F=E(X,ne,re);u!==F&&(u=F,g(u.object)),K=m(ee,X,ne,q),K&&v(ee,X,ne,q)}else{const F=re.wireframe===!0;(u.geometry!==X.id||u.program!==ne.id||u.wireframe!==F)&&(u.geometry=X.id,u.program=ne.id,u.wireframe=F,K=!0)}q!==null&&t.update(q,n.ELEMENT_ARRAY_BUFFER),(K||c)&&(c=!1,O(ee,re,ne,X),q!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(q).buffer))}function h(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function g(ee){return r.isWebGL2?n.bindVertexArray(ee):s.bindVertexArrayOES(ee)}function y(ee){return r.isWebGL2?n.deleteVertexArray(ee):s.deleteVertexArrayOES(ee)}function E(ee,re,ne){const X=ne.wireframe===!0;let q=a[ee.id];q===void 0&&(q={},a[ee.id]=q);let K=q[re.id];K===void 0&&(K={},q[re.id]=K);let F=K[X];return F===void 0&&(F=_(h()),K[X]=F),F}function _(ee){const re=[],ne=[],X=[];for(let q=0;q<i;q++)re[q]=0,ne[q]=0,X[q]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:re,enabledAttributes:ne,attributeDivisors:X,object:ee,attributes:{},index:null}}function m(ee,re,ne,X){const q=u.attributes,K=re.attributes;let F=0;const L=ne.getAttributes();for(const z in L)if(L[z].location>=0){const B=q[z];let J=K[z];if(J===void 0&&(z==="instanceMatrix"&&ee.instanceMatrix&&(J=ee.instanceMatrix),z==="instanceColor"&&ee.instanceColor&&(J=ee.instanceColor)),B===void 0||B.attribute!==J||J&&B.data!==J.data)return!0;F++}return u.attributesNum!==F||u.index!==X}function v(ee,re,ne,X){const q={},K=re.attributes;let F=0;const L=ne.getAttributes();for(const z in L)if(L[z].location>=0){let B=K[z];B===void 0&&(z==="instanceMatrix"&&ee.instanceMatrix&&(B=ee.instanceMatrix),z==="instanceColor"&&ee.instanceColor&&(B=ee.instanceColor));const J={};J.attribute=B,B&&B.data&&(J.data=B.data),q[z]=J,F++}u.attributes=q,u.attributesNum=F,u.index=X}function S(){const ee=u.newAttributes;for(let re=0,ne=ee.length;re<ne;re++)ee[re]=0}function T(ee){M(ee,0)}function M(ee,re){const ne=u.newAttributes,X=u.enabledAttributes,q=u.attributeDivisors;ne[ee]=1,X[ee]===0&&(n.enableVertexAttribArray(ee),X[ee]=1),q[ee]!==re&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](ee,re),q[ee]=re)}function A(){const ee=u.newAttributes,re=u.enabledAttributes;for(let ne=0,X=re.length;ne<X;ne++)re[ne]!==ee[ne]&&(n.disableVertexAttribArray(ne),re[ne]=0)}function R(ee,re,ne,X,q,K,F){F===!0?n.vertexAttribIPointer(ee,re,ne,q,K):n.vertexAttribPointer(ee,re,ne,X,q,K)}function O(ee,re,ne,X){if(r.isWebGL2===!1&&(ee.isInstancedMesh||X.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;S();const q=X.attributes,K=ne.getAttributes(),F=re.defaultAttributeValues;for(const L in K){const z=K[L];if(z.location>=0){let Y=q[L];if(Y===void 0&&(L==="instanceMatrix"&&ee.instanceMatrix&&(Y=ee.instanceMatrix),L==="instanceColor"&&ee.instanceColor&&(Y=ee.instanceColor)),Y!==void 0){const B=Y.normalized,J=Y.itemSize,le=t.get(Y);if(le===void 0)continue;const pe=le.buffer,he=le.type,Ee=le.bytesPerElement,_e=r.isWebGL2===!0&&(he===n.INT||he===n.UNSIGNED_INT||Y.gpuType===HM);if(Y.isInterleavedBufferAttribute){const te=Y.data,j=te.stride,ce=Y.offset;if(te.isInstancedInterleavedBuffer){for(let fe=0;fe<z.locationSize;fe++)M(z.location+fe,te.meshPerAttribute);ee.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=te.meshPerAttribute*te.count)}else for(let fe=0;fe<z.locationSize;fe++)T(z.location+fe);n.bindBuffer(n.ARRAY_BUFFER,pe);for(let fe=0;fe<z.locationSize;fe++)R(z.location+fe,J/z.locationSize,he,B,j*Ee,(ce+J/z.locationSize*fe)*Ee,_e)}else{if(Y.isInstancedBufferAttribute){for(let te=0;te<z.locationSize;te++)M(z.location+te,Y.meshPerAttribute);ee.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=Y.meshPerAttribute*Y.count)}else for(let te=0;te<z.locationSize;te++)T(z.location+te);n.bindBuffer(n.ARRAY_BUFFER,pe);for(let te=0;te<z.locationSize;te++)R(z.location+te,J/z.locationSize,he,B,J*Ee,J/z.locationSize*te*Ee,_e)}}else if(F!==void 0){const B=F[L];if(B!==void 0)switch(B.length){case 2:n.vertexAttrib2fv(z.location,B);break;case 3:n.vertexAttrib3fv(z.location,B);break;case 4:n.vertexAttrib4fv(z.location,B);break;default:n.vertexAttrib1fv(z.location,B)}}}}A()}function I(){$();for(const ee in a){const re=a[ee];for(const ne in re){const X=re[ne];for(const q in X)y(X[q].object),delete X[q];delete re[ne]}delete a[ee]}}function k(ee){if(a[ee.id]===void 0)return;const re=a[ee.id];for(const ne in re){const X=re[ne];for(const q in X)y(X[q].object),delete X[q];delete re[ne]}delete a[ee.id]}function G(ee){for(const re in a){const ne=a[re];if(ne[ee.id]===void 0)continue;const X=ne[ee.id];for(const q in X)y(X[q].object),delete X[q];delete ne[ee.id]}}function $(){U(),c=!0,u!==l&&(u=l,g(u.object))}function U(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:$,resetDefaultState:U,dispose:I,releaseStatesOfGeometry:k,releaseStatesOfProgram:G,initAttributes:S,enableAttribute:T,disableUnusedAttributes:A}}function EJ(n,e,t,r){const i=r.isWebGL2;let s;function o(u){s=u}function a(u,c){n.drawArrays(s,u,c),t.update(c,s,1)}function l(u,c,d){if(d===0)return;let h,g;if(i)h=n,g="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),g="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[g](s,u,c,d),t.update(c,s,d)}this.setMode=o,this.render=a,this.renderInstances=l}function bJ(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const R=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(R){if(R==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";R="mediump"}return R==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const u=o||e.has("WEBGL_draw_buffers"),c=t.logarithmicDepthBuffer===!0,d=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),h=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_TEXTURE_SIZE),y=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),E=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),m=n.getParameter(n.MAX_VARYING_VECTORS),v=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),S=h>0,T=o||e.has("OES_texture_float"),M=S&&T,A=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:c,maxTextures:d,maxVertexTextures:h,maxTextureSize:g,maxCubemapSize:y,maxAttributes:E,maxVertexUniforms:_,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:S,floatFragmentTextures:T,floatVertexTextures:M,maxSamples:A}}function TJ(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new Lu,a=new fn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){const g=d.length!==0||h||r!==0||i;return i=h,r=d.length,g},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,h){t=c(d,h,0)},this.setState=function(d,h,g){const y=d.clippingPlanes,E=d.clipIntersection,_=d.clipShadows,m=n.get(d);if(!i||y===null||y.length===0||s&&!_)s?c(null):u();else{const v=s?0:r,S=v*4;let T=m.clippingState||null;l.value=T,T=c(y,h,S,g);for(let M=0;M!==S;++M)T[M]=t[M];m.clippingState=T,this.numIntersection=E?this.numPlanes:0,this.numPlanes+=v}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(d,h,g,y){const E=d!==null?d.length:0;let _=null;if(E!==0){if(_=l.value,y!==!0||_===null){const m=g+E*4,v=h.matrixWorldInverse;a.getNormalMatrix(v),(_===null||_.length<m)&&(_=new Float32Array(m));for(let S=0,T=g;S!==E;++S,T+=4)o.copy(d[S]).applyMatrix4(v,a),o.normal.toArray(_,T),_[T+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=E,e.numIntersection=0,_}}function MJ(n){let e=new WeakMap;function t(o,a){return a===my?o.mapping=Wc:a===gy&&(o.mapping=qc),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===my||a===gy)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new OU(l.height/2);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",i),t(u.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class Ud extends sv{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=c*this.view.offsetY,l=a-c*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Ep=4,qP=[.125,.215,.35,.446,.526,.582],ad=20,VS=new Ud,XP=new gt;let jS=null;const rd=(1+Math.sqrt(5))/2,Qh=1/rd,YP=[new de(1,1,1),new de(-1,1,1),new de(1,1,-1),new de(-1,1,-1),new de(0,rd,Qh),new de(0,rd,-Qh),new de(Qh,0,rd),new de(-Qh,0,rd),new de(rd,Qh,0),new de(-rd,Qh,0)];class LT{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){jS=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=ZP(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=JP(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(jS),e.scissorTest=!1,E_(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Wc||e.mapping===qc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),jS=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:br,minFilter:br,generateMipmaps:!1,type:Fp,format:Qs,colorSpace:ja,depthBuffer:!1},i=KP(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=KP(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=AJ(s)),this._blurMaterial=CJ(s,e,t)}return i}_compileMaterial(e){const t=new Or(this._lodPlanes[0],e);this._renderer.compile(t,VS)}_sceneToCubeUV(e,t,r,i){const a=new mi(90,1,t,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,d=c.autoClear,h=c.toneMapping;c.getClearColor(XP),c.toneMapping=Ga,c.autoClear=!1;const g=new Wu({name:"PMREM.Background",side:ps,depthWrite:!1,depthTest:!1}),y=new Or(new qu,g);let E=!1;const _=e.background;_?_.isColor&&(g.color.copy(_),e.background=null,E=!0):(g.color.copy(XP),E=!0);for(let m=0;m<6;m++){const v=m%3;v===0?(a.up.set(0,l[m],0),a.lookAt(u[m],0,0)):v===1?(a.up.set(0,0,l[m]),a.lookAt(0,u[m],0)):(a.up.set(0,l[m],0),a.lookAt(0,0,u[m]));const S=this._cubeSize;E_(i,v*S,m>2?S:0,S,S),c.setRenderTarget(i),E&&c.render(y,a),c.render(e,a)}y.geometry.dispose(),y.material.dispose(),c.toneMapping=h,c.autoClear=d,e.background=_}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===Wc||e.mapping===qc;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=ZP()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=JP());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Or(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;E_(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,VS)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=YP[(i-1)%YP.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,d=new Or(this._lodPlanes[i],u),h=u.uniforms,g=this._sizeLods[r]-1,y=isFinite(s)?Math.PI/(2*g):2*Math.PI/(2*ad-1),E=s/y,_=isFinite(s)?1+Math.floor(c*E):ad;_>ad&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${ad}`);const m=[];let v=0;for(let R=0;R<ad;++R){const O=R/E,I=Math.exp(-O*O/2);m.push(I),R===0?v+=I:R<_&&(v+=2*I)}for(let R=0;R<m.length;R++)m[R]=m[R]/v;h.envMap.value=e.texture,h.samples.value=_,h.weights.value=m,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);const{_lodMax:S}=this;h.dTheta.value=y,h.mipInt.value=S-r;const T=this._sizeLods[i],M=3*T*(i>S-Ep?i-S+Ep:0),A=4*(this._cubeSize-T);E_(t,M,A,3*T,2*T),l.setRenderTarget(t),l.render(d,VS)}}function AJ(n){const e=[],t=[],r=[];let i=n;const s=n-Ep+1+qP.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-Ep?l=qP[o-n+Ep-1]:o===0&&(l=0),r.push(l);const u=1/(a-2),c=-u,d=1+u,h=[c,c,d,c,d,d,c,c,d,d,c,d],g=6,y=6,E=3,_=2,m=1,v=new Float32Array(E*y*g),S=new Float32Array(_*y*g),T=new Float32Array(m*y*g);for(let A=0;A<g;A++){const R=A%3*2/3-1,O=A>2?0:-1,I=[R,O,0,R+2/3,O,0,R+2/3,O+1,0,R,O,0,R+2/3,O+1,0,R,O+1,0];v.set(I,E*y*A),S.set(h,_*y*A);const k=[A,A,A,A,A,A];T.set(k,m*y*A)}const M=new un;M.setAttribute("position",new Kn(v,E)),M.setAttribute("uv",new Kn(S,_)),M.setAttribute("faceIndex",new Kn(T,m)),e.push(M),i>Ep&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function KP(n,e,t){const r=new Wa(n,e,t);return r.texture.mapping=nm,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function E_(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function CJ(n,e,t){const r=new Float32Array(ad),i=new de(0,1,0);return new kl({name:"SphericalGaussianBlur",defines:{n:ad,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:rA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Fu,depthTest:!1,depthWrite:!1})}function JP(){return new kl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:rA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Fu,depthTest:!1,depthWrite:!1})}function ZP(){return new kl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:rA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Fu,depthTest:!1,depthWrite:!1})}function rA(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function RJ(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,u=l===my||l===gy,c=l===Wc||l===qc;if(u||c)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let d=e.get(a);return t===null&&(t=new LT(n)),d=u?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}else{if(e.has(a))return e.get(a).texture;{const d=a.image;if(u&&d&&d.height>0||c&&d&&i(d)){t===null&&(t=new LT(n));const h=u?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",s),h.texture}else return null}}}return a}function i(a){let l=0;const u=6;for(let c=0;c<u;c++)a[c]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function PJ(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function IJ(n,e,t,r){const i={},s=new WeakMap;function o(d){const h=d.target;h.index!==null&&e.remove(h.index);for(const y in h.attributes)e.remove(h.attributes[y]);for(const y in h.morphAttributes){const E=h.morphAttributes[y];for(let _=0,m=E.length;_<m;_++)e.remove(E[_])}h.removeEventListener("dispose",o),delete i[h.id];const g=s.get(h);g&&(e.remove(g),s.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function a(d,h){return i[h.id]===!0||(h.addEventListener("dispose",o),i[h.id]=!0,t.memory.geometries++),h}function l(d){const h=d.attributes;for(const y in h)e.update(h[y],n.ARRAY_BUFFER);const g=d.morphAttributes;for(const y in g){const E=g[y];for(let _=0,m=E.length;_<m;_++)e.update(E[_],n.ARRAY_BUFFER)}}function u(d){const h=[],g=d.index,y=d.attributes.position;let E=0;if(g!==null){const v=g.array;E=g.version;for(let S=0,T=v.length;S<T;S+=3){const M=v[S+0],A=v[S+1],R=v[S+2];h.push(M,A,A,R,R,M)}}else{const v=y.array;E=y.version;for(let S=0,T=v.length/3-1;S<T;S+=3){const M=S+0,A=S+1,R=S+2;h.push(M,A,A,R,R,M)}}const _=new(PU(h)?tA:eA)(h,1);_.version=E;const m=s.get(d);m&&e.remove(m),s.set(d,_)}function c(d){const h=s.get(d);if(h){const g=d.index;g!==null&&h.version<g.version&&u(d)}else u(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:c}}function LJ(n,e,t,r){const i=r.isWebGL2;let s;function o(h){s=h}let a,l;function u(h){a=h.type,l=h.bytesPerElement}function c(h,g){n.drawElements(s,g,a,h*l),t.update(g,s,1)}function d(h,g,y){if(y===0)return;let E,_;if(i)E=n,_="drawElementsInstanced";else if(E=e.get("ANGLE_instanced_arrays"),_="drawElementsInstancedANGLE",E===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}E[_](s,g,a,h*l,y),t.update(g,s,y)}this.setMode=o,this.setIndex=u,this.render=c,this.renderInstances=d}function NJ(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function OJ(n,e){return n[0]-e[0]}function DJ(n,e){return Math.abs(e[1])-Math.abs(n[1])}function kJ(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new zn,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function l(u,c,d){const h=u.morphTargetInfluences;if(e.isWebGL2===!0){const g=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,y=g!==void 0?g.length:0;let E=s.get(c);if(E===void 0||E.count!==y){let ee=function(){$.dispose(),s.delete(c),c.removeEventListener("dispose",ee)};E!==void 0&&E.texture.dispose();const v=c.morphAttributes.position!==void 0,S=c.morphAttributes.normal!==void 0,T=c.morphAttributes.color!==void 0,M=c.morphAttributes.position||[],A=c.morphAttributes.normal||[],R=c.morphAttributes.color||[];let O=0;v===!0&&(O=1),S===!0&&(O=2),T===!0&&(O=3);let I=c.attributes.position.count*O,k=1;I>e.maxTextureSize&&(k=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const G=new Float32Array(I*k*4*y),$=new C1(G,I,k,y);$.type=Rl,$.needsUpdate=!0;const U=O*4;for(let re=0;re<y;re++){const ne=M[re],X=A[re],q=R[re],K=I*k*4*re;for(let F=0;F<ne.count;F++){const L=F*U;v===!0&&(o.fromBufferAttribute(ne,F),G[K+L+0]=o.x,G[K+L+1]=o.y,G[K+L+2]=o.z,G[K+L+3]=0),S===!0&&(o.fromBufferAttribute(X,F),G[K+L+4]=o.x,G[K+L+5]=o.y,G[K+L+6]=o.z,G[K+L+7]=0),T===!0&&(o.fromBufferAttribute(q,F),G[K+L+8]=o.x,G[K+L+9]=o.y,G[K+L+10]=o.z,G[K+L+11]=q.itemSize===4?o.w:1)}}E={count:y,texture:$,size:new Je(I,k)},s.set(c,E),c.addEventListener("dispose",ee)}let _=0;for(let v=0;v<h.length;v++)_+=h[v];const m=c.morphTargetsRelative?1:1-_;d.getUniforms().setValue(n,"morphTargetBaseInfluence",m),d.getUniforms().setValue(n,"morphTargetInfluences",h),d.getUniforms().setValue(n,"morphTargetsTexture",E.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",E.size)}else{const g=h===void 0?0:h.length;let y=r[c.id];if(y===void 0||y.length!==g){y=[];for(let S=0;S<g;S++)y[S]=[S,0];r[c.id]=y}for(let S=0;S<g;S++){const T=y[S];T[0]=S,T[1]=h[S]}y.sort(DJ);for(let S=0;S<8;S++)S<g&&y[S][1]?(a[S][0]=y[S][0],a[S][1]=y[S][1]):(a[S][0]=Number.MAX_SAFE_INTEGER,a[S][1]=0);a.sort(OJ);const E=c.morphAttributes.position,_=c.morphAttributes.normal;let m=0;for(let S=0;S<8;S++){const T=a[S],M=T[0],A=T[1];M!==Number.MAX_SAFE_INTEGER&&A?(E&&c.getAttribute("morphTarget"+S)!==E[M]&&c.setAttribute("morphTarget"+S,E[M]),_&&c.getAttribute("morphNormal"+S)!==_[M]&&c.setAttribute("morphNormal"+S,_[M]),i[S]=A,m+=A):(E&&c.hasAttribute("morphTarget"+S)===!0&&c.deleteAttribute("morphTarget"+S),_&&c.hasAttribute("morphNormal"+S)===!0&&c.deleteAttribute("morphNormal"+S),i[S]=0)}const v=c.morphTargetsRelative?1:1-m;d.getUniforms().setValue(n,"morphTargetBaseInfluence",v),d.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function UJ(n,e,t,r){let i=new WeakMap;function s(l){const u=r.render.frame,c=l.geometry,d=e.get(l,c);if(i.get(d)!==u&&(e.update(d),i.set(d,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const h=l.skeleton;i.get(h)!==u&&(h.update(),i.set(h,u))}return d}function o(){i=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}const kU=new Fr,UU=new C1,FU=new QM,zU=new ov,QP=[],eI=[],tI=new Float32Array(16),nI=new Float32Array(9),rI=new Float32Array(4);function im(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=QP[i];if(s===void 0&&(s=new Float32Array(i),QP[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Mi(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Ai(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function R1(n,e){let t=eI[e];t===void 0&&(t=new Int32Array(e),eI[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function FJ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function zJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Mi(t,e))return;n.uniform2fv(this.addr,e),Ai(t,e)}}function BJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Mi(t,e))return;n.uniform3fv(this.addr,e),Ai(t,e)}}function HJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Mi(t,e))return;n.uniform4fv(this.addr,e),Ai(t,e)}}function $J(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Mi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Ai(t,e)}else{if(Mi(t,r))return;rI.set(r),n.uniformMatrix2fv(this.addr,!1,rI),Ai(t,r)}}function GJ(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Mi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Ai(t,e)}else{if(Mi(t,r))return;nI.set(r),n.uniformMatrix3fv(this.addr,!1,nI),Ai(t,r)}}function VJ(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Mi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Ai(t,e)}else{if(Mi(t,r))return;tI.set(r),n.uniformMatrix4fv(this.addr,!1,tI),Ai(t,r)}}function jJ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function WJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Mi(t,e))return;n.uniform2iv(this.addr,e),Ai(t,e)}}function qJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Mi(t,e))return;n.uniform3iv(this.addr,e),Ai(t,e)}}function XJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Mi(t,e))return;n.uniform4iv(this.addr,e),Ai(t,e)}}function YJ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function KJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Mi(t,e))return;n.uniform2uiv(this.addr,e),Ai(t,e)}}function JJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Mi(t,e))return;n.uniform3uiv(this.addr,e),Ai(t,e)}}function ZJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Mi(t,e))return;n.uniform4uiv(this.addr,e),Ai(t,e)}}function QJ(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||kU,i)}function eZ(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||FU,i)}function tZ(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||zU,i)}function nZ(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||UU,i)}function rZ(n){switch(n){case 5126:return FJ;case 35664:return zJ;case 35665:return BJ;case 35666:return HJ;case 35674:return $J;case 35675:return GJ;case 35676:return VJ;case 5124:case 35670:return jJ;case 35667:case 35671:return WJ;case 35668:case 35672:return qJ;case 35669:case 35673:return XJ;case 5125:return YJ;case 36294:return KJ;case 36295:return JJ;case 36296:return ZJ;case 35678:case 36198:case 36298:case 36306:case 35682:return QJ;case 35679:case 36299:case 36307:return eZ;case 35680:case 36300:case 36308:case 36293:return tZ;case 36289:case 36303:case 36311:case 36292:return nZ}}function iZ(n,e){n.uniform1fv(this.addr,e)}function sZ(n,e){const t=im(e,this.size,2);n.uniform2fv(this.addr,t)}function oZ(n,e){const t=im(e,this.size,3);n.uniform3fv(this.addr,t)}function aZ(n,e){const t=im(e,this.size,4);n.uniform4fv(this.addr,t)}function lZ(n,e){const t=im(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function uZ(n,e){const t=im(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function cZ(n,e){const t=im(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function fZ(n,e){n.uniform1iv(this.addr,e)}function dZ(n,e){n.uniform2iv(this.addr,e)}function hZ(n,e){n.uniform3iv(this.addr,e)}function pZ(n,e){n.uniform4iv(this.addr,e)}function mZ(n,e){n.uniform1uiv(this.addr,e)}function gZ(n,e){n.uniform2uiv(this.addr,e)}function yZ(n,e){n.uniform3uiv(this.addr,e)}function vZ(n,e){n.uniform4uiv(this.addr,e)}function _Z(n,e,t){const r=this.cache,i=e.length,s=R1(t,i);Mi(r,s)||(n.uniform1iv(this.addr,s),Ai(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||kU,s[o])}function xZ(n,e,t){const r=this.cache,i=e.length,s=R1(t,i);Mi(r,s)||(n.uniform1iv(this.addr,s),Ai(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||FU,s[o])}function wZ(n,e,t){const r=this.cache,i=e.length,s=R1(t,i);Mi(r,s)||(n.uniform1iv(this.addr,s),Ai(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||zU,s[o])}function SZ(n,e,t){const r=this.cache,i=e.length,s=R1(t,i);Mi(r,s)||(n.uniform1iv(this.addr,s),Ai(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||UU,s[o])}function EZ(n){switch(n){case 5126:return iZ;case 35664:return sZ;case 35665:return oZ;case 35666:return aZ;case 35674:return lZ;case 35675:return uZ;case 35676:return cZ;case 5124:case 35670:return fZ;case 35667:case 35671:return dZ;case 35668:case 35672:return hZ;case 35669:case 35673:return pZ;case 5125:return mZ;case 36294:return gZ;case 36295:return yZ;case 36296:return vZ;case 35678:case 36198:case 36298:case 36306:case 35682:return _Z;case 35679:case 36299:case 36307:return xZ;case 35680:case 36300:case 36308:case 36293:return wZ;case 36289:case 36303:case 36311:case 36292:return SZ}}class bZ{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=rZ(t.type)}}class TZ{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=EZ(t.type)}}class MZ{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const WS=/(\w+)(\])?(\[|\.)?/g;function iI(n,e){n.seq.push(e),n.map[e.id]=e}function AZ(n,e,t){const r=n.name,i=r.length;for(WS.lastIndex=0;;){const s=WS.exec(r),o=WS.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===i){iI(t,u===void 0?new bZ(a,n,e):new TZ(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new MZ(a),iI(t,d)),t=d}}}class Cx{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);AZ(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function sI(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let CZ=0;function RZ(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function PZ(n){switch(n){case ja:return["Linear","( value )"];case an:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),["Linear","( value )"]}}function oI(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+RZ(n.getShaderSource(e),o)}else return i}function IZ(n,e){const t=PZ(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function LZ(n,e){let t;switch(e){case nU:t="Linear";break;case rU:t="Reinhard";break;case iU:t="OptimizedCineon";break;case zM:t="ACESFilmic";break;case sU:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function NZ(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(jg).join(`
`)}function OZ(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function DZ(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function jg(n){return n!==""}function aI(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function lI(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const kZ=/^[ \t]*#include +<([\w\d./]+)>/gm;function NT(n){return n.replace(kZ,FZ)}const UZ=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function FZ(n,e){let t=on[e];if(t===void 0){const r=UZ.get(e);if(r!==void 0)t=on[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return NT(t)}const zZ=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function uI(n){return n.replace(zZ,BZ)}function BZ(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function cI(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function HZ(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===b1?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Qg?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Fa&&(e="SHADOWMAP_TYPE_VSM"),e}function $Z(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Wc:case qc:e="ENVMAP_TYPE_CUBE";break;case nm:e="ENVMAP_TYPE_CUBE_UV";break}return e}function GZ(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case qc:e="ENVMAP_MODE_REFRACTION";break}return e}function VZ(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case iv:e="ENVMAP_BLENDING_MULTIPLY";break;case eU:e="ENVMAP_BLENDING_MIX";break;case tU:e="ENVMAP_BLENDING_ADD";break}return e}function jZ(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function WZ(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=HZ(t),u=$Z(t),c=GZ(t),d=VZ(t),h=jZ(t),g=t.isWebGL2?"":NZ(t),y=OZ(s),E=i.createProgram();let _,m,v=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y].filter(jg).join(`
`),_.length>0&&(_+=`
`),m=[g,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y].filter(jg).join(`
`),m.length>0&&(m+=`
`)):(_=[cI(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(jg).join(`
`),m=[g,cI(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ga?"#define TONE_MAPPING":"",t.toneMapping!==Ga?on.tonemapping_pars_fragment:"",t.toneMapping!==Ga?LZ("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",on.colorspace_pars_fragment,IZ("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(jg).join(`
`)),o=NT(o),o=aI(o,t),o=lI(o,t),a=NT(a),a=aI(a,t),a=lI(a,t),o=uI(o),a=uI(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(v=`#version 300 es
`,_=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,m=["#define varying in",t.glslVersion===PT?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===PT?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);const S=v+_+o,T=v+m+a,M=sI(i,i.VERTEX_SHADER,S),A=sI(i,i.FRAGMENT_SHADER,T);if(i.attachShader(E,M),i.attachShader(E,A),t.index0AttributeName!==void 0?i.bindAttribLocation(E,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(E,0,"position"),i.linkProgram(E),n.debug.checkShaderErrors){const I=i.getProgramInfoLog(E).trim(),k=i.getShaderInfoLog(M).trim(),G=i.getShaderInfoLog(A).trim();let $=!0,U=!0;if(i.getProgramParameter(E,i.LINK_STATUS)===!1)if($=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,E,M,A);else{const ee=oI(i,M,"vertex"),re=oI(i,A,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(E,i.VALIDATE_STATUS)+`

Program Info Log: `+I+`
`+ee+`
`+re)}else I!==""?console.warn("THREE.WebGLProgram: Program Info Log:",I):(k===""||G==="")&&(U=!1);U&&(this.diagnostics={runnable:$,programLog:I,vertexShader:{log:k,prefix:_},fragmentShader:{log:G,prefix:m}})}i.deleteShader(M),i.deleteShader(A);let R;this.getUniforms=function(){return R===void 0&&(R=new Cx(i,E)),R};let O;return this.getAttributes=function(){return O===void 0&&(O=DZ(i,E)),O},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(E),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=CZ++,this.cacheKey=e,this.usedTimes=1,this.program=E,this.vertexShader=M,this.fragmentShader=A,this}let qZ=0;class XZ{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new YZ(e),t.set(e,r)),r}}class YZ{constructor(e){this.id=qZ++,this.code=e,this.usedTimes=0}}function KZ(n,e,t,r,i,s,o){const a=new vd,l=new XZ,u=[],c=i.isWebGL2,d=i.logarithmicDepthBuffer,h=i.vertexTextures;let g=i.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function E(I){return I===0?"uv":`uv${I}`}function _(I,k,G,$,U){const ee=$.fog,re=U.geometry,ne=I.isMeshStandardMaterial?$.environment:null,X=(I.isMeshStandardMaterial?t:e).get(I.envMap||ne),q=X&&X.mapping===nm?X.image.height:null,K=y[I.type];I.precision!==null&&(g=i.getMaxPrecision(I.precision),g!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",g,"instead."));const F=re.morphAttributes.position||re.morphAttributes.normal||re.morphAttributes.color,L=F!==void 0?F.length:0;let z=0;re.morphAttributes.position!==void 0&&(z=1),re.morphAttributes.normal!==void 0&&(z=2),re.morphAttributes.color!==void 0&&(z=3);let Y,B,J,le;if(K){const hn=za[K];Y=hn.vertexShader,B=hn.fragmentShader}else Y=I.vertexShader,B=I.fragmentShader,l.update(I),J=l.getVertexShaderID(I),le=l.getFragmentShaderID(I);const pe=n.getRenderTarget(),he=U.isInstancedMesh===!0,Ee=!!I.map,_e=!!I.matcap,te=!!X,j=!!I.aoMap,ce=!!I.lightMap,fe=!!I.bumpMap,ie=!!I.normalMap,se=!!I.displacementMap,Ae=!!I.emissiveMap,we=!!I.metalnessMap,Re=!!I.roughnessMap,Le=I.anisotropy>0,be=I.clearcoat>0,Ye=I.iridescence>0,ue=I.sheen>0,oe=I.transmission>0,ye=Le&&!!I.anisotropyMap,Fe=be&&!!I.clearcoatMap,ze=be&&!!I.clearcoatNormalMap,He=be&&!!I.clearcoatRoughnessMap,Ze=Ye&&!!I.iridescenceMap,Ke=Ye&&!!I.iridescenceThicknessMap,Ue=ue&&!!I.sheenColorMap,st=ue&&!!I.sheenRoughnessMap,ht=!!I.specularMap,at=!!I.specularColorMap,Qe=!!I.specularIntensityMap,ot=oe&&!!I.transmissionMap,xt=oe&&!!I.thicknessMap,Ut=!!I.gradientMap,xe=!!I.alphaMap,et=I.alphaTest>0,Ne=!!I.alphaHash,rt=!!I.extensions,ct=!!re.attributes.uv1,Vt=!!re.attributes.uv2,rn=!!re.attributes.uv3;return{isWebGL2:c,shaderID:K,shaderType:I.type,shaderName:I.name,vertexShader:Y,fragmentShader:B,defines:I.defines,customVertexShaderID:J,customFragmentShaderID:le,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:g,instancing:he,instancingColor:he&&U.instanceColor!==null,supportsVertexTextures:h,outputColorSpace:pe===null?n.outputColorSpace:pe.isXRRenderTarget===!0?pe.texture.colorSpace:ja,map:Ee,matcap:_e,envMap:te,envMapMode:te&&X.mapping,envMapCubeUVHeight:q,aoMap:j,lightMap:ce,bumpMap:fe,normalMap:ie,displacementMap:h&&se,emissiveMap:Ae,normalMapObjectSpace:ie&&I.normalMapType===_U,normalMapTangentSpace:ie&&I.normalMapType===Qc,metalnessMap:we,roughnessMap:Re,anisotropy:Le,anisotropyMap:ye,clearcoat:be,clearcoatMap:Fe,clearcoatNormalMap:ze,clearcoatRoughnessMap:He,iridescence:Ye,iridescenceMap:Ze,iridescenceThicknessMap:Ke,sheen:ue,sheenColorMap:Ue,sheenRoughnessMap:st,specularMap:ht,specularColorMap:at,specularIntensityMap:Qe,transmission:oe,transmissionMap:ot,thicknessMap:xt,gradientMap:Ut,opaque:I.transparent===!1&&I.blending===gd,alphaMap:xe,alphaTest:et,alphaHash:Ne,combine:I.combine,mapUv:Ee&&E(I.map.channel),aoMapUv:j&&E(I.aoMap.channel),lightMapUv:ce&&E(I.lightMap.channel),bumpMapUv:fe&&E(I.bumpMap.channel),normalMapUv:ie&&E(I.normalMap.channel),displacementMapUv:se&&E(I.displacementMap.channel),emissiveMapUv:Ae&&E(I.emissiveMap.channel),metalnessMapUv:we&&E(I.metalnessMap.channel),roughnessMapUv:Re&&E(I.roughnessMap.channel),anisotropyMapUv:ye&&E(I.anisotropyMap.channel),clearcoatMapUv:Fe&&E(I.clearcoatMap.channel),clearcoatNormalMapUv:ze&&E(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:He&&E(I.clearcoatRoughnessMap.channel),iridescenceMapUv:Ze&&E(I.iridescenceMap.channel),iridescenceThicknessMapUv:Ke&&E(I.iridescenceThicknessMap.channel),sheenColorMapUv:Ue&&E(I.sheenColorMap.channel),sheenRoughnessMapUv:st&&E(I.sheenRoughnessMap.channel),specularMapUv:ht&&E(I.specularMap.channel),specularColorMapUv:at&&E(I.specularColorMap.channel),specularIntensityMapUv:Qe&&E(I.specularIntensityMap.channel),transmissionMapUv:ot&&E(I.transmissionMap.channel),thicknessMapUv:xt&&E(I.thicknessMap.channel),alphaMapUv:xe&&E(I.alphaMap.channel),vertexTangents:!!re.attributes.tangent&&(ie||Le),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!re.attributes.color&&re.attributes.color.itemSize===4,vertexUv1s:ct,vertexUv2s:Vt,vertexUv3s:rn,pointsUvs:U.isPoints===!0&&!!re.attributes.uv&&(Ee||xe),fog:!!ee,useFog:I.fog===!0,fogExp2:ee&&ee.isFogExp2,flatShading:I.flatShading===!0,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:U.isSkinnedMesh===!0,morphTargets:re.morphAttributes.position!==void 0,morphNormals:re.morphAttributes.normal!==void 0,morphColors:re.morphAttributes.color!==void 0,morphTargetsCount:L,morphTextureStride:z,numDirLights:k.directional.length,numPointLights:k.point.length,numSpotLights:k.spot.length,numSpotLightMaps:k.spotLightMap.length,numRectAreaLights:k.rectArea.length,numHemiLights:k.hemi.length,numDirLightShadows:k.directionalShadowMap.length,numPointLightShadows:k.pointShadowMap.length,numSpotLightShadows:k.spotShadowMap.length,numSpotLightShadowsWithMaps:k.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:I.dithering,shadowMapEnabled:n.shadowMap.enabled&&G.length>0,shadowMapType:n.shadowMap.type,toneMapping:I.toneMapped?n.toneMapping:Ga,useLegacyLights:n.useLegacyLights,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===Lr,flipSided:I.side===ps,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionDerivatives:rt&&I.extensions.derivatives===!0,extensionFragDepth:rt&&I.extensions.fragDepth===!0,extensionDrawBuffers:rt&&I.extensions.drawBuffers===!0,extensionShaderTextureLOD:rt&&I.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:I.customProgramCacheKey()}}function m(I){const k=[];if(I.shaderID?k.push(I.shaderID):(k.push(I.customVertexShaderID),k.push(I.customFragmentShaderID)),I.defines!==void 0)for(const G in I.defines)k.push(G),k.push(I.defines[G]);return I.isRawShaderMaterial===!1&&(v(k,I),S(k,I),k.push(n.outputColorSpace)),k.push(I.customProgramCacheKey),k.join()}function v(I,k){I.push(k.precision),I.push(k.outputColorSpace),I.push(k.envMapMode),I.push(k.envMapCubeUVHeight),I.push(k.mapUv),I.push(k.alphaMapUv),I.push(k.lightMapUv),I.push(k.aoMapUv),I.push(k.bumpMapUv),I.push(k.normalMapUv),I.push(k.displacementMapUv),I.push(k.emissiveMapUv),I.push(k.metalnessMapUv),I.push(k.roughnessMapUv),I.push(k.anisotropyMapUv),I.push(k.clearcoatMapUv),I.push(k.clearcoatNormalMapUv),I.push(k.clearcoatRoughnessMapUv),I.push(k.iridescenceMapUv),I.push(k.iridescenceThicknessMapUv),I.push(k.sheenColorMapUv),I.push(k.sheenRoughnessMapUv),I.push(k.specularMapUv),I.push(k.specularColorMapUv),I.push(k.specularIntensityMapUv),I.push(k.transmissionMapUv),I.push(k.thicknessMapUv),I.push(k.combine),I.push(k.fogExp2),I.push(k.sizeAttenuation),I.push(k.morphTargetsCount),I.push(k.morphAttributeCount),I.push(k.numDirLights),I.push(k.numPointLights),I.push(k.numSpotLights),I.push(k.numSpotLightMaps),I.push(k.numHemiLights),I.push(k.numRectAreaLights),I.push(k.numDirLightShadows),I.push(k.numPointLightShadows),I.push(k.numSpotLightShadows),I.push(k.numSpotLightShadowsWithMaps),I.push(k.shadowMapType),I.push(k.toneMapping),I.push(k.numClippingPlanes),I.push(k.numClipIntersection),I.push(k.depthPacking)}function S(I,k){a.disableAll(),k.isWebGL2&&a.enable(0),k.supportsVertexTextures&&a.enable(1),k.instancing&&a.enable(2),k.instancingColor&&a.enable(3),k.matcap&&a.enable(4),k.envMap&&a.enable(5),k.normalMapObjectSpace&&a.enable(6),k.normalMapTangentSpace&&a.enable(7),k.clearcoat&&a.enable(8),k.iridescence&&a.enable(9),k.alphaTest&&a.enable(10),k.vertexColors&&a.enable(11),k.vertexAlphas&&a.enable(12),k.vertexUv1s&&a.enable(13),k.vertexUv2s&&a.enable(14),k.vertexUv3s&&a.enable(15),k.vertexTangents&&a.enable(16),k.anisotropy&&a.enable(17),I.push(a.mask),a.disableAll(),k.fog&&a.enable(0),k.useFog&&a.enable(1),k.flatShading&&a.enable(2),k.logarithmicDepthBuffer&&a.enable(3),k.skinning&&a.enable(4),k.morphTargets&&a.enable(5),k.morphNormals&&a.enable(6),k.morphColors&&a.enable(7),k.premultipliedAlpha&&a.enable(8),k.shadowMapEnabled&&a.enable(9),k.useLegacyLights&&a.enable(10),k.doubleSided&&a.enable(11),k.flipSided&&a.enable(12),k.useDepthPacking&&a.enable(13),k.dithering&&a.enable(14),k.transmission&&a.enable(15),k.sheen&&a.enable(16),k.opaque&&a.enable(17),k.pointsUvs&&a.enable(18),I.push(a.mask)}function T(I){const k=y[I.type];let G;if(k){const $=za[k];G=nA.clone($.uniforms)}else G=I.uniforms;return G}function M(I,k){let G;for(let $=0,U=u.length;$<U;$++){const ee=u[$];if(ee.cacheKey===k){G=ee,++G.usedTimes;break}}return G===void 0&&(G=new WZ(n,k,I,s),u.push(G)),G}function A(I){if(--I.usedTimes===0){const k=u.indexOf(I);u[k]=u[u.length-1],u.pop(),I.destroy()}}function R(I){l.remove(I)}function O(){l.dispose()}return{getParameters:_,getProgramCacheKey:m,getUniforms:T,acquireProgram:M,releaseProgram:A,releaseShaderCache:R,programs:u,dispose:O}}function JZ(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function ZZ(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function fI(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function dI(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(d,h,g,y,E,_){let m=n[e];return m===void 0?(m={id:d.id,object:d,geometry:h,material:g,groupOrder:y,renderOrder:d.renderOrder,z:E,group:_},n[e]=m):(m.id=d.id,m.object=d,m.geometry=h,m.material=g,m.groupOrder=y,m.renderOrder=d.renderOrder,m.z=E,m.group=_),e++,m}function a(d,h,g,y,E,_){const m=o(d,h,g,y,E,_);g.transmission>0?r.push(m):g.transparent===!0?i.push(m):t.push(m)}function l(d,h,g,y,E,_){const m=o(d,h,g,y,E,_);g.transmission>0?r.unshift(m):g.transparent===!0?i.unshift(m):t.unshift(m)}function u(d,h){t.length>1&&t.sort(d||ZZ),r.length>1&&r.sort(h||fI),i.length>1&&i.sort(h||fI)}function c(){for(let d=e,h=n.length;d<h;d++){const g=n[d];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:c,sort:u}}function QZ(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new dI,n.set(r,[o])):i>=s.length?(o=new dI,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function eQ(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new de,color:new gt};break;case"SpotLight":t={position:new de,direction:new de,color:new gt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new de,color:new gt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new de,skyColor:new gt,groundColor:new gt};break;case"RectAreaLight":t={color:new gt,position:new de,halfWidth:new de,halfHeight:new de};break}return n[e.id]=t,t}}}function tQ(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let nQ=0;function rQ(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function iQ(n,e){const t=new eQ,r=tQ(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let c=0;c<9;c++)i.probe.push(new de);const s=new de,o=new Qt,a=new Qt;function l(c,d){let h=0,g=0,y=0;for(let G=0;G<9;G++)i.probe[G].set(0,0,0);let E=0,_=0,m=0,v=0,S=0,T=0,M=0,A=0,R=0,O=0;c.sort(rQ);const I=d===!0?Math.PI:1;for(let G=0,$=c.length;G<$;G++){const U=c[G],ee=U.color,re=U.intensity,ne=U.distance,X=U.shadow&&U.shadow.map?U.shadow.map.texture:null;if(U.isAmbientLight)h+=ee.r*re*I,g+=ee.g*re*I,y+=ee.b*re*I;else if(U.isLightProbe)for(let q=0;q<9;q++)i.probe[q].addScaledVector(U.sh.coefficients[q],re);else if(U.isDirectionalLight){const q=t.get(U);if(q.color.copy(U.color).multiplyScalar(U.intensity*I),U.castShadow){const K=U.shadow,F=r.get(U);F.shadowBias=K.bias,F.shadowNormalBias=K.normalBias,F.shadowRadius=K.radius,F.shadowMapSize=K.mapSize,i.directionalShadow[E]=F,i.directionalShadowMap[E]=X,i.directionalShadowMatrix[E]=U.shadow.matrix,T++}i.directional[E]=q,E++}else if(U.isSpotLight){const q=t.get(U);q.position.setFromMatrixPosition(U.matrixWorld),q.color.copy(ee).multiplyScalar(re*I),q.distance=ne,q.coneCos=Math.cos(U.angle),q.penumbraCos=Math.cos(U.angle*(1-U.penumbra)),q.decay=U.decay,i.spot[m]=q;const K=U.shadow;if(U.map&&(i.spotLightMap[R]=U.map,R++,K.updateMatrices(U),U.castShadow&&O++),i.spotLightMatrix[m]=K.matrix,U.castShadow){const F=r.get(U);F.shadowBias=K.bias,F.shadowNormalBias=K.normalBias,F.shadowRadius=K.radius,F.shadowMapSize=K.mapSize,i.spotShadow[m]=F,i.spotShadowMap[m]=X,A++}m++}else if(U.isRectAreaLight){const q=t.get(U);q.color.copy(ee).multiplyScalar(re),q.halfWidth.set(U.width*.5,0,0),q.halfHeight.set(0,U.height*.5,0),i.rectArea[v]=q,v++}else if(U.isPointLight){const q=t.get(U);if(q.color.copy(U.color).multiplyScalar(U.intensity*I),q.distance=U.distance,q.decay=U.decay,U.castShadow){const K=U.shadow,F=r.get(U);F.shadowBias=K.bias,F.shadowNormalBias=K.normalBias,F.shadowRadius=K.radius,F.shadowMapSize=K.mapSize,F.shadowCameraNear=K.camera.near,F.shadowCameraFar=K.camera.far,i.pointShadow[_]=F,i.pointShadowMap[_]=X,i.pointShadowMatrix[_]=U.shadow.matrix,M++}i.point[_]=q,_++}else if(U.isHemisphereLight){const q=t.get(U);q.skyColor.copy(U.color).multiplyScalar(re*I),q.groundColor.copy(U.groundColor).multiplyScalar(re*I),i.hemi[S]=q,S++}}v>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=yt.LTC_FLOAT_1,i.rectAreaLTC2=yt.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=yt.LTC_HALF_1,i.rectAreaLTC2=yt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=h,i.ambient[1]=g,i.ambient[2]=y;const k=i.hash;(k.directionalLength!==E||k.pointLength!==_||k.spotLength!==m||k.rectAreaLength!==v||k.hemiLength!==S||k.numDirectionalShadows!==T||k.numPointShadows!==M||k.numSpotShadows!==A||k.numSpotMaps!==R)&&(i.directional.length=E,i.spot.length=m,i.rectArea.length=v,i.point.length=_,i.hemi.length=S,i.directionalShadow.length=T,i.directionalShadowMap.length=T,i.pointShadow.length=M,i.pointShadowMap.length=M,i.spotShadow.length=A,i.spotShadowMap.length=A,i.directionalShadowMatrix.length=T,i.pointShadowMatrix.length=M,i.spotLightMatrix.length=A+R-O,i.spotLightMap.length=R,i.numSpotLightShadowsWithMaps=O,k.directionalLength=E,k.pointLength=_,k.spotLength=m,k.rectAreaLength=v,k.hemiLength=S,k.numDirectionalShadows=T,k.numPointShadows=M,k.numSpotShadows=A,k.numSpotMaps=R,i.version=nQ++)}function u(c,d){let h=0,g=0,y=0,E=0,_=0;const m=d.matrixWorldInverse;for(let v=0,S=c.length;v<S;v++){const T=c[v];if(T.isDirectionalLight){const M=i.directional[h];M.direction.setFromMatrixPosition(T.matrixWorld),s.setFromMatrixPosition(T.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(m),h++}else if(T.isSpotLight){const M=i.spot[y];M.position.setFromMatrixPosition(T.matrixWorld),M.position.applyMatrix4(m),M.direction.setFromMatrixPosition(T.matrixWorld),s.setFromMatrixPosition(T.target.matrixWorld),M.direction.sub(s),M.direction.transformDirection(m),y++}else if(T.isRectAreaLight){const M=i.rectArea[E];M.position.setFromMatrixPosition(T.matrixWorld),M.position.applyMatrix4(m),a.identity(),o.copy(T.matrixWorld),o.premultiply(m),a.extractRotation(o),M.halfWidth.set(T.width*.5,0,0),M.halfHeight.set(0,T.height*.5,0),M.halfWidth.applyMatrix4(a),M.halfHeight.applyMatrix4(a),E++}else if(T.isPointLight){const M=i.point[g];M.position.setFromMatrixPosition(T.matrixWorld),M.position.applyMatrix4(m),g++}else if(T.isHemisphereLight){const M=i.hemi[_];M.direction.setFromMatrixPosition(T.matrixWorld),M.direction.transformDirection(m),_++}}}return{setup:l,setupView:u,state:i}}function hI(n,e){const t=new iQ(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(d){r.push(d)}function a(d){i.push(d)}function l(d){t.setup(r,d)}function u(d){t.setupView(r,d)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:u,pushLight:o,pushShadow:a}}function sQ(n,e){let t=new WeakMap;function r(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new hI(n,e),t.set(s,[l])):o>=a.length?(l=new hI(n,e),a.push(l)):l=a[o],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class P1 extends es{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=vU,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class I1 extends es{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const oQ=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,aQ=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function lQ(n,e,t){let r=new av;const i=new Je,s=new Je,o=new zn,a=new P1({depthPacking:YM}),l=new I1,u={},c=t.maxTextureSize,d={[Dl]:ps,[ps]:Dl,[Lr]:Lr},h=new kl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Je},radius:{value:4}},vertexShader:oQ,fragmentShader:aQ}),g=h.clone();g.defines.HORIZONTAL_PASS=1;const y=new un;y.setAttribute("position",new Kn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const E=new Or(y,h),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=b1;let m=this.type;this.render=function(M,A,R){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||M.length===0)return;const O=n.getRenderTarget(),I=n.getActiveCubeFace(),k=n.getActiveMipmapLevel(),G=n.state;G.setBlending(Fu),G.buffers.color.setClear(1,1,1,1),G.buffers.depth.setTest(!0),G.setScissorTest(!1);const $=m!==Fa&&this.type===Fa,U=m===Fa&&this.type!==Fa;for(let ee=0,re=M.length;ee<re;ee++){const ne=M[ee],X=ne.shadow;if(X===void 0){console.warn("THREE.WebGLShadowMap:",ne,"has no shadow.");continue}if(X.autoUpdate===!1&&X.needsUpdate===!1)continue;i.copy(X.mapSize);const q=X.getFrameExtents();if(i.multiply(q),s.copy(X.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(s.x=Math.floor(c/q.x),i.x=s.x*q.x,X.mapSize.x=s.x),i.y>c&&(s.y=Math.floor(c/q.y),i.y=s.y*q.y,X.mapSize.y=s.y)),X.map===null||$===!0||U===!0){const F=this.type!==Fa?{minFilter:ei,magFilter:ei}:{};X.map!==null&&X.map.dispose(),X.map=new Wa(i.x,i.y,F),X.map.texture.name=ne.name+".shadowMap",X.camera.updateProjectionMatrix()}n.setRenderTarget(X.map),n.clear();const K=X.getViewportCount();for(let F=0;F<K;F++){const L=X.getViewport(F);o.set(s.x*L.x,s.y*L.y,s.x*L.z,s.y*L.w),G.viewport(o),X.updateMatrices(ne,F),r=X.getFrustum(),T(A,R,X.camera,ne,this.type)}X.isPointLightShadow!==!0&&this.type===Fa&&v(X,R),X.needsUpdate=!1}m=this.type,_.needsUpdate=!1,n.setRenderTarget(O,I,k)};function v(M,A){const R=e.update(E);h.defines.VSM_SAMPLES!==M.blurSamples&&(h.defines.VSM_SAMPLES=M.blurSamples,g.defines.VSM_SAMPLES=M.blurSamples,h.needsUpdate=!0,g.needsUpdate=!0),M.mapPass===null&&(M.mapPass=new Wa(i.x,i.y)),h.uniforms.shadow_pass.value=M.map.texture,h.uniforms.resolution.value=M.mapSize,h.uniforms.radius.value=M.radius,n.setRenderTarget(M.mapPass),n.clear(),n.renderBufferDirect(A,null,R,h,E,null),g.uniforms.shadow_pass.value=M.mapPass.texture,g.uniforms.resolution.value=M.mapSize,g.uniforms.radius.value=M.radius,n.setRenderTarget(M.map),n.clear(),n.renderBufferDirect(A,null,R,g,E,null)}function S(M,A,R,O){let I=null;const k=R.isPointLight===!0?M.customDistanceMaterial:M.customDepthMaterial;if(k!==void 0)I=k;else if(I=R.isPointLight===!0?l:a,n.localClippingEnabled&&A.clipShadows===!0&&Array.isArray(A.clippingPlanes)&&A.clippingPlanes.length!==0||A.displacementMap&&A.displacementScale!==0||A.alphaMap&&A.alphaTest>0||A.map&&A.alphaTest>0){const G=I.uuid,$=A.uuid;let U=u[G];U===void 0&&(U={},u[G]=U);let ee=U[$];ee===void 0&&(ee=I.clone(),U[$]=ee),I=ee}if(I.visible=A.visible,I.wireframe=A.wireframe,O===Fa?I.side=A.shadowSide!==null?A.shadowSide:A.side:I.side=A.shadowSide!==null?A.shadowSide:d[A.side],I.alphaMap=A.alphaMap,I.alphaTest=A.alphaTest,I.map=A.map,I.clipShadows=A.clipShadows,I.clippingPlanes=A.clippingPlanes,I.clipIntersection=A.clipIntersection,I.displacementMap=A.displacementMap,I.displacementScale=A.displacementScale,I.displacementBias=A.displacementBias,I.wireframeLinewidth=A.wireframeLinewidth,I.linewidth=A.linewidth,R.isPointLight===!0&&I.isMeshDistanceMaterial===!0){const G=n.properties.get(I);G.light=R}return I}function T(M,A,R,O,I){if(M.visible===!1)return;if(M.layers.test(A.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&I===Fa)&&(!M.frustumCulled||r.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(R.matrixWorldInverse,M.matrixWorld);const $=e.update(M),U=M.material;if(Array.isArray(U)){const ee=$.groups;for(let re=0,ne=ee.length;re<ne;re++){const X=ee[re],q=U[X.materialIndex];if(q&&q.visible){const K=S(M,q,O,I);n.renderBufferDirect(R,null,$,K,M,X)}}}else if(U.visible){const ee=S(M,U,O,I);n.renderBufferDirect(R,null,$,ee,M,null)}}const G=M.children;for(let $=0,U=G.length;$<U;$++)T(G[$],A,R,O,I)}}function uQ(n,e,t){const r=t.isWebGL2;function i(){let xe=!1;const et=new zn;let Ne=null;const rt=new zn(0,0,0,0);return{setMask:function(ct){Ne!==ct&&!xe&&(n.colorMask(ct,ct,ct,ct),Ne=ct)},setLocked:function(ct){xe=ct},setClear:function(ct,Vt,rn,xn,hn){hn===!0&&(ct*=xn,Vt*=xn,rn*=xn),et.set(ct,Vt,rn,xn),rt.equals(et)===!1&&(n.clearColor(ct,Vt,rn,xn),rt.copy(et))},reset:function(){xe=!1,Ne=null,rt.set(-1,0,0,0)}}}function s(){let xe=!1,et=null,Ne=null,rt=null;return{setTest:function(ct){ct?pe(n.DEPTH_TEST):he(n.DEPTH_TEST)},setMask:function(ct){et!==ct&&!xe&&(n.depthMask(ct),et=ct)},setFunc:function(ct){if(Ne!==ct){switch(ct){case q3:n.depthFunc(n.NEVER);break;case X3:n.depthFunc(n.ALWAYS);break;case Y3:n.depthFunc(n.LESS);break;case Gx:n.depthFunc(n.LEQUAL);break;case K3:n.depthFunc(n.EQUAL);break;case J3:n.depthFunc(n.GEQUAL);break;case Z3:n.depthFunc(n.GREATER);break;case Q3:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Ne=ct}},setLocked:function(ct){xe=ct},setClear:function(ct){rt!==ct&&(n.clearDepth(ct),rt=ct)},reset:function(){xe=!1,et=null,Ne=null,rt=null}}}function o(){let xe=!1,et=null,Ne=null,rt=null,ct=null,Vt=null,rn=null,xn=null,hn=null;return{setTest:function(Sn){xe||(Sn?pe(n.STENCIL_TEST):he(n.STENCIL_TEST))},setMask:function(Sn){et!==Sn&&!xe&&(n.stencilMask(Sn),et=Sn)},setFunc:function(Sn,yn,Xt){(Ne!==Sn||rt!==yn||ct!==Xt)&&(n.stencilFunc(Sn,yn,Xt),Ne=Sn,rt=yn,ct=Xt)},setOp:function(Sn,yn,Xt){(Vt!==Sn||rn!==yn||xn!==Xt)&&(n.stencilOp(Sn,yn,Xt),Vt=Sn,rn=yn,xn=Xt)},setLocked:function(Sn){xe=Sn},setClear:function(Sn){hn!==Sn&&(n.clearStencil(Sn),hn=Sn)},reset:function(){xe=!1,et=null,Ne=null,rt=null,ct=null,Vt=null,rn=null,xn=null,hn=null}}}const a=new i,l=new s,u=new o,c=new WeakMap,d=new WeakMap;let h={},g={},y=new WeakMap,E=[],_=null,m=!1,v=null,S=null,T=null,M=null,A=null,R=null,O=null,I=!1,k=null,G=null,$=null,U=null,ee=null;const re=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ne=!1,X=0;const q=n.getParameter(n.VERSION);q.indexOf("WebGL")!==-1?(X=parseFloat(/^WebGL (\d)/.exec(q)[1]),ne=X>=1):q.indexOf("OpenGL ES")!==-1&&(X=parseFloat(/^OpenGL ES (\d)/.exec(q)[1]),ne=X>=2);let K=null,F={};const L=n.getParameter(n.SCISSOR_BOX),z=n.getParameter(n.VIEWPORT),Y=new zn().fromArray(L),B=new zn().fromArray(z);function J(xe,et,Ne,rt){const ct=new Uint8Array(4),Vt=n.createTexture();n.bindTexture(xe,Vt),n.texParameteri(xe,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(xe,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let rn=0;rn<Ne;rn++)r&&(xe===n.TEXTURE_3D||xe===n.TEXTURE_2D_ARRAY)?n.texImage3D(et,0,n.RGBA,1,1,rt,0,n.RGBA,n.UNSIGNED_BYTE,ct):n.texImage2D(et+rn,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ct);return Vt}const le={};le[n.TEXTURE_2D]=J(n.TEXTURE_2D,n.TEXTURE_2D,1),le[n.TEXTURE_CUBE_MAP]=J(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(le[n.TEXTURE_2D_ARRAY]=J(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),le[n.TEXTURE_3D]=J(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),pe(n.DEPTH_TEST),l.setFunc(Gx),se(!1),Ae(tT),pe(n.CULL_FACE),fe(Fu);function pe(xe){h[xe]!==!0&&(n.enable(xe),h[xe]=!0)}function he(xe){h[xe]!==!1&&(n.disable(xe),h[xe]=!1)}function Ee(xe,et){return g[xe]!==et?(n.bindFramebuffer(xe,et),g[xe]=et,r&&(xe===n.DRAW_FRAMEBUFFER&&(g[n.FRAMEBUFFER]=et),xe===n.FRAMEBUFFER&&(g[n.DRAW_FRAMEBUFFER]=et)),!0):!1}function _e(xe,et){let Ne=E,rt=!1;if(xe)if(Ne=y.get(et),Ne===void 0&&(Ne=[],y.set(et,Ne)),xe.isWebGLMultipleRenderTargets){const ct=xe.texture;if(Ne.length!==ct.length||Ne[0]!==n.COLOR_ATTACHMENT0){for(let Vt=0,rn=ct.length;Vt<rn;Vt++)Ne[Vt]=n.COLOR_ATTACHMENT0+Vt;Ne.length=ct.length,rt=!0}}else Ne[0]!==n.COLOR_ATTACHMENT0&&(Ne[0]=n.COLOR_ATTACHMENT0,rt=!0);else Ne[0]!==n.BACK&&(Ne[0]=n.BACK,rt=!0);rt&&(t.isWebGL2?n.drawBuffers(Ne):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ne))}function te(xe){return _!==xe?(n.useProgram(xe),_=xe,!0):!1}const j={[od]:n.FUNC_ADD,[k3]:n.FUNC_SUBTRACT,[U3]:n.FUNC_REVERSE_SUBTRACT};if(r)j[sT]=n.MIN,j[oT]=n.MAX;else{const xe=e.get("EXT_blend_minmax");xe!==null&&(j[sT]=xe.MIN_EXT,j[oT]=xe.MAX_EXT)}const ce={[F3]:n.ZERO,[z3]:n.ONE,[B3]:n.SRC_COLOR,[UM]:n.SRC_ALPHA,[W3]:n.SRC_ALPHA_SATURATE,[V3]:n.DST_COLOR,[$3]:n.DST_ALPHA,[H3]:n.ONE_MINUS_SRC_COLOR,[FM]:n.ONE_MINUS_SRC_ALPHA,[j3]:n.ONE_MINUS_DST_COLOR,[G3]:n.ONE_MINUS_DST_ALPHA};function fe(xe,et,Ne,rt,ct,Vt,rn,xn){if(xe===Fu){m===!0&&(he(n.BLEND),m=!1);return}if(m===!1&&(pe(n.BLEND),m=!0),xe!==D3){if(xe!==v||xn!==I){if((S!==od||A!==od)&&(n.blendEquation(n.FUNC_ADD),S=od,A=od),xn)switch(xe){case gd:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case nT:n.blendFunc(n.ONE,n.ONE);break;case rT:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case iT:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",xe);break}else switch(xe){case gd:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case nT:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case rT:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case iT:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",xe);break}T=null,M=null,R=null,O=null,v=xe,I=xn}return}ct=ct||et,Vt=Vt||Ne,rn=rn||rt,(et!==S||ct!==A)&&(n.blendEquationSeparate(j[et],j[ct]),S=et,A=ct),(Ne!==T||rt!==M||Vt!==R||rn!==O)&&(n.blendFuncSeparate(ce[Ne],ce[rt],ce[Vt],ce[rn]),T=Ne,M=rt,R=Vt,O=rn),v=xe,I=!1}function ie(xe,et){xe.side===Lr?he(n.CULL_FACE):pe(n.CULL_FACE);let Ne=xe.side===ps;et&&(Ne=!Ne),se(Ne),xe.blending===gd&&xe.transparent===!1?fe(Fu):fe(xe.blending,xe.blendEquation,xe.blendSrc,xe.blendDst,xe.blendEquationAlpha,xe.blendSrcAlpha,xe.blendDstAlpha,xe.premultipliedAlpha),l.setFunc(xe.depthFunc),l.setTest(xe.depthTest),l.setMask(xe.depthWrite),a.setMask(xe.colorWrite);const rt=xe.stencilWrite;u.setTest(rt),rt&&(u.setMask(xe.stencilWriteMask),u.setFunc(xe.stencilFunc,xe.stencilRef,xe.stencilFuncMask),u.setOp(xe.stencilFail,xe.stencilZFail,xe.stencilZPass)),Re(xe.polygonOffset,xe.polygonOffsetFactor,xe.polygonOffsetUnits),xe.alphaToCoverage===!0?pe(n.SAMPLE_ALPHA_TO_COVERAGE):he(n.SAMPLE_ALPHA_TO_COVERAGE)}function se(xe){k!==xe&&(xe?n.frontFace(n.CW):n.frontFace(n.CCW),k=xe)}function Ae(xe){xe!==L3?(pe(n.CULL_FACE),xe!==G&&(xe===tT?n.cullFace(n.BACK):xe===N3?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):he(n.CULL_FACE),G=xe}function we(xe){xe!==$&&(ne&&n.lineWidth(xe),$=xe)}function Re(xe,et,Ne){xe?(pe(n.POLYGON_OFFSET_FILL),(U!==et||ee!==Ne)&&(n.polygonOffset(et,Ne),U=et,ee=Ne)):he(n.POLYGON_OFFSET_FILL)}function Le(xe){xe?pe(n.SCISSOR_TEST):he(n.SCISSOR_TEST)}function be(xe){xe===void 0&&(xe=n.TEXTURE0+re-1),K!==xe&&(n.activeTexture(xe),K=xe)}function Ye(xe,et,Ne){Ne===void 0&&(K===null?Ne=n.TEXTURE0+re-1:Ne=K);let rt=F[Ne];rt===void 0&&(rt={type:void 0,texture:void 0},F[Ne]=rt),(rt.type!==xe||rt.texture!==et)&&(K!==Ne&&(n.activeTexture(Ne),K=Ne),n.bindTexture(xe,et||le[xe]),rt.type=xe,rt.texture=et)}function ue(){const xe=F[K];xe!==void 0&&xe.type!==void 0&&(n.bindTexture(xe.type,null),xe.type=void 0,xe.texture=void 0)}function oe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function ye(){try{n.compressedTexImage3D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function Fe(){try{n.texSubImage2D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function ze(){try{n.texSubImage3D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function He(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function Ze(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function Ke(){try{n.texStorage2D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function Ue(){try{n.texStorage3D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function st(){try{n.texImage2D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function ht(){try{n.texImage3D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function at(xe){Y.equals(xe)===!1&&(n.scissor(xe.x,xe.y,xe.z,xe.w),Y.copy(xe))}function Qe(xe){B.equals(xe)===!1&&(n.viewport(xe.x,xe.y,xe.z,xe.w),B.copy(xe))}function ot(xe,et){let Ne=d.get(et);Ne===void 0&&(Ne=new WeakMap,d.set(et,Ne));let rt=Ne.get(xe);rt===void 0&&(rt=n.getUniformBlockIndex(et,xe.name),Ne.set(xe,rt))}function xt(xe,et){const rt=d.get(et).get(xe);c.get(et)!==rt&&(n.uniformBlockBinding(et,rt,xe.__bindingPointIndex),c.set(et,rt))}function Ut(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),r===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},K=null,F={},g={},y=new WeakMap,E=[],_=null,m=!1,v=null,S=null,T=null,M=null,A=null,R=null,O=null,I=!1,k=null,G=null,$=null,U=null,ee=null,Y.set(0,0,n.canvas.width,n.canvas.height),B.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:pe,disable:he,bindFramebuffer:Ee,drawBuffers:_e,useProgram:te,setBlending:fe,setMaterial:ie,setFlipSided:se,setCullFace:Ae,setLineWidth:we,setPolygonOffset:Re,setScissorTest:Le,activeTexture:be,bindTexture:Ye,unbindTexture:ue,compressedTexImage2D:oe,compressedTexImage3D:ye,texImage2D:st,texImage3D:ht,updateUBOMapping:ot,uniformBlockBinding:xt,texStorage2D:Ke,texStorage3D:Ue,texSubImage2D:Fe,texSubImage3D:ze,compressedTexSubImage2D:He,compressedTexSubImage3D:Ze,scissor:at,viewport:Qe,reset:Ut}}function cQ(n,e,t,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,c=i.maxTextureSize,d=i.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,g=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),y=new WeakMap;let E;const _=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(ue,oe){return m?new OffscreenCanvas(ue,oe):by("canvas")}function S(ue,oe,ye,Fe){let ze=1;if((ue.width>Fe||ue.height>Fe)&&(ze=Fe/Math.max(ue.width,ue.height)),ze<1||oe===!0)if(typeof HTMLImageElement<"u"&&ue instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ue instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ue instanceof ImageBitmap){const He=oe?Wx:Math.floor,Ze=He(ze*ue.width),Ke=He(ze*ue.height);E===void 0&&(E=v(Ze,Ke));const Ue=ye?v(Ze,Ke):E;return Ue.width=Ze,Ue.height=Ke,Ue.getContext("2d").drawImage(ue,0,0,Ze,Ke),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ue.width+"x"+ue.height+") to ("+Ze+"x"+Ke+")."),Ue}else return"data"in ue&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ue.width+"x"+ue.height+")."),ue;return ue}function T(ue){return IT(ue.width)&&IT(ue.height)}function M(ue){return a?!1:ue.wrapS!==hs||ue.wrapT!==hs||ue.minFilter!==ei&&ue.minFilter!==br}function A(ue,oe){return ue.generateMipmaps&&oe&&ue.minFilter!==ei&&ue.minFilter!==br}function R(ue){n.generateMipmap(ue)}function O(ue,oe,ye,Fe,ze=!1){if(a===!1)return oe;if(ue!==null){if(n[ue]!==void 0)return n[ue];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ue+"'")}let He=oe;return oe===n.RED&&(ye===n.FLOAT&&(He=n.R32F),ye===n.HALF_FLOAT&&(He=n.R16F),ye===n.UNSIGNED_BYTE&&(He=n.R8)),oe===n.RG&&(ye===n.FLOAT&&(He=n.RG32F),ye===n.HALF_FLOAT&&(He=n.RG16F),ye===n.UNSIGNED_BYTE&&(He=n.RG8)),oe===n.RGBA&&(ye===n.FLOAT&&(He=n.RGBA32F),ye===n.HALF_FLOAT&&(He=n.RGBA16F),ye===n.UNSIGNED_BYTE&&(He=Fe===an&&ze===!1?n.SRGB8_ALPHA8:n.RGBA8),ye===n.UNSIGNED_SHORT_4_4_4_4&&(He=n.RGBA4),ye===n.UNSIGNED_SHORT_5_5_5_1&&(He=n.RGB5_A1)),(He===n.R16F||He===n.R32F||He===n.RG16F||He===n.RG32F||He===n.RGBA16F||He===n.RGBA32F)&&e.get("EXT_color_buffer_float"),He}function I(ue,oe,ye){return A(ue,ye)===!0||ue.isFramebufferTexture&&ue.minFilter!==ei&&ue.minFilter!==br?Math.log2(Math.max(oe.width,oe.height))+1:ue.mipmaps!==void 0&&ue.mipmaps.length>0?ue.mipmaps.length:ue.isCompressedTexture&&Array.isArray(ue.image)?oe.mipmaps.length:1}function k(ue){return ue===ei||ue===Vx||ue===ey?n.NEAREST:n.LINEAR}function G(ue){const oe=ue.target;oe.removeEventListener("dispose",G),U(oe),oe.isVideoTexture&&y.delete(oe)}function $(ue){const oe=ue.target;oe.removeEventListener("dispose",$),re(oe)}function U(ue){const oe=r.get(ue);if(oe.__webglInit===void 0)return;const ye=ue.source,Fe=_.get(ye);if(Fe){const ze=Fe[oe.__cacheKey];ze.usedTimes--,ze.usedTimes===0&&ee(ue),Object.keys(Fe).length===0&&_.delete(ye)}r.remove(ue)}function ee(ue){const oe=r.get(ue);n.deleteTexture(oe.__webglTexture);const ye=ue.source,Fe=_.get(ye);delete Fe[oe.__cacheKey],o.memory.textures--}function re(ue){const oe=ue.texture,ye=r.get(ue),Fe=r.get(oe);if(Fe.__webglTexture!==void 0&&(n.deleteTexture(Fe.__webglTexture),o.memory.textures--),ue.depthTexture&&ue.depthTexture.dispose(),ue.isWebGLCubeRenderTarget)for(let ze=0;ze<6;ze++)n.deleteFramebuffer(ye.__webglFramebuffer[ze]),ye.__webglDepthbuffer&&n.deleteRenderbuffer(ye.__webglDepthbuffer[ze]);else{if(n.deleteFramebuffer(ye.__webglFramebuffer),ye.__webglDepthbuffer&&n.deleteRenderbuffer(ye.__webglDepthbuffer),ye.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ye.__webglMultisampledFramebuffer),ye.__webglColorRenderbuffer)for(let ze=0;ze<ye.__webglColorRenderbuffer.length;ze++)ye.__webglColorRenderbuffer[ze]&&n.deleteRenderbuffer(ye.__webglColorRenderbuffer[ze]);ye.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ye.__webglDepthRenderbuffer)}if(ue.isWebGLMultipleRenderTargets)for(let ze=0,He=oe.length;ze<He;ze++){const Ze=r.get(oe[ze]);Ze.__webglTexture&&(n.deleteTexture(Ze.__webglTexture),o.memory.textures--),r.remove(oe[ze])}r.remove(oe),r.remove(ue)}let ne=0;function X(){ne=0}function q(){const ue=ne;return ue>=l&&console.warn("THREE.WebGLTextures: Trying to use "+ue+" texture units while this GPU supports only "+l),ne+=1,ue}function K(ue){const oe=[];return oe.push(ue.wrapS),oe.push(ue.wrapT),oe.push(ue.wrapR||0),oe.push(ue.magFilter),oe.push(ue.minFilter),oe.push(ue.anisotropy),oe.push(ue.internalFormat),oe.push(ue.format),oe.push(ue.type),oe.push(ue.generateMipmaps),oe.push(ue.premultiplyAlpha),oe.push(ue.flipY),oe.push(ue.unpackAlignment),oe.push(ue.colorSpace),oe.join()}function F(ue,oe){const ye=r.get(ue);if(ue.isVideoTexture&&be(ue),ue.isRenderTargetTexture===!1&&ue.version>0&&ye.__version!==ue.version){const Fe=ue.image;if(Fe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Fe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ee(ye,ue,oe);return}}t.bindTexture(n.TEXTURE_2D,ye.__webglTexture,n.TEXTURE0+oe)}function L(ue,oe){const ye=r.get(ue);if(ue.version>0&&ye.__version!==ue.version){Ee(ye,ue,oe);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ye.__webglTexture,n.TEXTURE0+oe)}function z(ue,oe){const ye=r.get(ue);if(ue.version>0&&ye.__version!==ue.version){Ee(ye,ue,oe);return}t.bindTexture(n.TEXTURE_3D,ye.__webglTexture,n.TEXTURE0+oe)}function Y(ue,oe){const ye=r.get(ue);if(ue.version>0&&ye.__version!==ue.version){_e(ye,ue,oe);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ye.__webglTexture,n.TEXTURE0+oe)}const B={[yy]:n.REPEAT,[hs]:n.CLAMP_TO_EDGE,[vy]:n.MIRRORED_REPEAT},J={[ei]:n.NEAREST,[Vx]:n.NEAREST_MIPMAP_NEAREST,[ey]:n.NEAREST_MIPMAP_LINEAR,[br]:n.LINEAR,[BM]:n.LINEAR_MIPMAP_NEAREST,[Xc]:n.LINEAR_MIPMAP_LINEAR},le={[wU]:n.NEVER,[CU]:n.ALWAYS,[SU]:n.LESS,[bU]:n.LEQUAL,[EU]:n.EQUAL,[AU]:n.GEQUAL,[TU]:n.GREATER,[MU]:n.NOTEQUAL};function pe(ue,oe,ye){if(ye?(n.texParameteri(ue,n.TEXTURE_WRAP_S,B[oe.wrapS]),n.texParameteri(ue,n.TEXTURE_WRAP_T,B[oe.wrapT]),(ue===n.TEXTURE_3D||ue===n.TEXTURE_2D_ARRAY)&&n.texParameteri(ue,n.TEXTURE_WRAP_R,B[oe.wrapR]),n.texParameteri(ue,n.TEXTURE_MAG_FILTER,J[oe.magFilter]),n.texParameteri(ue,n.TEXTURE_MIN_FILTER,J[oe.minFilter])):(n.texParameteri(ue,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(ue,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(ue===n.TEXTURE_3D||ue===n.TEXTURE_2D_ARRAY)&&n.texParameteri(ue,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(oe.wrapS!==hs||oe.wrapT!==hs)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(ue,n.TEXTURE_MAG_FILTER,k(oe.magFilter)),n.texParameteri(ue,n.TEXTURE_MIN_FILTER,k(oe.minFilter)),oe.minFilter!==ei&&oe.minFilter!==br&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),oe.compareFunction&&(n.texParameteri(ue,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(ue,n.TEXTURE_COMPARE_FUNC,le[oe.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Fe=e.get("EXT_texture_filter_anisotropic");if(oe.magFilter===ei||oe.minFilter!==ey&&oe.minFilter!==Xc||oe.type===Rl&&e.has("OES_texture_float_linear")===!1||a===!1&&oe.type===Fp&&e.has("OES_texture_half_float_linear")===!1)return;(oe.anisotropy>1||r.get(oe).__currentAnisotropy)&&(n.texParameterf(ue,Fe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(oe.anisotropy,i.getMaxAnisotropy())),r.get(oe).__currentAnisotropy=oe.anisotropy)}}function he(ue,oe){let ye=!1;ue.__webglInit===void 0&&(ue.__webglInit=!0,oe.addEventListener("dispose",G));const Fe=oe.source;let ze=_.get(Fe);ze===void 0&&(ze={},_.set(Fe,ze));const He=K(oe);if(He!==ue.__cacheKey){ze[He]===void 0&&(ze[He]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ye=!0),ze[He].usedTimes++;const Ze=ze[ue.__cacheKey];Ze!==void 0&&(ze[ue.__cacheKey].usedTimes--,Ze.usedTimes===0&&ee(oe)),ue.__cacheKey=He,ue.__webglTexture=ze[He].texture}return ye}function Ee(ue,oe,ye){let Fe=n.TEXTURE_2D;(oe.isDataArrayTexture||oe.isCompressedArrayTexture)&&(Fe=n.TEXTURE_2D_ARRAY),oe.isData3DTexture&&(Fe=n.TEXTURE_3D);const ze=he(ue,oe),He=oe.source;t.bindTexture(Fe,ue.__webglTexture,n.TEXTURE0+ye);const Ze=r.get(He);if(He.version!==Ze.__version||ze===!0){t.activeTexture(n.TEXTURE0+ye),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,oe.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,oe.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const Ke=M(oe)&&T(oe.image)===!1;let Ue=S(oe.image,Ke,!1,c);Ue=Ye(oe,Ue);const st=T(Ue)||a,ht=s.convert(oe.format,oe.colorSpace);let at=s.convert(oe.type),Qe=O(oe.internalFormat,ht,at,oe.colorSpace);pe(Fe,oe,st);let ot;const xt=oe.mipmaps,Ut=a&&oe.isVideoTexture!==!0,xe=Ze.__version===void 0||ze===!0,et=I(oe,Ue,st);if(oe.isDepthTexture)Qe=n.DEPTH_COMPONENT,a?oe.type===Rl?Qe=n.DEPTH_COMPONENT32F:oe.type===ku?Qe=n.DEPTH_COMPONENT24:oe.type===Bc?Qe=n.DEPTH24_STENCIL8:Qe=n.DEPTH_COMPONENT16:oe.type===Rl&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),oe.format===Hc&&Qe===n.DEPTH_COMPONENT&&oe.type!==M1&&oe.type!==ku&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),oe.type=ku,at=s.convert(oe.type)),oe.format===Ad&&Qe===n.DEPTH_COMPONENT&&(Qe=n.DEPTH_STENCIL,oe.type!==Bc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),oe.type=Bc,at=s.convert(oe.type))),xe&&(Ut?t.texStorage2D(n.TEXTURE_2D,1,Qe,Ue.width,Ue.height):t.texImage2D(n.TEXTURE_2D,0,Qe,Ue.width,Ue.height,0,ht,at,null));else if(oe.isDataTexture)if(xt.length>0&&st){Ut&&xe&&t.texStorage2D(n.TEXTURE_2D,et,Qe,xt[0].width,xt[0].height);for(let Ne=0,rt=xt.length;Ne<rt;Ne++)ot=xt[Ne],Ut?t.texSubImage2D(n.TEXTURE_2D,Ne,0,0,ot.width,ot.height,ht,at,ot.data):t.texImage2D(n.TEXTURE_2D,Ne,Qe,ot.width,ot.height,0,ht,at,ot.data);oe.generateMipmaps=!1}else Ut?(xe&&t.texStorage2D(n.TEXTURE_2D,et,Qe,Ue.width,Ue.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ue.width,Ue.height,ht,at,Ue.data)):t.texImage2D(n.TEXTURE_2D,0,Qe,Ue.width,Ue.height,0,ht,at,Ue.data);else if(oe.isCompressedTexture)if(oe.isCompressedArrayTexture){Ut&&xe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,et,Qe,xt[0].width,xt[0].height,Ue.depth);for(let Ne=0,rt=xt.length;Ne<rt;Ne++)ot=xt[Ne],oe.format!==Qs?ht!==null?Ut?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ne,0,0,0,ot.width,ot.height,Ue.depth,ht,ot.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Ne,Qe,ot.width,ot.height,Ue.depth,0,ot.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ut?t.texSubImage3D(n.TEXTURE_2D_ARRAY,Ne,0,0,0,ot.width,ot.height,Ue.depth,ht,at,ot.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Ne,Qe,ot.width,ot.height,Ue.depth,0,ht,at,ot.data)}else{Ut&&xe&&t.texStorage2D(n.TEXTURE_2D,et,Qe,xt[0].width,xt[0].height);for(let Ne=0,rt=xt.length;Ne<rt;Ne++)ot=xt[Ne],oe.format!==Qs?ht!==null?Ut?t.compressedTexSubImage2D(n.TEXTURE_2D,Ne,0,0,ot.width,ot.height,ht,ot.data):t.compressedTexImage2D(n.TEXTURE_2D,Ne,Qe,ot.width,ot.height,0,ot.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ut?t.texSubImage2D(n.TEXTURE_2D,Ne,0,0,ot.width,ot.height,ht,at,ot.data):t.texImage2D(n.TEXTURE_2D,Ne,Qe,ot.width,ot.height,0,ht,at,ot.data)}else if(oe.isDataArrayTexture)Ut?(xe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,et,Qe,Ue.width,Ue.height,Ue.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ue.width,Ue.height,Ue.depth,ht,at,Ue.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,Qe,Ue.width,Ue.height,Ue.depth,0,ht,at,Ue.data);else if(oe.isData3DTexture)Ut?(xe&&t.texStorage3D(n.TEXTURE_3D,et,Qe,Ue.width,Ue.height,Ue.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ue.width,Ue.height,Ue.depth,ht,at,Ue.data)):t.texImage3D(n.TEXTURE_3D,0,Qe,Ue.width,Ue.height,Ue.depth,0,ht,at,Ue.data);else if(oe.isFramebufferTexture){if(xe)if(Ut)t.texStorage2D(n.TEXTURE_2D,et,Qe,Ue.width,Ue.height);else{let Ne=Ue.width,rt=Ue.height;for(let ct=0;ct<et;ct++)t.texImage2D(n.TEXTURE_2D,ct,Qe,Ne,rt,0,ht,at,null),Ne>>=1,rt>>=1}}else if(xt.length>0&&st){Ut&&xe&&t.texStorage2D(n.TEXTURE_2D,et,Qe,xt[0].width,xt[0].height);for(let Ne=0,rt=xt.length;Ne<rt;Ne++)ot=xt[Ne],Ut?t.texSubImage2D(n.TEXTURE_2D,Ne,0,0,ht,at,ot):t.texImage2D(n.TEXTURE_2D,Ne,Qe,ht,at,ot);oe.generateMipmaps=!1}else Ut?(xe&&t.texStorage2D(n.TEXTURE_2D,et,Qe,Ue.width,Ue.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,ht,at,Ue)):t.texImage2D(n.TEXTURE_2D,0,Qe,ht,at,Ue);A(oe,st)&&R(Fe),Ze.__version=He.version,oe.onUpdate&&oe.onUpdate(oe)}ue.__version=oe.version}function _e(ue,oe,ye){if(oe.image.length!==6)return;const Fe=he(ue,oe),ze=oe.source;t.bindTexture(n.TEXTURE_CUBE_MAP,ue.__webglTexture,n.TEXTURE0+ye);const He=r.get(ze);if(ze.version!==He.__version||Fe===!0){t.activeTexture(n.TEXTURE0+ye),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,oe.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,oe.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const Ze=oe.isCompressedTexture||oe.image[0].isCompressedTexture,Ke=oe.image[0]&&oe.image[0].isDataTexture,Ue=[];for(let Ne=0;Ne<6;Ne++)!Ze&&!Ke?Ue[Ne]=S(oe.image[Ne],!1,!0,u):Ue[Ne]=Ke?oe.image[Ne].image:oe.image[Ne],Ue[Ne]=Ye(oe,Ue[Ne]);const st=Ue[0],ht=T(st)||a,at=s.convert(oe.format,oe.colorSpace),Qe=s.convert(oe.type),ot=O(oe.internalFormat,at,Qe,oe.colorSpace),xt=a&&oe.isVideoTexture!==!0,Ut=He.__version===void 0||Fe===!0;let xe=I(oe,st,ht);pe(n.TEXTURE_CUBE_MAP,oe,ht);let et;if(Ze){xt&&Ut&&t.texStorage2D(n.TEXTURE_CUBE_MAP,xe,ot,st.width,st.height);for(let Ne=0;Ne<6;Ne++){et=Ue[Ne].mipmaps;for(let rt=0;rt<et.length;rt++){const ct=et[rt];oe.format!==Qs?at!==null?xt?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,rt,0,0,ct.width,ct.height,at,ct.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,rt,ot,ct.width,ct.height,0,ct.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):xt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,rt,0,0,ct.width,ct.height,at,Qe,ct.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,rt,ot,ct.width,ct.height,0,at,Qe,ct.data)}}}else{et=oe.mipmaps,xt&&Ut&&(et.length>0&&xe++,t.texStorage2D(n.TEXTURE_CUBE_MAP,xe,ot,Ue[0].width,Ue[0].height));for(let Ne=0;Ne<6;Ne++)if(Ke){xt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,0,0,Ue[Ne].width,Ue[Ne].height,at,Qe,Ue[Ne].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,ot,Ue[Ne].width,Ue[Ne].height,0,at,Qe,Ue[Ne].data);for(let rt=0;rt<et.length;rt++){const Vt=et[rt].image[Ne].image;xt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,rt+1,0,0,Vt.width,Vt.height,at,Qe,Vt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,rt+1,ot,Vt.width,Vt.height,0,at,Qe,Vt.data)}}else{xt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,0,0,at,Qe,Ue[Ne]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,ot,at,Qe,Ue[Ne]);for(let rt=0;rt<et.length;rt++){const ct=et[rt];xt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,rt+1,0,0,at,Qe,ct.image[Ne]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,rt+1,ot,at,Qe,ct.image[Ne])}}}A(oe,ht)&&R(n.TEXTURE_CUBE_MAP),He.__version=ze.version,oe.onUpdate&&oe.onUpdate(oe)}ue.__version=oe.version}function te(ue,oe,ye,Fe,ze){const He=s.convert(ye.format,ye.colorSpace),Ze=s.convert(ye.type),Ke=O(ye.internalFormat,He,Ze,ye.colorSpace);r.get(oe).__hasExternalTextures||(ze===n.TEXTURE_3D||ze===n.TEXTURE_2D_ARRAY?t.texImage3D(ze,0,Ke,oe.width,oe.height,oe.depth,0,He,Ze,null):t.texImage2D(ze,0,Ke,oe.width,oe.height,0,He,Ze,null)),t.bindFramebuffer(n.FRAMEBUFFER,ue),Le(oe)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Fe,ze,r.get(ye).__webglTexture,0,Re(oe)):(ze===n.TEXTURE_2D||ze>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ze<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Fe,ze,r.get(ye).__webglTexture,0),t.bindFramebuffer(n.FRAMEBUFFER,null)}function j(ue,oe,ye){if(n.bindRenderbuffer(n.RENDERBUFFER,ue),oe.depthBuffer&&!oe.stencilBuffer){let Fe=n.DEPTH_COMPONENT16;if(ye||Le(oe)){const ze=oe.depthTexture;ze&&ze.isDepthTexture&&(ze.type===Rl?Fe=n.DEPTH_COMPONENT32F:ze.type===ku&&(Fe=n.DEPTH_COMPONENT24));const He=Re(oe);Le(oe)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,He,Fe,oe.width,oe.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,He,Fe,oe.width,oe.height)}else n.renderbufferStorage(n.RENDERBUFFER,Fe,oe.width,oe.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,ue)}else if(oe.depthBuffer&&oe.stencilBuffer){const Fe=Re(oe);ye&&Le(oe)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Fe,n.DEPTH24_STENCIL8,oe.width,oe.height):Le(oe)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Fe,n.DEPTH24_STENCIL8,oe.width,oe.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,oe.width,oe.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,ue)}else{const Fe=oe.isWebGLMultipleRenderTargets===!0?oe.texture:[oe.texture];for(let ze=0;ze<Fe.length;ze++){const He=Fe[ze],Ze=s.convert(He.format,He.colorSpace),Ke=s.convert(He.type),Ue=O(He.internalFormat,Ze,Ke,He.colorSpace),st=Re(oe);ye&&Le(oe)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,st,Ue,oe.width,oe.height):Le(oe)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,st,Ue,oe.width,oe.height):n.renderbufferStorage(n.RENDERBUFFER,Ue,oe.width,oe.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ce(ue,oe){if(oe&&oe.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,ue),!(oe.depthTexture&&oe.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(oe.depthTexture).__webglTexture||oe.depthTexture.image.width!==oe.width||oe.depthTexture.image.height!==oe.height)&&(oe.depthTexture.image.width=oe.width,oe.depthTexture.image.height=oe.height,oe.depthTexture.needsUpdate=!0),F(oe.depthTexture,0);const Fe=r.get(oe.depthTexture).__webglTexture,ze=Re(oe);if(oe.depthTexture.format===Hc)Le(oe)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Fe,0,ze):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Fe,0);else if(oe.depthTexture.format===Ad)Le(oe)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Fe,0,ze):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Fe,0);else throw new Error("Unknown depthTexture format")}function fe(ue){const oe=r.get(ue),ye=ue.isWebGLCubeRenderTarget===!0;if(ue.depthTexture&&!oe.__autoAllocateDepthBuffer){if(ye)throw new Error("target.depthTexture not supported in Cube render targets");ce(oe.__webglFramebuffer,ue)}else if(ye){oe.__webglDepthbuffer=[];for(let Fe=0;Fe<6;Fe++)t.bindFramebuffer(n.FRAMEBUFFER,oe.__webglFramebuffer[Fe]),oe.__webglDepthbuffer[Fe]=n.createRenderbuffer(),j(oe.__webglDepthbuffer[Fe],ue,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,oe.__webglFramebuffer),oe.__webglDepthbuffer=n.createRenderbuffer(),j(oe.__webglDepthbuffer,ue,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function ie(ue,oe,ye){const Fe=r.get(ue);oe!==void 0&&te(Fe.__webglFramebuffer,ue,ue.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D),ye!==void 0&&fe(ue)}function se(ue){const oe=ue.texture,ye=r.get(ue),Fe=r.get(oe);ue.addEventListener("dispose",$),ue.isWebGLMultipleRenderTargets!==!0&&(Fe.__webglTexture===void 0&&(Fe.__webglTexture=n.createTexture()),Fe.__version=oe.version,o.memory.textures++);const ze=ue.isWebGLCubeRenderTarget===!0,He=ue.isWebGLMultipleRenderTargets===!0,Ze=T(ue)||a;if(ze){ye.__webglFramebuffer=[];for(let Ke=0;Ke<6;Ke++)ye.__webglFramebuffer[Ke]=n.createFramebuffer()}else{if(ye.__webglFramebuffer=n.createFramebuffer(),He)if(i.drawBuffers){const Ke=ue.texture;for(let Ue=0,st=Ke.length;Ue<st;Ue++){const ht=r.get(Ke[Ue]);ht.__webglTexture===void 0&&(ht.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&ue.samples>0&&Le(ue)===!1){const Ke=He?oe:[oe];ye.__webglMultisampledFramebuffer=n.createFramebuffer(),ye.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ye.__webglMultisampledFramebuffer);for(let Ue=0;Ue<Ke.length;Ue++){const st=Ke[Ue];ye.__webglColorRenderbuffer[Ue]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ye.__webglColorRenderbuffer[Ue]);const ht=s.convert(st.format,st.colorSpace),at=s.convert(st.type),Qe=O(st.internalFormat,ht,at,st.colorSpace,ue.isXRRenderTarget===!0),ot=Re(ue);n.renderbufferStorageMultisample(n.RENDERBUFFER,ot,Qe,ue.width,ue.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ue,n.RENDERBUFFER,ye.__webglColorRenderbuffer[Ue])}n.bindRenderbuffer(n.RENDERBUFFER,null),ue.depthBuffer&&(ye.__webglDepthRenderbuffer=n.createRenderbuffer(),j(ye.__webglDepthRenderbuffer,ue,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ze){t.bindTexture(n.TEXTURE_CUBE_MAP,Fe.__webglTexture),pe(n.TEXTURE_CUBE_MAP,oe,Ze);for(let Ke=0;Ke<6;Ke++)te(ye.__webglFramebuffer[Ke],ue,oe,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ke);A(oe,Ze)&&R(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(He){const Ke=ue.texture;for(let Ue=0,st=Ke.length;Ue<st;Ue++){const ht=Ke[Ue],at=r.get(ht);t.bindTexture(n.TEXTURE_2D,at.__webglTexture),pe(n.TEXTURE_2D,ht,Ze),te(ye.__webglFramebuffer,ue,ht,n.COLOR_ATTACHMENT0+Ue,n.TEXTURE_2D),A(ht,Ze)&&R(n.TEXTURE_2D)}t.unbindTexture()}else{let Ke=n.TEXTURE_2D;(ue.isWebGL3DRenderTarget||ue.isWebGLArrayRenderTarget)&&(a?Ke=ue.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ke,Fe.__webglTexture),pe(Ke,oe,Ze),te(ye.__webglFramebuffer,ue,oe,n.COLOR_ATTACHMENT0,Ke),A(oe,Ze)&&R(Ke),t.unbindTexture()}ue.depthBuffer&&fe(ue)}function Ae(ue){const oe=T(ue)||a,ye=ue.isWebGLMultipleRenderTargets===!0?ue.texture:[ue.texture];for(let Fe=0,ze=ye.length;Fe<ze;Fe++){const He=ye[Fe];if(A(He,oe)){const Ze=ue.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Ke=r.get(He).__webglTexture;t.bindTexture(Ze,Ke),R(Ze),t.unbindTexture()}}}function we(ue){if(a&&ue.samples>0&&Le(ue)===!1){const oe=ue.isWebGLMultipleRenderTargets?ue.texture:[ue.texture],ye=ue.width,Fe=ue.height;let ze=n.COLOR_BUFFER_BIT;const He=[],Ze=ue.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ke=r.get(ue),Ue=ue.isWebGLMultipleRenderTargets===!0;if(Ue)for(let st=0;st<oe.length;st++)t.bindFramebuffer(n.FRAMEBUFFER,Ke.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+st,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ke.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+st,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ke.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ke.__webglFramebuffer);for(let st=0;st<oe.length;st++){He.push(n.COLOR_ATTACHMENT0+st),ue.depthBuffer&&He.push(Ze);const ht=Ke.__ignoreDepthValues!==void 0?Ke.__ignoreDepthValues:!1;if(ht===!1&&(ue.depthBuffer&&(ze|=n.DEPTH_BUFFER_BIT),ue.stencilBuffer&&(ze|=n.STENCIL_BUFFER_BIT)),Ue&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ke.__webglColorRenderbuffer[st]),ht===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[Ze]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Ze])),Ue){const at=r.get(oe[st]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,at,0)}n.blitFramebuffer(0,0,ye,Fe,0,0,ye,Fe,ze,n.NEAREST),g&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,He)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ue)for(let st=0;st<oe.length;st++){t.bindFramebuffer(n.FRAMEBUFFER,Ke.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+st,n.RENDERBUFFER,Ke.__webglColorRenderbuffer[st]);const ht=r.get(oe[st]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ke.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+st,n.TEXTURE_2D,ht,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ke.__webglMultisampledFramebuffer)}}function Re(ue){return Math.min(d,ue.samples)}function Le(ue){const oe=r.get(ue);return a&&ue.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&oe.__useRenderToTexture!==!1}function be(ue){const oe=o.render.frame;y.get(ue)!==oe&&(y.set(ue,oe),ue.update())}function Ye(ue,oe){const ye=ue.colorSpace,Fe=ue.format,ze=ue.type;return ue.isCompressedTexture===!0||ue.format===jx||ye!==ja&&ye!==Gc&&(ye===an?a===!1?e.has("EXT_sRGB")===!0&&Fe===Qs?(ue.format=jx,ue.minFilter=br,ue.generateMipmaps=!1):oe=ZM.sRGBToLinear(oe):(Fe!==Qs||ze!==Il)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ye)),oe}this.allocateTextureUnit=q,this.resetTextureUnits=X,this.setTexture2D=F,this.setTexture2DArray=L,this.setTexture3D=z,this.setTextureCube=Y,this.rebindTextures=ie,this.setupRenderTarget=se,this.updateRenderTargetMipmap=Ae,this.updateMultisampleRenderTarget=we,this.setupDepthRenderbuffer=fe,this.setupFrameBufferTexture=te,this.useMultisampledRTT=Le}function BU(n,e,t){const r=t.isWebGL2;function i(s,o=Gc){let a;if(s===Il)return n.UNSIGNED_BYTE;if(s===$M)return n.UNSIGNED_SHORT_4_4_4_4;if(s===GM)return n.UNSIGNED_SHORT_5_5_5_1;if(s===oU)return n.BYTE;if(s===aU)return n.SHORT;if(s===M1)return n.UNSIGNED_SHORT;if(s===HM)return n.INT;if(s===ku)return n.UNSIGNED_INT;if(s===Rl)return n.FLOAT;if(s===Fp)return r?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===lU)return n.ALPHA;if(s===Qs)return n.RGBA;if(s===uU)return n.LUMINANCE;if(s===cU)return n.LUMINANCE_ALPHA;if(s===Hc)return n.DEPTH_COMPONENT;if(s===Ad)return n.DEPTH_STENCIL;if(s===jx)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===fU)return n.RED;if(s===VM)return n.RED_INTEGER;if(s===dU)return n.RG;if(s===jM)return n.RG_INTEGER;if(s===WM)return n.RGBA_INTEGER;if(s===wx||s===Sx||s===Ex||s===bx)if(o===an)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===wx)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Sx)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Ex)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===bx)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===wx)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Sx)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Ex)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===bx)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===aT||s===lT||s===uT||s===cT)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===aT)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===lT)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===uT)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===cT)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===hU)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===fT||s===dT)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===fT)return o===an?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===dT)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===hT||s===pT||s===mT||s===gT||s===yT||s===vT||s===_T||s===xT||s===wT||s===ST||s===ET||s===bT||s===TT||s===MT)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===hT)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===pT)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===mT)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===gT)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===yT)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===vT)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===_T)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===xT)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===wT)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===ST)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===ET)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===bT)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===TT)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===MT)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===Tx)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===Tx)return o===an?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===pU||s===AT||s===CT||s===RT)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===Tx)return a.COMPRESSED_RED_RGTC1_EXT;if(s===AT)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===CT)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===RT)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Bc?r?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:i}}class HU extends mi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class bp extends Bn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const fQ={type:"move"};class qS{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new bp,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new bp,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new de,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new de),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new bp,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new de,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new de),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const E of e.hand.values()){const _=t.getJointPose(E,r),m=this._getHandJoint(u,E);_!==null&&(m.matrix.fromArray(_.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=_.radius),m.visible=_!==null}const c=u.joints["index-finger-tip"],d=u.joints["thumb-tip"],h=c.position.distanceTo(d.position),g=.02,y=.005;u.inputState.pinching&&h>g+y?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&h<=g-y&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(fQ)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new bp;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class $U extends Fr{constructor(e,t,r,i,s,o,a,l,u,c){if(c=c!==void 0?c:Hc,c!==Hc&&c!==Ad)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===Hc&&(r=ku),r===void 0&&c===Ad&&(r=Bc),super(null,i,s,o,a,l,c,r,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:ei,this.minFilter=l!==void 0?l:ei,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class dQ extends ju{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,u=null,c=null,d=null,h=null,g=null,y=null;const E=t.getContextAttributes();let _=null,m=null;const v=[],S=[],T=new mi;T.layers.enable(1),T.viewport=new zn;const M=new mi;M.layers.enable(2),M.viewport=new zn;const A=[T,M],R=new HU;R.layers.enable(1),R.layers.enable(2);let O=null,I=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(L){let z=v[L];return z===void 0&&(z=new qS,v[L]=z),z.getTargetRaySpace()},this.getControllerGrip=function(L){let z=v[L];return z===void 0&&(z=new qS,v[L]=z),z.getGripSpace()},this.getHand=function(L){let z=v[L];return z===void 0&&(z=new qS,v[L]=z),z.getHandSpace()};function k(L){const z=S.indexOf(L.inputSource);if(z===-1)return;const Y=v[z];Y!==void 0&&(Y.update(L.inputSource,L.frame,u||o),Y.dispatchEvent({type:L.type,data:L.inputSource}))}function G(){i.removeEventListener("select",k),i.removeEventListener("selectstart",k),i.removeEventListener("selectend",k),i.removeEventListener("squeeze",k),i.removeEventListener("squeezestart",k),i.removeEventListener("squeezeend",k),i.removeEventListener("end",G),i.removeEventListener("inputsourceschange",$);for(let L=0;L<v.length;L++){const z=S[L];z!==null&&(S[L]=null,v[L].disconnect(z))}O=null,I=null,e.setRenderTarget(_),g=null,h=null,d=null,i=null,m=null,F.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(L){s=L,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(L){a=L,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(L){u=L},this.getBaseLayer=function(){return h!==null?h:g},this.getBinding=function(){return d},this.getFrame=function(){return y},this.getSession=function(){return i},this.setSession=async function(L){if(i=L,i!==null){if(_=e.getRenderTarget(),i.addEventListener("select",k),i.addEventListener("selectstart",k),i.addEventListener("selectend",k),i.addEventListener("squeeze",k),i.addEventListener("squeezestart",k),i.addEventListener("squeezeend",k),i.addEventListener("end",G),i.addEventListener("inputsourceschange",$),E.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const z={antialias:i.renderState.layers===void 0?E.antialias:!0,alpha:!0,depth:E.depth,stencil:E.stencil,framebufferScaleFactor:s};g=new XRWebGLLayer(i,t,z),i.updateRenderState({baseLayer:g}),m=new Wa(g.framebufferWidth,g.framebufferHeight,{format:Qs,type:Il,colorSpace:e.outputColorSpace,stencilBuffer:E.stencil})}else{let z=null,Y=null,B=null;E.depth&&(B=E.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,z=E.stencil?Ad:Hc,Y=E.stencil?Bc:ku);const J={colorFormat:t.RGBA8,depthFormat:B,scaleFactor:s};d=new XRWebGLBinding(i,t),h=d.createProjectionLayer(J),i.updateRenderState({layers:[h]}),m=new Wa(h.textureWidth,h.textureHeight,{format:Qs,type:Il,depthTexture:new $U(h.textureWidth,h.textureHeight,Y,void 0,void 0,void 0,void 0,void 0,void 0,z),stencilBuffer:E.stencil,colorSpace:e.outputColorSpace,samples:E.antialias?4:0});const le=e.properties.get(m);le.__ignoreDepthValues=h.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await i.requestReferenceSpace(a),F.setContext(i),F.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function $(L){for(let z=0;z<L.removed.length;z++){const Y=L.removed[z],B=S.indexOf(Y);B>=0&&(S[B]=null,v[B].disconnect(Y))}for(let z=0;z<L.added.length;z++){const Y=L.added[z];let B=S.indexOf(Y);if(B===-1){for(let le=0;le<v.length;le++)if(le>=S.length){S.push(Y),B=le;break}else if(S[le]===null){S[le]=Y,B=le;break}if(B===-1)break}const J=v[B];J&&J.connect(Y)}}const U=new de,ee=new de;function re(L,z,Y){U.setFromMatrixPosition(z.matrixWorld),ee.setFromMatrixPosition(Y.matrixWorld);const B=U.distanceTo(ee),J=z.projectionMatrix.elements,le=Y.projectionMatrix.elements,pe=J[14]/(J[10]-1),he=J[14]/(J[10]+1),Ee=(J[9]+1)/J[5],_e=(J[9]-1)/J[5],te=(J[8]-1)/J[0],j=(le[8]+1)/le[0],ce=pe*te,fe=pe*j,ie=B/(-te+j),se=ie*-te;z.matrixWorld.decompose(L.position,L.quaternion,L.scale),L.translateX(se),L.translateZ(ie),L.matrixWorld.compose(L.position,L.quaternion,L.scale),L.matrixWorldInverse.copy(L.matrixWorld).invert();const Ae=pe+ie,we=he+ie,Re=ce-se,Le=fe+(B-se),be=Ee*he/we*Ae,Ye=_e*he/we*Ae;L.projectionMatrix.makePerspective(Re,Le,be,Ye,Ae,we),L.projectionMatrixInverse.copy(L.projectionMatrix).invert()}function ne(L,z){z===null?L.matrixWorld.copy(L.matrix):L.matrixWorld.multiplyMatrices(z.matrixWorld,L.matrix),L.matrixWorldInverse.copy(L.matrixWorld).invert()}this.updateCamera=function(L){if(i===null)return;R.near=M.near=T.near=L.near,R.far=M.far=T.far=L.far,(O!==R.near||I!==R.far)&&(i.updateRenderState({depthNear:R.near,depthFar:R.far}),O=R.near,I=R.far);const z=L.parent,Y=R.cameras;ne(R,z);for(let B=0;B<Y.length;B++)ne(Y[B],z);Y.length===2?re(R,T,M):R.projectionMatrix.copy(T.projectionMatrix),X(L,R,z)};function X(L,z,Y){Y===null?L.matrix.copy(z.matrixWorld):(L.matrix.copy(Y.matrixWorld),L.matrix.invert(),L.matrix.multiply(z.matrixWorld)),L.matrix.decompose(L.position,L.quaternion,L.scale),L.updateMatrixWorld(!0);const B=L.children;for(let J=0,le=B.length;J<le;J++)B[J].updateMatrixWorld(!0);L.projectionMatrix.copy(z.projectionMatrix),L.projectionMatrixInverse.copy(z.projectionMatrixInverse),L.isPerspectiveCamera&&(L.fov=zp*2*Math.atan(1/L.projectionMatrix.elements[5]),L.zoom=1)}this.getCamera=function(){return R},this.getFoveation=function(){if(!(h===null&&g===null))return l},this.setFoveation=function(L){l=L,h!==null&&(h.fixedFoveation=L),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=L)};let q=null;function K(L,z){if(c=z.getViewerPose(u||o),y=z,c!==null){const Y=c.views;g!==null&&(e.setRenderTargetFramebuffer(m,g.framebuffer),e.setRenderTarget(m));let B=!1;Y.length!==R.cameras.length&&(R.cameras.length=0,B=!0);for(let J=0;J<Y.length;J++){const le=Y[J];let pe=null;if(g!==null)pe=g.getViewport(le);else{const Ee=d.getViewSubImage(h,le);pe=Ee.viewport,J===0&&(e.setRenderTargetTextures(m,Ee.colorTexture,h.ignoreDepthValues?void 0:Ee.depthStencilTexture),e.setRenderTarget(m))}let he=A[J];he===void 0&&(he=new mi,he.layers.enable(J),he.viewport=new zn,A[J]=he),he.matrix.fromArray(le.transform.matrix),he.matrix.decompose(he.position,he.quaternion,he.scale),he.projectionMatrix.fromArray(le.projectionMatrix),he.projectionMatrixInverse.copy(he.projectionMatrix).invert(),he.viewport.set(pe.x,pe.y,pe.width,pe.height),J===0&&(R.matrix.copy(he.matrix),R.matrix.decompose(R.position,R.quaternion,R.scale)),B===!0&&R.cameras.push(he)}}for(let Y=0;Y<v.length;Y++){const B=S[Y],J=v[Y];B!==null&&J!==void 0&&J.update(B,z,u||o)}q&&q(L,z),z.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:z}),y=null}const F=new DU;F.setAnimationLoop(K),this.setAnimationLoop=function(L){q=L},this.dispose=function(){}}}function hQ(n,e){function t(_,m){_.matrixAutoUpdate===!0&&_.updateMatrix(),m.value.copy(_.matrix)}function r(_,m){m.color.getRGB(_.fogColor.value,LU(n)),m.isFog?(_.fogNear.value=m.near,_.fogFar.value=m.far):m.isFogExp2&&(_.fogDensity.value=m.density)}function i(_,m,v,S,T){m.isMeshBasicMaterial||m.isMeshLambertMaterial?s(_,m):m.isMeshToonMaterial?(s(_,m),d(_,m)):m.isMeshPhongMaterial?(s(_,m),c(_,m)):m.isMeshStandardMaterial?(s(_,m),h(_,m),m.isMeshPhysicalMaterial&&g(_,m,T)):m.isMeshMatcapMaterial?(s(_,m),y(_,m)):m.isMeshDepthMaterial?s(_,m):m.isMeshDistanceMaterial?(s(_,m),E(_,m)):m.isMeshNormalMaterial?s(_,m):m.isLineBasicMaterial?(o(_,m),m.isLineDashedMaterial&&a(_,m)):m.isPointsMaterial?l(_,m,v,S):m.isSpriteMaterial?u(_,m):m.isShadowMaterial?(_.color.value.copy(m.color),_.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function s(_,m){_.opacity.value=m.opacity,m.color&&_.diffuse.value.copy(m.color),m.emissive&&_.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(_.map.value=m.map,t(m.map,_.mapTransform)),m.alphaMap&&(_.alphaMap.value=m.alphaMap,t(m.alphaMap,_.alphaMapTransform)),m.bumpMap&&(_.bumpMap.value=m.bumpMap,t(m.bumpMap,_.bumpMapTransform),_.bumpScale.value=m.bumpScale,m.side===ps&&(_.bumpScale.value*=-1)),m.normalMap&&(_.normalMap.value=m.normalMap,t(m.normalMap,_.normalMapTransform),_.normalScale.value.copy(m.normalScale),m.side===ps&&_.normalScale.value.negate()),m.displacementMap&&(_.displacementMap.value=m.displacementMap,t(m.displacementMap,_.displacementMapTransform),_.displacementScale.value=m.displacementScale,_.displacementBias.value=m.displacementBias),m.emissiveMap&&(_.emissiveMap.value=m.emissiveMap,t(m.emissiveMap,_.emissiveMapTransform)),m.specularMap&&(_.specularMap.value=m.specularMap,t(m.specularMap,_.specularMapTransform)),m.alphaTest>0&&(_.alphaTest.value=m.alphaTest);const v=e.get(m).envMap;if(v&&(_.envMap.value=v,_.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=m.reflectivity,_.ior.value=m.ior,_.refractionRatio.value=m.refractionRatio),m.lightMap){_.lightMap.value=m.lightMap;const S=n.useLegacyLights===!0?Math.PI:1;_.lightMapIntensity.value=m.lightMapIntensity*S,t(m.lightMap,_.lightMapTransform)}m.aoMap&&(_.aoMap.value=m.aoMap,_.aoMapIntensity.value=m.aoMapIntensity,t(m.aoMap,_.aoMapTransform))}function o(_,m){_.diffuse.value.copy(m.color),_.opacity.value=m.opacity,m.map&&(_.map.value=m.map,t(m.map,_.mapTransform))}function a(_,m){_.dashSize.value=m.dashSize,_.totalSize.value=m.dashSize+m.gapSize,_.scale.value=m.scale}function l(_,m,v,S){_.diffuse.value.copy(m.color),_.opacity.value=m.opacity,_.size.value=m.size*v,_.scale.value=S*.5,m.map&&(_.map.value=m.map,t(m.map,_.uvTransform)),m.alphaMap&&(_.alphaMap.value=m.alphaMap,t(m.alphaMap,_.alphaMapTransform)),m.alphaTest>0&&(_.alphaTest.value=m.alphaTest)}function u(_,m){_.diffuse.value.copy(m.color),_.opacity.value=m.opacity,_.rotation.value=m.rotation,m.map&&(_.map.value=m.map,t(m.map,_.mapTransform)),m.alphaMap&&(_.alphaMap.value=m.alphaMap,t(m.alphaMap,_.alphaMapTransform)),m.alphaTest>0&&(_.alphaTest.value=m.alphaTest)}function c(_,m){_.specular.value.copy(m.specular),_.shininess.value=Math.max(m.shininess,1e-4)}function d(_,m){m.gradientMap&&(_.gradientMap.value=m.gradientMap)}function h(_,m){_.metalness.value=m.metalness,m.metalnessMap&&(_.metalnessMap.value=m.metalnessMap,t(m.metalnessMap,_.metalnessMapTransform)),_.roughness.value=m.roughness,m.roughnessMap&&(_.roughnessMap.value=m.roughnessMap,t(m.roughnessMap,_.roughnessMapTransform)),e.get(m).envMap&&(_.envMapIntensity.value=m.envMapIntensity)}function g(_,m,v){_.ior.value=m.ior,m.sheen>0&&(_.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),_.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(_.sheenColorMap.value=m.sheenColorMap,t(m.sheenColorMap,_.sheenColorMapTransform)),m.sheenRoughnessMap&&(_.sheenRoughnessMap.value=m.sheenRoughnessMap,t(m.sheenRoughnessMap,_.sheenRoughnessMapTransform))),m.clearcoat>0&&(_.clearcoat.value=m.clearcoat,_.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(_.clearcoatMap.value=m.clearcoatMap,t(m.clearcoatMap,_.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,t(m.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(_.clearcoatNormalMap.value=m.clearcoatNormalMap,t(m.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===ps&&_.clearcoatNormalScale.value.negate())),m.iridescence>0&&(_.iridescence.value=m.iridescence,_.iridescenceIOR.value=m.iridescenceIOR,_.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(_.iridescenceMap.value=m.iridescenceMap,t(m.iridescenceMap,_.iridescenceMapTransform)),m.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=m.iridescenceThicknessMap,t(m.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),m.transmission>0&&(_.transmission.value=m.transmission,_.transmissionSamplerMap.value=v.texture,_.transmissionSamplerSize.value.set(v.width,v.height),m.transmissionMap&&(_.transmissionMap.value=m.transmissionMap,t(m.transmissionMap,_.transmissionMapTransform)),_.thickness.value=m.thickness,m.thicknessMap&&(_.thicknessMap.value=m.thicknessMap,t(m.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=m.attenuationDistance,_.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(_.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(_.anisotropyMap.value=m.anisotropyMap,t(m.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=m.specularIntensity,_.specularColor.value.copy(m.specularColor),m.specularColorMap&&(_.specularColorMap.value=m.specularColorMap,t(m.specularColorMap,_.specularColorMapTransform)),m.specularIntensityMap&&(_.specularIntensityMap.value=m.specularIntensityMap,t(m.specularIntensityMap,_.specularIntensityMapTransform))}function y(_,m){m.matcap&&(_.matcap.value=m.matcap)}function E(_,m){const v=e.get(m).light;_.referencePosition.value.setFromMatrixPosition(v.matrixWorld),_.nearDistance.value=v.shadow.camera.near,_.farDistance.value=v.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function pQ(n,e,t,r){let i={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(v,S){const T=S.program;r.uniformBlockBinding(v,T)}function u(v,S){let T=i[v.id];T===void 0&&(y(v),T=c(v),i[v.id]=T,v.addEventListener("dispose",_));const M=S.program;r.updateUBOMapping(v,M);const A=e.render.frame;s[v.id]!==A&&(h(v),s[v.id]=A)}function c(v){const S=d();v.__bindingPointIndex=S;const T=n.createBuffer(),M=v.__size,A=v.usage;return n.bindBuffer(n.UNIFORM_BUFFER,T),n.bufferData(n.UNIFORM_BUFFER,M,A),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,S,T),T}function d(){for(let v=0;v<a;v++)if(o.indexOf(v)===-1)return o.push(v),v;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(v){const S=i[v.id],T=v.uniforms,M=v.__cache;n.bindBuffer(n.UNIFORM_BUFFER,S);for(let A=0,R=T.length;A<R;A++){const O=T[A];if(g(O,A,M)===!0){const I=O.__offset,k=Array.isArray(O.value)?O.value:[O.value];let G=0;for(let $=0;$<k.length;$++){const U=k[$],ee=E(U);typeof U=="number"?(O.__data[0]=U,n.bufferSubData(n.UNIFORM_BUFFER,I+G,O.__data)):U.isMatrix3?(O.__data[0]=U.elements[0],O.__data[1]=U.elements[1],O.__data[2]=U.elements[2],O.__data[3]=U.elements[0],O.__data[4]=U.elements[3],O.__data[5]=U.elements[4],O.__data[6]=U.elements[5],O.__data[7]=U.elements[0],O.__data[8]=U.elements[6],O.__data[9]=U.elements[7],O.__data[10]=U.elements[8],O.__data[11]=U.elements[0]):(U.toArray(O.__data,G),G+=ee.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,I,O.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function g(v,S,T){const M=v.value;if(T[S]===void 0){if(typeof M=="number")T[S]=M;else{const A=Array.isArray(M)?M:[M],R=[];for(let O=0;O<A.length;O++)R.push(A[O].clone());T[S]=R}return!0}else if(typeof M=="number"){if(T[S]!==M)return T[S]=M,!0}else{const A=Array.isArray(T[S])?T[S]:[T[S]],R=Array.isArray(M)?M:[M];for(let O=0;O<A.length;O++){const I=A[O];if(I.equals(R[O])===!1)return I.copy(R[O]),!0}}return!1}function y(v){const S=v.uniforms;let T=0;const M=16;let A=0;for(let R=0,O=S.length;R<O;R++){const I=S[R],k={boundary:0,storage:0},G=Array.isArray(I.value)?I.value:[I.value];for(let $=0,U=G.length;$<U;$++){const ee=G[$],re=E(ee);k.boundary+=re.boundary,k.storage+=re.storage}if(I.__data=new Float32Array(k.storage/Float32Array.BYTES_PER_ELEMENT),I.__offset=T,R>0){A=T%M;const $=M-A;A!==0&&$-k.boundary<0&&(T+=M-A,I.__offset=T)}T+=k.storage}return A=T%M,A>0&&(T+=M-A),v.__size=T,v.__cache={},this}function E(v){const S={boundary:0,storage:0};return typeof v=="number"?(S.boundary=4,S.storage=4):v.isVector2?(S.boundary=8,S.storage=8):v.isVector3||v.isColor?(S.boundary=16,S.storage=12):v.isVector4?(S.boundary=16,S.storage=16):v.isMatrix3?(S.boundary=48,S.storage=48):v.isMatrix4?(S.boundary=64,S.storage=64):v.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",v),S}function _(v){const S=v.target;S.removeEventListener("dispose",_);const T=o.indexOf(S.__bindingPointIndex);o.splice(T,1),n.deleteBuffer(i[S.id]),delete i[S.id],delete s[S.id]}function m(){for(const v in i)n.deleteBuffer(i[v]);o=[],i={},s={}}return{bind:l,update:u,dispose:m}}function mQ(){const n=by("canvas");return n.style.display="block",n}class iA{constructor(e={}){const{canvas:t=mQ(),context:r=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let h;r!==null?h=r.getContextAttributes().alpha:h=o;const g=new Uint32Array(4),y=new Int32Array(4);let E=null,_=null;const m=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=an,this.useLegacyLights=!0,this.toneMapping=Ga,this.toneMappingExposure=1;const S=this;let T=!1,M=0,A=0,R=null,O=-1,I=null;const k=new zn,G=new zn;let $=null;const U=new gt(0);let ee=0,re=t.width,ne=t.height,X=1,q=null,K=null;const F=new zn(0,0,re,ne),L=new zn(0,0,re,ne);let z=!1;const Y=new av;let B=!1,J=!1,le=null;const pe=new Qt,he=new Je,Ee=new de,_e={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function te(){return R===null?X:1}let j=r;function ce(me,De){for(let je=0;je<me.length;je++){const Pe=me[je],We=t.getContext(Pe,De);if(We!==null)return We}return null}try{const me={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${E1}`),t.addEventListener("webglcontextlost",et,!1),t.addEventListener("webglcontextrestored",Ne,!1),t.addEventListener("webglcontextcreationerror",rt,!1),j===null){const De=["webgl2","webgl","experimental-webgl"];if(S.isWebGL1Renderer===!0&&De.shift(),j=ce(De,me),j===null)throw ce(De)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&j instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),j.getShaderPrecisionFormat===void 0&&(j.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(me){throw console.error("THREE.WebGLRenderer: "+me.message),me}let fe,ie,se,Ae,we,Re,Le,be,Ye,ue,oe,ye,Fe,ze,He,Ze,Ke,Ue,st,ht,at,Qe,ot,xt;function Ut(){fe=new PJ(j),ie=new bJ(j,fe,e),fe.init(ie),Qe=new BU(j,fe,ie),se=new uQ(j,fe,ie),Ae=new NJ(j),we=new JZ,Re=new cQ(j,fe,se,we,ie,Qe,Ae),Le=new MJ(S),be=new RJ(S),Ye=new GX(j,ie),ot=new SJ(j,fe,Ye,ie),ue=new IJ(j,Ye,Ae,ot),oe=new UJ(j,ue,Ye,Ae),st=new kJ(j,ie,Re),Ze=new TJ(we),ye=new KZ(S,Le,be,fe,ie,ot,Ze),Fe=new hQ(S,we),ze=new QZ,He=new sQ(fe,ie),Ue=new wJ(S,Le,be,se,oe,h,l),Ke=new lQ(S,oe,ie),xt=new pQ(j,Ae,ie,se),ht=new EJ(j,fe,Ae,ie),at=new LJ(j,fe,Ae,ie),Ae.programs=ye.programs,S.capabilities=ie,S.extensions=fe,S.properties=we,S.renderLists=ze,S.shadowMap=Ke,S.state=se,S.info=Ae}Ut();const xe=new dQ(S,j);this.xr=xe,this.getContext=function(){return j},this.getContextAttributes=function(){return j.getContextAttributes()},this.forceContextLoss=function(){const me=fe.get("WEBGL_lose_context");me&&me.loseContext()},this.forceContextRestore=function(){const me=fe.get("WEBGL_lose_context");me&&me.restoreContext()},this.getPixelRatio=function(){return X},this.setPixelRatio=function(me){me!==void 0&&(X=me,this.setSize(re,ne,!1))},this.getSize=function(me){return me.set(re,ne)},this.setSize=function(me,De,je=!0){if(xe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}re=me,ne=De,t.width=Math.floor(me*X),t.height=Math.floor(De*X),je===!0&&(t.style.width=me+"px",t.style.height=De+"px"),this.setViewport(0,0,me,De)},this.getDrawingBufferSize=function(me){return me.set(re*X,ne*X).floor()},this.setDrawingBufferSize=function(me,De,je){re=me,ne=De,X=je,t.width=Math.floor(me*je),t.height=Math.floor(De*je),this.setViewport(0,0,me,De)},this.getCurrentViewport=function(me){return me.copy(k)},this.getViewport=function(me){return me.copy(F)},this.setViewport=function(me,De,je,Pe){me.isVector4?F.set(me.x,me.y,me.z,me.w):F.set(me,De,je,Pe),se.viewport(k.copy(F).multiplyScalar(X).floor())},this.getScissor=function(me){return me.copy(L)},this.setScissor=function(me,De,je,Pe){me.isVector4?L.set(me.x,me.y,me.z,me.w):L.set(me,De,je,Pe),se.scissor(G.copy(L).multiplyScalar(X).floor())},this.getScissorTest=function(){return z},this.setScissorTest=function(me){se.setScissorTest(z=me)},this.setOpaqueSort=function(me){q=me},this.setTransparentSort=function(me){K=me},this.getClearColor=function(me){return me.copy(Ue.getClearColor())},this.setClearColor=function(){Ue.setClearColor.apply(Ue,arguments)},this.getClearAlpha=function(){return Ue.getClearAlpha()},this.setClearAlpha=function(){Ue.setClearAlpha.apply(Ue,arguments)},this.clear=function(me=!0,De=!0,je=!0){let Pe=0;if(me){let We=!1;if(R!==null){const St=R.texture.format;We=St===WM||St===jM||St===VM}if(We){const St=R.texture.type,Lt=St===Il||St===ku||St===M1||St===Bc||St===$M||St===GM,Ot=Ue.getClearColor(),zt=Ue.getClearAlpha(),Jt=Ot.r,qe=Ot.g,Dt=Ot.b;Lt?(g[0]=Jt,g[1]=qe,g[2]=Dt,g[3]=zt,j.clearBufferuiv(j.COLOR,0,g)):(y[0]=Jt,y[1]=qe,y[2]=Dt,y[3]=zt,j.clearBufferiv(j.COLOR,0,y))}else Pe|=j.COLOR_BUFFER_BIT}De&&(Pe|=j.DEPTH_BUFFER_BIT),je&&(Pe|=j.STENCIL_BUFFER_BIT),j.clear(Pe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",et,!1),t.removeEventListener("webglcontextrestored",Ne,!1),t.removeEventListener("webglcontextcreationerror",rt,!1),ze.dispose(),He.dispose(),we.dispose(),Le.dispose(),be.dispose(),oe.dispose(),ot.dispose(),xt.dispose(),ye.dispose(),xe.dispose(),xe.removeEventListener("sessionstart",Sn),xe.removeEventListener("sessionend",yn),le&&(le.dispose(),le=null),Xt.stop()};function et(me){me.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),T=!0}function Ne(){console.log("THREE.WebGLRenderer: Context Restored."),T=!1;const me=Ae.autoReset,De=Ke.enabled,je=Ke.autoUpdate,Pe=Ke.needsUpdate,We=Ke.type;Ut(),Ae.autoReset=me,Ke.enabled=De,Ke.autoUpdate=je,Ke.needsUpdate=Pe,Ke.type=We}function rt(me){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",me.statusMessage)}function ct(me){const De=me.target;De.removeEventListener("dispose",ct),Vt(De)}function Vt(me){rn(me),we.remove(me)}function rn(me){const De=we.get(me).programs;De!==void 0&&(De.forEach(function(je){ye.releaseProgram(je)}),me.isShaderMaterial&&ye.releaseShaderCache(me))}this.renderBufferDirect=function(me,De,je,Pe,We,St){De===null&&(De=_e);const Lt=We.isMesh&&We.matrixWorld.determinant()<0,Ot=qr(me,De,je,Pe,We);se.setMaterial(Pe,Lt);let zt=je.index,Jt=1;Pe.wireframe===!0&&(zt=ue.getWireframeAttribute(je),Jt=2);const qe=je.drawRange,Dt=je.attributes.position;let kn=qe.start*Jt,En=(qe.start+qe.count)*Jt;St!==null&&(kn=Math.max(kn,St.start*Jt),En=Math.min(En,(St.start+St.count)*Jt)),zt!==null?(kn=Math.max(kn,0),En=Math.min(En,zt.count)):Dt!=null&&(kn=Math.max(kn,0),En=Math.min(En,Dt.count));const Tr=En-kn;if(Tr<0||Tr===1/0)return;ot.setup(We,Pe,Ot,je,zt);let Ci,An=ht;if(zt!==null&&(Ci=Ye.get(zt),An=at,An.setIndex(Ci)),We.isMesh)Pe.wireframe===!0?(se.setLineWidth(Pe.wireframeLinewidth*te()),An.setMode(j.LINES)):An.setMode(j.TRIANGLES);else if(We.isLine){let Ft=Pe.linewidth;Ft===void 0&&(Ft=1),se.setLineWidth(Ft*te()),We.isLineSegments?An.setMode(j.LINES):We.isLineLoop?An.setMode(j.LINE_LOOP):An.setMode(j.LINE_STRIP)}else We.isPoints?An.setMode(j.POINTS):We.isSprite&&An.setMode(j.TRIANGLES);if(We.isInstancedMesh)An.renderInstances(kn,Tr,We.count);else if(je.isInstancedBufferGeometry){const Ft=je._maxInstanceCount!==void 0?je._maxInstanceCount:1/0,Zt=Math.min(je.instanceCount,Ft);An.renderInstances(kn,Tr,Zt)}else An.render(kn,Tr)},this.compile=function(me,De){function je(Pe,We,St){Pe.transparent===!0&&Pe.side===Lr&&Pe.forceSinglePass===!1?(Pe.side=ps,Pe.needsUpdate=!0,Dn(Pe,We,St),Pe.side=Dl,Pe.needsUpdate=!0,Dn(Pe,We,St),Pe.side=Lr):Dn(Pe,We,St)}_=He.get(me),_.init(),v.push(_),me.traverseVisible(function(Pe){Pe.isLight&&Pe.layers.test(De.layers)&&(_.pushLight(Pe),Pe.castShadow&&_.pushShadow(Pe))}),_.setupLights(S.useLegacyLights),me.traverse(function(Pe){const We=Pe.material;if(We)if(Array.isArray(We))for(let St=0;St<We.length;St++){const Lt=We[St];je(Lt,me,Pe)}else je(We,me,Pe)}),v.pop(),_=null};let xn=null;function hn(me){xn&&xn(me)}function Sn(){Xt.stop()}function yn(){Xt.start()}const Xt=new DU;Xt.setAnimationLoop(hn),typeof self<"u"&&Xt.setContext(self),this.setAnimationLoop=function(me){xn=me,xe.setAnimationLoop(me),me===null?Xt.stop():Xt.start()},xe.addEventListener("sessionstart",Sn),xe.addEventListener("sessionend",yn),this.render=function(me,De){if(De!==void 0&&De.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(T===!0)return;me.matrixWorldAutoUpdate===!0&&me.updateMatrixWorld(),De.parent===null&&De.matrixWorldAutoUpdate===!0&&De.updateMatrixWorld(),xe.enabled===!0&&xe.isPresenting===!0&&(xe.cameraAutoUpdate===!0&&xe.updateCamera(De),De=xe.getCamera()),me.isScene===!0&&me.onBeforeRender(S,me,De,R),_=He.get(me,v.length),_.init(),v.push(_),pe.multiplyMatrices(De.projectionMatrix,De.matrixWorldInverse),Y.setFromProjectionMatrix(pe),J=this.localClippingEnabled,B=Ze.init(this.clippingPlanes,J),E=ze.get(me,m.length),E.init(),m.push(E),ti(me,De,0,S.sortObjects),E.finish(),S.sortObjects===!0&&E.sort(q,K),this.info.render.frame++,B===!0&&Ze.beginShadows();const je=_.state.shadowsArray;if(Ke.render(je,me,De),B===!0&&Ze.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ue.render(E,me),_.setupLights(S.useLegacyLights),De.isArrayCamera){const Pe=De.cameras;for(let We=0,St=Pe.length;We<St;We++){const Lt=Pe[We];vr(E,me,Lt,Lt.viewport)}}else vr(E,me,De);R!==null&&(Re.updateMultisampleRenderTarget(R),Re.updateRenderTargetMipmap(R)),me.isScene===!0&&me.onAfterRender(S,me,De),ot.resetDefaultState(),O=-1,I=null,v.pop(),v.length>0?_=v[v.length-1]:_=null,m.pop(),m.length>0?E=m[m.length-1]:E=null};function ti(me,De,je,Pe){if(me.visible===!1)return;if(me.layers.test(De.layers)){if(me.isGroup)je=me.renderOrder;else if(me.isLOD)me.autoUpdate===!0&&me.update(De);else if(me.isLight)_.pushLight(me),me.castShadow&&_.pushShadow(me);else if(me.isSprite){if(!me.frustumCulled||Y.intersectsSprite(me)){Pe&&Ee.setFromMatrixPosition(me.matrixWorld).applyMatrix4(pe);const Lt=oe.update(me),Ot=me.material;Ot.visible&&E.push(me,Lt,Ot,je,Ee.z,null)}}else if((me.isMesh||me.isLine||me.isPoints)&&(!me.frustumCulled||Y.intersectsObject(me))){const Lt=oe.update(me),Ot=me.material;if(Pe&&(me.boundingSphere!==void 0?(me.boundingSphere===null&&me.computeBoundingSphere(),Ee.copy(me.boundingSphere.center)):(Lt.boundingSphere===null&&Lt.computeBoundingSphere(),Ee.copy(Lt.boundingSphere.center)),Ee.applyMatrix4(me.matrixWorld).applyMatrix4(pe)),Array.isArray(Ot)){const zt=Lt.groups;for(let Jt=0,qe=zt.length;Jt<qe;Jt++){const Dt=zt[Jt],kn=Ot[Dt.materialIndex];kn&&kn.visible&&E.push(me,Lt,kn,je,Ee.z,Dt)}}else Ot.visible&&E.push(me,Lt,Ot,je,Ee.z,null)}}const St=me.children;for(let Lt=0,Ot=St.length;Lt<Ot;Lt++)ti(St[Lt],De,je,Pe)}function vr(me,De,je,Pe){const We=me.opaque,St=me.transmissive,Lt=me.transparent;_.setupLightsView(je),B===!0&&Ze.setGlobalState(S.clippingPlanes,je),St.length>0&&Mn(We,St,De,je),Pe&&se.viewport(k.copy(Pe)),We.length>0&&On(We,De,je),St.length>0&&On(St,De,je),Lt.length>0&&On(Lt,De,je),se.buffers.depth.setTest(!0),se.buffers.depth.setMask(!0),se.buffers.color.setMask(!0),se.setPolygonOffset(!1)}function Mn(me,De,je,Pe){const We=ie.isWebGL2;le===null&&(le=new Wa(1,1,{generateMipmaps:!0,type:fe.has("EXT_color_buffer_half_float")?Fp:Il,minFilter:Xc,samples:We?4:0})),S.getDrawingBufferSize(he),We?le.setSize(he.x,he.y):le.setSize(Wx(he.x),Wx(he.y));const St=S.getRenderTarget();S.setRenderTarget(le),S.getClearColor(U),ee=S.getClearAlpha(),ee<1&&S.setClearColor(16777215,.5),S.clear();const Lt=S.toneMapping;S.toneMapping=Ga,On(me,je,Pe),Re.updateMultisampleRenderTarget(le),Re.updateRenderTargetMipmap(le);let Ot=!1;for(let zt=0,Jt=De.length;zt<Jt;zt++){const qe=De[zt],Dt=qe.object,kn=qe.geometry,En=qe.material,Tr=qe.group;if(En.side===Lr&&Dt.layers.test(Pe.layers)){const Ci=En.side;En.side=ps,En.needsUpdate=!0,zr(Dt,je,Pe,kn,En,Tr),En.side=Ci,En.needsUpdate=!0,Ot=!0}}Ot===!0&&(Re.updateMultisampleRenderTarget(le),Re.updateRenderTargetMipmap(le)),S.setRenderTarget(St),S.setClearColor(U,ee),S.toneMapping=Lt}function On(me,De,je){const Pe=De.isScene===!0?De.overrideMaterial:null;for(let We=0,St=me.length;We<St;We++){const Lt=me[We],Ot=Lt.object,zt=Lt.geometry,Jt=Pe===null?Lt.material:Pe,qe=Lt.group;Ot.layers.test(je.layers)&&zr(Ot,De,je,zt,Jt,qe)}}function zr(me,De,je,Pe,We,St){me.onBeforeRender(S,De,je,Pe,We,St),me.modelViewMatrix.multiplyMatrices(je.matrixWorldInverse,me.matrixWorld),me.normalMatrix.getNormalMatrix(me.modelViewMatrix),We.onBeforeRender(S,De,je,Pe,me,St),We.transparent===!0&&We.side===Lr&&We.forceSinglePass===!1?(We.side=ps,We.needsUpdate=!0,S.renderBufferDirect(je,De,Pe,We,me,St),We.side=Dl,We.needsUpdate=!0,S.renderBufferDirect(je,De,Pe,We,me,St),We.side=Lr):S.renderBufferDirect(je,De,Pe,We,me,St),me.onAfterRender(S,De,je,Pe,We,St)}function Dn(me,De,je){De.isScene!==!0&&(De=_e);const Pe=we.get(me),We=_.state.lights,St=_.state.shadowsArray,Lt=We.state.version,Ot=ye.getParameters(me,We.state,St,De,je),zt=ye.getProgramCacheKey(Ot);let Jt=Pe.programs;Pe.environment=me.isMeshStandardMaterial?De.environment:null,Pe.fog=De.fog,Pe.envMap=(me.isMeshStandardMaterial?be:Le).get(me.envMap||Pe.environment),Jt===void 0&&(me.addEventListener("dispose",ct),Jt=new Map,Pe.programs=Jt);let qe=Jt.get(zt);if(qe!==void 0){if(Pe.currentProgram===qe&&Pe.lightsStateVersion===Lt)return nr(me,Ot),qe}else Ot.uniforms=ye.getUniforms(me),me.onBuild(je,Ot,S),me.onBeforeCompile(Ot,S),qe=ye.acquireProgram(Ot,zt),Jt.set(zt,qe),Pe.uniforms=Ot.uniforms;const Dt=Pe.uniforms;(!me.isShaderMaterial&&!me.isRawShaderMaterial||me.clipping===!0)&&(Dt.clippingPlanes=Ze.uniform),nr(me,Ot),Pe.needsLights=Hi(me),Pe.lightsStateVersion=Lt,Pe.needsLights&&(Dt.ambientLightColor.value=We.state.ambient,Dt.lightProbe.value=We.state.probe,Dt.directionalLights.value=We.state.directional,Dt.directionalLightShadows.value=We.state.directionalShadow,Dt.spotLights.value=We.state.spot,Dt.spotLightShadows.value=We.state.spotShadow,Dt.rectAreaLights.value=We.state.rectArea,Dt.ltc_1.value=We.state.rectAreaLTC1,Dt.ltc_2.value=We.state.rectAreaLTC2,Dt.pointLights.value=We.state.point,Dt.pointLightShadows.value=We.state.pointShadow,Dt.hemisphereLights.value=We.state.hemi,Dt.directionalShadowMap.value=We.state.directionalShadowMap,Dt.directionalShadowMatrix.value=We.state.directionalShadowMatrix,Dt.spotShadowMap.value=We.state.spotShadowMap,Dt.spotLightMatrix.value=We.state.spotLightMatrix,Dt.spotLightMap.value=We.state.spotLightMap,Dt.pointShadowMap.value=We.state.pointShadowMap,Dt.pointShadowMatrix.value=We.state.pointShadowMatrix);const kn=qe.getUniforms(),En=Cx.seqWithValue(kn.seq,Dt);return Pe.currentProgram=qe,Pe.uniformsList=En,qe}function nr(me,De){const je=we.get(me);je.outputColorSpace=De.outputColorSpace,je.instancing=De.instancing,je.skinning=De.skinning,je.morphTargets=De.morphTargets,je.morphNormals=De.morphNormals,je.morphColors=De.morphColors,je.morphTargetsCount=De.morphTargetsCount,je.numClippingPlanes=De.numClippingPlanes,je.numIntersection=De.numClipIntersection,je.vertexAlphas=De.vertexAlphas,je.vertexTangents=De.vertexTangents,je.toneMapping=De.toneMapping}function qr(me,De,je,Pe,We){De.isScene!==!0&&(De=_e),Re.resetTextureUnits();const St=De.fog,Lt=Pe.isMeshStandardMaterial?De.environment:null,Ot=R===null?S.outputColorSpace:R.isXRRenderTarget===!0?R.texture.colorSpace:ja,zt=(Pe.isMeshStandardMaterial?be:Le).get(Pe.envMap||Lt),Jt=Pe.vertexColors===!0&&!!je.attributes.color&&je.attributes.color.itemSize===4,qe=!!je.attributes.tangent&&(!!Pe.normalMap||Pe.anisotropy>0),Dt=!!je.morphAttributes.position,kn=!!je.morphAttributes.normal,En=!!je.morphAttributes.color,Tr=Pe.toneMapped?S.toneMapping:Ga,Ci=je.morphAttributes.position||je.morphAttributes.normal||je.morphAttributes.color,An=Ci!==void 0?Ci.length:0,Ft=we.get(Pe),Zt=_.state.lights;if(B===!0&&(J===!0||me!==I)){const dr=me===I&&Pe.id===O;Ze.setState(Pe,me,dr)}let Gt=!1;Pe.version===Ft.__version?(Ft.needsLights&&Ft.lightsStateVersion!==Zt.state.version||Ft.outputColorSpace!==Ot||We.isInstancedMesh&&Ft.instancing===!1||!We.isInstancedMesh&&Ft.instancing===!0||We.isSkinnedMesh&&Ft.skinning===!1||!We.isSkinnedMesh&&Ft.skinning===!0||Ft.envMap!==zt||Pe.fog===!0&&Ft.fog!==St||Ft.numClippingPlanes!==void 0&&(Ft.numClippingPlanes!==Ze.numPlanes||Ft.numIntersection!==Ze.numIntersection)||Ft.vertexAlphas!==Jt||Ft.vertexTangents!==qe||Ft.morphTargets!==Dt||Ft.morphNormals!==kn||Ft.morphColors!==En||Ft.toneMapping!==Tr||ie.isWebGL2===!0&&Ft.morphTargetsCount!==An)&&(Gt=!0):(Gt=!0,Ft.__version=Pe.version);let Pn=Ft.currentProgram;Gt===!0&&(Pn=Dn(Pe,De,We));let _r=!1,or=!1,ts=!1;const In=Pn.getUniforms(),$n=Ft.uniforms;if(se.useProgram(Pn.program)&&(_r=!0,or=!0,ts=!0),Pe.id!==O&&(O=Pe.id,or=!0),_r||I!==me){if(In.setValue(j,"projectionMatrix",me.projectionMatrix),ie.logarithmicDepthBuffer&&In.setValue(j,"logDepthBufFC",2/(Math.log(me.far+1)/Math.LN2)),I!==me&&(I=me,or=!0,ts=!0),Pe.isShaderMaterial||Pe.isMeshPhongMaterial||Pe.isMeshToonMaterial||Pe.isMeshStandardMaterial||Pe.envMap){const dr=In.map.cameraPosition;dr!==void 0&&dr.setValue(j,Ee.setFromMatrixPosition(me.matrixWorld))}(Pe.isMeshPhongMaterial||Pe.isMeshToonMaterial||Pe.isMeshLambertMaterial||Pe.isMeshBasicMaterial||Pe.isMeshStandardMaterial||Pe.isShaderMaterial)&&In.setValue(j,"isOrthographic",me.isOrthographicCamera===!0),(Pe.isMeshPhongMaterial||Pe.isMeshToonMaterial||Pe.isMeshLambertMaterial||Pe.isMeshBasicMaterial||Pe.isMeshStandardMaterial||Pe.isShaderMaterial||Pe.isShadowMaterial||We.isSkinnedMesh)&&In.setValue(j,"viewMatrix",me.matrixWorldInverse)}if(We.isSkinnedMesh){In.setOptional(j,We,"bindMatrix"),In.setOptional(j,We,"bindMatrixInverse");const dr=We.skeleton;dr&&(ie.floatVertexTextures?(dr.boneTexture===null&&dr.computeBoneTexture(),In.setValue(j,"boneTexture",dr.boneTexture,Re),In.setValue(j,"boneTextureSize",dr.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Xr=je.morphAttributes;if((Xr.position!==void 0||Xr.normal!==void 0||Xr.color!==void 0&&ie.isWebGL2===!0)&&st.update(We,je,Pn),(or||Ft.receiveShadow!==We.receiveShadow)&&(Ft.receiveShadow=We.receiveShadow,In.setValue(j,"receiveShadow",We.receiveShadow)),Pe.isMeshGouraudMaterial&&Pe.envMap!==null&&($n.envMap.value=zt,$n.flipEnvMap.value=zt.isCubeTexture&&zt.isRenderTargetTexture===!1?-1:1),or&&(In.setValue(j,"toneMappingExposure",S.toneMappingExposure),Ft.needsLights&&ks($n,ts),St&&Pe.fog===!0&&Fe.refreshFogUniforms($n,St),Fe.refreshMaterialUniforms($n,Pe,X,ne,le),Cx.upload(j,Ft.uniformsList,$n,Re)),Pe.isShaderMaterial&&Pe.uniformsNeedUpdate===!0&&(Cx.upload(j,Ft.uniformsList,$n,Re),Pe.uniformsNeedUpdate=!1),Pe.isSpriteMaterial&&In.setValue(j,"center",We.center),In.setValue(j,"modelViewMatrix",We.modelViewMatrix),In.setValue(j,"normalMatrix",We.normalMatrix),In.setValue(j,"modelMatrix",We.matrixWorld),Pe.isShaderMaterial||Pe.isRawShaderMaterial){const dr=Pe.uniformsGroups;for(let Ro=0,Po=dr.length;Ro<Po;Ro++)if(ie.isWebGL2){const ni=dr[Ro];xt.update(ni,Pn),xt.bind(ni,Pn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Pn}function ks(me,De){me.ambientLightColor.needsUpdate=De,me.lightProbe.needsUpdate=De,me.directionalLights.needsUpdate=De,me.directionalLightShadows.needsUpdate=De,me.pointLights.needsUpdate=De,me.pointLightShadows.needsUpdate=De,me.spotLights.needsUpdate=De,me.spotLightShadows.needsUpdate=De,me.rectAreaLights.needsUpdate=De,me.hemisphereLights.needsUpdate=De}function Hi(me){return me.isMeshLambertMaterial||me.isMeshToonMaterial||me.isMeshPhongMaterial||me.isMeshStandardMaterial||me.isShadowMaterial||me.isShaderMaterial&&me.lights===!0}this.getActiveCubeFace=function(){return M},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return R},this.setRenderTargetTextures=function(me,De,je){we.get(me.texture).__webglTexture=De,we.get(me.depthTexture).__webglTexture=je;const Pe=we.get(me);Pe.__hasExternalTextures=!0,Pe.__hasExternalTextures&&(Pe.__autoAllocateDepthBuffer=je===void 0,Pe.__autoAllocateDepthBuffer||fe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Pe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(me,De){const je=we.get(me);je.__webglFramebuffer=De,je.__useDefaultFramebuffer=De===void 0},this.setRenderTarget=function(me,De=0,je=0){R=me,M=De,A=je;let Pe=!0,We=null,St=!1,Lt=!1;if(me){const zt=we.get(me);zt.__useDefaultFramebuffer!==void 0?(se.bindFramebuffer(j.FRAMEBUFFER,null),Pe=!1):zt.__webglFramebuffer===void 0?Re.setupRenderTarget(me):zt.__hasExternalTextures&&Re.rebindTextures(me,we.get(me.texture).__webglTexture,we.get(me.depthTexture).__webglTexture);const Jt=me.texture;(Jt.isData3DTexture||Jt.isDataArrayTexture||Jt.isCompressedArrayTexture)&&(Lt=!0);const qe=we.get(me).__webglFramebuffer;me.isWebGLCubeRenderTarget?(We=qe[De],St=!0):ie.isWebGL2&&me.samples>0&&Re.useMultisampledRTT(me)===!1?We=we.get(me).__webglMultisampledFramebuffer:We=qe,k.copy(me.viewport),G.copy(me.scissor),$=me.scissorTest}else k.copy(F).multiplyScalar(X).floor(),G.copy(L).multiplyScalar(X).floor(),$=z;if(se.bindFramebuffer(j.FRAMEBUFFER,We)&&ie.drawBuffers&&Pe&&se.drawBuffers(me,We),se.viewport(k),se.scissor(G),se.setScissorTest($),St){const zt=we.get(me.texture);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_CUBE_MAP_POSITIVE_X+De,zt.__webglTexture,je)}else if(Lt){const zt=we.get(me.texture),Jt=De||0;j.framebufferTextureLayer(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,zt.__webglTexture,je||0,Jt)}O=-1},this.readRenderTargetPixels=function(me,De,je,Pe,We,St,Lt){if(!(me&&me.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ot=we.get(me).__webglFramebuffer;if(me.isWebGLCubeRenderTarget&&Lt!==void 0&&(Ot=Ot[Lt]),Ot){se.bindFramebuffer(j.FRAMEBUFFER,Ot);try{const zt=me.texture,Jt=zt.format,qe=zt.type;if(Jt!==Qs&&Qe.convert(Jt)!==j.getParameter(j.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Dt=qe===Fp&&(fe.has("EXT_color_buffer_half_float")||ie.isWebGL2&&fe.has("EXT_color_buffer_float"));if(qe!==Il&&Qe.convert(qe)!==j.getParameter(j.IMPLEMENTATION_COLOR_READ_TYPE)&&!(qe===Rl&&(ie.isWebGL2||fe.has("OES_texture_float")||fe.has("WEBGL_color_buffer_float")))&&!Dt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}De>=0&&De<=me.width-Pe&&je>=0&&je<=me.height-We&&j.readPixels(De,je,Pe,We,Qe.convert(Jt),Qe.convert(qe),St)}finally{const zt=R!==null?we.get(R).__webglFramebuffer:null;se.bindFramebuffer(j.FRAMEBUFFER,zt)}}},this.copyFramebufferToTexture=function(me,De,je=0){const Pe=Math.pow(2,-je),We=Math.floor(De.image.width*Pe),St=Math.floor(De.image.height*Pe);Re.setTexture2D(De,0),j.copyTexSubImage2D(j.TEXTURE_2D,je,0,0,me.x,me.y,We,St),se.unbindTexture()},this.copyTextureToTexture=function(me,De,je,Pe=0){const We=De.image.width,St=De.image.height,Lt=Qe.convert(je.format),Ot=Qe.convert(je.type);Re.setTexture2D(je,0),j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,je.flipY),j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,je.premultiplyAlpha),j.pixelStorei(j.UNPACK_ALIGNMENT,je.unpackAlignment),De.isDataTexture?j.texSubImage2D(j.TEXTURE_2D,Pe,me.x,me.y,We,St,Lt,Ot,De.image.data):De.isCompressedTexture?j.compressedTexSubImage2D(j.TEXTURE_2D,Pe,me.x,me.y,De.mipmaps[0].width,De.mipmaps[0].height,Lt,De.mipmaps[0].data):j.texSubImage2D(j.TEXTURE_2D,Pe,me.x,me.y,Lt,Ot,De.image),Pe===0&&je.generateMipmaps&&j.generateMipmap(j.TEXTURE_2D),se.unbindTexture()},this.copyTextureToTexture3D=function(me,De,je,Pe,We=0){if(S.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const St=me.max.x-me.min.x+1,Lt=me.max.y-me.min.y+1,Ot=me.max.z-me.min.z+1,zt=Qe.convert(Pe.format),Jt=Qe.convert(Pe.type);let qe;if(Pe.isData3DTexture)Re.setTexture3D(Pe,0),qe=j.TEXTURE_3D;else if(Pe.isDataArrayTexture)Re.setTexture2DArray(Pe,0),qe=j.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,Pe.flipY),j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Pe.premultiplyAlpha),j.pixelStorei(j.UNPACK_ALIGNMENT,Pe.unpackAlignment);const Dt=j.getParameter(j.UNPACK_ROW_LENGTH),kn=j.getParameter(j.UNPACK_IMAGE_HEIGHT),En=j.getParameter(j.UNPACK_SKIP_PIXELS),Tr=j.getParameter(j.UNPACK_SKIP_ROWS),Ci=j.getParameter(j.UNPACK_SKIP_IMAGES),An=je.isCompressedTexture?je.mipmaps[0]:je.image;j.pixelStorei(j.UNPACK_ROW_LENGTH,An.width),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,An.height),j.pixelStorei(j.UNPACK_SKIP_PIXELS,me.min.x),j.pixelStorei(j.UNPACK_SKIP_ROWS,me.min.y),j.pixelStorei(j.UNPACK_SKIP_IMAGES,me.min.z),je.isDataTexture||je.isData3DTexture?j.texSubImage3D(qe,We,De.x,De.y,De.z,St,Lt,Ot,zt,Jt,An.data):je.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),j.compressedTexSubImage3D(qe,We,De.x,De.y,De.z,St,Lt,Ot,zt,An.data)):j.texSubImage3D(qe,We,De.x,De.y,De.z,St,Lt,Ot,zt,Jt,An),j.pixelStorei(j.UNPACK_ROW_LENGTH,Dt),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,kn),j.pixelStorei(j.UNPACK_SKIP_PIXELS,En),j.pixelStorei(j.UNPACK_SKIP_ROWS,Tr),j.pixelStorei(j.UNPACK_SKIP_IMAGES,Ci),We===0&&Pe.generateMipmaps&&j.generateMipmap(qe),se.unbindTexture()},this.initTexture=function(me){me.isCubeTexture?Re.setTextureCube(me,0):me.isData3DTexture?Re.setTexture3D(me,0):me.isDataArrayTexture||me.isCompressedArrayTexture?Re.setTexture2DArray(me,0):Re.setTexture2D(me,0),se.unbindTexture()},this.resetState=function(){M=0,A=0,R=null,se.reset(),ot.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Pl}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===an?$c:XM}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===$c?an:ja}}class GU extends iA{}GU.prototype.isWebGL1Renderer=!0;class L1{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new gt(e),this.density=t}clone(){return new L1(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class N1{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new gt(e),this.near=t,this.far=r}clone(){return new N1(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Ty extends Bn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class O1{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Sy,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Eo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Eo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Eo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Rs=new de;class Cd{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Rs.fromBufferAttribute(this,t),Rs.applyMatrix4(e),this.setXYZ(t,Rs.x,Rs.y,Rs.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Rs.fromBufferAttribute(this,t),Rs.applyNormalMatrix(e),this.setXYZ(t,Rs.x,Rs.y,Rs.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Rs.fromBufferAttribute(this,t),Rs.transformDirection(e),this.setXYZ(t,Rs.x,Rs.y,Rs.z);return this}setX(e,t){return this.normalized&&(t=dn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=dn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=dn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=dn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=So(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=So(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=So(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=So(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=dn(t,this.array),r=dn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=dn(t,this.array),r=dn(r,this.array),i=dn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=dn(t,this.array),r=dn(r,this.array),i=dn(i,this.array),s=dn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Kn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Cd(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class sA extends es{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new gt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let ep;const fg=new de,tp=new de,np=new de,rp=new Je,dg=new Je,VU=new Qt,b_=new de,hg=new de,T_=new de,pI=new Je,XS=new Je,mI=new Je;class jU extends Bn{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",ep===void 0){ep=new un;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new O1(t,5);ep.setIndex([0,1,2,0,2,3]),ep.setAttribute("position",new Cd(r,3,0,!1)),ep.setAttribute("uv",new Cd(r,2,3,!1))}this.geometry=ep,this.material=e!==void 0?e:new sA,this.center=new Je(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),tp.setFromMatrixScale(this.matrixWorld),VU.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),np.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&tp.multiplyScalar(-np.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;M_(b_.set(-.5,-.5,0),np,o,tp,i,s),M_(hg.set(.5,-.5,0),np,o,tp,i,s),M_(T_.set(.5,.5,0),np,o,tp,i,s),pI.set(0,0),XS.set(1,0),mI.set(1,1);let a=e.ray.intersectTriangle(b_,hg,T_,!1,fg);if(a===null&&(M_(hg.set(-.5,.5,0),np,o,tp,i,s),XS.set(0,1),a=e.ray.intersectTriangle(b_,T_,hg,!1,fg),a===null))return;const l=e.ray.origin.distanceTo(fg);l<e.near||l>e.far||t.push({distance:l,point:fg.clone(),uv:Zs.getInterpolation(fg,b_,hg,T_,pI,XS,mI,new Je),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function M_(n,e,t,r,i,s){rp.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(dg.x=s*rp.x-i*rp.y,dg.y=i*rp.x+s*rp.y):dg.copy(rp),n.copy(e),n.x+=dg.x,n.y+=dg.y,n.applyMatrix4(VU)}const A_=new de,gI=new de;class WU extends Bn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){A_.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(A_);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){A_.setFromMatrixPosition(e.matrixWorld),gI.setFromMatrixPosition(this.matrixWorld);const r=A_.distanceTo(gI)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const yI=new de,vI=new zn,_I=new zn,gQ=new de,xI=new Qt,ip=new de,YS=new Ao,wI=new Qt,KS=new rm;class qU extends Or{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Qt,this.bindMatrixInverse=new Qt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Mo),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)ip.fromBufferAttribute(t,r),this.applyBoneTransform(r,ip),this.boundingBox.expandByPoint(ip)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Ao),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)ip.fromBufferAttribute(t,r),this.applyBoneTransform(r,ip),this.boundingSphere.expandByPoint(ip)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),YS.copy(this.boundingSphere),YS.applyMatrix4(i),e.ray.intersectsSphere(YS)!==!1&&(wI.copy(i).invert(),KS.copy(e.ray).applyMatrix4(wI),!(this.boundingBox!==null&&KS.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,KS)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new zn,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;vI.fromBufferAttribute(i.attributes.skinIndex,e),_I.fromBufferAttribute(i.attributes.skinWeight,e),yI.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=_I.getComponent(s);if(o!==0){const a=vI.getComponent(s);xI.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(gQ.copy(yI).applyMatrix4(xI),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class oA extends Bn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ip extends Fr{constructor(e=null,t=1,r=1,i,s,o,a,l,u=ei,c=ei,d,h){super(null,o,a,l,u,c,i,s,d,h),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const SI=new Qt,yQ=new Qt;class D1{constructor(e=[],t=[]){this.uuid=Eo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Qt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Qt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:yQ;SI.multiplyMatrices(a,t[s]),SI.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new D1(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=RU(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Ip(t,e,e,Qs,Rl);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new oA),this.bones.push(o),this.boneInverses.push(new Qt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Rd extends Kn{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const sp=new Qt,EI=new Qt,C_=[],bI=new Mo,vQ=new Qt,pg=new Or,mg=new Ao;class XU extends Or{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Rd(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,vQ)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Mo),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,sp),bI.copy(e.boundingBox).applyMatrix4(sp),this.boundingBox.union(bI)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ao),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,sp),mg.copy(e.boundingSphere).applyMatrix4(sp),this.boundingSphere.union(mg)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(pg.geometry=this.geometry,pg.material=this.material,pg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),mg.copy(this.boundingSphere),mg.applyMatrix4(r),e.ray.intersectsSphere(mg)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,sp),EI.multiplyMatrices(r,sp),pg.matrixWorld=EI,pg.raycast(e,C_);for(let o=0,a=C_.length;o<a;o++){const l=C_[o];l.instanceId=s,l.object=this,t.push(l)}C_.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Rd(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Os extends es{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new gt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const TI=new de,MI=new de,AI=new Qt,JS=new rm,R_=new Ao;let Kc=class extends Bn{constructor(e=new un,t=new Os){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)TI.fromBufferAttribute(t,i-1),MI.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=TI.distanceTo(MI);e.setAttribute("lineDistance",new Ct(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),R_.copy(r.boundingSphere),R_.applyMatrix4(i),R_.radius+=s,e.ray.intersectsSphere(R_)===!1)return;AI.copy(i).invert(),JS.copy(e.ray).applyMatrix4(AI);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=new de,c=new de,d=new de,h=new de,g=this.isLineSegments?2:1,y=r.index,_=r.attributes.position;if(y!==null){const m=Math.max(0,o.start),v=Math.min(y.count,o.start+o.count);for(let S=m,T=v-1;S<T;S+=g){const M=y.getX(S),A=y.getX(S+1);if(u.fromBufferAttribute(_,M),c.fromBufferAttribute(_,A),JS.distanceSqToSegment(u,c,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const O=e.ray.origin.distanceTo(h);O<e.near||O>e.far||t.push({distance:O,point:d.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{const m=Math.max(0,o.start),v=Math.min(_.count,o.start+o.count);for(let S=m,T=v-1;S<T;S+=g){if(u.fromBufferAttribute(_,S),c.fromBufferAttribute(_,S+1),JS.distanceSqToSegment(u,c,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const A=e.ray.origin.distanceTo(h);A<e.near||A>e.far||t.push({distance:A,point:d.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};const CI=new de,RI=new de;class Bl extends Kc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)CI.fromBufferAttribute(t,i),RI.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+CI.distanceTo(RI);e.setAttribute("lineDistance",new Ct(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class YU extends Kc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class aA extends es{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new gt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const PI=new Qt,OT=new rm,P_=new Ao,I_=new de;class KU extends Bn{constructor(e=new un,t=new aA){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),P_.copy(r.boundingSphere),P_.applyMatrix4(i),P_.radius+=s,e.ray.intersectsSphere(P_)===!1)return;PI.copy(i).invert(),OT.copy(e.ray).applyMatrix4(PI);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=r.index,d=r.attributes.position;if(u!==null){const h=Math.max(0,o.start),g=Math.min(u.count,o.start+o.count);for(let y=h,E=g;y<E;y++){const _=u.getX(y);I_.fromBufferAttribute(d,_),II(I_,_,l,i,e,t,this)}}else{const h=Math.max(0,o.start),g=Math.min(d.count,o.start+o.count);for(let y=h,E=g;y<E;y++)I_.fromBufferAttribute(d,y),II(I_,y,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function II(n,e,t,r,i,s,o){const a=OT.distanceSqToPoint(n);if(a<t){const l=new de;OT.closestPointToPoint(n,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class _Q extends Fr{constructor(e,t,r,i,s,o,a,l,u){super(e,t,r,i,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:br,this.magFilter=s!==void 0?s:br,this.generateMipmaps=!1;const c=this;function d(){c.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class xQ extends Fr{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=ei,this.minFilter=ei,this.generateMipmaps=!1,this.needsUpdate=!0}}class lA extends Fr{constructor(e,t,r,i,s,o,a,l,u,c,d,h){super(null,o,a,l,u,c,i,s,d,h),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class wQ extends lA{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=hs}}class SQ extends Fr{constructor(e,t,r,i,s,o,a,l,u){super(e,t,r,i,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ka{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,u;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),u=r[i]-o,u<0)a=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const c=r[i],h=r[i+1]-c,g=(o-c)/h;return(i+g)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new Je:new de);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new de,i=[],s=[],o=[],a=new de,l=new Qt;for(let g=0;g<=e;g++){const y=g/e;i[g]=this.getTangentAt(y,new de)}s[0]=new de,o[0]=new de;let u=Number.MAX_VALUE;const c=Math.abs(i[0].x),d=Math.abs(i[0].y),h=Math.abs(i[0].z);c<=u&&(u=c,r.set(1,0,0)),d<=u&&(u=d,r.set(0,1,0)),h<=u&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let g=1;g<=e;g++){if(s[g]=s[g-1].clone(),o[g]=o[g-1].clone(),a.crossVectors(i[g-1],i[g]),a.length()>Number.EPSILON){a.normalize();const y=Math.acos(jr(i[g-1].dot(i[g]),-1,1));s[g].applyMatrix4(l.makeRotationAxis(a,y))}o[g].crossVectors(i[g],s[g])}if(t===!0){let g=Math.acos(jr(s[0].dot(s[e]),-1,1));g/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(g=-g);for(let y=1;y<=e;y++)s[y].applyMatrix4(l.makeRotationAxis(i[y],g*y)),o[y].crossVectors(i[y],s[y])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class k1 extends Ka{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const r=t||new Je,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const c=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=l-this.aX,g=u-this.aY;l=h*c-g*d+this.aX,u=h*d+g*c+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class JU extends k1{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function uA(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){i(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,c,d){let h=(o-s)/u-(a-s)/(u+c)+(a-o)/c,g=(a-o)/c-(l-o)/(c+d)+(l-a)/d;h*=c,g*=c,i(o,a,h,g)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const L_=new de,ZS=new uA,QS=new uA,eE=new uA;class ZU extends Ka{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new de){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,c;this.closed||a>0?u=i[(a-1)%s]:(L_.subVectors(i[0],i[1]).add(i[0]),u=L_);const d=i[a%s],h=i[(a+1)%s];if(this.closed||a+2<s?c=i[(a+2)%s]:(L_.subVectors(i[s-1],i[s-2]).add(i[s-1]),c=L_),this.curveType==="centripetal"||this.curveType==="chordal"){const g=this.curveType==="chordal"?.5:.25;let y=Math.pow(u.distanceToSquared(d),g),E=Math.pow(d.distanceToSquared(h),g),_=Math.pow(h.distanceToSquared(c),g);E<1e-4&&(E=1),y<1e-4&&(y=E),_<1e-4&&(_=E),ZS.initNonuniformCatmullRom(u.x,d.x,h.x,c.x,y,E,_),QS.initNonuniformCatmullRom(u.y,d.y,h.y,c.y,y,E,_),eE.initNonuniformCatmullRom(u.z,d.z,h.z,c.z,y,E,_)}else this.curveType==="catmullrom"&&(ZS.initCatmullRom(u.x,d.x,h.x,c.x,this.tension),QS.initCatmullRom(u.y,d.y,h.y,c.y,this.tension),eE.initCatmullRom(u.z,d.z,h.z,c.z,this.tension));return r.set(ZS.calc(l),QS.calc(l),eE.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new de().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function LI(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function EQ(n,e){const t=1-n;return t*t*e}function bQ(n,e){return 2*(1-n)*n*e}function TQ(n,e){return n*n*e}function ry(n,e,t,r){return EQ(n,e)+bQ(n,t)+TQ(n,r)}function MQ(n,e){const t=1-n;return t*t*t*e}function AQ(n,e){const t=1-n;return 3*t*t*n*e}function CQ(n,e){return 3*(1-n)*n*n*e}function RQ(n,e){return n*n*n*e}function iy(n,e,t,r,i){return MQ(n,e)+AQ(n,t)+CQ(n,r)+RQ(n,i)}class cA extends Ka{constructor(e=new Je,t=new Je,r=new Je,i=new Je){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Je){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(iy(e,i.x,s.x,o.x,a.x),iy(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class QU extends Ka{constructor(e=new de,t=new de,r=new de,i=new de){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new de){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(iy(e,i.x,s.x,o.x,a.x),iy(e,i.y,s.y,o.y,a.y),iy(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class U1 extends Ka{constructor(e=new Je,t=new Je){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Je){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Je){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class fA extends Ka{constructor(e=new de,t=new de){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new de){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new de){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class dA extends Ka{constructor(e=new Je,t=new Je,r=new Je){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Je){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(ry(e,i.x,s.x,o.x),ry(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class F1 extends Ka{constructor(e=new de,t=new de,r=new de){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new de){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(ry(e,i.x,s.x,o.x),ry(e,i.y,s.y,o.y),ry(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class hA extends Ka{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Je){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],u=i[o],c=i[o>i.length-2?i.length-1:o+1],d=i[o>i.length-3?i.length-1:o+2];return r.set(LI(a,l.x,u.x,c.x,d.x),LI(a,l.y,u.y,c.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Je().fromArray(i))}return this}}var pA=Object.freeze({__proto__:null,ArcCurve:JU,CatmullRomCurve3:ZU,CubicBezierCurve:cA,CubicBezierCurve3:QU,EllipseCurve:k1,LineCurve:U1,LineCurve3:fA,QuadraticBezierCurve:dA,QuadraticBezierCurve3:F1,SplineCurve:hA});class eF extends Ka{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new U1(t,e))}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const c=l[u];r&&r.equals(c)||(t.push(c),r=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new pA[i.type]().fromJSON(i))}return this}}class My extends eF{constructor(e){super(),this.type="Path",this.currentPoint=new Je,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new U1(this.currentPoint.clone(),new Je(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new dA(this.currentPoint.clone(),new Je(e,t),new Je(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new cA(this.currentPoint.clone(),new Je(e,t),new Je(r,i),new Je(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new hA(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const u=new k1(e,t,r,i,s,o,a,l);if(this.curves.length>0){const d=u.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class lv extends un{constructor(e=[new Je(0,-.5),new Je(.5,0),new Je(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=jr(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],c=1/t,d=new de,h=new Je,g=new de,y=new de,E=new de;let _=0,m=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:_=e[v+1].x-e[v].x,m=e[v+1].y-e[v].y,g.x=m*1,g.y=-_,g.z=m*0,E.copy(g),g.normalize(),l.push(g.x,g.y,g.z);break;case e.length-1:l.push(E.x,E.y,E.z);break;default:_=e[v+1].x-e[v].x,m=e[v+1].y-e[v].y,g.x=m*1,g.y=-_,g.z=m*0,y.copy(g),g.x+=E.x,g.y+=E.y,g.z+=E.z,g.normalize(),l.push(g.x,g.y,g.z),E.copy(y)}for(let v=0;v<=t;v++){const S=r+v*c*i,T=Math.sin(S),M=Math.cos(S);for(let A=0;A<=e.length-1;A++){d.x=e[A].x*T,d.y=e[A].y,d.z=e[A].x*M,o.push(d.x,d.y,d.z),h.x=v/t,h.y=A/(e.length-1),a.push(h.x,h.y);const R=l[3*A+0]*T,O=l[3*A+1],I=l[3*A+0]*M;u.push(R,O,I)}}for(let v=0;v<t;v++)for(let S=0;S<e.length-1;S++){const T=S+v*e.length,M=T,A=T+e.length,R=T+e.length+1,O=T+1;s.push(M,A,O),s.push(R,O,A)}this.setIndex(s),this.setAttribute("position",new Ct(o,3)),this.setAttribute("uv",new Ct(a,2)),this.setAttribute("normal",new Ct(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lv(e.points,e.segments,e.phiStart,e.phiLength)}}class z1 extends lv{constructor(e=1,t=1,r=4,i=8){const s=new My;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new z1(e.radius,e.length,e.capSegments,e.radialSegments)}}class B1 extends un{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new de,c=new Je;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,h=3;d<=t;d++,h+=3){const g=r+d/t*i;u.x=e*Math.cos(g),u.y=e*Math.sin(g),o.push(u.x,u.y,u.z),a.push(0,0,1),c.x=(o[h]/e+1)/2,c.y=(o[h+1]/e+1)/2,l.push(c.x,c.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new Ct(o,3)),this.setAttribute("normal",new Ct(a,3)),this.setAttribute("uv",new Ct(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new B1(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Fd extends un{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;i=Math.floor(i),s=Math.floor(s);const c=[],d=[],h=[],g=[];let y=0;const E=[],_=r/2;let m=0;v(),o===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(c),this.setAttribute("position",new Ct(d,3)),this.setAttribute("normal",new Ct(h,3)),this.setAttribute("uv",new Ct(g,2));function v(){const T=new de,M=new de;let A=0;const R=(t-e)/r;for(let O=0;O<=s;O++){const I=[],k=O/s,G=k*(t-e)+e;for(let $=0;$<=i;$++){const U=$/i,ee=U*l+a,re=Math.sin(ee),ne=Math.cos(ee);M.x=G*re,M.y=-k*r+_,M.z=G*ne,d.push(M.x,M.y,M.z),T.set(re,R,ne).normalize(),h.push(T.x,T.y,T.z),g.push(U,1-k),I.push(y++)}E.push(I)}for(let O=0;O<i;O++)for(let I=0;I<s;I++){const k=E[I][O],G=E[I+1][O],$=E[I+1][O+1],U=E[I][O+1];c.push(k,G,U),c.push(G,$,U),A+=6}u.addGroup(m,A,0),m+=A}function S(T){const M=y,A=new Je,R=new de;let O=0;const I=T===!0?e:t,k=T===!0?1:-1;for(let $=1;$<=i;$++)d.push(0,_*k,0),h.push(0,k,0),g.push(.5,.5),y++;const G=y;for(let $=0;$<=i;$++){const ee=$/i*l+a,re=Math.cos(ee),ne=Math.sin(ee);R.x=I*ne,R.y=_*k,R.z=I*re,d.push(R.x,R.y,R.z),h.push(0,k,0),A.x=re*.5+.5,A.y=ne*.5*k+.5,g.push(A.x,A.y),y++}for(let $=0;$<i;$++){const U=M+$,ee=G+$;T===!0?c.push(ee,ee+1,U):c.push(ee+1,ee,U),O+=3}u.addGroup(m,O,T===!0?1:2),m+=O}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fd(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class H1 extends Fd{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new H1(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class tf extends un{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),u(r),c(),this.setAttribute("position",new Ct(s,3)),this.setAttribute("normal",new Ct(s.slice(),3)),this.setAttribute("uv",new Ct(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(v){const S=new de,T=new de,M=new de;for(let A=0;A<t.length;A+=3)g(t[A+0],S),g(t[A+1],T),g(t[A+2],M),l(S,T,M,v)}function l(v,S,T,M){const A=M+1,R=[];for(let O=0;O<=A;O++){R[O]=[];const I=v.clone().lerp(T,O/A),k=S.clone().lerp(T,O/A),G=A-O;for(let $=0;$<=G;$++)$===0&&O===A?R[O][$]=I:R[O][$]=I.clone().lerp(k,$/G)}for(let O=0;O<A;O++)for(let I=0;I<2*(A-O)-1;I++){const k=Math.floor(I/2);I%2===0?(h(R[O][k+1]),h(R[O+1][k]),h(R[O][k])):(h(R[O][k+1]),h(R[O+1][k+1]),h(R[O+1][k]))}}function u(v){const S=new de;for(let T=0;T<s.length;T+=3)S.x=s[T+0],S.y=s[T+1],S.z=s[T+2],S.normalize().multiplyScalar(v),s[T+0]=S.x,s[T+1]=S.y,s[T+2]=S.z}function c(){const v=new de;for(let S=0;S<s.length;S+=3){v.x=s[S+0],v.y=s[S+1],v.z=s[S+2];const T=_(v)/2/Math.PI+.5,M=m(v)/Math.PI+.5;o.push(T,1-M)}y(),d()}function d(){for(let v=0;v<o.length;v+=6){const S=o[v+0],T=o[v+2],M=o[v+4],A=Math.max(S,T,M),R=Math.min(S,T,M);A>.9&&R<.1&&(S<.2&&(o[v+0]+=1),T<.2&&(o[v+2]+=1),M<.2&&(o[v+4]+=1))}}function h(v){s.push(v.x,v.y,v.z)}function g(v,S){const T=v*3;S.x=e[T+0],S.y=e[T+1],S.z=e[T+2]}function y(){const v=new de,S=new de,T=new de,M=new de,A=new Je,R=new Je,O=new Je;for(let I=0,k=0;I<s.length;I+=9,k+=6){v.set(s[I+0],s[I+1],s[I+2]),S.set(s[I+3],s[I+4],s[I+5]),T.set(s[I+6],s[I+7],s[I+8]),A.set(o[k+0],o[k+1]),R.set(o[k+2],o[k+3]),O.set(o[k+4],o[k+5]),M.copy(v).add(S).add(T).divideScalar(3);const G=_(M);E(A,k+0,v,G),E(R,k+2,S,G),E(O,k+4,T,G)}}function E(v,S,T,M){M<0&&v.x===1&&(o[S]=v.x-1),T.x===0&&T.z===0&&(o[S]=M/2/Math.PI+.5)}function _(v){return Math.atan2(v.z,-v.x)}function m(v){return Math.atan2(-v.y,Math.sqrt(v.x*v.x+v.z*v.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tf(e.vertices,e.indices,e.radius,e.details)}}class $1 extends tf{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new $1(e.radius,e.detail)}}const N_=new de,O_=new de,tE=new de,D_=new Zs;class tF extends un{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(yd*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],c=["a","b","c"],d=new Array(3),h={},g=[];for(let y=0;y<l;y+=3){o?(u[0]=o.getX(y),u[1]=o.getX(y+1),u[2]=o.getX(y+2)):(u[0]=y,u[1]=y+1,u[2]=y+2);const{a:E,b:_,c:m}=D_;if(E.fromBufferAttribute(a,u[0]),_.fromBufferAttribute(a,u[1]),m.fromBufferAttribute(a,u[2]),D_.getNormal(tE),d[0]=`${Math.round(E.x*i)},${Math.round(E.y*i)},${Math.round(E.z*i)}`,d[1]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,d[2]=`${Math.round(m.x*i)},${Math.round(m.y*i)},${Math.round(m.z*i)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let v=0;v<3;v++){const S=(v+1)%3,T=d[v],M=d[S],A=D_[c[v]],R=D_[c[S]],O=`${T}_${M}`,I=`${M}_${T}`;I in h&&h[I]?(tE.dot(h[I].normal)<=s&&(g.push(A.x,A.y,A.z),g.push(R.x,R.y,R.z)),h[I]=null):O in h||(h[O]={index0:u[v],index1:u[S],normal:tE.clone()})}}for(const y in h)if(h[y]){const{index0:E,index1:_}=h[y];N_.fromBufferAttribute(a,E),O_.fromBufferAttribute(a,_),g.push(N_.x,N_.y,N_.z),g.push(O_.x,O_.y,O_.z)}this.setAttribute("position",new Ct(g,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class _d extends My{constructor(e){super(e),this.uuid=Eo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new My().fromJSON(i))}return this}}const PQ={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=nF(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,c,d,h,g;if(r&&(s=DQ(n,e,s,t)),n.length>80*t){a=u=n[0],l=c=n[1];for(let y=t;y<i;y+=t)d=n[y],h=n[y+1],d<a&&(a=d),h<l&&(l=h),d>u&&(u=d),h>c&&(c=h);g=Math.max(u-a,c-l),g=g!==0?32767/g:0}return Ay(s,o,t,a,l,g,0),o}};function nF(n,e,t,r,i){let s,o;if(i===WQ(n,e,t,r)>0)for(s=e;s<t;s+=r)o=NI(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=NI(s,n[s],n[s+1],o);return o&&G1(o,o.next)&&(Ry(o),o=o.next),o}function Pd(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(G1(t,t.next)||Nr(t.prev,t,t.next)===0)){if(Ry(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Ay(n,e,t,r,i,s,o){if(!n)return;!o&&s&&BQ(n,r,i,s);let a=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,s?LQ(n,r,i,s):IQ(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),Ry(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=NQ(Pd(n),e,t),Ay(n,e,t,r,i,s,2)):o===2&&OQ(n,e,t,r,i,s):Ay(Pd(n),e,t,r,i,s,1);break}}}function IQ(n){const e=n.prev,t=n,r=n.next;if(Nr(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,u=r.y,c=i<s?i<o?i:o:s<o?s:o,d=a<l?a<u?a:u:l<u?l:u,h=i>s?i>o?i:o:s>o?s:o,g=a>l?a>u?a:u:l>u?l:u;let y=r.next;for(;y!==e;){if(y.x>=c&&y.x<=h&&y.y>=d&&y.y<=g&&Tp(i,a,s,l,o,u,y.x,y.y)&&Nr(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function LQ(n,e,t,r){const i=n.prev,s=n,o=n.next;if(Nr(i,s,o)>=0)return!1;const a=i.x,l=s.x,u=o.x,c=i.y,d=s.y,h=o.y,g=a<l?a<u?a:u:l<u?l:u,y=c<d?c<h?c:h:d<h?d:h,E=a>l?a>u?a:u:l>u?l:u,_=c>d?c>h?c:h:d>h?d:h,m=DT(g,y,e,t,r),v=DT(E,_,e,t,r);let S=n.prevZ,T=n.nextZ;for(;S&&S.z>=m&&T&&T.z<=v;){if(S.x>=g&&S.x<=E&&S.y>=y&&S.y<=_&&S!==i&&S!==o&&Tp(a,c,l,d,u,h,S.x,S.y)&&Nr(S.prev,S,S.next)>=0||(S=S.prevZ,T.x>=g&&T.x<=E&&T.y>=y&&T.y<=_&&T!==i&&T!==o&&Tp(a,c,l,d,u,h,T.x,T.y)&&Nr(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;S&&S.z>=m;){if(S.x>=g&&S.x<=E&&S.y>=y&&S.y<=_&&S!==i&&S!==o&&Tp(a,c,l,d,u,h,S.x,S.y)&&Nr(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;T&&T.z<=v;){if(T.x>=g&&T.x<=E&&T.y>=y&&T.y<=_&&T!==i&&T!==o&&Tp(a,c,l,d,u,h,T.x,T.y)&&Nr(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function NQ(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!G1(i,s)&&rF(i,r,r.next,s)&&Cy(i,s)&&Cy(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),Ry(r),Ry(r.next),r=n=s),r=r.next}while(r!==n);return Pd(r)}function OQ(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&GQ(o,a)){let l=iF(o,a);o=Pd(o,o.next),l=Pd(l,l.next),Ay(o,e,t,r,i,s,0),Ay(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function DQ(n,e,t,r){const i=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,u=nF(n,a,l,r,!1),u===u.next&&(u.steiner=!0),i.push($Q(u));for(i.sort(kQ),s=0;s<i.length;s++)t=UQ(i[s],t);return t}function kQ(n,e){return n.x-e.x}function UQ(n,e){const t=FQ(n,e);if(!t)return e;const r=iF(t,n);return Pd(r,r.next),Pd(t,t.next)}function FQ(n,e){let t=e,r=-1/0,i;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const h=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=s&&h>r&&(r=h,i=t.x<t.next.x?t:t.next,h===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,u=i.y;let c=1/0,d;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&Tp(o<u?s:r,o,l,u,o<u?r:s,o,t.x,t.y)&&(d=Math.abs(o-t.y)/(s-t.x),Cy(t,n)&&(d<c||d===c&&(t.x>i.x||t.x===i.x&&zQ(i,t)))&&(i=t,c=d)),t=t.next;while(t!==a);return i}function zQ(n,e){return Nr(n.prev,n,e.prev)<0&&Nr(e.next,n,n.next)<0}function BQ(n,e,t,r){let i=n;do i.z===0&&(i.z=DT(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,HQ(i)}function HQ(n){let e,t,r,i,s,o,a,l,u=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<u&&(a++,r=r.nextZ,!!r);e++);for(l=u;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,u*=2}while(o>1);return n}function DT(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function $Q(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Tp(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function GQ(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!VQ(n,e)&&(Cy(n,e)&&Cy(e,n)&&jQ(n,e)&&(Nr(n.prev,n,e.prev)||Nr(n,e.prev,e))||G1(n,e)&&Nr(n.prev,n,n.next)>0&&Nr(e.prev,e,e.next)>0)}function Nr(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function G1(n,e){return n.x===e.x&&n.y===e.y}function rF(n,e,t,r){const i=U_(Nr(n,e,t)),s=U_(Nr(n,e,r)),o=U_(Nr(t,r,n)),a=U_(Nr(t,r,e));return!!(i!==s&&o!==a||i===0&&k_(n,t,e)||s===0&&k_(n,r,e)||o===0&&k_(t,n,r)||a===0&&k_(t,e,r))}function k_(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function U_(n){return n>0?1:n<0?-1:0}function VQ(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&rF(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Cy(n,e){return Nr(n.prev,n,n.next)<0?Nr(n,e,n.next)>=0&&Nr(n,n.prev,e)>=0:Nr(n,e,n.prev)<0||Nr(n,n.next,e)<0}function jQ(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function iF(n,e){const t=new kT(n.i,n.x,n.y),r=new kT(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function NI(n,e,t,r){const i=new kT(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Ry(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function kT(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function WQ(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class Ll{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return Ll.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];OI(e),DI(r,e);let o=e.length;t.forEach(OI);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,DI(r,t[l]);const a=PQ.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function OI(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function DI(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class V1 extends un{constructor(e=new _d([new Je(.5,.5),new Je(-.5,.5),new Je(-.5,-.5),new Je(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new Ct(i,3)),this.setAttribute("uv",new Ct(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let h=t.bevelEnabled!==void 0?t.bevelEnabled:!0,g=t.bevelThickness!==void 0?t.bevelThickness:.2,y=t.bevelSize!==void 0?t.bevelSize:g-.1,E=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const m=t.extrudePath,v=t.UVGenerator!==void 0?t.UVGenerator:qQ;let S,T=!1,M,A,R,O;m&&(S=m.getSpacedPoints(c),T=!0,h=!1,M=m.computeFrenetFrames(c,!1),A=new de,R=new de,O=new de),h||(_=0,g=0,y=0,E=0);const I=a.extractPoints(u);let k=I.shape;const G=I.holes;if(!Ll.isClockWise(k)){k=k.reverse();for(let j=0,ce=G.length;j<ce;j++){const fe=G[j];Ll.isClockWise(fe)&&(G[j]=fe.reverse())}}const U=Ll.triangulateShape(k,G),ee=k;for(let j=0,ce=G.length;j<ce;j++){const fe=G[j];k=k.concat(fe)}function re(j,ce,fe){return ce||console.error("THREE.ExtrudeGeometry: vec does not exist"),j.clone().addScaledVector(ce,fe)}const ne=k.length,X=U.length;function q(j,ce,fe){let ie,se,Ae;const we=j.x-ce.x,Re=j.y-ce.y,Le=fe.x-j.x,be=fe.y-j.y,Ye=we*we+Re*Re,ue=we*be-Re*Le;if(Math.abs(ue)>Number.EPSILON){const oe=Math.sqrt(Ye),ye=Math.sqrt(Le*Le+be*be),Fe=ce.x-Re/oe,ze=ce.y+we/oe,He=fe.x-be/ye,Ze=fe.y+Le/ye,Ke=((He-Fe)*be-(Ze-ze)*Le)/(we*be-Re*Le);ie=Fe+we*Ke-j.x,se=ze+Re*Ke-j.y;const Ue=ie*ie+se*se;if(Ue<=2)return new Je(ie,se);Ae=Math.sqrt(Ue/2)}else{let oe=!1;we>Number.EPSILON?Le>Number.EPSILON&&(oe=!0):we<-Number.EPSILON?Le<-Number.EPSILON&&(oe=!0):Math.sign(Re)===Math.sign(be)&&(oe=!0),oe?(ie=-Re,se=we,Ae=Math.sqrt(Ye)):(ie=we,se=Re,Ae=Math.sqrt(Ye/2))}return new Je(ie/Ae,se/Ae)}const K=[];for(let j=0,ce=ee.length,fe=ce-1,ie=j+1;j<ce;j++,fe++,ie++)fe===ce&&(fe=0),ie===ce&&(ie=0),K[j]=q(ee[j],ee[fe],ee[ie]);const F=[];let L,z=K.concat();for(let j=0,ce=G.length;j<ce;j++){const fe=G[j];L=[];for(let ie=0,se=fe.length,Ae=se-1,we=ie+1;ie<se;ie++,Ae++,we++)Ae===se&&(Ae=0),we===se&&(we=0),L[ie]=q(fe[ie],fe[Ae],fe[we]);F.push(L),z=z.concat(L)}for(let j=0;j<_;j++){const ce=j/_,fe=g*Math.cos(ce*Math.PI/2),ie=y*Math.sin(ce*Math.PI/2)+E;for(let se=0,Ae=ee.length;se<Ae;se++){const we=re(ee[se],K[se],ie);pe(we.x,we.y,-fe)}for(let se=0,Ae=G.length;se<Ae;se++){const we=G[se];L=F[se];for(let Re=0,Le=we.length;Re<Le;Re++){const be=re(we[Re],L[Re],ie);pe(be.x,be.y,-fe)}}}const Y=y+E;for(let j=0;j<ne;j++){const ce=h?re(k[j],z[j],Y):k[j];T?(R.copy(M.normals[0]).multiplyScalar(ce.x),A.copy(M.binormals[0]).multiplyScalar(ce.y),O.copy(S[0]).add(R).add(A),pe(O.x,O.y,O.z)):pe(ce.x,ce.y,0)}for(let j=1;j<=c;j++)for(let ce=0;ce<ne;ce++){const fe=h?re(k[ce],z[ce],Y):k[ce];T?(R.copy(M.normals[j]).multiplyScalar(fe.x),A.copy(M.binormals[j]).multiplyScalar(fe.y),O.copy(S[j]).add(R).add(A),pe(O.x,O.y,O.z)):pe(fe.x,fe.y,d/c*j)}for(let j=_-1;j>=0;j--){const ce=j/_,fe=g*Math.cos(ce*Math.PI/2),ie=y*Math.sin(ce*Math.PI/2)+E;for(let se=0,Ae=ee.length;se<Ae;se++){const we=re(ee[se],K[se],ie);pe(we.x,we.y,d+fe)}for(let se=0,Ae=G.length;se<Ae;se++){const we=G[se];L=F[se];for(let Re=0,Le=we.length;Re<Le;Re++){const be=re(we[Re],L[Re],ie);T?pe(be.x,be.y+S[c-1].y,S[c-1].x+fe):pe(be.x,be.y,d+fe)}}}B(),J();function B(){const j=i.length/3;if(h){let ce=0,fe=ne*ce;for(let ie=0;ie<X;ie++){const se=U[ie];he(se[2]+fe,se[1]+fe,se[0]+fe)}ce=c+_*2,fe=ne*ce;for(let ie=0;ie<X;ie++){const se=U[ie];he(se[0]+fe,se[1]+fe,se[2]+fe)}}else{for(let ce=0;ce<X;ce++){const fe=U[ce];he(fe[2],fe[1],fe[0])}for(let ce=0;ce<X;ce++){const fe=U[ce];he(fe[0]+ne*c,fe[1]+ne*c,fe[2]+ne*c)}}r.addGroup(j,i.length/3-j,0)}function J(){const j=i.length/3;let ce=0;le(ee,ce),ce+=ee.length;for(let fe=0,ie=G.length;fe<ie;fe++){const se=G[fe];le(se,ce),ce+=se.length}r.addGroup(j,i.length/3-j,1)}function le(j,ce){let fe=j.length;for(;--fe>=0;){const ie=fe;let se=fe-1;se<0&&(se=j.length-1);for(let Ae=0,we=c+_*2;Ae<we;Ae++){const Re=ne*Ae,Le=ne*(Ae+1),be=ce+ie+Re,Ye=ce+se+Re,ue=ce+se+Le,oe=ce+ie+Le;Ee(be,Ye,ue,oe)}}}function pe(j,ce,fe){l.push(j),l.push(ce),l.push(fe)}function he(j,ce,fe){_e(j),_e(ce),_e(fe);const ie=i.length/3,se=v.generateTopUV(r,i,ie-3,ie-2,ie-1);te(se[0]),te(se[1]),te(se[2])}function Ee(j,ce,fe,ie){_e(j),_e(ce),_e(ie),_e(ce),_e(fe),_e(ie);const se=i.length/3,Ae=v.generateSideWallUV(r,i,se-6,se-3,se-2,se-1);te(Ae[0]),te(Ae[1]),te(Ae[3]),te(Ae[1]),te(Ae[2]),te(Ae[3])}function _e(j){i.push(l[j*3+0]),i.push(l[j*3+1]),i.push(l[j*3+2])}function te(j){s.push(j.x),s.push(j.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return XQ(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new pA[i.type]().fromJSON(i)),new V1(r,e.options)}}const qQ={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],u=e[i*3],c=e[i*3+1];return[new Je(s,o),new Je(a,l),new Je(u,c)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[r*3],c=e[r*3+1],d=e[r*3+2],h=e[i*3],g=e[i*3+1],y=e[i*3+2],E=e[s*3],_=e[s*3+1],m=e[s*3+2];return Math.abs(a-c)<Math.abs(o-u)?[new Je(o,1-l),new Je(u,1-d),new Je(h,1-y),new Je(E,1-m)]:[new Je(a,1-l),new Je(c,1-d),new Je(g,1-y),new Je(_,1-m)]}};function XQ(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class j1 extends tf{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new j1(e.radius,e.detail)}}class uv extends tf{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new uv(e.radius,e.detail)}}class W1 extends un{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],u=[],c=[];let d=e;const h=(t-e)/i,g=new de,y=new Je;for(let E=0;E<=i;E++){for(let _=0;_<=r;_++){const m=s+_/r*o;g.x=d*Math.cos(m),g.y=d*Math.sin(m),l.push(g.x,g.y,g.z),u.push(0,0,1),y.x=(g.x/t+1)/2,y.y=(g.y/t+1)/2,c.push(y.x,y.y)}d+=h}for(let E=0;E<i;E++){const _=E*(r+1);for(let m=0;m<r;m++){const v=m+_,S=v,T=v+r+1,M=v+r+2,A=v+1;a.push(S,T,A),a.push(T,M,A)}}this.setIndex(a),this.setAttribute("position",new Ct(l,3)),this.setAttribute("normal",new Ct(u,3)),this.setAttribute("uv",new Ct(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new W1(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class q1 extends un{constructor(e=new _d([new Je(0,.5),new Je(-.5,-.5),new Je(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(a,l,c),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new Ct(i,3)),this.setAttribute("normal",new Ct(s,3)),this.setAttribute("uv",new Ct(o,2));function u(c){const d=i.length/3,h=c.extractPoints(t);let g=h.shape;const y=h.holes;Ll.isClockWise(g)===!1&&(g=g.reverse());for(let _=0,m=y.length;_<m;_++){const v=y[_];Ll.isClockWise(v)===!0&&(y[_]=v.reverse())}const E=Ll.triangulateShape(g,y);for(let _=0,m=y.length;_<m;_++){const v=y[_];g=g.concat(v)}for(let _=0,m=g.length;_<m;_++){const v=g[_];i.push(v.x,v.y,0),s.push(0,0,1),o.push(v.x,v.y)}for(let _=0,m=E.length;_<m;_++){const v=E[_],S=v[0]+d,T=v[1]+d,M=v[2]+d;r.push(S,T,M),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return YQ(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new q1(r,e.curveSegments)}}function YQ(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class cv extends un{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let u=0;const c=[],d=new de,h=new de,g=[],y=[],E=[],_=[];for(let m=0;m<=r;m++){const v=[],S=m/r;let T=0;m===0&&o===0?T=.5/t:m===r&&l===Math.PI&&(T=-.5/t);for(let M=0;M<=t;M++){const A=M/t;d.x=-e*Math.cos(i+A*s)*Math.sin(o+S*a),d.y=e*Math.cos(o+S*a),d.z=e*Math.sin(i+A*s)*Math.sin(o+S*a),y.push(d.x,d.y,d.z),h.copy(d).normalize(),E.push(h.x,h.y,h.z),_.push(A+T,1-S),v.push(u++)}c.push(v)}for(let m=0;m<r;m++)for(let v=0;v<t;v++){const S=c[m][v+1],T=c[m][v],M=c[m+1][v],A=c[m+1][v+1];(m!==0||o>0)&&g.push(S,T,A),(m!==r-1||l<Math.PI)&&g.push(T,M,A)}this.setIndex(g),this.setAttribute("position",new Ct(y,3)),this.setAttribute("normal",new Ct(E,3)),this.setAttribute("uv",new Ct(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cv(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class X1 extends tf{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new X1(e.radius,e.detail)}}class Y1 extends un{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],u=[],c=new de,d=new de,h=new de;for(let g=0;g<=r;g++)for(let y=0;y<=i;y++){const E=y/i*s,_=g/r*Math.PI*2;d.x=(e+t*Math.cos(_))*Math.cos(E),d.y=(e+t*Math.cos(_))*Math.sin(E),d.z=t*Math.sin(_),a.push(d.x,d.y,d.z),c.x=e*Math.cos(E),c.y=e*Math.sin(E),h.subVectors(d,c).normalize(),l.push(h.x,h.y,h.z),u.push(y/i),u.push(g/r)}for(let g=1;g<=r;g++)for(let y=1;y<=i;y++){const E=(i+1)*g+y-1,_=(i+1)*(g-1)+y-1,m=(i+1)*(g-1)+y,v=(i+1)*g+y;o.push(E,_,v),o.push(_,m,v)}this.setIndex(o),this.setAttribute("position",new Ct(a,3)),this.setAttribute("normal",new Ct(l,3)),this.setAttribute("uv",new Ct(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Y1(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class K1 extends un{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],u=[],c=[],d=new de,h=new de,g=new de,y=new de,E=new de,_=new de,m=new de;for(let S=0;S<=r;++S){const T=S/r*s*Math.PI*2;v(T,s,o,e,g),v(T+.01,s,o,e,y),_.subVectors(y,g),m.addVectors(y,g),E.crossVectors(_,m),m.crossVectors(E,_),E.normalize(),m.normalize();for(let M=0;M<=i;++M){const A=M/i*Math.PI*2,R=-t*Math.cos(A),O=t*Math.sin(A);d.x=g.x+(R*m.x+O*E.x),d.y=g.y+(R*m.y+O*E.y),d.z=g.z+(R*m.z+O*E.z),l.push(d.x,d.y,d.z),h.subVectors(d,g).normalize(),u.push(h.x,h.y,h.z),c.push(S/r),c.push(M/i)}}for(let S=1;S<=r;S++)for(let T=1;T<=i;T++){const M=(i+1)*(S-1)+(T-1),A=(i+1)*S+(T-1),R=(i+1)*S+T,O=(i+1)*(S-1)+T;a.push(M,A,O),a.push(A,R,O)}this.setIndex(a),this.setAttribute("position",new Ct(l,3)),this.setAttribute("normal",new Ct(u,3)),this.setAttribute("uv",new Ct(c,2));function v(S,T,M,A,R){const O=Math.cos(S),I=Math.sin(S),k=M/T*S,G=Math.cos(k);R.x=A*(2+G)*.5*O,R.y=A*(2+G)*I*.5,R.z=A*Math.sin(k)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new K1(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Id extends un{constructor(e=new F1(new de(-1,-1,0),new de(-1,1,0),new de(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new de,l=new de,u=new Je;let c=new de;const d=[],h=[],g=[],y=[];E(),this.setIndex(y),this.setAttribute("position",new Ct(d,3)),this.setAttribute("normal",new Ct(h,3)),this.setAttribute("uv",new Ct(g,2));function E(){for(let S=0;S<t;S++)_(S);_(s===!1?t:0),v(),m()}function _(S){c=e.getPointAt(S/t,c);const T=o.normals[S],M=o.binormals[S];for(let A=0;A<=i;A++){const R=A/i*Math.PI*2,O=Math.sin(R),I=-Math.cos(R);l.x=I*T.x+O*M.x,l.y=I*T.y+O*M.y,l.z=I*T.z+O*M.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=c.x+r*l.x,a.y=c.y+r*l.y,a.z=c.z+r*l.z,d.push(a.x,a.y,a.z)}}function m(){for(let S=1;S<=t;S++)for(let T=1;T<=i;T++){const M=(i+1)*(S-1)+(T-1),A=(i+1)*S+(T-1),R=(i+1)*S+T,O=(i+1)*(S-1)+T;y.push(M,A,O),y.push(A,R,O)}}function v(){for(let S=0;S<=t;S++)for(let T=0;T<=i;T++)u.x=S/t,u.y=T/i,g.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Id(new pA[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class sF extends un{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new de,s=new de;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const d=l[u],h=d.start,g=d.count;for(let y=h,E=h+g;y<E;y+=3)for(let _=0;_<3;_++){const m=a.getX(y+_),v=a.getX(y+(_+1)%3);i.fromBufferAttribute(o,m),s.fromBufferAttribute(o,v),kI(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const c=3*a+u,d=3*a+(u+1)%3;i.fromBufferAttribute(o,c),s.fromBufferAttribute(o,d),kI(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ct(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function kI(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var UI=Object.freeze({__proto__:null,BoxGeometry:qu,CapsuleGeometry:z1,CircleGeometry:B1,ConeGeometry:H1,CylinderGeometry:Fd,DodecahedronGeometry:$1,EdgesGeometry:tF,ExtrudeGeometry:V1,IcosahedronGeometry:j1,LatheGeometry:lv,OctahedronGeometry:uv,PlaneGeometry:ef,PolyhedronGeometry:tf,RingGeometry:W1,ShapeGeometry:q1,SphereGeometry:cv,TetrahedronGeometry:X1,TorusGeometry:Y1,TorusKnotGeometry:K1,TubeGeometry:Id,WireframeGeometry:sF});class oF extends es{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new gt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class aF extends kl{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class mA extends es{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new gt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qc,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class lF extends mA{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Je(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return jr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new gt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new gt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new gt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class uF extends es{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new gt(16777215),this.specular=new gt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qc,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=iv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class cF extends es{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new gt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qc,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class fF extends es{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qc,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class dF extends es{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new gt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qc,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=iv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class hF extends es{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new gt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qc,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class pF extends Os{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function qo(n,e,t){return gA(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function hd(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function gA(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function mF(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function UT(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function yA(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function KQ(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],c=u.getValueSize(),d=[],h=[];for(let g=0;g<u.times.length;++g){const y=u.times[g]*i;if(!(y<t||y>=r)){d.push(u.times[g]);for(let E=0;E<c;++E)h.push(u.values[g*c+E])}}d.length!==0&&(u.times=hd(d,u.times.constructor),u.values=hd(h,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function JQ(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(m){return m.name===a.name&&m.ValueTypeName===l});if(u===void 0)continue;let c=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=d/3);let h=0;const g=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=g/3);const y=a.times.length-1;let E;if(s<=a.times[0]){const m=c,v=d-c;E=qo(a.values,m,v)}else if(s>=a.times[y]){const m=y*d+c,v=m+d-c;E=qo(a.values,m,v)}else{const m=a.createInterpolant(),v=c,S=d-c;m.evaluate(s),E=qo(m.resultBuffer,v,S)}l==="quaternion"&&new Qi().fromArray(E).normalize().conjugate().toArray(E);const _=u.times.length;for(let m=0;m<_;++m){const v=m*g+h;if(l==="quaternion")Qi.multiplyQuaternionsFlat(u.values,v,E,0,u.values,v);else{const S=g-h*2;for(let T=0;T<S;++T)u.values[v+T]-=E[T]}}}return n.blendMode=qM,n}const ZQ={arraySlice:qo,convertArray:hd,isTypedArray:gA,getKeyframeOrder:mF,sortedArray:UT,flattenJSON:yA,subclip:KQ,makeClipAdditive:JQ};class fv{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class gF extends fv{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:cd,endingEnd:cd}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case fd:s=e,a=2*t-r;break;case wy:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case fd:o=e,l=2*r-t;break;case wy:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const u=(r-t)*.5,c=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-r),this._offsetPrev=s*c,this._offsetNext=o*c}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,g=this._weightNext,y=(r-t)/(i-t),E=y*y,_=E*y,m=-h*_+2*h*E-h*y,v=(1+h)*_+(-1.5-2*h)*E+(-.5+h)*y+1,S=(-1-g)*_+(1.5+g)*E+.5*y,T=g*_-g*E;for(let M=0;M!==a;++M)s[M]=m*o[c+M]+v*o[u+M]+S*o[l+M]+T*o[d+M];return s}}class vA extends fv{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=(r-t)/(i-t),d=1-c;for(let h=0;h!==a;++h)s[h]=o[u+h]*d+o[l+h]*c;return s}}class yF extends fv{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ja{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=hd(t,this.TimeBufferType),this.values=hd(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:hd(e.times,Array),values:hd(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new yF(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new vA(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new gF(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case _y:t=this.InterpolantFactoryMethodDiscrete;break;case xy:t=this.InterpolantFactoryMethodLinear;break;case Mx:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return _y;case this.InterpolantFactoryMethodLinear:return xy;case this.InterpolantFactoryMethodSmooth:return Mx}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=qo(r,s,o),this.values=qo(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&gA(i))for(let a=0,l=i.length;a!==l;++a){const u=i[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=qo(this.times),t=qo(this.values),r=this.getValueSize(),i=this.getInterpolation()===Mx,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],c=e[a+1];if(u!==c&&(a!==1||u!==e[0]))if(i)l=!0;else{const d=a*r,h=d-r,g=d+r;for(let y=0;y!==r;++y){const E=t[d+y];if(E!==t[h+y]||E!==t[g+y]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*r,h=o*r;for(let g=0;g!==r;++g)t[h+g]=t[d+g]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,u=0;u!==r;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=qo(e,0,o),this.values=qo(t,0,o*r)):(this.times=e,this.values=t),this}clone(){const e=qo(this.times,0),t=qo(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Ja.prototype.TimeBufferType=Float32Array;Ja.prototype.ValueBufferType=Float32Array;Ja.prototype.DefaultInterpolation=xy;class zd extends Ja{}zd.prototype.ValueTypeName="bool";zd.prototype.ValueBufferType=Array;zd.prototype.DefaultInterpolation=_y;zd.prototype.InterpolantFactoryMethodLinear=void 0;zd.prototype.InterpolantFactoryMethodSmooth=void 0;class _A extends Ja{}_A.prototype.ValueTypeName="color";class Py extends Ja{}Py.prototype.ValueTypeName="number";class vF extends fv{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let u=e*a;for(let c=u+a;u!==c;u+=4)Qi.slerpFlat(s,0,o,u-a,o,u,l);return s}}class sm extends Ja{InterpolantFactoryMethodLinear(e){return new vF(this.times,this.values,this.getValueSize(),e)}}sm.prototype.ValueTypeName="quaternion";sm.prototype.DefaultInterpolation=xy;sm.prototype.InterpolantFactoryMethodSmooth=void 0;class Bd extends Ja{}Bd.prototype.ValueTypeName="string";Bd.prototype.ValueBufferType=Array;Bd.prototype.DefaultInterpolation=_y;Bd.prototype.InterpolantFactoryMethodLinear=void 0;Bd.prototype.InterpolantFactoryMethodSmooth=void 0;class Iy extends Ja{}Iy.prototype.ValueTypeName="vector";class Ly{constructor(e,t=-1,r,i=A1){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Eo(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(eee(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(Ja.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const c=mF(l);l=UT(l,1,c),u=UT(u,1,c),!i&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new Py(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],c=u.name.match(s);if(c&&c.length>1){const d=c[1];let h=i[d];h||(i[d]=h=[]),h.push(u)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(d,h,g,y,E){if(g.length!==0){const _=[],m=[];yA(g,_,m,y),_.length!==0&&E.push(new d(h,_,m))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let d=0;d<u.length;d++){const h=u[d].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const g={};let y;for(y=0;y<h.length;y++)if(h[y].morphTargets)for(let E=0;E<h[y].morphTargets.length;E++)g[h[y].morphTargets[E]]=-1;for(const E in g){const _=[],m=[];for(let v=0;v!==h[y].morphTargets.length;++v){const S=h[y];_.push(S.time),m.push(S.morphTarget===E?1:0)}i.push(new Py(".morphTargetInfluence["+E+"]",_,m))}l=g.length*o}else{const g=".bones["+t[d].name+"]";r(Iy,g+".position",h,"pos",i),r(sm,g+".quaternion",h,"rot",i),r(Iy,g+".scale",h,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function QQ(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Py;case"vector":case"vector2":case"vector3":case"vector4":return Iy;case"color":return _A;case"quaternion":return sm;case"bool":case"boolean":return zd;case"string":return Bd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function eee(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=QQ(n.type);if(n.times===void 0){const t=[],r=[];yA(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Ld={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class xA{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(c){a++,s===!1&&i.onStart!==void 0&&i.onStart(c,o,a),s=!0},this.itemEnd=function(c){o++,i.onProgress!==void 0&&i.onProgress(c,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,d){return u.push(c,d),this},this.removeHandler=function(c){const d=u.indexOf(c);return d!==-1&&u.splice(d,2),this},this.getHandler=function(c){for(let d=0,h=u.length;d<h;d+=2){const g=u[d],y=u[d+1];if(g.global&&(g.lastIndex=0),g.test(c))return y}return null}}}const _F=new xA;class ro{constructor(e){this.manager=e!==void 0?e:_F,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ro.DEFAULT_MATERIAL_NAME="__DEFAULT";const Tu={};class tee extends Error{constructor(e,t){super(e),this.response=t}}class $u extends ro{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Ld.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Tu[e]!==void 0){Tu[e].push({onLoad:t,onProgress:r,onError:i});return}Tu[e]=[],Tu[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=Tu[e],d=u.body.getReader(),h=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),g=h?parseInt(h):0,y=g!==0;let E=0;const _=new ReadableStream({start(m){v();function v(){d.read().then(({done:S,value:T})=>{if(S)m.close();else{E+=T.byteLength;const M=new ProgressEvent("progress",{lengthComputable:y,loaded:E,total:g});for(let A=0,R=c.length;A<R;A++){const O=c[A];O.onProgress&&O.onProgress(M)}m.enqueue(T),v()}})}}});return new Response(_)}else throw new tee(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,a));case"json":return u.json();default:if(a===void 0)return u.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),h=d&&d[1]?d[1].toLowerCase():void 0,g=new TextDecoder(h);return u.arrayBuffer().then(y=>g.decode(y))}}}).then(u=>{Ld.add(e,u);const c=Tu[e];delete Tu[e];for(let d=0,h=c.length;d<h;d++){const g=c[d];g.onLoad&&g.onLoad(u)}}).catch(u=>{const c=Tu[e];if(c===void 0)throw this.manager.itemError(e),u;delete Tu[e];for(let d=0,h=c.length;d<h;d++){const g=c[d];g.onError&&g.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class nee extends ro{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new $u(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=Ly.parse(e[r]);t.push(i)}return t}}class ree extends ro{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new lA,l=new $u(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function c(d){l.load(e[d],function(h){const g=s.parse(h,!0);o[d]={width:g.width,height:g.height,format:g.format,mipmaps:g.mipmaps},u+=1,u===6&&(g.mipmapCount===1&&(a.minFilter=br),a.image=o,a.format=g.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let d=0,h=e.length;d<h;++d)c(d);else l.load(e,function(d){const h=s.parse(d,!0);if(h.isCubemap){const g=h.mipmaps.length/h.mipmapCount;for(let y=0;y<g;y++){o[y]={mipmaps:[]};for(let E=0;E<h.mipmapCount;E++)o[y].mipmaps.push(h.mipmaps[y*h.mipmapCount+E]),o[y].format=h.format,o[y].width=h.width,o[y].height=h.height}a.image=o}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;h.mipmapCount===1&&(a.minFilter=br),a.format=h.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class Ny extends ro{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ld.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=by("img");function l(){c(),Ld.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(d){c(),i&&i(d),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class iee extends ro{constructor(e){super(e)}load(e,t,r,i){const s=new ov;s.colorSpace=an;const o=new Ny(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(c){s.images[u]=c,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return s}}class see extends ro{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Ip,a=new $u(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const u=s.parse(l);u&&(u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:hs,o.wrapT=u.wrapT!==void 0?u.wrapT:hs,o.magFilter=u.magFilter!==void 0?u.magFilter:br,o.minFilter=u.minFilter!==void 0?u.minFilter:br,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0?o.colorSpace=u.colorSpace:u.encoding!==void 0&&(o.encoding=u.encoding),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=Xc),u.mipmapCount===1&&(o.minFilter=br),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u))},r,i),o}}class xF extends ro{constructor(e){super(e)}load(e,t,r,i){const s=new Fr,o=new Ny(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class nf extends Bn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new gt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class wF extends nf{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Bn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new gt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const nE=new Qt,FI=new de,zI=new de;class wA{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Je(512,512),this.map=null,this.mapPass=null,this.matrix=new Qt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new av,this._frameExtents=new Je(1,1),this._viewportCount=1,this._viewports=[new zn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;FI.setFromMatrixPosition(e.matrixWorld),t.position.copy(FI),zI.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(zI),t.updateMatrixWorld(),nE.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(nE),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(nE)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class oee extends wA{constructor(){super(new mi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=zp*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class SF extends nf{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Bn.DEFAULT_UP),this.updateMatrix(),this.target=new Bn,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new oee}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const BI=new Qt,gg=new de,rE=new de;class aee extends wA{constructor(){super(new mi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Je(4,2),this._viewportCount=6,this._viewports=[new zn(2,1,1,1),new zn(0,1,1,1),new zn(3,1,1,1),new zn(1,1,1,1),new zn(3,0,1,1),new zn(1,0,1,1)],this._cubeDirections=[new de(1,0,0),new de(-1,0,0),new de(0,0,1),new de(0,0,-1),new de(0,1,0),new de(0,-1,0)],this._cubeUps=[new de(0,1,0),new de(0,1,0),new de(0,1,0),new de(0,1,0),new de(0,0,1),new de(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),gg.setFromMatrixPosition(e.matrixWorld),r.position.copy(gg),rE.copy(r.position),rE.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(rE),r.updateMatrixWorld(),i.makeTranslation(-gg.x,-gg.y,-gg.z),BI.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(BI)}}class EF extends nf{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new aee}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class lee extends wA{constructor(){super(new Ud(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class bF extends nf{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Bn.DEFAULT_UP),this.updateMatrix(),this.target=new Bn,this.shadow=new lee}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class TF extends nf{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class MF extends nf{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class AF{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new de)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class J1 extends nf{constructor(e=new AF,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Z1 extends ro{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new $u(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=Z1.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new gt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new gt().setHex(o.value);break;case"v2":i.uniforms[s].value=new Je().fromArray(o.value);break;case"v3":i.uniforms[s].value=new de().fromArray(o.value);break;case"v4":i.uniforms[s].value=new zn().fromArray(o.value);break;case"m3":i.uniforms[s].value=new fn().fromArray(o.value);break;case"m4":i.uniforms[s].value=new Qt().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Je().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Je().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:oF,SpriteMaterial:sA,RawShaderMaterial:aF,ShaderMaterial:kl,PointsMaterial:aA,MeshPhysicalMaterial:lF,MeshStandardMaterial:mA,MeshPhongMaterial:uF,MeshToonMaterial:cF,MeshNormalMaterial:fF,MeshLambertMaterial:dF,MeshDepthMaterial:P1,MeshDistanceMaterial:I1,MeshBasicMaterial:Wu,MeshMatcapMaterial:hF,LineDashedMaterial:pF,LineBasicMaterial:Os,Material:es};return new t[e]}}class FT{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class SA extends un{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class CF extends ro{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new $u(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(g,y){if(t[y]!==void 0)return t[y];const _=g.interleavedBuffers[y],m=s(g,_.buffer),v=Sp(_.type,m),S=new O1(v,_.stride);return S.uuid=_.uuid,t[y]=S,S}function s(g,y){if(r[y]!==void 0)return r[y];const _=g.arrayBuffers[y],m=new Uint32Array(_).buffer;return r[y]=m,m}const o=e.isInstancedBufferGeometry?new SA:new un,a=e.data.index;if(a!==void 0){const g=Sp(a.type,a.array);o.setIndex(new Kn(g,1))}const l=e.data.attributes;for(const g in l){const y=l[g];let E;if(y.isInterleavedBufferAttribute){const _=i(e.data,y.data);E=new Cd(_,y.itemSize,y.offset,y.normalized)}else{const _=Sp(y.type,y.array),m=y.isInstancedBufferAttribute?Rd:Kn;E=new m(_,y.itemSize,y.normalized)}y.name!==void 0&&(E.name=y.name),y.usage!==void 0&&E.setUsage(y.usage),y.updateRange!==void 0&&(E.updateRange.offset=y.updateRange.offset,E.updateRange.count=y.updateRange.count),o.setAttribute(g,E)}const u=e.data.morphAttributes;if(u)for(const g in u){const y=u[g],E=[];for(let _=0,m=y.length;_<m;_++){const v=y[_];let S;if(v.isInterleavedBufferAttribute){const T=i(e.data,v.data);S=new Cd(T,v.itemSize,v.offset,v.normalized)}else{const T=Sp(v.type,v.array);S=new Kn(T,v.itemSize,v.normalized)}v.name!==void 0&&(S.name=v.name),E.push(S)}o.morphAttributes[g]=E}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let g=0,y=d.length;g!==y;++g){const E=d[g];o.addGroup(E.start,E.count,E.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const g=new de;h.center!==void 0&&g.fromArray(h.center),o.boundingSphere=new Ao(g,h.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class uee extends ro{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?FT.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new $u(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(d){i!==void 0&&i(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?FT.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new $u(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,r),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),t!==void 0){let d=!1;for(const h in o)if(o[h].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new _d().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new D1().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new CF;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in UI?a=UI[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new Z1;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=Ly.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return o(c)}else return l.data?{data:Sp(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new xA(t);s=new Ny(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const d=e[u],h=d.url;if(Array.isArray(h)){const g=[];for(let y=0,E=h.length;y<E;y++){const _=h[y],m=a(_);m!==null&&(m instanceof HTMLImageElement?g.push(m):g.push(new Ip(m.data,m.width,m.height)))}i[d.uuid]=new dd(g)}else{const g=a(d.url);i[d.uuid]=new dd(g)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:Sp(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new Ny(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const c=[];for(let d=0,h=u.length;d<h;d++){const g=u[d],y=await s(g);y!==null&&(y instanceof HTMLImageElement?c.push(y):c.push(new Ip(y.data,y.width,y.height)))}r[l.uuid]=new dd(c)}else{const c=await s(l.url);r[l.uuid]=new dd(c)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let c;Array.isArray(u)?(c=new ov,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new Ip:c=new Fr,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=a.uuid,a.name!==void 0&&(c.name=a.name),a.mapping!==void 0&&(c.mapping=r(a.mapping,cee)),a.channel!==void 0&&(c.channel=a.channel),a.offset!==void 0&&c.offset.fromArray(a.offset),a.repeat!==void 0&&c.repeat.fromArray(a.repeat),a.center!==void 0&&c.center.fromArray(a.center),a.rotation!==void 0&&(c.rotation=a.rotation),a.wrap!==void 0&&(c.wrapS=r(a.wrap[0],HI),c.wrapT=r(a.wrap[1],HI)),a.format!==void 0&&(c.format=a.format),a.internalFormat!==void 0&&(c.internalFormat=a.internalFormat),a.type!==void 0&&(c.type=a.type),a.colorSpace!==void 0&&(c.colorSpace=a.colorSpace),a.encoding!==void 0&&(c.encoding=a.encoding),a.minFilter!==void 0&&(c.minFilter=r(a.minFilter,$I)),a.magFilter!==void 0&&(c.magFilter=r(a.magFilter,$I)),a.anisotropy!==void 0&&(c.anisotropy=a.anisotropy),a.flipY!==void 0&&(c.flipY=a.flipY),a.generateMipmaps!==void 0&&(c.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(c.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(c.compareFunction=a.compareFunction),a.userData!==void 0&&(c.userData=a.userData),i[a.uuid]=c}return i}parseObject(e,t,r,i,s){let o;function a(h){return t[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),t[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const g=[];for(let y=0,E=h.length;y<E;y++){const _=h[y];r[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),g.push(r[_])}return g}return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),r[h]}}function u(h){return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),i[h]}let c,d;switch(e.type){case"Scene":o=new Ty,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new gt(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new N1(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new L1(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new mi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Ud(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new TF(e.color,e.intensity);break;case"DirectionalLight":o=new bF(e.color,e.intensity);break;case"PointLight":o=new EF(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new MF(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new SF(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new wF(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new J1().fromJSON(e);break;case"SkinnedMesh":c=a(e.geometry),d=l(e.material),o=new qU(c,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":c=a(e.geometry),d=l(e.material),o=new Or(c,d);break;case"InstancedMesh":c=a(e.geometry),d=l(e.material);const h=e.count,g=e.instanceMatrix,y=e.instanceColor;o=new XU(c,d,h),o.instanceMatrix=new Rd(new Float32Array(g.array),16),y!==void 0&&(o.instanceColor=new Rd(new Float32Array(y.array),y.itemSize));break;case"LOD":o=new WU;break;case"Line":o=new Kc(a(e.geometry),l(e.material));break;case"LineLoop":o=new YU(a(e.geometry),l(e.material));break;case"LineSegments":o=new Bl(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new KU(a(e.geometry),l(e.material));break;case"Sprite":o=new jU(l(e.material));break;case"Group":o=new bp;break;case"Bone":o=new oA;break;default:o=new Bn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let g=0;g<h.length;g++)o.add(this.parseObject(h[g],t,r,i,s))}if(e.animations!==void 0){const h=e.animations;for(let g=0;g<h.length;g++){const y=h[g];o.animations.push(s[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const h=e.levels;for(let g=0;g<h.length;g++){const y=h[g],E=o.getObjectByProperty("uuid",y.object);E!==void 0&&o.addLevel(E,y.distance,y.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const cee={UVMapping:T1,CubeReflectionMapping:Wc,CubeRefractionMapping:qc,EquirectangularReflectionMapping:my,EquirectangularRefractionMapping:gy,CubeUVReflectionMapping:nm},HI={RepeatWrapping:yy,ClampToEdgeWrapping:hs,MirroredRepeatWrapping:vy},$I={NearestFilter:ei,NearestMipmapNearestFilter:Vx,NearestMipmapLinearFilter:ey,LinearFilter:br,LinearMipmapNearestFilter:BM,LinearMipmapLinearFilter:Xc};class fee extends ro{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ld.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Ld.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let F_;class EA{static getContext(){return F_===void 0&&(F_=new(window.AudioContext||window.webkitAudioContext)),F_}static setContext(e){F_=e}}class dee extends ro{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new $u(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);EA.getContext().decodeAudioData(u,function(d){t(d)},a)}catch(u){a(u)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}class hee extends J1{constructor(e,t,r=1){super(void 0,r),this.isHemisphereLightProbe=!0;const i=new gt().set(e),s=new gt().set(t),o=new de(i.r,i.g,i.b),a=new de(s.r,s.g,s.b),l=Math.sqrt(Math.PI),u=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}}class pee extends J1{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const r=new gt().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const GI=new Qt,VI=new Qt,jf=new Qt;class mee{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new mi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new mi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,jf.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(yd*t.fov*.5)/t.zoom;let a,l;VI.elements[12]=-i,GI.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,jf.elements[0]=2*t.near/(l-a),jf.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(jf),a=-o*t.aspect-s,l=o*t.aspect-s,jf.elements[0]=2*t.near/(l-a),jf.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(jf)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(VI),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(GI)}}class bA{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=jI(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=jI();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function jI(){return(typeof performance>"u"?Date:performance).now()}const Wf=new de,WI=new Qi,gee=new de,qf=new de;class yee extends Bn{constructor(){super(),this.type="AudioListener",this.context=EA.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new bA}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Wf,WI,gee),qf.set(0,0,-1).applyQuaternion(WI),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Wf.x,i),t.positionY.linearRampToValueAtTime(Wf.y,i),t.positionZ.linearRampToValueAtTime(Wf.z,i),t.forwardX.linearRampToValueAtTime(qf.x,i),t.forwardY.linearRampToValueAtTime(qf.y,i),t.forwardZ.linearRampToValueAtTime(qf.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Wf.x,Wf.y,Wf.z),t.setOrientation(qf.x,qf.y,qf.z,r.x,r.y,r.z)}}class RF extends Bn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Xf=new de,qI=new Qi,vee=new de,Yf=new de;class _ee extends RF{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Xf,qI,vee),Yf.set(0,0,1).applyQuaternion(qI);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Xf.x,r),t.positionY.linearRampToValueAtTime(Xf.y,r),t.positionZ.linearRampToValueAtTime(Xf.z,r),t.orientationX.linearRampToValueAtTime(Yf.x,r),t.orientationY.linearRampToValueAtTime(Yf.y,r),t.orientationZ.linearRampToValueAtTime(Yf.z,r)}else t.setPosition(Xf.x,Xf.y,Xf.z),t.setOrientation(Yf.x,Yf.y,Yf.z)}}class xee{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class PF{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){Qi.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;Qi.multiplyQuaternionsFlat(e,o,e,t,e,r),Qi.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const TA="\\[\\]\\.:\\/",wee=new RegExp("["+TA+"]","g"),MA="[^"+TA+"]",See="[^"+TA.replace("\\.","")+"]",Eee=/((?:WC+[\/:])*)/.source.replace("WC",MA),bee=/(WCOD+)?/.source.replace("WCOD",See),Tee=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",MA),Mee=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",MA),Aee=new RegExp("^"+Eee+bee+Tee+Mee+"$"),Cee=["material","materials","bones","map"];class Ree{constructor(e,t,r){const i=r||Nn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class Nn{constructor(e,t,r){this.path=t,this.parsedPath=r||Nn.parseTrackName(t),this.node=Nn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Nn.Composite(e,t,r):new Nn(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(wee,"")}static parseTrackName(e){const t=Aee.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);Cee.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=Nn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let u=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[i];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Nn.Composite=Ree;Nn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Nn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Nn.prototype.GetterByBindingType=[Nn.prototype._getValue_direct,Nn.prototype._getValue_array,Nn.prototype._getValue_arrayElement,Nn.prototype._getValue_toArray];Nn.prototype.SetterByBindingTypeAndVersioning=[[Nn.prototype._setValue_direct,Nn.prototype._setValue_direct_setNeedsUpdate,Nn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Nn.prototype._setValue_array,Nn.prototype._setValue_array_setNeedsUpdate,Nn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Nn.prototype._setValue_arrayElement,Nn.prototype._setValue_arrayElement_setNeedsUpdate,Nn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Nn.prototype._setValue_fromArray,Nn.prototype._setValue_fromArray_setNeedsUpdate,Nn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Pee{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Eo(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let c=0,d=arguments.length;c!==d;++c){const h=arguments[c],g=h.uuid;let y=t[g];if(y===void 0){y=l++,t[g]=y,e.push(h);for(let E=0,_=o;E!==_;++E)s[E].push(new Nn(h,r[E],i[E]))}else if(y<u){a=e[y];const E=--u,_=e[E];t[_.uuid]=y,e[y]=_,t[g]=E,e[E]=h;for(let m=0,v=o;m!==v;++m){const S=s[m],T=S[E];let M=S[y];S[y]=T,M===void 0&&(M=new Nn(h,r[m],i[m])),S[E]=M}}else e[y]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,c=t[u];if(c!==void 0&&c>=s){const d=s++,h=e[d];t[h.uuid]=c,e[c]=h,t[u]=d,e[d]=l;for(let g=0,y=i;g!==y;++g){const E=r[g],_=E[d],m=E[c];E[c]=_,E[d]=m}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],c=u.uuid,d=t[c];if(d!==void 0)if(delete t[c],d<s){const h=--s,g=e[h],y=--o,E=e[y];t[g.uuid]=d,e[d]=g,t[E.uuid]=h,e[h]=E,e.pop();for(let _=0,m=i;_!==m;++_){const v=r[_],S=v[h],T=v[y];v[d]=S,v[h]=T,v.pop()}}else{const h=--o,g=e[h];h>0&&(t[g.uuid]=d),e[d]=g,e.pop();for(let y=0,E=i;y!==E;++y){const _=r[y];_[d]=_[h],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,c=this.nCachedObjects_,d=new Array(u);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(d);for(let h=c,g=l.length;h!==g;++h){const y=l[h];d[h]=new Nn(y,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class IF{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:cd,endingEnd:cd};for(let u=0;u!==o;++u){const c=s[u].createInterpolant(null);a[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=gU,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+r,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case qM:for(let c=0,d=l.length;c!==d;++c)l[c].evaluate(o),u[c].accumulateAdditive(a);break;case A1:default:for(let c=0,d=l.length;c!==d;++c)l[c].evaluate(o),u[c].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===yU;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===mU){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=fd,i.endingEnd=fd):(e?i.endingStart=this.zeroSlopeAtStart?fd:cd:i.endingStart=wy,t?i.endingEnd=this.zeroSlopeAtEnd?fd:cd:i.endingEnd=wy)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const Iee=new Float32Array(1);class Lee extends ju{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let d=0;d!==s;++d){const h=i[d],g=h.name;let y=c[g];if(y!==void 0)++y.referenceCount,o[d]=y;else{if(y=o[d],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,l,g));continue}const E=t&&t._propertyBindings[d].binding.parsedPath;y=new PF(Nn.create(r,g,E),h.ValueTypeName,h.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,l,g),o[d]=y}a[d].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete d[h],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new vA(new Float32Array(2),new Float32Array(2),1,Iee),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?Ly.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(r===void 0&&(o!==null?r=o.blendMode:r=A1),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===r)return d;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const c=new IF(this,o,t,r);return this._bindAction(c,u),this._addInactiveAction(c,a,s),c}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?Ly.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==r;++u)t[u]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const c=u._cacheIndex,d=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,d._cacheIndex=c,t[c]=d,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class AA{constructor(e){this.value=e}clone(){return new AA(this.value.clone===void 0?this.value:this.value.clone())}}let Nee=0;class Oee extends ju{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Nee++}),this.name="",this.usage=Sy,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++)this.uniforms.push(t[r].clone());return this}clone(){return new this.constructor().copy(this)}}class Dee extends O1{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class kee{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class CA{constructor(e,t,r=0,i=1/0){this.ray=new rm(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new vd,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return zT(e,this,r,t),r.sort(XI),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)zT(e[i],this,r,t);return r.sort(XI),r}}function XI(n,e){return n.distance-e.distance}function zT(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)zT(i[s],e,t,!0)}}class LF{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(jr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Uee{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const YI=new Je;class Fee{constructor(e=new Je(1/0,1/0),t=new Je(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=YI.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,YI).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const KI=new de,z_=new de;class zee{constructor(e=new de,t=new de){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){KI.subVectors(e,this.start),z_.subVectors(this.end,this.start);const r=z_.dot(z_);let s=z_.dot(KI)/r;return t&&(s=jr(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const JI=new de;class Bee extends Bn{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new un,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,c=a/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}r.setAttribute("position",new Ct(i,3));const s=new Os({fog:!1,toneMapped:!1});this.cone=new Bl(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),JI.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(JI),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Lc=new de,B_=new Qt,iE=new Qt;class Hee extends Bl{constructor(e){const t=NF(e),r=new un,i=[],s=[],o=new gt(0,0,1),a=new gt(0,1,0);for(let u=0;u<t.length;u++){const c=t[u];c.parent&&c.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new Ct(i,3)),r.setAttribute("color",new Ct(s,3));const l=new Os({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");iE.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(B_.multiplyMatrices(iE,a.matrixWorld),Lc.setFromMatrixPosition(B_),i.setXYZ(o,Lc.x,Lc.y,Lc.z),B_.multiplyMatrices(iE,a.parent.matrixWorld),Lc.setFromMatrixPosition(B_),i.setXYZ(o+1,Lc.x,Lc.y,Lc.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function NF(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,NF(n.children[t]));return e}class $ee extends Or{constructor(e,t,r){const i=new cv(t,4,2),s=new Wu({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Gee=new de,ZI=new gt,QI=new gt;class Vee extends Bn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new uv(t);i.rotateY(Math.PI*.5),this.material=new Wu({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Kn(o,3)),this.add(new Or(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");ZI.copy(this.light.color),QI.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?ZI:QI;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Gee.setFromMatrixPosition(this.light.matrixWorld).negate())}}class jee extends Bl{constructor(e=10,t=10,r=4473924,i=8947848){r=new gt(r),i=new gt(i);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let h=0,g=0,y=-a;h<=t;h++,y+=o){l.push(-a,0,y,a,0,y),l.push(y,0,-a,y,0,a);const E=h===s?r:i;E.toArray(u,g),g+=3,E.toArray(u,g),g+=3,E.toArray(u,g),g+=3,E.toArray(u,g),g+=3}const c=new un;c.setAttribute("position",new Ct(l,3)),c.setAttribute("color",new Ct(u,3));const d=new Os({vertexColors:!0,toneMapped:!1});super(c,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Wee extends Bl{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new gt(s),o=new gt(o);const a=[],l=[];if(t>1)for(let d=0;d<t;d++){const h=d/t*(Math.PI*2),g=Math.sin(h)*e,y=Math.cos(h)*e;a.push(0,0,0),a.push(g,0,y);const E=d&1?s:o;l.push(E.r,E.g,E.b),l.push(E.r,E.g,E.b)}for(let d=0;d<r;d++){const h=d&1?s:o,g=e-e/r*d;for(let y=0;y<i;y++){let E=y/i*(Math.PI*2),_=Math.sin(E)*g,m=Math.cos(E)*g;a.push(_,0,m),l.push(h.r,h.g,h.b),E=(y+1)/i*(Math.PI*2),_=Math.sin(E)*g,m=Math.cos(E)*g,a.push(_,0,m),l.push(h.r,h.g,h.b)}}const u=new un;u.setAttribute("position",new Ct(a,3)),u.setAttribute("color",new Ct(l,3));const c=new Os({vertexColors:!0,toneMapped:!1});super(u,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const eL=new de,H_=new de,tL=new de;class qee extends Bn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new un;i.setAttribute("position",new Ct([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Os({fog:!1,toneMapped:!1});this.lightPlane=new Kc(i,s),this.add(this.lightPlane),i=new un,i.setAttribute("position",new Ct([0,0,0,0,0,1],3)),this.targetLine=new Kc(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),eL.setFromMatrixPosition(this.light.matrixWorld),H_.setFromMatrixPosition(this.light.target.matrixWorld),tL.subVectors(H_,eL),this.lightPlane.lookAt(H_),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(H_),this.targetLine.scale.z=tL.length()}}const $_=new de,Vr=new sv;class Xee extends Bl{constructor(e){const t=new un,r=new Os({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(y,E){l(y),l(E)}function l(y){i.push(0,0,0),s.push(0,0,0),o[y]===void 0&&(o[y]=[]),o[y].push(i.length/3-1)}t.setAttribute("position",new Ct(i,3)),t.setAttribute("color",new Ct(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new gt(16755200),c=new gt(16711680),d=new gt(43775),h=new gt(16777215),g=new gt(3355443);this.setColors(u,c,d,h,g)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;Vr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Qr("c",t,e,Vr,0,0,-1),Qr("t",t,e,Vr,0,0,1),Qr("n1",t,e,Vr,-1,-1,-1),Qr("n2",t,e,Vr,r,-1,-1),Qr("n3",t,e,Vr,-1,i,-1),Qr("n4",t,e,Vr,r,i,-1),Qr("f1",t,e,Vr,-1,-1,1),Qr("f2",t,e,Vr,r,-1,1),Qr("f3",t,e,Vr,-1,i,1),Qr("f4",t,e,Vr,r,i,1),Qr("u1",t,e,Vr,r*.7,i*1.1,-1),Qr("u2",t,e,Vr,-1*.7,i*1.1,-1),Qr("u3",t,e,Vr,0,i*2,-1),Qr("cf1",t,e,Vr,-1,0,1),Qr("cf2",t,e,Vr,r,0,1),Qr("cf3",t,e,Vr,0,-1,1),Qr("cf4",t,e,Vr,0,i,1),Qr("cn1",t,e,Vr,-1,0,-1),Qr("cn2",t,e,Vr,r,0,-1),Qr("cn3",t,e,Vr,0,-1,-1),Qr("cn4",t,e,Vr,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Qr(n,e,t,r,i,s,o){$_.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,c=a.length;u<c;u++)l.setXYZ(a[u],$_.x,$_.y,$_.z)}}const G_=new Mo;class Yee extends Bl{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new un;s.setIndex(new Kn(r,1)),s.setAttribute("position",new Kn(i,3)),super(s,new Os({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&G_.setFromObject(this.object),G_.isEmpty())return;const t=G_.min,r=G_.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Kee extends Bl{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new un;s.setIndex(new Kn(r,1)),s.setAttribute("position",new Ct(i,3)),super(s,new Os({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Jee extends Kc{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new un;o.setAttribute("position",new Ct(s,3)),o.computeBoundingSphere(),super(o,new Os({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new un;l.setAttribute("position",new Ct(a,3)),l.computeBoundingSphere(),this.add(new Or(l,new Wu({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const nL=new de;let V_,sE;class Zee extends Bn{constructor(e=new de(0,0,1),t=new de(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",V_===void 0&&(V_=new un,V_.setAttribute("position",new Ct([0,0,0,0,1,0],3)),sE=new Fd(0,.5,1,5,1),sE.translate(0,-.5,0)),this.position.copy(t),this.line=new Kc(V_,new Os({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Or(sE,new Wu({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{nL.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(nL,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Qee extends Bl{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new un;i.setAttribute("position",new Ct(t,3)),i.setAttribute("color",new Ct(r,3));const s=new Os({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new gt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ete{constructor(){this.type="ShapePath",this.color=new gt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new My,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(m){const v=[];for(let S=0,T=m.length;S<T;S++){const M=m[S],A=new _d;A.curves=M.curves,v.push(A)}return v}function r(m,v){const S=v.length;let T=!1;for(let M=S-1,A=0;A<S;M=A++){let R=v[M],O=v[A],I=O.x-R.x,k=O.y-R.y;if(Math.abs(k)>Number.EPSILON){if(k<0&&(R=v[A],I=-I,O=v[M],k=-k),m.y<R.y||m.y>O.y)continue;if(m.y===R.y){if(m.x===R.x)return!0}else{const G=k*(m.x-R.x)-I*(m.y-R.y);if(G===0)return!0;if(G<0)continue;T=!T}}else{if(m.y!==R.y)continue;if(O.x<=m.x&&m.x<=R.x||R.x<=m.x&&m.x<=O.x)return!0}}return T}const i=Ll.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new _d,l.curves=a.curves,u.push(l),u;let c=!i(s[0].getPoints());c=e?!c:c;const d=[],h=[];let g=[],y=0,E;h[y]=void 0,g[y]=[];for(let m=0,v=s.length;m<v;m++)a=s[m],E=a.getPoints(),o=i(E),o=e?!o:o,o?(!c&&h[y]&&y++,h[y]={s:new _d,p:E},h[y].s.curves=a.curves,c&&y++,g[y]=[]):g[y].push({h:a,p:E[0]});if(!h[0])return t(s);if(h.length>1){let m=!1,v=0;for(let S=0,T=h.length;S<T;S++)d[S]=[];for(let S=0,T=h.length;S<T;S++){const M=g[S];for(let A=0;A<M.length;A++){const R=M[A];let O=!0;for(let I=0;I<h.length;I++)r(R.p,h[I].p)&&(S!==I&&v++,O?(O=!1,d[I].push(R)):m=!0);O&&d[S].push(R)}}v>0&&m===!1&&(g=d)}let _;for(let m=0,v=h.length;m<v;m++){l=h[m].s,u.push(l),_=g[m];for(let S=0,T=_.length;S<T;S++)l.holes.push(_[S].h)}return u}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:E1}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=E1);const OF=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:zM,AddEquation:od,AddOperation:tU,AdditiveAnimationBlendMode:qM,AdditiveBlending:nT,AlphaFormat:lU,AlwaysCompare:CU,AlwaysDepth:X3,AlwaysStencilFunc:xU,AmbientLight:TF,AmbientLightProbe:pee,AnimationAction:IF,AnimationClip:Ly,AnimationLoader:nee,AnimationMixer:Lee,AnimationObjectGroup:Pee,AnimationUtils:ZQ,ArcCurve:JU,ArrayCamera:HU,ArrowHelper:Zee,Audio:RF,AudioAnalyser:xee,AudioContext:EA,AudioListener:yee,AudioLoader:dee,AxesHelper:Qee,BackSide:ps,BasicDepthPacking:vU,BasicShadowMap:O3,Bone:oA,BooleanKeyframeTrack:zd,Box2:Fee,Box3:Mo,Box3Helper:Kee,BoxGeometry:qu,BoxHelper:Yee,BufferAttribute:Kn,BufferGeometry:un,BufferGeometryLoader:CF,ByteType:oU,Cache:Ld,Camera:sv,CameraHelper:Xee,CanvasTexture:SQ,CapsuleGeometry:z1,CatmullRomCurve3:ZU,CineonToneMapping:iU,CircleGeometry:B1,ClampToEdgeWrapping:hs,Clock:bA,Color:gt,ColorKeyframeTrack:_A,ColorManagement:Wo,CompressedArrayTexture:wQ,CompressedTexture:lA,CompressedTextureLoader:ree,ConeGeometry:H1,CubeCamera:NU,CubeReflectionMapping:Wc,CubeRefractionMapping:qc,CubeTexture:ov,CubeTextureLoader:iee,CubeUVReflectionMapping:nm,CubicBezierCurve:cA,CubicBezierCurve3:QU,CubicInterpolant:gF,CullFaceBack:tT,CullFaceFront:N3,CullFaceFrontBack:gq,CullFaceNone:L3,Curve:Ka,CurvePath:eF,CustomBlending:D3,CustomToneMapping:sU,CylinderGeometry:Fd,Cylindrical:Uee,Data3DTexture:QM,DataArrayTexture:C1,DataTexture:Ip,DataTextureLoader:see,DataUtils:CX,DecrementStencilOp:Cq,DecrementWrapStencilOp:Pq,DefaultLoadingManager:_F,DepthFormat:Hc,DepthStencilFormat:Ad,DepthTexture:$U,DirectionalLight:bF,DirectionalLightHelper:qee,DiscreteInterpolant:yF,DisplayP3ColorSpace:KM,DodecahedronGeometry:$1,DoubleSide:Lr,DstAlphaFactor:$3,DstColorFactor:V3,DynamicCopyUsage:jq,DynamicDrawUsage:zq,DynamicReadUsage:$q,EdgesGeometry:tF,EllipseCurve:k1,EqualCompare:EU,EqualDepth:K3,EqualStencilFunc:Oq,EquirectangularReflectionMapping:my,EquirectangularRefractionMapping:gy,Euler:Yc,EventDispatcher:ju,ExtrudeGeometry:V1,FileLoader:$u,Float16BufferAttribute:OX,Float32BufferAttribute:Ct,Float64BufferAttribute:DX,FloatType:Rl,Fog:N1,FogExp2:L1,FramebufferTexture:xQ,FrontSide:Dl,Frustum:av,GLBufferAttribute:kee,GLSL1:qq,GLSL3:PT,GreaterCompare:TU,GreaterDepth:Z3,GreaterEqualCompare:AU,GreaterEqualDepth:J3,GreaterEqualStencilFunc:Fq,GreaterStencilFunc:kq,GridHelper:jee,Group:bp,HalfFloatType:Fp,HemisphereLight:wF,HemisphereLightHelper:Vee,HemisphereLightProbe:hee,IcosahedronGeometry:j1,ImageBitmapLoader:fee,ImageLoader:Ny,ImageUtils:ZM,IncrementStencilOp:Aq,IncrementWrapStencilOp:Rq,InstancedBufferAttribute:Rd,InstancedBufferGeometry:SA,InstancedInterleavedBuffer:Dee,InstancedMesh:XU,Int16BufferAttribute:LX,Int32BufferAttribute:NX,Int8BufferAttribute:RX,IntType:HM,InterleavedBuffer:O1,InterleavedBufferAttribute:Cd,Interpolant:fv,InterpolateDiscrete:_y,InterpolateLinear:xy,InterpolateSmooth:Mx,InvertStencilOp:Iq,KeepStencilOp:Ax,KeyframeTrack:Ja,LOD:WU,LatheGeometry:lv,Layers:vd,LessCompare:SU,LessDepth:Y3,LessEqualCompare:bU,LessEqualDepth:Gx,LessEqualStencilFunc:Dq,LessStencilFunc:Nq,Light:nf,LightProbe:J1,Line:Kc,Line3:zee,LineBasicMaterial:Os,LineCurve:U1,LineCurve3:fA,LineDashedMaterial:pF,LineLoop:YU,LineSegments:Bl,LinearEncoding:XM,LinearFilter:br,LinearInterpolant:vA,LinearMipMapLinearFilter:wq,LinearMipMapNearestFilter:xq,LinearMipmapLinearFilter:Xc,LinearMipmapNearestFilter:BM,LinearSRGBColorSpace:ja,LinearToneMapping:nU,Loader:ro,LoaderUtils:FT,LoadingManager:xA,LoopOnce:mU,LoopPingPong:yU,LoopRepeat:gU,LuminanceAlphaFormat:cU,LuminanceFormat:uU,MOUSE:I3,Material:es,MaterialLoader:Z1,MathUtils:qx,Matrix3:fn,Matrix4:Qt,MaxEquation:oT,Mesh:Or,MeshBasicMaterial:Wu,MeshDepthMaterial:P1,MeshDistanceMaterial:I1,MeshLambertMaterial:dF,MeshMatcapMaterial:hF,MeshNormalMaterial:fF,MeshPhongMaterial:uF,MeshPhysicalMaterial:lF,MeshStandardMaterial:mA,MeshToonMaterial:cF,MinEquation:sT,MirroredRepeatWrapping:vy,MixOperation:eU,MultiplyBlending:iT,MultiplyOperation:iv,NearestFilter:ei,NearestMipMapLinearFilter:_q,NearestMipMapNearestFilter:vq,NearestMipmapLinearFilter:ey,NearestMipmapNearestFilter:Vx,NeverCompare:wU,NeverDepth:q3,NeverStencilFunc:Lq,NoBlending:Fu,NoColorSpace:Gc,NoToneMapping:Ga,NormalAnimationBlendMode:A1,NormalBlending:gd,NotEqualCompare:MU,NotEqualDepth:Q3,NotEqualStencilFunc:Uq,NumberKeyframeTrack:Py,Object3D:Bn,ObjectLoader:uee,ObjectSpaceNormalMap:_U,OctahedronGeometry:uv,OneFactor:z3,OneMinusDstAlphaFactor:G3,OneMinusDstColorFactor:j3,OneMinusSrcAlphaFactor:FM,OneMinusSrcColorFactor:H3,OrthographicCamera:Ud,PCFShadowMap:b1,PCFSoftShadowMap:Qg,PMREMGenerator:LT,Path:My,PerspectiveCamera:mi,Plane:Lu,PlaneGeometry:ef,PlaneHelper:Jee,PointLight:EF,PointLightHelper:$ee,Points:KU,PointsMaterial:aA,PolarGridHelper:Wee,PolyhedronGeometry:tf,PositionalAudio:_ee,PropertyBinding:Nn,PropertyMixer:PF,QuadraticBezierCurve:dA,QuadraticBezierCurve3:F1,Quaternion:Qi,QuaternionKeyframeTrack:sm,QuaternionLinearInterpolant:vF,RED_GREEN_RGTC2_Format:CT,RED_RGTC1_Format:pU,REVISION:E1,RGBADepthPacking:YM,RGBAFormat:Qs,RGBAIntegerFormat:WM,RGBA_ASTC_10x10_Format:bT,RGBA_ASTC_10x5_Format:wT,RGBA_ASTC_10x6_Format:ST,RGBA_ASTC_10x8_Format:ET,RGBA_ASTC_12x10_Format:TT,RGBA_ASTC_12x12_Format:MT,RGBA_ASTC_4x4_Format:hT,RGBA_ASTC_5x4_Format:pT,RGBA_ASTC_5x5_Format:mT,RGBA_ASTC_6x5_Format:gT,RGBA_ASTC_6x6_Format:yT,RGBA_ASTC_8x5_Format:vT,RGBA_ASTC_8x6_Format:_T,RGBA_ASTC_8x8_Format:xT,RGBA_BPTC_Format:Tx,RGBA_ETC2_EAC_Format:dT,RGBA_PVRTC_2BPPV1_Format:cT,RGBA_PVRTC_4BPPV1_Format:uT,RGBA_S3TC_DXT1_Format:Sx,RGBA_S3TC_DXT3_Format:Ex,RGBA_S3TC_DXT5_Format:bx,RGB_ETC1_Format:hU,RGB_ETC2_Format:fT,RGB_PVRTC_2BPPV1_Format:lT,RGB_PVRTC_4BPPV1_Format:aT,RGB_S3TC_DXT1_Format:wx,RGFormat:dU,RGIntegerFormat:jM,RawShaderMaterial:aF,Ray:rm,Raycaster:CA,RectAreaLight:MF,RedFormat:fU,RedIntegerFormat:VM,ReinhardToneMapping:rU,RepeatWrapping:yy,ReplaceStencilOp:Mq,ReverseSubtractEquation:U3,RingGeometry:W1,SIGNED_RED_GREEN_RGTC2_Format:RT,SIGNED_RED_RGTC1_Format:AT,SRGBColorSpace:an,Scene:Ty,ShaderChunk:on,ShaderLib:za,ShaderMaterial:kl,ShadowMaterial:oF,Shape:_d,ShapeGeometry:q1,ShapePath:ete,ShapeUtils:Ll,ShortType:aU,Skeleton:D1,SkeletonHelper:Hee,SkinnedMesh:qU,Source:dd,Sphere:Ao,SphereGeometry:cv,Spherical:LF,SphericalHarmonics3:AF,SplineCurve:hA,SpotLight:SF,SpotLightHelper:Bee,Sprite:jU,SpriteMaterial:sA,SrcAlphaFactor:UM,SrcAlphaSaturateFactor:W3,SrcColorFactor:B3,StaticCopyUsage:Vq,StaticDrawUsage:Sy,StaticReadUsage:Hq,StereoCamera:mee,StreamCopyUsage:Wq,StreamDrawUsage:Bq,StreamReadUsage:Gq,StringKeyframeTrack:Bd,SubtractEquation:k3,SubtractiveBlending:rT,TOUCH:mq,TangentSpaceNormalMap:Qc,TetrahedronGeometry:X1,Texture:Fr,TextureLoader:xF,TorusGeometry:Y1,TorusKnotGeometry:K1,Triangle:Zs,TriangleFanDrawMode:bq,TriangleStripDrawMode:Eq,TrianglesDrawMode:Sq,TubeGeometry:Id,TwoPassDoubleSide:yq,UVMapping:T1,Uint16BufferAttribute:eA,Uint32BufferAttribute:tA,Uint8BufferAttribute:PX,Uint8ClampedBufferAttribute:IX,Uniform:AA,UniformsGroup:Oee,UniformsLib:yt,UniformsUtils:nA,UnsignedByteType:Il,UnsignedInt248Type:Bc,UnsignedIntType:ku,UnsignedShort4444Type:$M,UnsignedShort5551Type:GM,UnsignedShortType:M1,VSMShadowMap:Fa,Vector2:Je,Vector3:de,Vector4:zn,VectorKeyframeTrack:Iy,VideoTexture:_Q,WebGL1Renderer:GU,WebGL3DRenderTarget:yX,WebGLArrayRenderTarget:gX,WebGLCoordinateSystem:Pl,WebGLCubeRenderTarget:OU,WebGLMultipleRenderTargets:vX,WebGLRenderTarget:Wa,WebGLRenderer:iA,WebGLUtils:BU,WebGPUCoordinateSystem:Ey,WireframeGeometry:sF,WrapAroundEnding:wy,ZeroCurvatureEnding:cd,ZeroFactor:F3,ZeroSlopeEnding:fd,ZeroStencilOp:Tq,_SRGBAFormat:jx,sRGBEncoding:$c},Symbol.toStringTag,{value:"Module"}));var oE={exports:{}},Nc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rL;function tte(){return rL||(rL=1,Nc.ConcurrentRoot=1,Nc.ContinuousEventPriority=4,Nc.DefaultEventPriority=16,Nc.DiscreteEventPriority=1,Nc.IdleEventPriority=536870912,Nc.LegacyRoot=0),Nc}var iL;function nte(){return iL||(iL=1,oE.exports=tte()),oE.exports}var Mp=nte();function rte(n){let e;const t=new Set,r=(u,c)=>{const d=typeof u=="function"?u(e):u;if(d!==e){const h=e;e=c?d:Object.assign({},e,d),t.forEach(g=>g(e,h))}},i=()=>e,s=(u,c=i,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=c(e);function g(){const y=c(e);if(!d(h,y)){const E=h;u(h=y,E)}}return t.add(g),()=>t.delete(g)},l={setState:r,getState:i,subscribe:(u,c,d)=>c||d?s(u,c,d):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(r,i,l),l}const ite=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),sL=ite?Z.useEffect:Z.useLayoutEffect;function ste(n){const e=typeof n=="function"?rte(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=Z.useReducer(_=>_+1,0),o=e.getState(),a=Z.useRef(o),l=Z.useRef(r),u=Z.useRef(i),c=Z.useRef(!1),d=Z.useRef();d.current===void 0&&(d.current=r(o));let h,g=!1;(a.current!==o||l.current!==r||u.current!==i||c.current)&&(h=r(o),g=!i(d.current,h)),sL(()=>{g&&(d.current=h),a.current=o,l.current=r,u.current=i,c.current=!1});const y=Z.useRef(o);sL(()=>{const _=()=>{try{const v=e.getState(),S=l.current(v);u.current(d.current,S)||(a.current=v,d.current=S,s())}catch{c.current=!0,s()}},m=e.subscribe(_);return e.getState()!==y.current&&_(),m},[]);const E=g?h:d.current;return Z.useDebugValue(E),E};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var aE={exports:{}},lE={exports:{}},uE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oL;function ote(){return oL||(oL=1,function(n){function e(q,K){var F=q.length;q.push(K);e:for(;0<F;){var L=F-1>>>1,z=q[L];if(0<i(z,K))q[L]=K,q[F]=z,F=L;else break e}}function t(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var K=q[0],F=q.pop();if(F!==K){q[0]=F;e:for(var L=0,z=q.length,Y=z>>>1;L<Y;){var B=2*(L+1)-1,J=q[B],le=B+1,pe=q[le];if(0>i(J,F))le<z&&0>i(pe,J)?(q[L]=pe,q[le]=F,L=le):(q[L]=J,q[B]=F,L=B);else if(le<z&&0>i(pe,F))q[L]=pe,q[le]=F,L=le;else break e}}return K}function i(q,K){var F=q.sortIndex-K.sortIndex;return F!==0?F:q.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,g=!1,y=!1,E=!1,_=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(q){for(var K=t(u);K!==null;){if(K.callback===null)r(u);else if(K.startTime<=q)r(u),K.sortIndex=K.expirationTime,e(l,K);else break;K=t(u)}}function T(q){if(E=!1,S(q),!y)if(t(l)!==null)y=!0,ne(M);else{var K=t(u);K!==null&&X(T,K.startTime-q)}}function M(q,K){y=!1,E&&(E=!1,m(O),O=-1),g=!0;var F=h;try{for(S(K),d=t(l);d!==null&&(!(d.expirationTime>K)||q&&!G());){var L=d.callback;if(typeof L=="function"){d.callback=null,h=d.priorityLevel;var z=L(d.expirationTime<=K);K=n.unstable_now(),typeof z=="function"?d.callback=z:d===t(l)&&r(l),S(K)}else r(l);d=t(l)}if(d!==null)var Y=!0;else{var B=t(u);B!==null&&X(T,B.startTime-K),Y=!1}return Y}finally{d=null,h=F,g=!1}}var A=!1,R=null,O=-1,I=5,k=-1;function G(){return!(n.unstable_now()-k<I)}function $(){if(R!==null){var q=n.unstable_now();k=q;var K=!0;try{K=R(!0,q)}finally{K?U():(A=!1,R=null)}}else A=!1}var U;if(typeof v=="function")U=function(){v($)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,re=ee.port2;ee.port1.onmessage=$,U=function(){re.postMessage(null)}}else U=function(){_($,0)};function ne(q){R=q,A||(A=!0,U())}function X(q,K){O=_(function(){q(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_continueExecution=function(){y||g||(y=!0,ne(M))},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(q){switch(h){case 1:case 2:case 3:var K=3;break;default:K=h}var F=h;h=K;try{return q()}finally{h=F}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(q,K){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var F=h;h=q;try{return K()}finally{h=F}},n.unstable_scheduleCallback=function(q,K,F){var L=n.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?L+F:L):F=L,q){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=F+z,q={id:c++,callback:K,priorityLevel:q,startTime:F,expirationTime:z,sortIndex:-1},F>L?(q.sortIndex=F,e(u,q),t(l)===null&&q===t(u)&&(E?(m(O),O=-1):E=!0,X(T,F-L))):(q.sortIndex=z,e(l,q),y||g||(y=!0,ne(M))),q},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(q){var K=h;return function(){var F=h;h=K;try{return q.apply(this,arguments)}finally{h=F}}}}(uE)),uE}var aL;function ate(){return aL||(aL=1,lE.exports=ote()),lE.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cE,lL;function lte(){return lL||(lL=1,cE=function(e){var t={},r=kd(),i=ate(),s=Object.assign;function o(x){for(var w="https://reactjs.org/docs/error-decoder.html?invariant="+x,C=1;C<arguments.length;C++)w+="&args[]="+encodeURIComponent(arguments[C]);return"Minified React error #"+x+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),y=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),T=Symbol.for("react.offscreen"),M=Symbol.iterator;function A(x){return x===null||typeof x!="object"?null:(x=M&&x[M]||x["@@iterator"],typeof x=="function"?x:null)}function R(x){if(x==null)return null;if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x;switch(x){case c:return"Fragment";case u:return"Portal";case h:return"Profiler";case d:return"StrictMode";case _:return"Suspense";case m:return"SuspenseList"}if(typeof x=="object")switch(x.$$typeof){case y:return(x.displayName||"Context")+".Consumer";case g:return(x._context.displayName||"Context")+".Provider";case E:var w=x.render;return x=x.displayName,x||(x=w.displayName||w.name||"",x=x!==""?"ForwardRef("+x+")":"ForwardRef"),x;case v:return w=x.displayName||null,w!==null?w:R(x.type)||"Memo";case S:w=x._payload,x=x._init;try{return R(x(w))}catch{}}return null}function O(x){var w=x.type;switch(x.tag){case 24:return"Cache";case 9:return(w.displayName||"Context")+".Consumer";case 10:return(w._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return x=w.render,x=x.displayName||x.name||"",w.displayName||(x!==""?"ForwardRef("+x+")":"ForwardRef");case 7:return"Fragment";case 5:return w;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R(w);case 8:return w===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w}return null}function I(x){var w=x,C=x;if(x.alternate)for(;w.return;)w=w.return;else{x=w;do w=x,(w.flags&4098)!==0&&(C=w.return),x=w.return;while(x)}return w.tag===3?C:null}function k(x){if(I(x)!==x)throw Error(o(188))}function G(x){var w=x.alternate;if(!w){if(w=I(x),w===null)throw Error(o(188));return w!==x?null:x}for(var C=x,N=w;;){var H=C.return;if(H===null)break;var Q=H.alternate;if(Q===null){if(N=H.return,N!==null){C=N;continue}break}if(H.child===Q.child){for(Q=H.child;Q;){if(Q===C)return k(H),x;if(Q===N)return k(H),w;Q=Q.sibling}throw Error(o(188))}if(C.return!==N.return)C=H,N=Q;else{for(var ge=!1,Me=H.child;Me;){if(Me===C){ge=!0,C=H,N=Q;break}if(Me===N){ge=!0,N=H,C=Q;break}Me=Me.sibling}if(!ge){for(Me=Q.child;Me;){if(Me===C){ge=!0,C=Q,N=H;break}if(Me===N){ge=!0,N=Q,C=H;break}Me=Me.sibling}if(!ge)throw Error(o(189))}}if(C.alternate!==N)throw Error(o(190))}if(C.tag!==3)throw Error(o(188));return C.stateNode.current===C?x:w}function $(x){return x=G(x),x!==null?U(x):null}function U(x){if(x.tag===5||x.tag===6)return x;for(x=x.child;x!==null;){var w=U(x);if(w!==null)return w;x=x.sibling}return null}function ee(x){if(x.tag===5||x.tag===6)return x;for(x=x.child;x!==null;){if(x.tag!==4){var w=ee(x);if(w!==null)return w}x=x.sibling}return null}var re=Array.isArray,ne=e.getPublicInstance,X=e.getRootHostContext,q=e.getChildHostContext,K=e.prepareForCommit,F=e.resetAfterCommit,L=e.createInstance,z=e.appendInitialChild,Y=e.finalizeInitialChildren,B=e.prepareUpdate,J=e.shouldSetTextContent,le=e.createTextInstance,pe=e.scheduleTimeout,he=e.cancelTimeout,Ee=e.noTimeout,_e=e.isPrimaryRenderer,te=e.supportsMutation,j=e.supportsPersistence,ce=e.supportsHydration,fe=e.getInstanceFromNode,ie=e.preparePortalMount,se=e.getCurrentEventPriority,Ae=e.detachDeletedInstance,we=e.supportsMicrotasks,Re=e.scheduleMicrotask,Le=e.supportsTestSelectors,be=e.findFiberRoot,Ye=e.getBoundingRect,ue=e.getTextContent,oe=e.isHiddenSubtree,ye=e.matchAccessibilityRole,Fe=e.setFocusIfFocusable,ze=e.setupIntersectionObserver,He=e.appendChild,Ze=e.appendChildToContainer,Ke=e.commitTextUpdate,Ue=e.commitMount,st=e.commitUpdate,ht=e.insertBefore,at=e.insertInContainerBefore,Qe=e.removeChild,ot=e.removeChildFromContainer,xt=e.resetTextContent,Ut=e.hideInstance,xe=e.hideTextInstance,et=e.unhideInstance,Ne=e.unhideTextInstance,rt=e.clearContainer,ct=e.cloneInstance,Vt=e.createContainerChildSet,rn=e.appendChildToContainerChildSet,xn=e.finalizeContainerChildren,hn=e.replaceContainerChildren,Sn=e.cloneHiddenInstance,yn=e.cloneHiddenTextInstance,Xt=e.canHydrateInstance,ti=e.canHydrateTextInstance,vr=e.canHydrateSuspenseInstance,Mn=e.isSuspenseInstancePending,On=e.isSuspenseInstanceFallback,zr=e.registerSuspenseInstanceRetry,Dn=e.getNextHydratableSibling,nr=e.getFirstHydratableChild,qr=e.getFirstHydratableChildWithinContainer,ks=e.getFirstHydratableChildWithinSuspenseInstance,Hi=e.hydrateInstance,me=e.hydrateTextInstance,De=e.hydrateSuspenseInstance,je=e.getNextHydratableInstanceAfterSuspenseInstance,Pe=e.commitHydratedContainer,We=e.commitHydratedSuspenseInstance,St=e.clearSuspenseBoundary,Lt=e.clearSuspenseBoundaryFromContainer,Ot=e.shouldDeleteUnhydratedTailInstances,zt=e.didNotMatchHydratedContainerTextInstance,Jt=e.didNotMatchHydratedTextInstance,qe;function Dt(x){if(qe===void 0)try{throw Error()}catch(C){var w=C.stack.trim().match(/\n( *(at )?)/);qe=w&&w[1]||""}return`
`+qe+x}var kn=!1;function En(x,w){if(!x||kn)return"";kn=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(w)if(w=function(){throw Error()},Object.defineProperty(w.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(w,[])}catch(lt){var N=lt}Reflect.construct(x,[],w)}else{try{w.call()}catch(lt){N=lt}x.call(w.prototype)}else{try{throw Error()}catch(lt){N=lt}x()}}catch(lt){if(lt&&N&&typeof lt.stack=="string"){for(var H=lt.stack.split(`
`),Q=N.stack.split(`
`),ge=H.length-1,Me=Q.length-1;1<=ge&&0<=Me&&H[ge]!==Q[Me];)Me--;for(;1<=ge&&0<=Me;ge--,Me--)if(H[ge]!==Q[Me]){if(ge!==1||Me!==1)do if(ge--,Me--,0>Me||H[ge]!==Q[Me]){var Ve=`
`+H[ge].replace(" at new "," at ");return x.displayName&&Ve.includes("<anonymous>")&&(Ve=Ve.replace("<anonymous>",x.displayName)),Ve}while(1<=ge&&0<=Me);break}}}finally{kn=!1,Error.prepareStackTrace=C}return(x=x?x.displayName||x.name:"")?Dt(x):""}var Tr=Object.prototype.hasOwnProperty,Ci=[],An=-1;function Ft(x){return{current:x}}function Zt(x){0>An||(x.current=Ci[An],Ci[An]=null,An--)}function Gt(x,w){An++,Ci[An]=x.current,x.current=w}var Pn={},_r=Ft(Pn),or=Ft(!1),ts=Pn;function In(x,w){var C=x.type.contextTypes;if(!C)return Pn;var N=x.stateNode;if(N&&N.__reactInternalMemoizedUnmaskedChildContext===w)return N.__reactInternalMemoizedMaskedChildContext;var H={},Q;for(Q in C)H[Q]=w[Q];return N&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=w,x.__reactInternalMemoizedMaskedChildContext=H),H}function $n(x){return x=x.childContextTypes,x!=null}function Xr(){Zt(or),Zt(_r)}function dr(x,w,C){if(_r.current!==Pn)throw Error(o(168));Gt(_r,w),Gt(or,C)}function Ro(x,w,C){var N=x.stateNode;if(w=w.childContextTypes,typeof N.getChildContext!="function")return C;N=N.getChildContext();for(var H in N)if(!(H in w))throw Error(o(108,O(x)||"Unknown",H));return s({},C,N)}function Po(x){return x=(x=x.stateNode)&&x.__reactInternalMemoizedMergedChildContext||Pn,ts=_r.current,Gt(_r,x),Gt(or,or.current),!0}function ni(x,w,C){var N=x.stateNode;if(!N)throw Error(o(169));C?(x=Ro(x,w,ts),N.__reactInternalMemoizedMergedChildContext=x,Zt(or),Zt(_r),Gt(_r,x)):Zt(or),Gt(or,C)}var ns=Math.clz32?Math.clz32:$d,Za=Math.log,so=Math.LN2;function $d(x){return x>>>=0,x===0?32:31-(Za(x)/so|0)|0}var oo=64,pn=4194304;function Io(x){switch(x&-x){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return x&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return x}}function Qa(x,w){var C=x.pendingLanes;if(C===0)return 0;var N=0,H=x.suspendedLanes,Q=x.pingedLanes,ge=C&268435455;if(ge!==0){var Me=ge&~H;Me!==0?N=Io(Me):(Q&=ge,Q!==0&&(N=Io(Q)))}else ge=C&~H,ge!==0?N=Io(ge):Q!==0&&(N=Io(Q));if(N===0)return 0;if(w!==0&&w!==N&&(w&H)===0&&(H=N&-N,Q=w&-w,H>=Q||H===16&&(Q&4194240)!==0))return w;if((N&4)!==0&&(N|=C&16),w=x.entangledLanes,w!==0)for(x=x.entanglements,w&=N;0<w;)C=31-ns(w),H=1<<C,N|=x[C],w&=~H;return N}function Ku(x,w){switch(x){case 1:case 2:case 4:return w+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ju(x,w){for(var C=x.suspendedLanes,N=x.pingedLanes,H=x.expirationTimes,Q=x.pendingLanes;0<Q;){var ge=31-ns(Q),Me=1<<ge,Ve=H[ge];Ve===-1?((Me&C)===0||(Me&N)!==0)&&(H[ge]=Ku(Me,w)):Ve<=w&&(x.expiredLanes|=Me),Q&=~Me}}function Lo(x){return x=x.pendingLanes&-1073741825,x!==0?x:x&1073741824?1073741824:0}function Hl(x){for(var w=[],C=0;31>C;C++)w.push(x);return w}function Us(x,w,C){x.pendingLanes|=w,w!==536870912&&(x.suspendedLanes=0,x.pingedLanes=0),x=x.eventTimes,w=31-ns(w),x[w]=C}function ao(x,w){var C=x.pendingLanes&~w;x.pendingLanes=w,x.suspendedLanes=0,x.pingedLanes=0,x.expiredLanes&=w,x.mutableReadLanes&=w,x.entangledLanes&=w,w=x.entanglements;var N=x.eventTimes;for(x=x.expirationTimes;0<C;){var H=31-ns(C),Q=1<<H;w[H]=0,N[H]=-1,x[H]=-1,C&=~Q}}function yi(x,w){var C=x.entangledLanes|=w;for(x=x.entanglements;C;){var N=31-ns(C),H=1<<N;H&w|x[N]&w&&(x[N]|=w),C&=~H}}var jt=0;function Fs(x){return x&=-x,1<x?4<x?(x&268435455)!==0?16:536870912:4:1}var gs=i.unstable_scheduleCallback,No=i.unstable_cancelCallback,zs=i.unstable_shouldYield,Gd=i.unstable_requestPaint,ar=i.unstable_now,lo=i.unstable_ImmediatePriority,Vd=i.unstable_UserBlockingPriority,Ri=i.unstable_NormalPriority,el=i.unstable_IdlePriority,tl=null,ys=null;function ra(x){if(ys&&typeof ys.onCommitFiberRoot=="function")try{ys.onCommitFiberRoot(tl,x,void 0,(x.current.flags&128)===128)}catch{}}function nl(x,w){return x===w&&(x!==0||1/x===1/w)||x!==x&&w!==w}var ri=typeof Object.is=="function"?Object.is:nl,ii=null,Oo=!1,Bs=!1;function $l(x){ii===null?ii=[x]:ii.push(x)}function rl(x){Oo=!0,$l(x)}function Pi(){if(!Bs&&ii!==null){Bs=!0;var x=0,w=jt;try{var C=ii;for(jt=1;x<C.length;x++){var N=C[x];do N=N(!0);while(N!==null)}ii=null,Oo=!1}catch(H){throw ii!==null&&(ii=ii.slice(x+1)),gs(lo,Pi),H}finally{jt=w,Bs=!1}}return null}var il=a.ReactCurrentBatchConfig;function rs(x,w){if(ri(x,w))return!0;if(typeof x!="object"||x===null||typeof w!="object"||w===null)return!1;var C=Object.keys(x),N=Object.keys(w);if(C.length!==N.length)return!1;for(N=0;N<C.length;N++){var H=C[N];if(!Tr.call(w,H)||!ri(x[H],w[H]))return!1}return!0}function ia(x){switch(x.tag){case 5:return Dt(x.type);case 16:return Dt("Lazy");case 13:return Dt("Suspense");case 19:return Dt("SuspenseList");case 0:case 2:case 15:return x=En(x.type,!1),x;case 11:return x=En(x.type.render,!1),x;case 1:return x=En(x.type,!0),x;default:return""}}function si(x,w){if(x&&x.defaultProps){w=s({},w),x=x.defaultProps;for(var C in x)w[C]===void 0&&(w[C]=x[C]);return w}return w}var Yr=Ft(null),sa=null,is=null,oa=null;function oi(){oa=is=sa=null}function aa(x,w,C){_e?(Gt(Yr,w._currentValue),w._currentValue=C):(Gt(Yr,w._currentValue2),w._currentValue2=C)}function Br(x){var w=Yr.current;Zt(Yr),_e?x._currentValue=w:x._currentValue2=w}function Kr(x,w,C){for(;x!==null;){var N=x.alternate;if((x.childLanes&w)!==w?(x.childLanes|=w,N!==null&&(N.childLanes|=w)):N!==null&&(N.childLanes&w)!==w&&(N.childLanes|=w),x===C)break;x=x.return}}function Mr(x,w){sa=x,oa=is=null,x=x.dependencies,x!==null&&x.firstContext!==null&&((x.lanes&w)!==0&&(ci=!0),x.firstContext=null)}function hr(x){var w=_e?x._currentValue:x._currentValue2;if(oa!==x)if(x={context:x,memoizedValue:w,next:null},is===null){if(sa===null)throw Error(o(308));is=x,sa.dependencies={lanes:0,firstContext:x}}else is=is.next=x;return w}var $i=null,Hs=!1;function Zu(x){x.updateQueue={baseState:x.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function um(x,w){x=x.updateQueue,w.updateQueue===x&&(w.updateQueue={baseState:x.baseState,firstBaseUpdate:x.firstBaseUpdate,lastBaseUpdate:x.lastBaseUpdate,shared:x.shared,effects:x.effects})}function la(x,w){return{eventTime:x,lane:w,tag:0,payload:null,callback:null,next:null}}function sl(x,w){var C=x.updateQueue;C!==null&&(C=C.shared,Cr!==null&&(x.mode&1)!==0&&(nn&2)===0?(x=C.interleaved,x===null?(w.next=w,$i===null?$i=[C]:$i.push(C)):(w.next=x.next,x.next=w),C.interleaved=w):(x=C.pending,x===null?w.next=w:(w.next=x.next,x.next=w),C.pending=w))}function jd(x,w,C){if(w=w.updateQueue,w!==null&&(w=w.shared,(C&4194240)!==0)){var N=w.lanes;N&=x.pendingLanes,C|=N,w.lanes=C,yi(x,C)}}function Wd(x,w){var C=x.updateQueue,N=x.alternate;if(N!==null&&(N=N.updateQueue,C===N)){var H=null,Q=null;if(C=C.firstBaseUpdate,C!==null){do{var ge={eventTime:C.eventTime,lane:C.lane,tag:C.tag,payload:C.payload,callback:C.callback,next:null};Q===null?H=Q=ge:Q=Q.next=ge,C=C.next}while(C!==null);Q===null?H=Q=w:Q=Q.next=w}else H=Q=w;C={baseState:N.baseState,firstBaseUpdate:H,lastBaseUpdate:Q,shared:N.shared,effects:N.effects},x.updateQueue=C;return}x=C.lastBaseUpdate,x===null?C.firstBaseUpdate=w:x.next=w,C.lastBaseUpdate=w}function qd(x,w,C,N){var H=x.updateQueue;Hs=!1;var Q=H.firstBaseUpdate,ge=H.lastBaseUpdate,Me=H.shared.pending;if(Me!==null){H.shared.pending=null;var Ve=Me,lt=Ve.next;Ve.next=null,ge===null?Q=lt:ge.next=lt,ge=Ve;var bt=x.alternate;bt!==null&&(bt=bt.updateQueue,Me=bt.lastBaseUpdate,Me!==ge&&(Me===null?bt.firstBaseUpdate=lt:Me.next=lt,bt.lastBaseUpdate=Ve))}if(Q!==null){var Yt=H.baseState;ge=0,bt=lt=Ve=null,Me=Q;do{var kt=Me.lane,sn=Me.eventTime;if((N&kt)===kt){bt!==null&&(bt=bt.next={eventTime:sn,lane:0,tag:Me.tag,payload:Me.payload,callback:Me.callback,next:null});e:{var _t=x,Ei=Me;switch(kt=w,sn=C,Ei.tag){case 1:if(_t=Ei.payload,typeof _t=="function"){Yt=_t.call(sn,Yt,kt);break e}Yt=_t;break e;case 3:_t.flags=_t.flags&-65537|128;case 0:if(_t=Ei.payload,kt=typeof _t=="function"?_t.call(sn,Yt,kt):_t,kt==null)break e;Yt=s({},Yt,kt);break e;case 2:Hs=!0}}Me.callback!==null&&Me.lane!==0&&(x.flags|=64,kt=H.effects,kt===null?H.effects=[Me]:kt.push(Me))}else sn={eventTime:sn,lane:kt,tag:Me.tag,payload:Me.payload,callback:Me.callback,next:null},bt===null?(lt=bt=sn,Ve=Yt):bt=bt.next=sn,ge|=kt;if(Me=Me.next,Me===null){if(Me=H.shared.pending,Me===null)break;kt=Me,Me=kt.next,kt.next=null,H.lastBaseUpdate=kt,H.shared.pending=null}}while(!0);if(bt===null&&(Ve=Yt),H.baseState=Ve,H.firstBaseUpdate=lt,H.lastBaseUpdate=bt,w=H.shared.interleaved,w!==null){H=w;do ge|=H.lane,H=H.next;while(H!==w)}else Q===null&&(H.shared.lanes=0);Fo|=ge,x.lanes=ge,x.memoizedState=Yt}}function Sv(x,w,C){if(x=w.effects,w.effects=null,x!==null)for(w=0;w<x.length;w++){var N=x[w],H=N.callback;if(H!==null){if(N.callback=null,N=C,typeof H!="function")throw Error(o(191,H));H.call(N)}}}var Ev=new r.Component().refs;function cm(x,w,C,N){w=x.memoizedState,C=C(N,w),C=C==null?w:s({},w,C),x.memoizedState=C,x.lanes===0&&(x.updateQueue.baseState=C)}var Xd={isMounted:function(x){return(x=x._reactInternals)?I(x)===x:!1},enqueueSetState:function(x,w,C){x=x._reactInternals;var N=Cn(),H=go(x),Q=la(N,H);Q.payload=w,C!=null&&(Q.callback=C),sl(x,Q),w=Ni(x,H,N),w!==null&&jd(w,x,H)},enqueueReplaceState:function(x,w,C){x=x._reactInternals;var N=Cn(),H=go(x),Q=la(N,H);Q.tag=1,Q.payload=w,C!=null&&(Q.callback=C),sl(x,Q),w=Ni(x,H,N),w!==null&&jd(w,x,H)},enqueueForceUpdate:function(x,w){x=x._reactInternals;var C=Cn(),N=go(x),H=la(C,N);H.tag=2,w!=null&&(H.callback=w),sl(x,H),w=Ni(x,N,C),w!==null&&jd(w,x,N)}};function fm(x,w,C,N,H,Q,ge){return x=x.stateNode,typeof x.shouldComponentUpdate=="function"?x.shouldComponentUpdate(N,Q,ge):w.prototype&&w.prototype.isPureReactComponent?!rs(C,N)||!rs(H,Q):!0}function bv(x,w,C){var N=!1,H=Pn,Q=w.contextType;return typeof Q=="object"&&Q!==null?Q=hr(Q):(H=$n(w)?ts:_r.current,N=w.contextTypes,Q=(N=N!=null)?In(x,H):Pn),w=new w(C,Q),x.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Xd,x.stateNode=w,w._reactInternals=x,N&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=H,x.__reactInternalMemoizedMaskedChildContext=Q),w}function Tv(x,w,C,N){x=w.state,typeof w.componentWillReceiveProps=="function"&&w.componentWillReceiveProps(C,N),typeof w.UNSAFE_componentWillReceiveProps=="function"&&w.UNSAFE_componentWillReceiveProps(C,N),w.state!==x&&Xd.enqueueReplaceState(w,w.state,null)}function dm(x,w,C,N){var H=x.stateNode;H.props=C,H.state=x.memoizedState,H.refs=Ev,Zu(x);var Q=w.contextType;typeof Q=="object"&&Q!==null?H.context=hr(Q):(Q=$n(w)?ts:_r.current,H.context=In(x,Q)),H.state=x.memoizedState,Q=w.getDerivedStateFromProps,typeof Q=="function"&&(cm(x,w,Q,C),H.state=x.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(w=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),w!==H.state&&Xd.enqueueReplaceState(H,H.state,null),qd(x,C,H,N),H.state=x.memoizedState),typeof H.componentDidMount=="function"&&(x.flags|=4194308)}var Qu=[],ol=0,Yd=null,Kd=0,$s=[],vs=0,Gl=null,ua=1,ca="";function Vl(x,w){Qu[ol++]=Kd,Qu[ol++]=Yd,Yd=x,Kd=w}function Mv(x,w,C){$s[vs++]=ua,$s[vs++]=ca,$s[vs++]=Gl,Gl=x;var N=ua;x=ca;var H=32-ns(N)-1;N&=~(1<<H),C+=1;var Q=32-ns(w)+H;if(30<Q){var ge=H-H%5;Q=(N&(1<<ge)-1).toString(32),N>>=ge,H-=ge,ua=1<<32-ns(w)+H|C<<H|N,ca=Q+x}else ua=1<<Q|C<<H|N,ca=x}function hm(x){x.return!==null&&(Vl(x,1),Mv(x,1,0))}function pm(x){for(;x===Yd;)Yd=Qu[--ol],Qu[ol]=null,Kd=Qu[--ol],Qu[ol]=null;for(;x===Gl;)Gl=$s[--vs],$s[vs]=null,ca=$s[--vs],$s[vs]=null,ua=$s[--vs],$s[vs]=null}var Gi=null,vi=null,lr=!1,ec=!1,Gs=null;function mm(x,w){var C=Ts(5,null,null,0);C.elementType="DELETED",C.stateNode=w,C.return=x,w=x.deletions,w===null?(x.deletions=[C],x.flags|=16):w.push(C)}function gm(x,w){switch(x.tag){case 5:return w=Xt(w,x.type,x.pendingProps),w!==null?(x.stateNode=w,Gi=x,vi=nr(w),!0):!1;case 6:return w=ti(w,x.pendingProps),w!==null?(x.stateNode=w,Gi=x,vi=null,!0):!1;case 13:if(w=vr(w),w!==null){var C=Gl!==null?{id:ua,overflow:ca}:null;return x.memoizedState={dehydrated:w,treeContext:C,retryLane:1073741824},C=Ts(18,null,null,0),C.stateNode=w,C.return=x,x.child=C,Gi=x,vi=null,!0}return!1;default:return!1}}function Jd(x){return(x.mode&1)!==0&&(x.flags&128)===0}function al(x){if(lr){var w=vi;if(w){var C=w;if(!gm(x,w)){if(Jd(x))throw Error(o(418));w=Dn(C);var N=Gi;w&&gm(x,w)?mm(N,C):(x.flags=x.flags&-4097|2,lr=!1,Gi=x)}}else{if(Jd(x))throw Error(o(418));x.flags=x.flags&-4097|2,lr=!1,Gi=x}}}function Av(x){for(x=x.return;x!==null&&x.tag!==5&&x.tag!==3&&x.tag!==13;)x=x.return;Gi=x}function rf(x){if(!ce||x!==Gi)return!1;if(!lr)return Av(x),lr=!0,!1;if(x.tag!==3&&(x.tag!==5||Ot(x.type)&&!J(x.type,x.memoizedProps))){var w=vi;if(w){if(Jd(x)){for(x=vi;x;)x=Dn(x);throw Error(o(418))}for(;w;)mm(x,w),w=Dn(w)}}if(Av(x),x.tag===13){if(!ce)throw Error(o(316));if(x=x.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(o(317));vi=je(x)}else vi=Gi?Dn(x.stateNode):null;return!0}function tc(){ce&&(vi=Gi=null,ec=lr=!1)}function Zd(x){Gs===null?Gs=[x]:Gs.push(x)}function nc(x,w,C){if(x=C.ref,x!==null&&typeof x!="function"&&typeof x!="object"){if(C._owner){if(C=C._owner,C){if(C.tag!==1)throw Error(o(309));var N=C.stateNode}if(!N)throw Error(o(147,x));var H=N,Q=""+x;return w!==null&&w.ref!==null&&typeof w.ref=="function"&&w.ref._stringRef===Q?w.ref:(w=function(ge){var Me=H.refs;Me===Ev&&(Me=H.refs={}),ge===null?delete Me[Q]:Me[Q]=ge},w._stringRef=Q,w)}if(typeof x!="string")throw Error(o(284));if(!C._owner)throw Error(o(290,x))}return x}function ll(x,w){throw x=Object.prototype.toString.call(w),Error(o(31,x==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":x))}function rc(x){var w=x._init;return w(x._payload)}function Cv(x){function w(ke,Ce){if(x){var Ge=ke.deletions;Ge===null?(ke.deletions=[Ce],ke.flags|=16):Ge.push(Ce)}}function C(ke,Ce){if(!x)return null;for(;Ce!==null;)w(ke,Ce),Ce=Ce.sibling;return null}function N(ke,Ce){for(ke=new Map;Ce!==null;)Ce.key!==null?ke.set(Ce.key,Ce):ke.set(Ce.index,Ce),Ce=Ce.sibling;return ke}function H(ke,Ce){return ke=ba(ke,Ce),ke.index=0,ke.sibling=null,ke}function Q(ke,Ce,Ge){return ke.index=Ge,x?(Ge=ke.alternate,Ge!==null?(Ge=Ge.index,Ge<Ce?(ke.flags|=2,Ce):Ge):(ke.flags|=2,Ce)):(ke.flags|=1048576,Ce)}function ge(ke){return x&&ke.alternate===null&&(ke.flags|=2),ke}function Me(ke,Ce,Ge,vt){return Ce===null||Ce.tag!==6?(Ce=Th(Ge,ke.mode,vt),Ce.return=ke,Ce):(Ce=H(Ce,Ge),Ce.return=ke,Ce)}function Ve(ke,Ce,Ge,vt){var Rt=Ge.type;return Rt===c?bt(ke,Ce,Ge.props.children,vt,Ge.key):Ce!==null&&(Ce.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===S&&rc(Rt)===Ce.type)?(vt=H(Ce,Ge.props),vt.ref=nc(ke,Ce,Ge),vt.return=ke,vt):(vt=bh(Ge.type,Ge.key,Ge.props,null,ke.mode,vt),vt.ref=nc(ke,Ce,Ge),vt.return=ke,vt)}function lt(ke,Ce,Ge,vt){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==Ge.containerInfo||Ce.stateNode.implementation!==Ge.implementation?(Ce=Mh(Ge,ke.mode,vt),Ce.return=ke,Ce):(Ce=H(Ce,Ge.children||[]),Ce.return=ke,Ce)}function bt(ke,Ce,Ge,vt,Rt){return Ce===null||Ce.tag!==7?(Ce=du(Ge,ke.mode,vt,Rt),Ce.return=ke,Ce):(Ce=H(Ce,Ge),Ce.return=ke,Ce)}function Yt(ke,Ce,Ge){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return Ce=Th(""+Ce,ke.mode,Ge),Ce.return=ke,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case l:return Ge=bh(Ce.type,Ce.key,Ce.props,null,ke.mode,Ge),Ge.ref=nc(ke,null,Ce),Ge.return=ke,Ge;case u:return Ce=Mh(Ce,ke.mode,Ge),Ce.return=ke,Ce;case S:var vt=Ce._init;return Yt(ke,vt(Ce._payload),Ge)}if(re(Ce)||A(Ce))return Ce=du(Ce,ke.mode,Ge,null),Ce.return=ke,Ce;ll(ke,Ce)}return null}function kt(ke,Ce,Ge,vt){var Rt=Ce!==null?Ce.key:null;if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number")return Rt!==null?null:Me(ke,Ce,""+Ge,vt);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case l:return Ge.key===Rt?Ve(ke,Ce,Ge,vt):null;case u:return Ge.key===Rt?lt(ke,Ce,Ge,vt):null;case S:return Rt=Ge._init,kt(ke,Ce,Rt(Ge._payload),vt)}if(re(Ge)||A(Ge))return Rt!==null?null:bt(ke,Ce,Ge,vt,null);ll(ke,Ge)}return null}function sn(ke,Ce,Ge,vt,Rt){if(typeof vt=="string"&&vt!==""||typeof vt=="number")return ke=ke.get(Ge)||null,Me(Ce,ke,""+vt,Rt);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case l:return ke=ke.get(vt.key===null?Ge:vt.key)||null,Ve(Ce,ke,vt,Rt);case u:return ke=ke.get(vt.key===null?Ge:vt.key)||null,lt(Ce,ke,vt,Rt);case S:var en=vt._init;return sn(ke,Ce,Ge,en(vt._payload),Rt)}if(re(vt)||A(vt))return ke=ke.get(Ge)||null,bt(Ce,ke,vt,Rt,null);ll(Ce,vt)}return null}function _t(ke,Ce,Ge,vt){for(var Rt=null,en=null,Kt=Ce,bn=Ce=0,$r=null;Kt!==null&&bn<Ge.length;bn++){Kt.index>bn?($r=Kt,Kt=null):$r=Kt.sibling;var wn=kt(ke,Kt,Ge[bn],vt);if(wn===null){Kt===null&&(Kt=$r);break}x&&Kt&&wn.alternate===null&&w(ke,Kt),Ce=Q(wn,Ce,bn),en===null?Rt=wn:en.sibling=wn,en=wn,Kt=$r}if(bn===Ge.length)return C(ke,Kt),lr&&Vl(ke,bn),Rt;if(Kt===null){for(;bn<Ge.length;bn++)Kt=Yt(ke,Ge[bn],vt),Kt!==null&&(Ce=Q(Kt,Ce,bn),en===null?Rt=Kt:en.sibling=Kt,en=Kt);return lr&&Vl(ke,bn),Rt}for(Kt=N(ke,Kt);bn<Ge.length;bn++)$r=sn(Kt,ke,bn,Ge[bn],vt),$r!==null&&(x&&$r.alternate!==null&&Kt.delete($r.key===null?bn:$r.key),Ce=Q($r,Ce,bn),en===null?Rt=$r:en.sibling=$r,en=$r);return x&&Kt.forEach(function(Ta){return w(ke,Ta)}),lr&&Vl(ke,bn),Rt}function Ei(ke,Ce,Ge,vt){var Rt=A(Ge);if(typeof Rt!="function")throw Error(o(150));if(Ge=Rt.call(Ge),Ge==null)throw Error(o(151));for(var en=Rt=null,Kt=Ce,bn=Ce=0,$r=null,wn=Ge.next();Kt!==null&&!wn.done;bn++,wn=Ge.next()){Kt.index>bn?($r=Kt,Kt=null):$r=Kt.sibling;var Ta=kt(ke,Kt,wn.value,vt);if(Ta===null){Kt===null&&(Kt=$r);break}x&&Kt&&Ta.alternate===null&&w(ke,Kt),Ce=Q(Ta,Ce,bn),en===null?Rt=Ta:en.sibling=Ta,en=Ta,Kt=$r}if(wn.done)return C(ke,Kt),lr&&Vl(ke,bn),Rt;if(Kt===null){for(;!wn.done;bn++,wn=Ge.next())wn=Yt(ke,wn.value,vt),wn!==null&&(Ce=Q(wn,Ce,bn),en===null?Rt=wn:en.sibling=wn,en=wn);return lr&&Vl(ke,bn),Rt}for(Kt=N(ke,Kt);!wn.done;bn++,wn=Ge.next())wn=sn(Kt,ke,bn,wn.value,vt),wn!==null&&(x&&wn.alternate!==null&&Kt.delete(wn.key===null?bn:wn.key),Ce=Q(wn,Ce,bn),en===null?Rt=wn:en.sibling=wn,en=wn);return x&&Kt.forEach(function(qm){return w(ke,qm)}),lr&&Vl(ke,bn),Rt}function Ms(ke,Ce,Ge,vt){if(typeof Ge=="object"&&Ge!==null&&Ge.type===c&&Ge.key===null&&(Ge=Ge.props.children),typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case l:e:{for(var Rt=Ge.key,en=Ce;en!==null;){if(en.key===Rt){if(Rt=Ge.type,Rt===c){if(en.tag===7){C(ke,en.sibling),Ce=H(en,Ge.props.children),Ce.return=ke,ke=Ce;break e}}else if(en.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===S&&rc(Rt)===en.type){C(ke,en.sibling),Ce=H(en,Ge.props),Ce.ref=nc(ke,en,Ge),Ce.return=ke,ke=Ce;break e}C(ke,en);break}else w(ke,en);en=en.sibling}Ge.type===c?(Ce=du(Ge.props.children,ke.mode,vt,Ge.key),Ce.return=ke,ke=Ce):(vt=bh(Ge.type,Ge.key,Ge.props,null,ke.mode,vt),vt.ref=nc(ke,Ce,Ge),vt.return=ke,ke=vt)}return ge(ke);case u:e:{for(en=Ge.key;Ce!==null;){if(Ce.key===en)if(Ce.tag===4&&Ce.stateNode.containerInfo===Ge.containerInfo&&Ce.stateNode.implementation===Ge.implementation){C(ke,Ce.sibling),Ce=H(Ce,Ge.children||[]),Ce.return=ke,ke=Ce;break e}else{C(ke,Ce);break}else w(ke,Ce);Ce=Ce.sibling}Ce=Mh(Ge,ke.mode,vt),Ce.return=ke,ke=Ce}return ge(ke);case S:return en=Ge._init,Ms(ke,Ce,en(Ge._payload),vt)}if(re(Ge))return _t(ke,Ce,Ge,vt);if(A(Ge))return Ei(ke,Ce,Ge,vt);ll(ke,Ge)}return typeof Ge=="string"&&Ge!==""||typeof Ge=="number"?(Ge=""+Ge,Ce!==null&&Ce.tag===6?(C(ke,Ce.sibling),Ce=H(Ce,Ge),Ce.return=ke,ke=Ce):(C(ke,Ce),Ce=Th(Ge,ke.mode,vt),Ce.return=ke,ke=Ce),ge(ke)):C(ke,Ce)}return Ms}var fa=Cv(!0),Rv=Cv(!1),ic={},ss=Ft(ic),jl=Ft(ic),Wl=Ft(ic);function uo(x){if(x===ic)throw Error(o(174));return x}function Qd(x,w){Gt(Wl,w),Gt(jl,x),Gt(ss,ic),x=X(w),Zt(ss),Gt(ss,x)}function sc(){Zt(ss),Zt(jl),Zt(Wl)}function Pv(x){var w=uo(Wl.current),C=uo(ss.current);w=q(C,x.type,w),C!==w&&(Gt(jl,x),Gt(ss,w))}function ym(x){jl.current===x&&(Zt(ss),Zt(jl))}var pr=Ft(0);function eh(x){for(var w=x;w!==null;){if(w.tag===13){var C=w.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||Mn(C)||On(C)))return w}else if(w.tag===19&&w.memoizedProps.revealOrder!==void 0){if((w.flags&128)!==0)return w}else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===x)break;for(;w.sibling===null;){if(w.return===null||w.return===x)return null;w=w.return}w.sibling.return=w.return,w=w.sibling}return null}var _s=[];function ql(){for(var x=0;x<_s.length;x++){var w=_s[x];_e?w._workInProgressVersionPrimary=null:w._workInProgressVersionSecondary=null}_s.length=0}var sf=a.ReactCurrentDispatcher,xs=a.ReactCurrentBatchConfig,Xl=0,mr=null,ai=null,li=null,th=!1,Do=!1,Yl=0,of=0;function ui(){throw Error(o(321))}function nh(x,w){if(w===null)return!1;for(var C=0;C<w.length&&C<x.length;C++)if(!ri(x[C],w[C]))return!1;return!0}function oc(x,w,C,N,H,Q){if(Xl=Q,mr=w,w.memoizedState=null,w.updateQueue=null,w.lanes=0,sf.current=x===null||x.memoizedState===null?Em:bm,x=C(N,H),Do){Q=0;do{if(Do=!1,Yl=0,25<=Q)throw Error(o(301));Q+=1,li=ai=null,w.updateQueue=null,sf.current=Tm,x=C(N,H)}while(Do)}if(sf.current=cc,w=ai!==null&&ai.next!==null,Xl=0,li=ai=mr=null,th=!1,w)throw Error(o(300));return x}function ul(){var x=Yl!==0;return Yl=0,x}function co(){var x={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return li===null?mr.memoizedState=li=x:li=li.next=x,li}function fo(){if(ai===null){var x=mr.alternate;x=x!==null?x.memoizedState:null}else x=ai.next;var w=li===null?mr.memoizedState:li.next;if(w!==null)li=w,ai=x;else{if(x===null)throw Error(o(310));ai=x,x={memoizedState:ai.memoizedState,baseState:ai.baseState,baseQueue:ai.baseQueue,queue:ai.queue,next:null},li===null?mr.memoizedState=li=x:li=li.next=x}return li}function ko(x,w){return typeof w=="function"?w(x):w}function af(x){var w=fo(),C=w.queue;if(C===null)throw Error(o(311));C.lastRenderedReducer=x;var N=ai,H=N.baseQueue,Q=C.pending;if(Q!==null){if(H!==null){var ge=H.next;H.next=Q.next,Q.next=ge}N.baseQueue=H=Q,C.pending=null}if(H!==null){Q=H.next,N=N.baseState;var Me=ge=null,Ve=null,lt=Q;do{var bt=lt.lane;if((Xl&bt)===bt)Ve!==null&&(Ve=Ve.next={lane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),N=lt.hasEagerState?lt.eagerState:x(N,lt.action);else{var Yt={lane:bt,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null};Ve===null?(Me=Ve=Yt,ge=N):Ve=Ve.next=Yt,mr.lanes|=bt,Fo|=bt}lt=lt.next}while(lt!==null&&lt!==Q);Ve===null?ge=N:Ve.next=Me,ri(N,w.memoizedState)||(ci=!0),w.memoizedState=N,w.baseState=ge,w.baseQueue=Ve,C.lastRenderedState=N}if(x=C.interleaved,x!==null){H=x;do Q=H.lane,mr.lanes|=Q,Fo|=Q,H=H.next;while(H!==x)}else H===null&&(C.lanes=0);return[w.memoizedState,C.dispatch]}function lf(x){var w=fo(),C=w.queue;if(C===null)throw Error(o(311));C.lastRenderedReducer=x;var N=C.dispatch,H=C.pending,Q=w.memoizedState;if(H!==null){C.pending=null;var ge=H=H.next;do Q=x(Q,ge.action),ge=ge.next;while(ge!==H);ri(Q,w.memoizedState)||(ci=!0),w.memoizedState=Q,w.baseQueue===null&&(w.baseState=Q),C.lastRenderedState=Q}return[Q,N]}function vm(){}function _m(x,w){var C=mr,N=fo(),H=w(),Q=!ri(N.memoizedState,H);if(Q&&(N.memoizedState=H,ci=!0),N=N.queue,ac(da.bind(null,C,N,x),[x]),N.getSnapshot!==w||Q||li!==null&&li.memoizedState.tag&1){if(C.flags|=2048,cf(9,wm.bind(null,C,N,H,w),void 0,null),Cr===null)throw Error(o(349));(Xl&30)!==0||xm(C,w,H)}return H}function xm(x,w,C){x.flags|=16384,x={getSnapshot:w,value:C},w=mr.updateQueue,w===null?(w={lastEffect:null,stores:null},mr.updateQueue=w,w.stores=[x]):(C=w.stores,C===null?w.stores=[x]:C.push(x))}function wm(x,w,C,N){w.value=C,w.getSnapshot=N,rh(w)&&Ni(x,1,-1)}function da(x,w,C){return C(function(){rh(w)&&Ni(x,1,-1)})}function rh(x){var w=x.getSnapshot;x=x.value;try{var C=w();return!ri(x,C)}catch{return!0}}function uf(x){var w=co();return typeof x=="function"&&(x=x()),w.memoizedState=w.baseState=x,x={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:x},w.queue=x,x=x.dispatch=xw.bind(null,mr,x),[w.memoizedState,x]}function cf(x,w,C,N){return x={tag:x,create:w,destroy:C,deps:N,next:null},w=mr.updateQueue,w===null?(w={lastEffect:null,stores:null},mr.updateQueue=w,w.lastEffect=x.next=x):(C=w.lastEffect,C===null?w.lastEffect=x.next=x:(N=C.next,C.next=x,x.next=N,w.lastEffect=x)),x}function Iv(){return fo().memoizedState}function cl(x,w,C,N){var H=co();mr.flags|=x,H.memoizedState=cf(1|w,C,void 0,N===void 0?null:N)}function ih(x,w,C,N){var H=fo();N=N===void 0?null:N;var Q=void 0;if(ai!==null){var ge=ai.memoizedState;if(Q=ge.destroy,N!==null&&nh(N,ge.deps)){H.memoizedState=cf(w,C,Q,N);return}}mr.flags|=x,H.memoizedState=cf(1|w,C,Q,N)}function sh(x,w){return cl(8390656,8,x,w)}function ac(x,w){return ih(2048,8,x,w)}function Jn(x,w){return ih(4,2,x,w)}function oh(x,w){return ih(4,4,x,w)}function ff(x,w){if(typeof w=="function")return x=x(),w(x),function(){w(null)};if(w!=null)return x=x(),w.current=x,function(){w.current=null}}function lc(x,w,C){return C=C!=null?C.concat([x]):null,ih(4,4,ff.bind(null,w,x),C)}function ah(){}function lh(x,w){var C=fo();w=w===void 0?null:w;var N=C.memoizedState;return N!==null&&w!==null&&nh(w,N[1])?N[0]:(C.memoizedState=[x,w],x)}function uc(x,w){var C=fo();w=w===void 0?null:w;var N=C.memoizedState;return N!==null&&w!==null&&nh(w,N[1])?N[0]:(x=x(),C.memoizedState=[x,w],x)}function uh(x,w){var C=jt;jt=C!==0&&4>C?C:4,x(!0);var N=xs.transition;xs.transition={};try{x(!1),w()}finally{jt=C,xs.transition=N}}function Kl(){return fo().memoizedState}function Lv(x,w,C){var N=go(x);C={lane:N,action:C,hasEagerState:!1,eagerState:null,next:null},Nv(x)?Sm(w,C):(df(x,w,C),C=Cn(),x=Ni(x,N,C),x!==null&&hf(x,w,N))}function xw(x,w,C){var N=go(x),H={lane:N,action:C,hasEagerState:!1,eagerState:null,next:null};if(Nv(x))Sm(w,H);else{df(x,w,H);var Q=x.alternate;if(x.lanes===0&&(Q===null||Q.lanes===0)&&(Q=w.lastRenderedReducer,Q!==null))try{var ge=w.lastRenderedState,Me=Q(ge,C);if(H.hasEagerState=!0,H.eagerState=Me,ri(Me,ge))return}catch{}finally{}C=Cn(),x=Ni(x,N,C),x!==null&&hf(x,w,N)}}function Nv(x){var w=x.alternate;return x===mr||w!==null&&w===mr}function Sm(x,w){Do=th=!0;var C=x.pending;C===null?w.next=w:(w.next=C.next,C.next=w),x.pending=w}function df(x,w,C){Cr!==null&&(x.mode&1)!==0&&(nn&2)===0?(x=w.interleaved,x===null?(C.next=C,$i===null?$i=[w]:$i.push(w)):(C.next=x.next,x.next=C),w.interleaved=C):(x=w.pending,x===null?C.next=C:(C.next=x.next,x.next=C),w.pending=C)}function hf(x,w,C){if((C&4194240)!==0){var N=w.lanes;N&=x.pendingLanes,C|=N,w.lanes=C,yi(x,C)}}var cc={readContext:hr,useCallback:ui,useContext:ui,useEffect:ui,useImperativeHandle:ui,useInsertionEffect:ui,useLayoutEffect:ui,useMemo:ui,useReducer:ui,useRef:ui,useState:ui,useDebugValue:ui,useDeferredValue:ui,useTransition:ui,useMutableSource:ui,useSyncExternalStore:ui,useId:ui,unstable_isNewReconciler:!1},Em={readContext:hr,useCallback:function(x,w){return co().memoizedState=[x,w===void 0?null:w],x},useContext:hr,useEffect:sh,useImperativeHandle:function(x,w,C){return C=C!=null?C.concat([x]):null,cl(4194308,4,ff.bind(null,w,x),C)},useLayoutEffect:function(x,w){return cl(4194308,4,x,w)},useInsertionEffect:function(x,w){return cl(4,2,x,w)},useMemo:function(x,w){var C=co();return w=w===void 0?null:w,x=x(),C.memoizedState=[x,w],x},useReducer:function(x,w,C){var N=co();return w=C!==void 0?C(w):w,N.memoizedState=N.baseState=w,x={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:x,lastRenderedState:w},N.queue=x,x=x.dispatch=Lv.bind(null,mr,x),[N.memoizedState,x]},useRef:function(x){var w=co();return x={current:x},w.memoizedState=x},useState:uf,useDebugValue:ah,useDeferredValue:function(x){var w=uf(x),C=w[0],N=w[1];return sh(function(){var H=xs.transition;xs.transition={};try{N(x)}finally{xs.transition=H}},[x]),C},useTransition:function(){var x=uf(!1),w=x[0];return x=uh.bind(null,x[1]),co().memoizedState=x,[w,x]},useMutableSource:function(){},useSyncExternalStore:function(x,w,C){var N=mr,H=co();if(lr){if(C===void 0)throw Error(o(407));C=C()}else{if(C=w(),Cr===null)throw Error(o(349));(Xl&30)!==0||xm(N,w,C)}H.memoizedState=C;var Q={value:C,getSnapshot:w};return H.queue=Q,sh(da.bind(null,N,Q,x),[x]),N.flags|=2048,cf(9,wm.bind(null,N,Q,C,w),void 0,null),C},useId:function(){var x=co(),w=Cr.identifierPrefix;if(lr){var C=ca,N=ua;C=(N&~(1<<32-ns(N)-1)).toString(32)+C,w=":"+w+"R"+C,C=Yl++,0<C&&(w+="H"+C.toString(32)),w+=":"}else C=of++,w=":"+w+"r"+C.toString(32)+":";return x.memoizedState=w},unstable_isNewReconciler:!1},bm={readContext:hr,useCallback:lh,useContext:hr,useEffect:ac,useImperativeHandle:lc,useInsertionEffect:Jn,useLayoutEffect:oh,useMemo:uc,useReducer:af,useRef:Iv,useState:function(){return af(ko)},useDebugValue:ah,useDeferredValue:function(x){var w=af(ko),C=w[0],N=w[1];return ac(function(){var H=xs.transition;xs.transition={};try{N(x)}finally{xs.transition=H}},[x]),C},useTransition:function(){var x=af(ko)[0],w=fo().memoizedState;return[x,w]},useMutableSource:vm,useSyncExternalStore:_m,useId:Kl,unstable_isNewReconciler:!1},Tm={readContext:hr,useCallback:lh,useContext:hr,useEffect:ac,useImperativeHandle:lc,useInsertionEffect:Jn,useLayoutEffect:oh,useMemo:uc,useReducer:lf,useRef:Iv,useState:function(){return lf(ko)},useDebugValue:ah,useDeferredValue:function(x){var w=lf(ko),C=w[0],N=w[1];return ac(function(){var H=xs.transition;xs.transition={};try{N(x)}finally{xs.transition=H}},[x]),C},useTransition:function(){var x=lf(ko)[0],w=fo().memoizedState;return[x,w]},useMutableSource:vm,useSyncExternalStore:_m,useId:Kl,unstable_isNewReconciler:!1};function Mm(x,w){try{var C="",N=w;do C+=ia(N),N=N.return;while(N);var H=C}catch(Q){H=`
Error generating stack: `+Q.message+`
`+Q.stack}return{value:x,source:w,stack:H}}function ch(x,w){try{console.error(w.value)}catch(C){setTimeout(function(){throw C})}}var ww=typeof WeakMap=="function"?WeakMap:Map;function Ov(x,w,C){C=la(-1,C),C.tag=3,C.payload={element:null};var N=w.value;return C.callback=function(){gc||(gc=!0,ir=N),ch(x,w)},C}function fh(x,w,C){C=la(-1,C),C.tag=3;var N=x.type.getDerivedStateFromError;if(typeof N=="function"){var H=w.value;C.payload=function(){return N(H)},C.callback=function(){ch(x,w)}}var Q=x.stateNode;return Q!==null&&typeof Q.componentDidCatch=="function"&&(C.callback=function(){ch(x,w),typeof N!="function"&&(mo===null?mo=new Set([this]):mo.add(this));var ge=w.stack;this.componentDidCatch(w.value,{componentStack:ge!==null?ge:""})}),C}function ha(x,w,C){var N=x.pingCache;if(N===null){N=x.pingCache=new ww;var H=new Set;N.set(w,H)}else H=N.get(w),H===void 0&&(H=new Set,N.set(w,H));H.has(C)||(H.add(C),x=Vm.bind(null,x,w,C),w.then(x,x))}function Am(x){do{var w;if((w=x.tag===13)&&(w=x.memoizedState,w=w!==null?w.dehydrated!==null:!0),w)return x;x=x.return}while(x!==null);return null}function Jl(x,w,C,N,H){return(x.mode&1)===0?(x===w?x.flags|=65536:(x.flags|=128,C.flags|=131072,C.flags&=-52805,C.tag===1&&(C.alternate===null?C.tag=17:(w=la(-1,1),w.tag=2,sl(C,w))),C.lanes|=1),x):(x.flags|=65536,x.lanes=H,x)}function Jr(x){x.flags|=4}function fc(x,w){if(x!==null&&x.child===w.child)return!0;if((w.flags&16)!==0)return!1;for(x=w.child;x!==null;){if((x.flags&12854)!==0||(x.subtreeFlags&12854)!==0)return!1;x=x.sibling}return!0}var ws,Zl,dh,hh;if(te)ws=function(x,w){for(var C=w.child;C!==null;){if(C.tag===5||C.tag===6)z(x,C.stateNode);else if(C.tag!==4&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===w)break;for(;C.sibling===null;){if(C.return===null||C.return===w)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},Zl=function(){},dh=function(x,w,C,N,H){if(x=x.memoizedProps,x!==N){var Q=w.stateNode,ge=uo(ss.current);C=B(Q,C,x,N,H,ge),(w.updateQueue=C)&&Jr(w)}},hh=function(x,w,C,N){C!==N&&Jr(w)};else if(j){ws=function(x,w,C,N){for(var H=w.child;H!==null;){if(H.tag===5){var Q=H.stateNode;C&&N&&(Q=Sn(Q,H.type,H.memoizedProps,H)),z(x,Q)}else if(H.tag===6)Q=H.stateNode,C&&N&&(Q=yn(Q,H.memoizedProps,H)),z(x,Q);else if(H.tag!==4){if(H.tag===22&&H.memoizedState!==null)Q=H.child,Q!==null&&(Q.return=H),ws(x,H,!0,!0);else if(H.child!==null){H.child.return=H,H=H.child;continue}}if(H===w)break;for(;H.sibling===null;){if(H.return===null||H.return===w)return;H=H.return}H.sibling.return=H.return,H=H.sibling}};var fl=function(x,w,C,N){for(var H=w.child;H!==null;){if(H.tag===5){var Q=H.stateNode;C&&N&&(Q=Sn(Q,H.type,H.memoizedProps,H)),rn(x,Q)}else if(H.tag===6)Q=H.stateNode,C&&N&&(Q=yn(Q,H.memoizedProps,H)),rn(x,Q);else if(H.tag!==4){if(H.tag===22&&H.memoizedState!==null)Q=H.child,Q!==null&&(Q.return=H),fl(x,H,!0,!0);else if(H.child!==null){H.child.return=H,H=H.child;continue}}if(H===w)break;for(;H.sibling===null;){if(H.return===null||H.return===w)return;H=H.return}H.sibling.return=H.return,H=H.sibling}};Zl=function(x,w){var C=w.stateNode;if(!fc(x,w)){x=C.containerInfo;var N=Vt(x);fl(N,w,!1,!1),C.pendingChildren=N,Jr(w),xn(x,N)}},dh=function(x,w,C,N,H){var Q=x.stateNode,ge=x.memoizedProps;if((x=fc(x,w))&&ge===N)w.stateNode=Q;else{var Me=w.stateNode,Ve=uo(ss.current),lt=null;ge!==N&&(lt=B(Me,C,ge,N,H,Ve)),x&&lt===null?w.stateNode=Q:(Q=ct(Q,lt,C,ge,N,w,x,Me),Y(Q,C,N,H,Ve)&&Jr(w),w.stateNode=Q,x?Jr(w):ws(Q,w,!1,!1))}},hh=function(x,w,C,N){C!==N?(x=uo(Wl.current),C=uo(ss.current),w.stateNode=le(N,x,C,w),Jr(w)):w.stateNode=x.stateNode}}else Zl=function(){},dh=function(){},hh=function(){};function pa(x,w){if(!lr)switch(x.tailMode){case"hidden":w=x.tail;for(var C=null;w!==null;)w.alternate!==null&&(C=w),w=w.sibling;C===null?x.tail=null:C.sibling=null;break;case"collapsed":C=x.tail;for(var N=null;C!==null;)C.alternate!==null&&(N=C),C=C.sibling;N===null?w||x.tail===null?x.tail=null:x.tail.sibling=null:N.sibling=null}}function Ar(x){var w=x.alternate!==null&&x.alternate.child===x.child,C=0,N=0;if(w)for(var H=x.child;H!==null;)C|=H.lanes|H.childLanes,N|=H.subtreeFlags&14680064,N|=H.flags&14680064,H.return=x,H=H.sibling;else for(H=x.child;H!==null;)C|=H.lanes|H.childLanes,N|=H.subtreeFlags,N|=H.flags,H.return=x,H=H.sibling;return x.subtreeFlags|=N,x.childLanes=C,w}function ph(x,w,C){var N=w.pendingProps;switch(pm(w),w.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ar(w),null;case 1:return $n(w.type)&&Xr(),Ar(w),null;case 3:return N=w.stateNode,sc(),Zt(or),Zt(_r),ql(),N.pendingContext&&(N.context=N.pendingContext,N.pendingContext=null),(x===null||x.child===null)&&(rf(w)?Jr(w):x===null||x.memoizedState.isDehydrated&&(w.flags&256)===0||(w.flags|=1024,Gs!==null&&(Mf(Gs),Gs=null))),Zl(x,w),Ar(w),null;case 5:ym(w),C=uo(Wl.current);var H=w.type;if(x!==null&&w.stateNode!=null)dh(x,w,H,N,C),x.ref!==w.ref&&(w.flags|=512,w.flags|=2097152);else{if(!N){if(w.stateNode===null)throw Error(o(166));return Ar(w),null}if(x=uo(ss.current),rf(w)){if(!ce)throw Error(o(175));x=Hi(w.stateNode,w.type,w.memoizedProps,C,x,w,!ec),w.updateQueue=x,x!==null&&Jr(w)}else{var Q=L(H,N,C,x,w);ws(Q,w,!1,!1),w.stateNode=Q,Y(Q,H,N,C,x)&&Jr(w)}w.ref!==null&&(w.flags|=512,w.flags|=2097152)}return Ar(w),null;case 6:if(x&&w.stateNode!=null)hh(x,w,x.memoizedProps,N);else{if(typeof N!="string"&&w.stateNode===null)throw Error(o(166));if(x=uo(Wl.current),C=uo(ss.current),rf(w)){if(!ce)throw Error(o(176));if(x=w.stateNode,N=w.memoizedProps,(C=me(x,N,w,!ec))&&(H=Gi,H!==null))switch(Q=(H.mode&1)!==0,H.tag){case 3:zt(H.stateNode.containerInfo,x,N,Q);break;case 5:Jt(H.type,H.memoizedProps,H.stateNode,x,N,Q)}C&&Jr(w)}else w.stateNode=le(N,x,C,w)}return Ar(w),null;case 13:if(Zt(pr),N=w.memoizedState,lr&&vi!==null&&(w.mode&1)!==0&&(w.flags&128)===0){for(x=vi;x;)x=Dn(x);return tc(),w.flags|=98560,w}if(N!==null&&N.dehydrated!==null){if(N=rf(w),x===null){if(!N)throw Error(o(318));if(!ce)throw Error(o(344));if(x=w.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(o(317));De(x,w)}else tc(),(w.flags&128)===0&&(w.memoizedState=null),w.flags|=4;return Ar(w),null}return Gs!==null&&(Mf(Gs),Gs=null),(w.flags&128)!==0?(w.lanes=C,w):(N=N!==null,C=!1,x===null?rf(w):C=x.memoizedState!==null,N&&!C&&(w.child.flags|=8192,(w.mode&1)!==0&&(x===null||(pr.current&1)!==0?wr===0&&(wr=3):wh())),w.updateQueue!==null&&(w.flags|=4),Ar(w),null);case 4:return sc(),Zl(x,w),x===null&&ie(w.stateNode.containerInfo),Ar(w),null;case 10:return Br(w.type._context),Ar(w),null;case 17:return $n(w.type)&&Xr(),Ar(w),null;case 19:if(Zt(pr),H=w.memoizedState,H===null)return Ar(w),null;if(N=(w.flags&128)!==0,Q=H.rendering,Q===null)if(N)pa(H,!1);else{if(wr!==0||x!==null&&(x.flags&128)!==0)for(x=w.child;x!==null;){if(Q=eh(x),Q!==null){for(w.flags|=128,pa(H,!1),x=Q.updateQueue,x!==null&&(w.updateQueue=x,w.flags|=4),w.subtreeFlags=0,x=C,N=w.child;N!==null;)C=N,H=x,C.flags&=14680066,Q=C.alternate,Q===null?(C.childLanes=0,C.lanes=H,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=Q.childLanes,C.lanes=Q.lanes,C.child=Q.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=Q.memoizedProps,C.memoizedState=Q.memoizedState,C.updateQueue=Q.updateQueue,C.type=Q.type,H=Q.dependencies,C.dependencies=H===null?null:{lanes:H.lanes,firstContext:H.firstContext}),N=N.sibling;return Gt(pr,pr.current&1|2),w.child}x=x.sibling}H.tail!==null&&ar()>pl&&(w.flags|=128,N=!0,pa(H,!1),w.lanes=4194304)}else{if(!N)if(x=eh(Q),x!==null){if(w.flags|=128,N=!0,x=x.updateQueue,x!==null&&(w.updateQueue=x,w.flags|=4),pa(H,!0),H.tail===null&&H.tailMode==="hidden"&&!Q.alternate&&!lr)return Ar(w),null}else 2*ar()-H.renderingStartTime>pl&&C!==1073741824&&(w.flags|=128,N=!0,pa(H,!1),w.lanes=4194304);H.isBackwards?(Q.sibling=w.child,w.child=Q):(x=H.last,x!==null?x.sibling=Q:w.child=Q,H.last=Q)}return H.tail!==null?(w=H.tail,H.rendering=w,H.tail=w.sibling,H.renderingStartTime=ar(),w.sibling=null,x=pr.current,Gt(pr,N?x&1|2:x&1),w):(Ar(w),null);case 22:case 23:return Af(),N=w.memoizedState!==null,x!==null&&x.memoizedState!==null!==N&&(w.flags|=8192),N&&(w.mode&1)!==0?(Li&1073741824)!==0&&(Ar(w),te&&w.subtreeFlags&6&&(w.flags|=8192)):Ar(w),null;case 24:return null;case 25:return null}throw Error(o(156,w.tag))}var Cm=a.ReactCurrentOwner,ci=!1;function xr(x,w,C,N){w.child=x===null?Rv(w,null,C,N):fa(w,x.child,C,N)}function Zn(x,w,C,N,H){C=C.render;var Q=w.ref;return Mr(w,H),N=oc(x,w,C,N,Q,H),C=ul(),x!==null&&!ci?(w.updateQueue=x.updateQueue,w.flags&=-2053,x.lanes&=~H,os(x,w,H)):(lr&&C&&hm(w),w.flags|=1,xr(x,w,N,H),w.child)}function Xn(x,w,C,N,H){if(x===null){var Q=C.type;return typeof Q=="function"&&!Eh(Q)&&Q.defaultProps===void 0&&C.compare===null&&C.defaultProps===void 0?(w.tag=15,w.type=Q,ma(x,w,Q,N,H)):(x=bh(C.type,null,N,w,w.mode,H),x.ref=w.ref,x.return=w,w.child=x)}if(Q=x.child,(x.lanes&H)===0){var ge=Q.memoizedProps;if(C=C.compare,C=C!==null?C:rs,C(ge,N)&&x.ref===w.ref)return os(x,w,H)}return w.flags|=1,x=ba(Q,N),x.ref=w.ref,x.return=w,w.child=x}function ma(x,w,C,N,H){if(x!==null&&rs(x.memoizedProps,N)&&x.ref===w.ref)if(ci=!1,(x.lanes&H)!==0)(x.flags&131072)!==0&&(ci=!0);else return w.lanes=x.lanes,os(x,w,H);return ga(x,w,C,N,H)}function _i(x,w,C){var N=w.pendingProps,H=N.children,Q=x!==null?x.memoizedState:null;if(N.mode==="hidden")if((w.mode&1)===0)w.memoizedState={baseLanes:0,cachePool:null},Gt(au,Li),Li|=C;else if((C&1073741824)!==0)w.memoizedState={baseLanes:0,cachePool:null},N=Q!==null?Q.baseLanes:C,Gt(au,Li),Li|=N;else return x=Q!==null?Q.baseLanes|C:C,w.lanes=w.childLanes=1073741824,w.memoizedState={baseLanes:x,cachePool:null},w.updateQueue=null,Gt(au,Li),Li|=x,null;else Q!==null?(N=Q.baseLanes|C,w.memoizedState=null):N=C,Gt(au,Li),Li|=N;return xr(x,w,H,C),w.child}function Vi(x,w){var C=w.ref;(x===null&&C!==null||x!==null&&x.ref!==C)&&(w.flags|=512,w.flags|=2097152)}function ga(x,w,C,N,H){var Q=$n(C)?ts:_r.current;return Q=In(w,Q),Mr(w,H),C=oc(x,w,C,N,Q,H),N=ul(),x!==null&&!ci?(w.updateQueue=x.updateQueue,w.flags&=-2053,x.lanes&=~H,os(x,w,H)):(lr&&N&&hm(w),w.flags|=1,xr(x,w,C,H),w.child)}function Ql(x,w,C,N,H){if($n(C)){var Q=!0;Po(w)}else Q=!1;if(Mr(w,H),w.stateNode===null)x!==null&&(x.alternate=null,w.alternate=null,w.flags|=2),bv(w,C,N),dm(w,C,N,H),N=!0;else if(x===null){var ge=w.stateNode,Me=w.memoizedProps;ge.props=Me;var Ve=ge.context,lt=C.contextType;typeof lt=="object"&&lt!==null?lt=hr(lt):(lt=$n(C)?ts:_r.current,lt=In(w,lt));var bt=C.getDerivedStateFromProps,Yt=typeof bt=="function"||typeof ge.getSnapshotBeforeUpdate=="function";Yt||typeof ge.UNSAFE_componentWillReceiveProps!="function"&&typeof ge.componentWillReceiveProps!="function"||(Me!==N||Ve!==lt)&&Tv(w,ge,N,lt),Hs=!1;var kt=w.memoizedState;ge.state=kt,qd(w,N,ge,H),Ve=w.memoizedState,Me!==N||kt!==Ve||or.current||Hs?(typeof bt=="function"&&(cm(w,C,bt,N),Ve=w.memoizedState),(Me=Hs||fm(w,C,Me,N,kt,Ve,lt))?(Yt||typeof ge.UNSAFE_componentWillMount!="function"&&typeof ge.componentWillMount!="function"||(typeof ge.componentWillMount=="function"&&ge.componentWillMount(),typeof ge.UNSAFE_componentWillMount=="function"&&ge.UNSAFE_componentWillMount()),typeof ge.componentDidMount=="function"&&(w.flags|=4194308)):(typeof ge.componentDidMount=="function"&&(w.flags|=4194308),w.memoizedProps=N,w.memoizedState=Ve),ge.props=N,ge.state=Ve,ge.context=lt,N=Me):(typeof ge.componentDidMount=="function"&&(w.flags|=4194308),N=!1)}else{ge=w.stateNode,um(x,w),Me=w.memoizedProps,lt=w.type===w.elementType?Me:si(w.type,Me),ge.props=lt,Yt=w.pendingProps,kt=ge.context,Ve=C.contextType,typeof Ve=="object"&&Ve!==null?Ve=hr(Ve):(Ve=$n(C)?ts:_r.current,Ve=In(w,Ve));var sn=C.getDerivedStateFromProps;(bt=typeof sn=="function"||typeof ge.getSnapshotBeforeUpdate=="function")||typeof ge.UNSAFE_componentWillReceiveProps!="function"&&typeof ge.componentWillReceiveProps!="function"||(Me!==Yt||kt!==Ve)&&Tv(w,ge,N,Ve),Hs=!1,kt=w.memoizedState,ge.state=kt,qd(w,N,ge,H);var _t=w.memoizedState;Me!==Yt||kt!==_t||or.current||Hs?(typeof sn=="function"&&(cm(w,C,sn,N),_t=w.memoizedState),(lt=Hs||fm(w,C,lt,N,kt,_t,Ve)||!1)?(bt||typeof ge.UNSAFE_componentWillUpdate!="function"&&typeof ge.componentWillUpdate!="function"||(typeof ge.componentWillUpdate=="function"&&ge.componentWillUpdate(N,_t,Ve),typeof ge.UNSAFE_componentWillUpdate=="function"&&ge.UNSAFE_componentWillUpdate(N,_t,Ve)),typeof ge.componentDidUpdate=="function"&&(w.flags|=4),typeof ge.getSnapshotBeforeUpdate=="function"&&(w.flags|=1024)):(typeof ge.componentDidUpdate!="function"||Me===x.memoizedProps&&kt===x.memoizedState||(w.flags|=4),typeof ge.getSnapshotBeforeUpdate!="function"||Me===x.memoizedProps&&kt===x.memoizedState||(w.flags|=1024),w.memoizedProps=N,w.memoizedState=_t),ge.props=N,ge.state=_t,ge.context=Ve,N=lt):(typeof ge.componentDidUpdate!="function"||Me===x.memoizedProps&&kt===x.memoizedState||(w.flags|=4),typeof ge.getSnapshotBeforeUpdate!="function"||Me===x.memoizedProps&&kt===x.memoizedState||(w.flags|=1024),N=!1)}return Ii(x,w,C,N,Q,H)}function Ii(x,w,C,N,H,Q){Vi(x,w);var ge=(w.flags&128)!==0;if(!N&&!ge)return H&&ni(w,C,!1),os(x,w,Q);N=w.stateNode,Cm.current=w;var Me=ge&&typeof C.getDerivedStateFromError!="function"?null:N.render();return w.flags|=1,x!==null&&ge?(w.child=fa(w,x.child,null,Q),w.child=fa(w,null,Me,Q)):xr(x,w,Me,Q),w.memoizedState=N.state,H&&ni(w,C,!0),w.child}function pf(x){var w=x.stateNode;w.pendingContext?dr(x,w.pendingContext,w.pendingContext!==w.context):w.context&&dr(x,w.context,!1),Qd(x,w.containerInfo)}function Rm(x,w,C,N,H){return tc(),Zd(H),w.flags|=256,xr(x,w,C,N),w.child}var mf={dehydrated:null,treeContext:null,retryLane:0};function eu(x){return{baseLanes:x,cachePool:null}}function Pm(x,w,C){var N=w.pendingProps,H=pr.current,Q=!1,ge=(w.flags&128)!==0,Me;if((Me=ge)||(Me=x!==null&&x.memoizedState===null?!1:(H&2)!==0),Me?(Q=!0,w.flags&=-129):(x===null||x.memoizedState!==null)&&(H|=1),Gt(pr,H&1),x===null)return al(w),x=w.memoizedState,x!==null&&(x=x.dehydrated,x!==null)?((w.mode&1)===0?w.lanes=1:On(x)?w.lanes=8:w.lanes=1073741824,null):(H=N.children,x=N.fallback,Q?(N=w.mode,Q=w.child,H={mode:"hidden",children:H},(N&1)===0&&Q!==null?(Q.childLanes=0,Q.pendingProps=H):Q=Pf(H,N,0,null),x=du(x,N,C,null),Q.return=w,x.return=w,Q.sibling=x,w.child=Q,w.child.memoizedState=eu(C),w.memoizedState=mf,x):ho(w,H));if(H=x.memoizedState,H!==null){if(Me=H.dehydrated,Me!==null){if(ge)return w.flags&256?(w.flags&=-257,yf(x,w,C,Error(o(422)))):w.memoizedState!==null?(w.child=x.child,w.flags|=128,null):(Q=N.fallback,H=w.mode,N=Pf({mode:"visible",children:N.children},H,0,null),Q=du(Q,H,C,null),Q.flags|=2,N.return=w,Q.return=w,N.sibling=Q,w.child=N,(w.mode&1)!==0&&fa(w,x.child,null,C),w.child.memoizedState=eu(C),w.memoizedState=mf,Q);if((w.mode&1)===0)w=yf(x,w,C,null);else if(On(Me))w=yf(x,w,C,Error(o(419)));else if(N=(C&x.childLanes)!==0,ci||N){if(N=Cr,N!==null){switch(C&-C){case 4:Q=2;break;case 16:Q=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Q=32;break;case 536870912:Q=268435456;break;default:Q=0}N=(Q&(N.suspendedLanes|C))!==0?0:Q,N!==0&&N!==H.retryLane&&(H.retryLane=N,Ni(x,N,-1))}wh(),w=yf(x,w,C,Error(o(421)))}else Mn(Me)?(w.flags|=128,w.child=x.child,w=zv.bind(null,x),zr(Me,w),w=null):(C=H.treeContext,ce&&(vi=ks(Me),Gi=w,lr=!0,Gs=null,ec=!1,C!==null&&($s[vs++]=ua,$s[vs++]=ca,$s[vs++]=Gl,ua=C.id,ca=C.overflow,Gl=w)),w=ho(w,w.pendingProps.children),w.flags|=4096);return w}return Q?(N=mh(x,w,N.children,N.fallback,C),Q=w.child,H=x.child.memoizedState,Q.memoizedState=H===null?eu(C):{baseLanes:H.baseLanes|C,cachePool:null},Q.childLanes=x.childLanes&~C,w.memoizedState=mf,N):(C=gf(x,w,N.children,C),w.memoizedState=null,C)}return Q?(N=mh(x,w,N.children,N.fallback,C),Q=w.child,H=x.child.memoizedState,Q.memoizedState=H===null?eu(C):{baseLanes:H.baseLanes|C,cachePool:null},Q.childLanes=x.childLanes&~C,w.memoizedState=mf,N):(C=gf(x,w,N.children,C),w.memoizedState=null,C)}function ho(x,w){return w=Pf({mode:"visible",children:w},x.mode,0,null),w.return=x,x.child=w}function gf(x,w,C,N){var H=x.child;return x=H.sibling,C=ba(H,{mode:"visible",children:C}),(w.mode&1)===0&&(C.lanes=N),C.return=w,C.sibling=null,x!==null&&(N=w.deletions,N===null?(w.deletions=[x],w.flags|=16):N.push(x)),w.child=C}function mh(x,w,C,N,H){var Q=w.mode;x=x.child;var ge=x.sibling,Me={mode:"hidden",children:C};return(Q&1)===0&&w.child!==x?(C=w.child,C.childLanes=0,C.pendingProps=Me,w.deletions=null):(C=ba(x,Me),C.subtreeFlags=x.subtreeFlags&14680064),ge!==null?N=ba(ge,N):(N=du(N,Q,H,null),N.flags|=2),N.return=w,C.return=w,C.sibling=N,w.child=C,N}function yf(x,w,C,N){return N!==null&&Zd(N),fa(w,x.child,null,C),x=ho(w,w.pendingProps.children),x.flags|=2,w.memoizedState=null,x}function Dv(x,w,C){x.lanes|=w;var N=x.alternate;N!==null&&(N.lanes|=w),Kr(x.return,w,C)}function Uo(x,w,C,N,H){var Q=x.memoizedState;Q===null?x.memoizedState={isBackwards:w,rendering:null,renderingStartTime:0,last:N,tail:C,tailMode:H}:(Q.isBackwards=w,Q.rendering=null,Q.renderingStartTime=0,Q.last=N,Q.tail=C,Q.tailMode=H)}function tu(x,w,C){var N=w.pendingProps,H=N.revealOrder,Q=N.tail;if(xr(x,w,N.children,C),N=pr.current,(N&2)!==0)N=N&1|2,w.flags|=128;else{if(x!==null&&(x.flags&128)!==0)e:for(x=w.child;x!==null;){if(x.tag===13)x.memoizedState!==null&&Dv(x,C,w);else if(x.tag===19)Dv(x,C,w);else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===w)break e;for(;x.sibling===null;){if(x.return===null||x.return===w)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}N&=1}if(Gt(pr,N),(w.mode&1)===0)w.memoizedState=null;else switch(H){case"forwards":for(C=w.child,H=null;C!==null;)x=C.alternate,x!==null&&eh(x)===null&&(H=C),C=C.sibling;C=H,C===null?(H=w.child,w.child=null):(H=C.sibling,C.sibling=null),Uo(w,!1,H,C,Q);break;case"backwards":for(C=null,H=w.child,w.child=null;H!==null;){if(x=H.alternate,x!==null&&eh(x)===null){w.child=H;break}x=H.sibling,H.sibling=C,C=H,H=x}Uo(w,!0,C,null,Q);break;case"together":Uo(w,!1,null,null,void 0);break;default:w.memoizedState=null}return w.child}function os(x,w,C){if(x!==null&&(w.dependencies=x.dependencies),Fo|=w.lanes,(C&w.childLanes)===0)return null;if(x!==null&&w.child!==x.child)throw Error(o(153));if(w.child!==null){for(x=w.child,C=ba(x,x.pendingProps),w.child=C,C.return=w;x.sibling!==null;)x=x.sibling,C=C.sibling=ba(x,x.pendingProps),C.return=w;C.sibling=null}return w.child}function gh(x,w,C){switch(w.tag){case 3:pf(w),tc();break;case 5:Pv(w);break;case 1:$n(w.type)&&Po(w);break;case 4:Qd(w,w.stateNode.containerInfo);break;case 10:aa(w,w.type._context,w.memoizedProps.value);break;case 13:var N=w.memoizedState;if(N!==null)return N.dehydrated!==null?(Gt(pr,pr.current&1),w.flags|=128,null):(C&w.child.childLanes)!==0?Pm(x,w,C):(Gt(pr,pr.current&1),x=os(x,w,C),x!==null?x.sibling:null);Gt(pr,pr.current&1);break;case 19:if(N=(C&w.childLanes)!==0,(x.flags&128)!==0){if(N)return tu(x,w,C);w.flags|=128}var H=w.memoizedState;if(H!==null&&(H.rendering=null,H.tail=null,H.lastEffect=null),Gt(pr,pr.current),N)break;return null;case 22:case 23:return w.lanes=0,_i(x,w,C)}return os(x,w,C)}function yh(x,w){switch(pm(w),w.tag){case 1:return $n(w.type)&&Xr(),x=w.flags,x&65536?(w.flags=x&-65537|128,w):null;case 3:return sc(),Zt(or),Zt(_r),ql(),x=w.flags,(x&65536)!==0&&(x&128)===0?(w.flags=x&-65537|128,w):null;case 5:return ym(w),null;case 13:if(Zt(pr),x=w.memoizedState,x!==null&&x.dehydrated!==null){if(w.alternate===null)throw Error(o(340));tc()}return x=w.flags,x&65536?(w.flags=x&-65537|128,w):null;case 19:return Zt(pr),null;case 4:return sc(),null;case 10:return Br(w.type._context),null;case 22:case 23:return Af(),null;case 24:return null;default:return null}}var ji=!1,fi=!1,nu=typeof WeakSet=="function"?WeakSet:Set,ft=null;function Vs(x,w){var C=x.ref;if(C!==null)if(typeof C=="function")try{C(null)}catch(N){qi(x,w,N)}else C.current=null}function ya(x,w,C){try{C()}catch(N){qi(x,w,N)}}var Im=!1;function Lm(x,w){for(K(x.containerInfo),ft=w;ft!==null;)if(x=ft,w=x.child,(x.subtreeFlags&1028)!==0&&w!==null)w.return=x,ft=w;else for(;ft!==null;){x=ft;try{var C=x.alternate;if((x.flags&1024)!==0)switch(x.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var N=C.memoizedProps,H=C.memoizedState,Q=x.stateNode,ge=Q.getSnapshotBeforeUpdate(x.elementType===x.type?N:si(x.type,N),H);Q.__reactInternalSnapshotBeforeUpdate=ge}break;case 3:te&&rt(x.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Me){qi(x,x.return,Me)}if(w=x.sibling,w!==null){w.return=x.return,ft=w;break}ft=x.return}return C=Im,Im=!1,C}function va(x,w,C){var N=w.updateQueue;if(N=N!==null?N.lastEffect:null,N!==null){var H=N=N.next;do{if((H.tag&x)===x){var Q=H.destroy;H.destroy=void 0,Q!==void 0&&ya(w,C,Q)}H=H.next}while(H!==N)}}function xi(x,w){if(w=w.updateQueue,w=w!==null?w.lastEffect:null,w!==null){var C=w=w.next;do{if((C.tag&x)===x){var N=C.create;C.destroy=N()}C=C.next}while(C!==w)}}function Wi(x){var w=x.ref;if(w!==null){var C=x.stateNode;switch(x.tag){case 5:x=ne(C);break;default:x=C}typeof w=="function"?w(x):w.current=x}}function rr(x,w,C){if(ys&&typeof ys.onCommitFiberUnmount=="function")try{ys.onCommitFiberUnmount(tl,w)}catch{}switch(w.tag){case 0:case 11:case 14:case 15:if(x=w.updateQueue,x!==null&&(x=x.lastEffect,x!==null)){var N=x=x.next;do{var H=N,Q=H.destroy;H=H.tag,Q!==void 0&&((H&2)!==0||(H&4)!==0)&&ya(w,C,Q),N=N.next}while(N!==x)}break;case 1:if(Vs(w,C),x=w.stateNode,typeof x.componentWillUnmount=="function")try{x.props=w.memoizedProps,x.state=w.memoizedState,x.componentWillUnmount()}catch(ge){qi(w,C,ge)}break;case 5:Vs(w,C);break;case 4:te?Dm(x,w,C):j&&j&&(w=w.stateNode.containerInfo,C=Vt(w),hn(w,C))}}function js(x,w,C){for(var N=w;;)if(rr(x,N,C),N.child===null||te&&N.tag===4){if(N===w)break;for(;N.sibling===null;){if(N.return===null||N.return===w)return;N=N.return}N.sibling.return=N.return,N=N.sibling}else N.child.return=N,N=N.child}function Nm(x){var w=x.alternate;w!==null&&(x.alternate=null,Nm(w)),x.child=null,x.deletions=null,x.sibling=null,x.tag===5&&(w=x.stateNode,w!==null&&Ae(w)),x.stateNode=null,x.return=null,x.dependencies=null,x.memoizedProps=null,x.memoizedState=null,x.pendingProps=null,x.stateNode=null,x.updateQueue=null}function Om(x){return x.tag===5||x.tag===3||x.tag===4}function vh(x){e:for(;;){for(;x.sibling===null;){if(x.return===null||Om(x.return))return null;x=x.return}for(x.sibling.return=x.return,x=x.sibling;x.tag!==5&&x.tag!==6&&x.tag!==18;){if(x.flags&2||x.child===null||x.tag===4)continue e;x.child.return=x,x=x.child}if(!(x.flags&2))return x.stateNode}}function _h(x){if(te){e:{for(var w=x.return;w!==null;){if(Om(w))break e;w=w.return}throw Error(o(160))}var C=w;switch(C.tag){case 5:w=C.stateNode,C.flags&32&&(xt(w),C.flags&=-33),C=vh(x),dc(x,C,w);break;case 3:case 4:w=C.stateNode.containerInfo,C=vh(x),xh(x,C,w);break;default:throw Error(o(161))}}}function xh(x,w,C){var N=x.tag;if(N===5||N===6)x=x.stateNode,w?at(C,x,w):Ze(C,x);else if(N!==4&&(x=x.child,x!==null))for(xh(x,w,C),x=x.sibling;x!==null;)xh(x,w,C),x=x.sibling}function dc(x,w,C){var N=x.tag;if(N===5||N===6)x=x.stateNode,w?ht(C,x,w):He(C,x);else if(N!==4&&(x=x.child,x!==null))for(dc(x,w,C),x=x.sibling;x!==null;)dc(x,w,C),x=x.sibling}function Dm(x,w,C){for(var N=w,H=!1,Q,ge;;){if(!H){H=N.return;e:for(;;){if(H===null)throw Error(o(160));switch(Q=H.stateNode,H.tag){case 5:ge=!1;break e;case 3:Q=Q.containerInfo,ge=!0;break e;case 4:Q=Q.containerInfo,ge=!0;break e}H=H.return}H=!0}if(N.tag===5||N.tag===6)js(x,N,C),ge?ot(Q,N.stateNode):Qe(Q,N.stateNode);else if(N.tag===18)ge?Lt(Q,N.stateNode):St(Q,N.stateNode);else if(N.tag===4){if(N.child!==null){Q=N.stateNode.containerInfo,ge=!0,N.child.return=N,N=N.child;continue}}else if(rr(x,N,C),N.child!==null){N.child.return=N,N=N.child;continue}if(N===w)break;for(;N.sibling===null;){if(N.return===null||N.return===w)return;N=N.return,N.tag===4&&(H=!1)}N.sibling.return=N.return,N=N.sibling}}function dl(x,w){if(te){switch(w.tag){case 0:case 11:case 14:case 15:va(3,w,w.return),xi(3,w),va(5,w,w.return);return;case 1:return;case 5:var C=w.stateNode;if(C!=null){var N=w.memoizedProps;x=x!==null?x.memoizedProps:N;var H=w.type,Q=w.updateQueue;w.updateQueue=null,Q!==null&&st(C,Q,H,x,N,w)}return;case 6:if(w.stateNode===null)throw Error(o(162));C=w.memoizedProps,Ke(w.stateNode,x!==null?x.memoizedProps:C,C);return;case 3:ce&&x!==null&&x.memoizedState.isDehydrated&&Pe(w.stateNode.containerInfo);return;case 12:return;case 13:hc(w);return;case 19:hc(w);return;case 17:return}throw Error(o(163))}switch(w.tag){case 0:case 11:case 14:case 15:va(3,w,w.return),xi(3,w),va(5,w,w.return);return;case 12:return;case 13:hc(w);return;case 19:hc(w);return;case 3:ce&&x!==null&&x.memoizedState.isDehydrated&&Pe(w.stateNode.containerInfo);break;case 22:case 23:return}e:if(j){switch(w.tag){case 1:case 5:case 6:break e;case 3:case 4:w=w.stateNode,hn(w.containerInfo,w.pendingChildren);break e}throw Error(o(163))}}function hc(x){var w=x.updateQueue;if(w!==null){x.updateQueue=null;var C=x.stateNode;C===null&&(C=x.stateNode=new nu),w.forEach(function(N){var H=Bv.bind(null,x,N);C.has(N)||(C.add(N),N.then(H,H))})}}function Sw(x,w){for(ft=w;ft!==null;){w=ft;var C=w.deletions;if(C!==null)for(var N=0;N<C.length;N++){var H=C[N];try{var Q=x;te?Dm(Q,H,w):js(Q,H,w);var ge=H.alternate;ge!==null&&(ge.return=null),H.return=null}catch(Rt){qi(H,w,Rt)}}if(C=w.child,(w.subtreeFlags&12854)!==0&&C!==null)C.return=w,ft=C;else for(;ft!==null;){w=ft;try{var Me=w.flags;if(Me&32&&te&&xt(w.stateNode),Me&512){var Ve=w.alternate;if(Ve!==null){var lt=Ve.ref;lt!==null&&(typeof lt=="function"?lt(null):lt.current=null)}}if(Me&8192)switch(w.tag){case 13:if(w.memoizedState!==null){var bt=w.alternate;(bt===null||bt.memoizedState===null)&&(bf=ar())}break;case 22:var Yt=w.memoizedState!==null,kt=w.alternate,sn=kt!==null&&kt.memoizedState!==null;if(C=w,te){e:if(N=C,H=Yt,Q=null,te)for(var _t=N;;){if(_t.tag===5){if(Q===null){Q=_t;var Ei=_t.stateNode;H?Ut(Ei):et(_t.stateNode,_t.memoizedProps)}}else if(_t.tag===6){if(Q===null){var Ms=_t.stateNode;H?xe(Ms):Ne(Ms,_t.memoizedProps)}}else if((_t.tag!==22&&_t.tag!==23||_t.memoizedState===null||_t===N)&&_t.child!==null){_t.child.return=_t,_t=_t.child;continue}if(_t===N)break;for(;_t.sibling===null;){if(_t.return===null||_t.return===N)break e;Q===_t&&(Q=null),_t=_t.return}Q===_t&&(Q=null),_t.sibling.return=_t.return,_t=_t.sibling}}if(Yt&&!sn&&(C.mode&1)!==0){ft=C;for(var ke=C.child;ke!==null;){for(C=ft=ke;ft!==null;){N=ft;var Ce=N.child;switch(N.tag){case 0:case 11:case 14:case 15:va(4,N,N.return);break;case 1:Vs(N,N.return);var Ge=N.stateNode;if(typeof Ge.componentWillUnmount=="function"){var vt=N.return;try{Ge.props=N.memoizedProps,Ge.state=N.memoizedState,Ge.componentWillUnmount()}catch(Rt){qi(N,vt,Rt)}}break;case 5:Vs(N,N.return);break;case 22:if(N.memoizedState!==null){Um(C);continue}}Ce!==null?(Ce.return=N,ft=Ce):Um(C)}ke=ke.sibling}}}switch(Me&4102){case 2:_h(w),w.flags&=-3;break;case 6:_h(w),w.flags&=-3,dl(w.alternate,w);break;case 4096:w.flags&=-4097;break;case 4100:w.flags&=-4097,dl(w.alternate,w);break;case 4:dl(w.alternate,w)}}catch(Rt){qi(w,w.return,Rt)}if(C=w.sibling,C!==null){C.return=w.return,ft=C;break}ft=w.return}}}function vf(x,w,C){ft=x,_f(x)}function _f(x,w,C){for(var N=(x.mode&1)!==0;ft!==null;){var H=ft,Q=H.child;if(H.tag===22&&N){var ge=H.memoizedState!==null||ji;if(!ge){var Me=H.alternate,Ve=Me!==null&&Me.memoizedState!==null||fi;Me=ji;var lt=fi;if(ji=ge,(fi=Ve)&&!lt)for(ft=H;ft!==null;)ge=ft,Ve=ge.child,ge.tag===22&&ge.memoizedState!==null?ru(H):Ve!==null?(Ve.return=ge,ft=Ve):ru(H);for(;Q!==null;)ft=Q,_f(Q),Q=Q.sibling;ft=H,ji=Me,fi=lt}km(x)}else(H.subtreeFlags&8772)!==0&&Q!==null?(Q.return=H,ft=Q):km(x)}}function km(x){for(;ft!==null;){var w=ft;if((w.flags&8772)!==0){var C=w.alternate;try{if((w.flags&8772)!==0)switch(w.tag){case 0:case 11:case 15:fi||xi(5,w);break;case 1:var N=w.stateNode;if(w.flags&4&&!fi)if(C===null)N.componentDidMount();else{var H=w.elementType===w.type?C.memoizedProps:si(w.type,C.memoizedProps);N.componentDidUpdate(H,C.memoizedState,N.__reactInternalSnapshotBeforeUpdate)}var Q=w.updateQueue;Q!==null&&Sv(w,Q,N);break;case 3:var ge=w.updateQueue;if(ge!==null){if(C=null,w.child!==null)switch(w.child.tag){case 5:C=ne(w.child.stateNode);break;case 1:C=w.child.stateNode}Sv(w,ge,C)}break;case 5:var Me=w.stateNode;C===null&&w.flags&4&&Ue(Me,w.type,w.memoizedProps,w);break;case 6:break;case 4:break;case 12:break;case 13:if(ce&&w.memoizedState===null){var Ve=w.alternate;if(Ve!==null){var lt=Ve.memoizedState;if(lt!==null){var bt=lt.dehydrated;bt!==null&&We(bt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}fi||w.flags&512&&Wi(w)}catch(Yt){qi(w,w.return,Yt)}}if(w===x){ft=null;break}if(C=w.sibling,C!==null){C.return=w.return,ft=C;break}ft=w.return}}function Um(x){for(;ft!==null;){var w=ft;if(w===x){ft=null;break}var C=w.sibling;if(C!==null){C.return=w.return,ft=C;break}ft=w.return}}function ru(x){for(;ft!==null;){var w=ft;try{switch(w.tag){case 0:case 11:case 15:var C=w.return;try{xi(4,w)}catch(Ve){qi(w,C,Ve)}break;case 1:var N=w.stateNode;if(typeof N.componentDidMount=="function"){var H=w.return;try{N.componentDidMount()}catch(Ve){qi(w,H,Ve)}}var Q=w.return;try{Wi(w)}catch(Ve){qi(w,Q,Ve)}break;case 5:var ge=w.return;try{Wi(w)}catch(Ve){qi(w,ge,Ve)}}}catch(Ve){qi(w,w.return,Ve)}if(w===x){ft=null;break}var Me=w.sibling;if(Me!==null){Me.return=w.return,ft=Me;break}ft=w.return}}var xf=0,iu=1,su=2,_a=3,pc=4;if(typeof Symbol=="function"&&Symbol.for){var ou=Symbol.for;xf=ou("selector.component"),iu=ou("selector.has_pseudo_class"),su=ou("selector.role"),_a=ou("selector.test_id"),pc=ou("selector.text")}function wf(x){var w=fe(x);if(w!=null){if(typeof w.memoizedProps["data-testname"]!="string")throw Error(o(364));return w}if(x=be(x),x===null)throw Error(o(362));return x.stateNode.current}function Sf(x,w){switch(w.$$typeof){case xf:if(x.type===w.value)return!0;break;case iu:e:{w=w.value,x=[x,0];for(var C=0;C<x.length;){var N=x[C++],H=x[C++],Q=w[H];if(N.tag!==5||!oe(N)){for(;Q!=null&&Sf(N,Q);)H++,Q=w[H];if(H===w.length){w=!0;break e}else for(N=N.child;N!==null;)x.push(N,H),N=N.sibling}}w=!1}return w;case su:if(x.tag===5&&ye(x.stateNode,w.value))return!0;break;case pc:if((x.tag===5||x.tag===6)&&(x=ue(x),x!==null&&0<=x.indexOf(w.value)))return!0;break;case _a:if(x.tag===5&&(x=x.memoizedProps["data-testname"],typeof x=="string"&&x.toLowerCase()===w.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function hl(x){switch(x.$$typeof){case xf:return"<"+(R(x.value)||"Unknown")+">";case iu:return":has("+(hl(x)||"")+")";case su:return'[role="'+x.value+'"]';case pc:return'"'+x.value+'"';case _a:return'[data-testname="'+x.value+'"]';default:throw Error(o(365))}}function Ss(x,w){var C=[];x=[x,0];for(var N=0;N<x.length;){var H=x[N++],Q=x[N++],ge=w[Q];if(H.tag!==5||!oe(H)){for(;ge!=null&&Sf(H,ge);)Q++,ge=w[Q];if(Q===w.length)C.push(H);else for(H=H.child;H!==null;)x.push(H,Q),H=H.sibling}}return C}function xa(x,w){if(!Le)throw Error(o(363));x=wf(x),x=Ss(x,w),w=[],x=Array.from(x);for(var C=0;C<x.length;){var N=x[C++];if(N.tag===5)oe(N)||w.push(N.stateNode);else for(N=N.child;N!==null;)x.push(N),N=N.sibling}return w}var Fm=Math.ceil,Ef=a.ReactCurrentDispatcher,po=a.ReactCurrentOwner,Gn=a.ReactCurrentBatchConfig,nn=0,Cr=null,Vn=null,ur=0,Li=0,au=Ft(0),wr=0,mc=null,Fo=0,Es=0,lu=0,wa=null,Hr=null,bf=0,pl=1/0;function uu(){pl=ar()+500}var gc=!1,ir=null,mo=null,yc=!1,zo=null,cu=0,fu=0,Sa=null,Qn=-1,Sr=0;function Cn(){return(nn&6)!==0?ar():Qn!==-1?Qn:Qn=ar()}function go(x){return(x.mode&1)===0?1:(nn&2)!==0&&ur!==0?ur&-ur:il.transition!==null?(Sr===0&&(x=oo,oo<<=1,(oo&4194240)===0&&(oo=64),Sr=x),Sr):(x=jt,x!==0?x:se())}function Ni(x,w,C){if(50<fu)throw fu=0,Sa=null,Error(o(185));var N=ml(x,w);return N===null?null:(Us(N,w,C),((nn&2)===0||N!==Cr)&&(N===Cr&&((nn&2)===0&&(Es|=w),wr===4&&Si(N,ur)),as(N,C),w===1&&nn===0&&(x.mode&1)===0&&(uu(),Oo&&Pi())),N)}function ml(x,w){x.lanes|=w;var C=x.alternate;for(C!==null&&(C.lanes|=w),C=x,x=x.return;x!==null;)x.childLanes|=w,C=x.alternate,C!==null&&(C.childLanes|=w),C=x,x=x.return;return C.tag===3?C.stateNode:null}function as(x,w){var C=x.callbackNode;Ju(x,w);var N=Qa(x,x===Cr?ur:0);if(N===0)C!==null&&No(C),x.callbackNode=null,x.callbackPriority=0;else if(w=N&-N,x.callbackPriority!==w){if(C!=null&&No(C),w===1)x.tag===0?rl(bs.bind(null,x)):$l(bs.bind(null,x)),we?Re(function(){nn===0&&Pi()}):gs(lo,Pi),C=null;else{switch(Fs(N)){case 1:C=lo;break;case 4:C=Vd;break;case 16:C=Ri;break;case 536870912:C=el;break;default:C=Ri}C=Sh(C,wi.bind(null,x))}x.callbackPriority=w,x.callbackNode=C}}function wi(x,w){if(Qn=-1,Sr=0,(nn&6)!==0)throw Error(o(327));var C=x.callbackNode;if(Bo()&&x.callbackNode!==C)return null;var N=Qa(x,x===Cr?ur:0);if(N===0)return null;if((N&30)!==0||(N&x.expiredLanes)!==0||w)w=Cf(x,N);else{w=N;var H=nn;nn|=2;var Q=Hm();(Cr!==x||ur!==w)&&(uu(),Ea(x,w));do try{Uv();break}catch(Me){Bm(x,Me)}while(!0);oi(),Ef.current=Q,nn=H,Vn!==null?w=0:(Cr=null,ur=0,w=wr)}if(w!==0){if(w===2&&(H=Lo(x),H!==0&&(N=H,w=Tf(x,H))),w===1)throw C=mc,Ea(x,0),Si(x,N),as(x,ar()),C;if(w===6)Si(x,N);else{if(H=x.current.alternate,(N&30)===0&&!zm(H)&&(w=Cf(x,N),w===2&&(Q=Lo(x),Q!==0&&(N=Q,w=Tf(x,Q))),w===1))throw C=mc,Ea(x,0),Si(x,N),as(x,ar()),C;switch(x.finishedWork=H,x.finishedLanes=N,w){case 0:case 1:throw Error(o(345));case 2:yo(x,Hr);break;case 3:if(Si(x,N),(N&130023424)===N&&(w=bf+500-ar(),10<w)){if(Qa(x,0)!==0)break;if(H=x.suspendedLanes,(H&N)!==N){Cn(),x.pingedLanes|=x.suspendedLanes&H;break}x.timeoutHandle=pe(yo.bind(null,x,Hr),w);break}yo(x,Hr);break;case 4:if(Si(x,N),(N&4194240)===N)break;for(w=x.eventTimes,H=-1;0<N;){var ge=31-ns(N);Q=1<<ge,ge=w[ge],ge>H&&(H=ge),N&=~Q}if(N=H,N=ar()-N,N=(120>N?120:480>N?480:1080>N?1080:1920>N?1920:3e3>N?3e3:4320>N?4320:1960*Fm(N/1960))-N,10<N){x.timeoutHandle=pe(yo.bind(null,x,Hr),N);break}yo(x,Hr);break;case 5:yo(x,Hr);break;default:throw Error(o(329))}}}return as(x,ar()),x.callbackNode===C?wi.bind(null,x):null}function Tf(x,w){var C=wa;return x.current.memoizedState.isDehydrated&&(Ea(x,w).flags|=256),x=Cf(x,w),x!==2&&(w=Hr,Hr=C,w!==null&&Mf(w)),x}function Mf(x){Hr===null?Hr=x:Hr.push.apply(Hr,x)}function zm(x){for(var w=x;;){if(w.flags&16384){var C=w.updateQueue;if(C!==null&&(C=C.stores,C!==null))for(var N=0;N<C.length;N++){var H=C[N],Q=H.getSnapshot;H=H.value;try{if(!ri(Q(),H))return!1}catch{return!1}}}if(C=w.child,w.subtreeFlags&16384&&C!==null)C.return=w,w=C;else{if(w===x)break;for(;w.sibling===null;){if(w.return===null||w.return===x)return!0;w=w.return}w.sibling.return=w.return,w=w.sibling}}return!0}function Si(x,w){for(w&=~lu,w&=~Es,x.suspendedLanes|=w,x.pingedLanes&=~w,x=x.expirationTimes;0<w;){var C=31-ns(w),N=1<<C;x[C]=-1,w&=~N}}function bs(x){if((nn&6)!==0)throw Error(o(327));Bo();var w=Qa(x,0);if((w&1)===0)return as(x,ar()),null;var C=Cf(x,w);if(x.tag!==0&&C===2){var N=Lo(x);N!==0&&(w=N,C=Tf(x,N))}if(C===1)throw C=mc,Ea(x,0),Si(x,w),as(x,ar()),C;if(C===6)throw Error(o(345));return x.finishedWork=x.current.alternate,x.finishedLanes=w,yo(x,Hr),as(x,ar()),null}function vc(x){zo!==null&&zo.tag===0&&(nn&6)===0&&Bo();var w=nn;nn|=1;var C=Gn.transition,N=jt;try{if(Gn.transition=null,jt=1,x)return x()}finally{jt=N,Gn.transition=C,nn=w,(nn&6)===0&&Pi()}}function Af(){Li=au.current,Zt(au)}function Ea(x,w){x.finishedWork=null,x.finishedLanes=0;var C=x.timeoutHandle;if(C!==Ee&&(x.timeoutHandle=Ee,he(C)),Vn!==null)for(C=Vn.return;C!==null;){var N=C;switch(pm(N),N.tag){case 1:N=N.type.childContextTypes,N!=null&&Xr();break;case 3:sc(),Zt(or),Zt(_r),ql();break;case 5:ym(N);break;case 4:sc();break;case 13:Zt(pr);break;case 19:Zt(pr);break;case 10:Br(N.type._context);break;case 22:case 23:Af()}C=C.return}if(Cr=x,Vn=x=ba(x.current,null),ur=Li=w,wr=0,mc=null,lu=Es=Fo=0,Hr=wa=null,$i!==null){for(w=0;w<$i.length;w++)if(C=$i[w],N=C.interleaved,N!==null){C.interleaved=null;var H=N.next,Q=C.pending;if(Q!==null){var ge=Q.next;Q.next=H,N.next=ge}C.pending=N}$i=null}return x}function Bm(x,w){do{var C=Vn;try{if(oi(),sf.current=cc,th){for(var N=mr.memoizedState;N!==null;){var H=N.queue;H!==null&&(H.pending=null),N=N.next}th=!1}if(Xl=0,li=ai=mr=null,Do=!1,Yl=0,po.current=null,C===null||C.return===null){wr=1,mc=w,Vn=null;break}e:{var Q=x,ge=C.return,Me=C,Ve=w;if(w=ur,Me.flags|=32768,Ve!==null&&typeof Ve=="object"&&typeof Ve.then=="function"){var lt=Ve,bt=Me,Yt=bt.tag;if((bt.mode&1)===0&&(Yt===0||Yt===11||Yt===15)){var kt=bt.alternate;kt?(bt.updateQueue=kt.updateQueue,bt.memoizedState=kt.memoizedState,bt.lanes=kt.lanes):(bt.updateQueue=null,bt.memoizedState=null)}var sn=Am(ge);if(sn!==null){sn.flags&=-257,Jl(sn,ge,Me,Q,w),sn.mode&1&&ha(Q,lt,w),w=sn,Ve=lt;var _t=w.updateQueue;if(_t===null){var Ei=new Set;Ei.add(Ve),w.updateQueue=Ei}else _t.add(Ve);break e}else{if((w&1)===0){ha(Q,lt,w),wh();break e}Ve=Error(o(426))}}else if(lr&&Me.mode&1){var Ms=Am(ge);if(Ms!==null){(Ms.flags&65536)===0&&(Ms.flags|=256),Jl(Ms,ge,Me,Q,w),Zd(Ve);break e}}Q=Ve,wr!==4&&(wr=2),wa===null?wa=[Q]:wa.push(Q),Ve=Mm(Ve,Me),Me=ge;do{switch(Me.tag){case 3:Me.flags|=65536,w&=-w,Me.lanes|=w;var ke=Ov(Me,Ve,w);Wd(Me,ke);break e;case 1:Q=Ve;var Ce=Me.type,Ge=Me.stateNode;if((Me.flags&128)===0&&(typeof Ce.getDerivedStateFromError=="function"||Ge!==null&&typeof Ge.componentDidCatch=="function"&&(mo===null||!mo.has(Ge)))){Me.flags|=65536,w&=-w,Me.lanes|=w;var vt=fh(Me,Q,w);Wd(Me,vt);break e}}Me=Me.return}while(Me!==null)}Gm(C)}catch(Rt){w=Rt,Vn===C&&C!==null&&(Vn=C=C.return);continue}break}while(!0)}function Hm(){var x=Ef.current;return Ef.current=cc,x===null?cc:x}function wh(){(wr===0||wr===3||wr===2)&&(wr=4),Cr===null||(Fo&268435455)===0&&(Es&268435455)===0||Si(Cr,ur)}function Cf(x,w){var C=nn;nn|=2;var N=Hm();Cr===x&&ur===w||Ea(x,w);do try{kv();break}catch(H){Bm(x,H)}while(!0);if(oi(),nn=C,Ef.current=N,Vn!==null)throw Error(o(261));return Cr=null,ur=0,wr}function kv(){for(;Vn!==null;)$m(Vn)}function Uv(){for(;Vn!==null&&!zs();)$m(Vn)}function $m(x){var w=Wm(x.alternate,x,Li);x.memoizedProps=x.pendingProps,w===null?Gm(x):Vn=w,po.current=null}function Gm(x){var w=x;do{var C=w.alternate;if(x=w.return,(w.flags&32768)===0){if(C=ph(C,w,Li),C!==null){Vn=C;return}}else{if(C=yh(C,w),C!==null){C.flags&=32767,Vn=C;return}if(x!==null)x.flags|=32768,x.subtreeFlags=0,x.deletions=null;else{wr=6,Vn=null;return}}if(w=w.sibling,w!==null){Vn=w;return}Vn=w=x}while(w!==null);wr===0&&(wr=5)}function yo(x,w){var C=jt,N=Gn.transition;try{Gn.transition=null,jt=1,Fv(x,w,C)}finally{Gn.transition=N,jt=C}return null}function Fv(x,w,C){do Bo();while(zo!==null);if((nn&6)!==0)throw Error(o(327));var N=x.finishedWork,H=x.finishedLanes;if(N===null)return null;if(x.finishedWork=null,x.finishedLanes=0,N===x.current)throw Error(o(177));x.callbackNode=null,x.callbackPriority=0;var Q=N.lanes|N.childLanes;if(ao(x,Q),x===Cr&&(Vn=Cr=null,ur=0),(N.subtreeFlags&2064)===0&&(N.flags&2064)===0||yc||(yc=!0,Sh(Ri,function(){return Bo(),null})),Q=(N.flags&15990)!==0,(N.subtreeFlags&15990)!==0||Q){Q=Gn.transition,Gn.transition=null;var ge=jt;jt=1;var Me=nn;nn|=4,po.current=null,Lm(x,N),Sw(x,N),F(x.containerInfo),x.current=N,vf(N),Gd(),nn=Me,jt=ge,Gn.transition=Q}else x.current=N;if(yc&&(yc=!1,zo=x,cu=H),Q=x.pendingLanes,Q===0&&(mo=null),ra(N.stateNode),as(x,ar()),w!==null)for(C=x.onRecoverableError,N=0;N<w.length;N++)C(w[N]);if(gc)throw gc=!1,x=ir,ir=null,x;return(cu&1)!==0&&x.tag!==0&&Bo(),Q=x.pendingLanes,(Q&1)!==0?x===Sa?fu++:(fu=0,Sa=x):fu=0,Pi(),null}function Bo(){if(zo!==null){var x=Fs(cu),w=Gn.transition,C=jt;try{if(Gn.transition=null,jt=16>x?16:x,zo===null)var N=!1;else{if(x=zo,zo=null,cu=0,(nn&6)!==0)throw Error(o(331));var H=nn;for(nn|=4,ft=x.current;ft!==null;){var Q=ft,ge=Q.child;if((ft.flags&16)!==0){var Me=Q.deletions;if(Me!==null){for(var Ve=0;Ve<Me.length;Ve++){var lt=Me[Ve];for(ft=lt;ft!==null;){var bt=ft;switch(bt.tag){case 0:case 11:case 15:va(8,bt,Q)}var Yt=bt.child;if(Yt!==null)Yt.return=bt,ft=Yt;else for(;ft!==null;){bt=ft;var kt=bt.sibling,sn=bt.return;if(Nm(bt),bt===lt){ft=null;break}if(kt!==null){kt.return=sn,ft=kt;break}ft=sn}}}var _t=Q.alternate;if(_t!==null){var Ei=_t.child;if(Ei!==null){_t.child=null;do{var Ms=Ei.sibling;Ei.sibling=null,Ei=Ms}while(Ei!==null)}}ft=Q}}if((Q.subtreeFlags&2064)!==0&&ge!==null)ge.return=Q,ft=ge;else e:for(;ft!==null;){if(Q=ft,(Q.flags&2048)!==0)switch(Q.tag){case 0:case 11:case 15:va(9,Q,Q.return)}var ke=Q.sibling;if(ke!==null){ke.return=Q.return,ft=ke;break e}ft=Q.return}}var Ce=x.current;for(ft=Ce;ft!==null;){ge=ft;var Ge=ge.child;if((ge.subtreeFlags&2064)!==0&&Ge!==null)Ge.return=ge,ft=Ge;else e:for(ge=Ce;ft!==null;){if(Me=ft,(Me.flags&2048)!==0)try{switch(Me.tag){case 0:case 11:case 15:xi(9,Me)}}catch(Rt){qi(Me,Me.return,Rt)}if(Me===ge){ft=null;break e}var vt=Me.sibling;if(vt!==null){vt.return=Me.return,ft=vt;break e}ft=Me.return}}if(nn=H,Pi(),ys&&typeof ys.onPostCommitFiberRoot=="function")try{ys.onPostCommitFiberRoot(tl,x)}catch{}N=!0}return N}finally{jt=C,Gn.transition=w}}return!1}function Rf(x,w,C){w=Mm(C,w),w=Ov(x,w,1),sl(x,w),w=Cn(),x=ml(x,1),x!==null&&(Us(x,1,w),as(x,w))}function qi(x,w,C){if(x.tag===3)Rf(x,x,C);else for(;w!==null;){if(w.tag===3){Rf(w,x,C);break}else if(w.tag===1){var N=w.stateNode;if(typeof w.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(mo===null||!mo.has(N))){x=Mm(C,x),x=fh(w,x,1),sl(w,x),x=Cn(),w=ml(w,1),w!==null&&(Us(w,1,x),as(w,x));break}}w=w.return}}function Vm(x,w,C){var N=x.pingCache;N!==null&&N.delete(w),w=Cn(),x.pingedLanes|=x.suspendedLanes&C,Cr===x&&(ur&C)===C&&(wr===4||wr===3&&(ur&130023424)===ur&&500>ar()-bf?Ea(x,0):lu|=C),as(x,w)}function jm(x,w){w===0&&((x.mode&1)===0?w=1:(w=pn,pn<<=1,(pn&130023424)===0&&(pn=4194304)));var C=Cn();x=ml(x,w),x!==null&&(Us(x,w,C),as(x,C))}function zv(x){var w=x.memoizedState,C=0;w!==null&&(C=w.retryLane),jm(x,C)}function Bv(x,w){var C=0;switch(x.tag){case 13:var N=x.stateNode,H=x.memoizedState;H!==null&&(C=H.retryLane);break;case 19:N=x.stateNode;break;default:throw Error(o(314))}N!==null&&N.delete(w),jm(x,C)}var Wm;Wm=function(x,w,C){if(x!==null)if(x.memoizedProps!==w.pendingProps||or.current)ci=!0;else{if((x.lanes&C)===0&&(w.flags&128)===0)return ci=!1,gh(x,w,C);ci=(x.flags&131072)!==0}else ci=!1,lr&&(w.flags&1048576)!==0&&Mv(w,Kd,w.index);switch(w.lanes=0,w.tag){case 2:var N=w.type;x!==null&&(x.alternate=null,w.alternate=null,w.flags|=2),x=w.pendingProps;var H=In(w,_r.current);Mr(w,C),H=oc(null,w,N,x,H,C);var Q=ul();return w.flags|=1,typeof H=="object"&&H!==null&&typeof H.render=="function"&&H.$$typeof===void 0?(w.tag=1,w.memoizedState=null,w.updateQueue=null,$n(N)?(Q=!0,Po(w)):Q=!1,w.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,Zu(w),H.updater=Xd,w.stateNode=H,H._reactInternals=w,dm(w,N,x,C),w=Ii(null,w,N,!0,Q,C)):(w.tag=0,lr&&Q&&hm(w),xr(null,w,H,C),w=w.child),w;case 16:N=w.elementType;e:{switch(x!==null&&(x.alternate=null,w.alternate=null,w.flags|=2),x=w.pendingProps,H=N._init,N=H(N._payload),w.type=N,H=w.tag=Ew(N),x=si(N,x),H){case 0:w=ga(null,w,N,x,C);break e;case 1:w=Ql(null,w,N,x,C);break e;case 11:w=Zn(null,w,N,x,C);break e;case 14:w=Xn(null,w,N,si(N.type,x),C);break e}throw Error(o(306,N,""))}return w;case 0:return N=w.type,H=w.pendingProps,H=w.elementType===N?H:si(N,H),ga(x,w,N,H,C);case 1:return N=w.type,H=w.pendingProps,H=w.elementType===N?H:si(N,H),Ql(x,w,N,H,C);case 3:e:{if(pf(w),x===null)throw Error(o(387));N=w.pendingProps,Q=w.memoizedState,H=Q.element,um(x,w),qd(w,N,null,C);var ge=w.memoizedState;if(N=ge.element,ce&&Q.isDehydrated)if(Q={element:N,isDehydrated:!1,cache:ge.cache,transitions:ge.transitions},w.updateQueue.baseState=Q,w.memoizedState=Q,w.flags&256){H=Error(o(423)),w=Rm(x,w,N,C,H);break e}else if(N!==H){H=Error(o(424)),w=Rm(x,w,N,C,H);break e}else for(ce&&(vi=qr(w.stateNode.containerInfo),Gi=w,lr=!0,Gs=null,ec=!1),C=Rv(w,null,N,C),w.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling;else{if(tc(),N===H){w=os(x,w,C);break e}xr(x,w,N,C)}w=w.child}return w;case 5:return Pv(w),x===null&&al(w),N=w.type,H=w.pendingProps,Q=x!==null?x.memoizedProps:null,ge=H.children,J(N,H)?ge=null:Q!==null&&J(N,Q)&&(w.flags|=32),Vi(x,w),xr(x,w,ge,C),w.child;case 6:return x===null&&al(w),null;case 13:return Pm(x,w,C);case 4:return Qd(w,w.stateNode.containerInfo),N=w.pendingProps,x===null?w.child=fa(w,null,N,C):xr(x,w,N,C),w.child;case 11:return N=w.type,H=w.pendingProps,H=w.elementType===N?H:si(N,H),Zn(x,w,N,H,C);case 7:return xr(x,w,w.pendingProps,C),w.child;case 8:return xr(x,w,w.pendingProps.children,C),w.child;case 12:return xr(x,w,w.pendingProps.children,C),w.child;case 10:e:{if(N=w.type._context,H=w.pendingProps,Q=w.memoizedProps,ge=H.value,aa(w,N,ge),Q!==null)if(ri(Q.value,ge)){if(Q.children===H.children&&!or.current){w=os(x,w,C);break e}}else for(Q=w.child,Q!==null&&(Q.return=w);Q!==null;){var Me=Q.dependencies;if(Me!==null){ge=Q.child;for(var Ve=Me.firstContext;Ve!==null;){if(Ve.context===N){if(Q.tag===1){Ve=la(-1,C&-C),Ve.tag=2;var lt=Q.updateQueue;if(lt!==null){lt=lt.shared;var bt=lt.pending;bt===null?Ve.next=Ve:(Ve.next=bt.next,bt.next=Ve),lt.pending=Ve}}Q.lanes|=C,Ve=Q.alternate,Ve!==null&&(Ve.lanes|=C),Kr(Q.return,C,w),Me.lanes|=C;break}Ve=Ve.next}}else if(Q.tag===10)ge=Q.type===w.type?null:Q.child;else if(Q.tag===18){if(ge=Q.return,ge===null)throw Error(o(341));ge.lanes|=C,Me=ge.alternate,Me!==null&&(Me.lanes|=C),Kr(ge,C,w),ge=Q.sibling}else ge=Q.child;if(ge!==null)ge.return=Q;else for(ge=Q;ge!==null;){if(ge===w){ge=null;break}if(Q=ge.sibling,Q!==null){Q.return=ge.return,ge=Q;break}ge=ge.return}Q=ge}xr(x,w,H.children,C),w=w.child}return w;case 9:return H=w.type,N=w.pendingProps.children,Mr(w,C),H=hr(H),N=N(H),w.flags|=1,xr(x,w,N,C),w.child;case 14:return N=w.type,H=si(N,w.pendingProps),H=si(N.type,H),Xn(x,w,N,H,C);case 15:return ma(x,w,w.type,w.pendingProps,C);case 17:return N=w.type,H=w.pendingProps,H=w.elementType===N?H:si(N,H),x!==null&&(x.alternate=null,w.alternate=null,w.flags|=2),w.tag=1,$n(N)?(x=!0,Po(w)):x=!1,Mr(w,C),bv(w,N,H),dm(w,N,H,C),Ii(null,w,N,!0,x,C);case 19:return tu(x,w,C);case 22:return _i(x,w,C)}throw Error(o(156,w.tag))};function Sh(x,w){return gs(x,w)}function Hv(x,w,C,N){this.tag=x,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=w,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ts(x,w,C,N){return new Hv(x,w,C,N)}function Eh(x){return x=x.prototype,!(!x||!x.isReactComponent)}function Ew(x){if(typeof x=="function")return Eh(x)?1:0;if(x!=null){if(x=x.$$typeof,x===E)return 11;if(x===v)return 14}return 2}function ba(x,w){var C=x.alternate;return C===null?(C=Ts(x.tag,w,x.key,x.mode),C.elementType=x.elementType,C.type=x.type,C.stateNode=x.stateNode,C.alternate=x,x.alternate=C):(C.pendingProps=w,C.type=x.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=x.flags&14680064,C.childLanes=x.childLanes,C.lanes=x.lanes,C.child=x.child,C.memoizedProps=x.memoizedProps,C.memoizedState=x.memoizedState,C.updateQueue=x.updateQueue,w=x.dependencies,C.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext},C.sibling=x.sibling,C.index=x.index,C.ref=x.ref,C}function bh(x,w,C,N,H,Q){var ge=2;if(N=x,typeof x=="function")Eh(x)&&(ge=1);else if(typeof x=="string")ge=5;else e:switch(x){case c:return du(C.children,H,Q,w);case d:ge=8,H|=8;break;case h:return x=Ts(12,C,w,H|2),x.elementType=h,x.lanes=Q,x;case _:return x=Ts(13,C,w,H),x.elementType=_,x.lanes=Q,x;case m:return x=Ts(19,C,w,H),x.elementType=m,x.lanes=Q,x;case T:return Pf(C,H,Q,w);default:if(typeof x=="object"&&x!==null)switch(x.$$typeof){case g:ge=10;break e;case y:ge=9;break e;case E:ge=11;break e;case v:ge=14;break e;case S:ge=16,N=null;break e}throw Error(o(130,x==null?x:typeof x,""))}return w=Ts(ge,C,w,H),w.elementType=x,w.type=N,w.lanes=Q,w}function du(x,w,C,N){return x=Ts(7,x,N,w),x.lanes=C,x}function Pf(x,w,C,N){return x=Ts(22,x,N,w),x.elementType=T,x.lanes=C,x.stateNode={},x}function Th(x,w,C){return x=Ts(6,x,null,w),x.lanes=C,x}function Mh(x,w,C){return w=Ts(4,x.children!==null?x.children:[],x.key,w),w.lanes=C,w.stateNode={containerInfo:x.containerInfo,pendingChildren:null,implementation:x.implementation},w}function Ah(x,w,C,N,H){this.tag=w,this.containerInfo=x,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ee,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hl(0),this.expirationTimes=Hl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hl(0),this.identifierPrefix=N,this.onRecoverableError=H,ce&&(this.mutableSourceEagerHydrationData=null)}function $v(x,w,C,N,H,Q,ge,Me,Ve){return x=new Ah(x,w,C,Me,Ve),w===1?(w=1,Q===!0&&(w|=8)):w=0,Q=Ts(3,null,null,w),x.current=Q,Q.stateNode=x,Q.memoizedState={element:N,isDehydrated:C,cache:null,transitions:null},Zu(Q),x}function Gv(x){if(!x)return Pn;x=x._reactInternals;e:{if(I(x)!==x||x.tag!==1)throw Error(o(170));var w=x;do{switch(w.tag){case 3:w=w.stateNode.context;break e;case 1:if($n(w.type)){w=w.stateNode.__reactInternalMemoizedMergedChildContext;break e}}w=w.return}while(w!==null);throw Error(o(171))}if(x.tag===1){var C=x.type;if($n(C))return Ro(x,C,w)}return w}function Vv(x){var w=x._reactInternals;if(w===void 0)throw typeof x.render=="function"?Error(o(188)):(x=Object.keys(x).join(","),Error(o(268,x)));return x=$(w),x===null?null:x.stateNode}function Ws(x,w){if(x=x.memoizedState,x!==null&&x.dehydrated!==null){var C=x.retryLane;x.retryLane=C!==0&&C<w?C:w}}function If(x,w){Ws(x,w),(x=x.alternate)&&Ws(x,w)}function Ch(x){return x=$(x),x===null?null:x.stateNode}function jv(){return null}return t.attemptContinuousHydration=function(x){if(x.tag===13){var w=Cn();Ni(x,134217728,w),If(x,134217728)}},t.attemptHydrationAtCurrentPriority=function(x){if(x.tag===13){var w=Cn(),C=go(x);Ni(x,C,w),If(x,C)}},t.attemptSynchronousHydration=function(x){switch(x.tag){case 3:var w=x.stateNode;if(w.current.memoizedState.isDehydrated){var C=Io(w.pendingLanes);C!==0&&(yi(w,C|1),as(w,ar()),(nn&6)===0&&(uu(),Pi()))}break;case 13:var N=Cn();vc(function(){return Ni(x,1,N)}),If(x,1)}},t.batchedUpdates=function(x,w){var C=nn;nn|=1;try{return x(w)}finally{nn=C,nn===0&&(uu(),Oo&&Pi())}},t.createComponentSelector=function(x){return{$$typeof:xf,value:x}},t.createContainer=function(x,w,C,N,H,Q,ge){return $v(x,w,!1,null,C,N,H,Q,ge)},t.createHasPseudoClassSelector=function(x){return{$$typeof:iu,value:x}},t.createHydrationContainer=function(x,w,C,N,H,Q,ge,Me,Ve){return x=$v(C,N,!0,x,H,Q,ge,Me,Ve),x.context=Gv(null),C=x.current,N=Cn(),H=go(C),Q=la(N,H),Q.callback=w??null,sl(C,Q),x.current.lanes=H,Us(x,H,N),as(x,N),x},t.createPortal=function(x,w,C){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:N==null?null:""+N,children:x,containerInfo:w,implementation:C}},t.createRoleSelector=function(x){return{$$typeof:su,value:x}},t.createTestNameSelector=function(x){return{$$typeof:_a,value:x}},t.createTextSelector=function(x){return{$$typeof:pc,value:x}},t.deferredUpdates=function(x){var w=jt,C=Gn.transition;try{return Gn.transition=null,jt=16,x()}finally{jt=w,Gn.transition=C}},t.discreteUpdates=function(x,w,C,N,H){var Q=jt,ge=Gn.transition;try{return Gn.transition=null,jt=1,x(w,C,N,H)}finally{jt=Q,Gn.transition=ge,nn===0&&uu()}},t.findAllNodes=xa,t.findBoundingRects=function(x,w){if(!Le)throw Error(o(363));w=xa(x,w),x=[];for(var C=0;C<w.length;C++)x.push(Ye(w[C]));for(w=x.length-1;0<w;w--){C=x[w];for(var N=C.x,H=N+C.width,Q=C.y,ge=Q+C.height,Me=w-1;0<=Me;Me--)if(w!==Me){var Ve=x[Me],lt=Ve.x,bt=lt+Ve.width,Yt=Ve.y,kt=Yt+Ve.height;if(N>=lt&&Q>=Yt&&H<=bt&&ge<=kt){x.splice(w,1);break}else if(N!==lt||C.width!==Ve.width||kt<Q||Yt>ge){if(!(Q!==Yt||C.height!==Ve.height||bt<N||lt>H)){lt>N&&(Ve.width+=lt-N,Ve.x=N),bt<H&&(Ve.width=H-lt),x.splice(w,1);break}}else{Yt>Q&&(Ve.height+=Yt-Q,Ve.y=Q),kt<ge&&(Ve.height=ge-Yt),x.splice(w,1);break}}}return x},t.findHostInstance=Vv,t.findHostInstanceWithNoPortals=function(x){return x=G(x),x=x!==null?ee(x):null,x===null?null:x.stateNode},t.findHostInstanceWithWarning=function(x){return Vv(x)},t.flushControlled=function(x){var w=nn;nn|=1;var C=Gn.transition,N=jt;try{Gn.transition=null,jt=1,x()}finally{jt=N,Gn.transition=C,nn=w,nn===0&&(uu(),Pi())}},t.flushPassiveEffects=Bo,t.flushSync=vc,t.focusWithin=function(x,w){if(!Le)throw Error(o(363));for(x=wf(x),w=Ss(x,w),w=Array.from(w),x=0;x<w.length;){var C=w[x++];if(!oe(C)){if(C.tag===5&&Fe(C.stateNode))return!0;for(C=C.child;C!==null;)w.push(C),C=C.sibling}}return!1},t.getCurrentUpdatePriority=function(){return jt},t.getFindAllNodesFailureDescription=function(x,w){if(!Le)throw Error(o(363));var C=0,N=[];x=[wf(x),0];for(var H=0;H<x.length;){var Q=x[H++],ge=x[H++],Me=w[ge];if((Q.tag!==5||!oe(Q))&&(Sf(Q,Me)&&(N.push(hl(Me)),ge++,ge>C&&(C=ge)),ge<w.length))for(Q=Q.child;Q!==null;)x.push(Q,ge),Q=Q.sibling}if(C<w.length){for(x=[];C<w.length;C++)x.push(hl(w[C]));return`findAllNodes was able to match part of the selector:
  `+(N.join(" > ")+`

No matching component was found for:
  `)+x.join(" > ")}return null},t.getPublicRootInstance=function(x){if(x=x.current,!x.child)return null;switch(x.child.tag){case 5:return ne(x.child.stateNode);default:return x.child.stateNode}},t.injectIntoDevTools=function(x){if(x={bundleType:x.bundleType,version:x.version,rendererPackageName:x.rendererPackageName,rendererConfig:x.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:Ch,findFiberByHostInstance:x.findFiberByHostInstance||jv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")x=!1;else{var w=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(w.isDisabled||!w.supportsFiber)x=!0;else{try{tl=w.inject(x),ys=w}catch{}x=!!w.checkDCE}}return x},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(x,w,C,N){if(!Le)throw Error(o(363));x=xa(x,w);var H=ze(x,C,N).disconnect;return{disconnect:function(){H()}}},t.registerMutableSourceForHydration=function(x,w){var C=w._getVersion;C=C(w._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[w,C]:x.mutableSourceEagerHydrationData.push(w,C)},t.runWithPriority=function(x,w){var C=jt;try{return jt=x,w()}finally{jt=C}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(x,w,C,N){var H=w.current,Q=Cn(),ge=go(H);return C=Gv(C),w.context===null?w.context=C:w.pendingContext=C,w=la(Q,ge),w.payload={element:x},N=N===void 0?null:N,N!==null&&(w.callback=N),sl(H,w),x=Ni(H,ge,Q),x!==null&&jd(x,H,ge),ge},t}),cE}var uL;function ute(){return uL||(uL=1,aE.exports=lte()),aE.exports}var cte=ute();const fte=Bi(cte);var fE={exports:{}},dE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cL;function dte(){return cL||(cL=1,function(n){function e(q,K){var F=q.length;q.push(K);e:for(;0<F;){var L=F-1>>>1,z=q[L];if(0<i(z,K))q[L]=K,q[F]=z,F=L;else break e}}function t(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var K=q[0],F=q.pop();if(F!==K){q[0]=F;e:for(var L=0,z=q.length,Y=z>>>1;L<Y;){var B=2*(L+1)-1,J=q[B],le=B+1,pe=q[le];if(0>i(J,F))le<z&&0>i(pe,J)?(q[L]=pe,q[le]=F,L=le):(q[L]=J,q[B]=F,L=B);else if(le<z&&0>i(pe,F))q[L]=pe,q[le]=F,L=le;else break e}}return K}function i(q,K){var F=q.sortIndex-K.sortIndex;return F!==0?F:q.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,g=!1,y=!1,E=!1,_=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(q){for(var K=t(u);K!==null;){if(K.callback===null)r(u);else if(K.startTime<=q)r(u),K.sortIndex=K.expirationTime,e(l,K);else break;K=t(u)}}function T(q){if(E=!1,S(q),!y)if(t(l)!==null)y=!0,ne(M);else{var K=t(u);K!==null&&X(T,K.startTime-q)}}function M(q,K){y=!1,E&&(E=!1,m(O),O=-1),g=!0;var F=h;try{for(S(K),d=t(l);d!==null&&(!(d.expirationTime>K)||q&&!G());){var L=d.callback;if(typeof L=="function"){d.callback=null,h=d.priorityLevel;var z=L(d.expirationTime<=K);K=n.unstable_now(),typeof z=="function"?d.callback=z:d===t(l)&&r(l),S(K)}else r(l);d=t(l)}if(d!==null)var Y=!0;else{var B=t(u);B!==null&&X(T,B.startTime-K),Y=!1}return Y}finally{d=null,h=F,g=!1}}var A=!1,R=null,O=-1,I=5,k=-1;function G(){return!(n.unstable_now()-k<I)}function $(){if(R!==null){var q=n.unstable_now();k=q;var K=!0;try{K=R(!0,q)}finally{K?U():(A=!1,R=null)}}else A=!1}var U;if(typeof v=="function")U=function(){v($)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,re=ee.port2;ee.port1.onmessage=$,U=function(){re.postMessage(null)}}else U=function(){_($,0)};function ne(q){R=q,A||(A=!0,U())}function X(q,K){O=_(function(){q(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_continueExecution=function(){y||g||(y=!0,ne(M))},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(q){switch(h){case 1:case 2:case 3:var K=3;break;default:K=h}var F=h;h=K;try{return q()}finally{h=F}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(q,K){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var F=h;h=q;try{return K()}finally{h=F}},n.unstable_scheduleCallback=function(q,K,F){var L=n.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?L+F:L):F=L,q){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=F+z,q={id:c++,callback:K,priorityLevel:q,startTime:F,expirationTime:z,sortIndex:-1},F>L?(q.sortIndex=F,e(u,q),t(l)===null&&q===t(u)&&(E?(m(O),O=-1):E=!0,X(T,F-L))):(q.sortIndex=z,e(l,q),y||g||(y=!0,ne(M))),q},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(q){var K=h;return function(){var F=h;h=K;try{return q.apply(this,arguments)}finally{h=F}}}}(dE)),dE}var fL;function hte(){return fL||(fL=1,fE.exports=dte()),fE.exports}var dL=hte();const pte=n=>typeof n=="object"&&typeof n.then=="function",j_=[];function mte(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function gte(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const s of j_)if(mte(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=j_.indexOf(i);s!==-1&&j_.splice(s,1)},promise:(pte(n)?n:n(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(j_.push(i),!t)throw i.promise}const yte=(n,e,t)=>gte(n,e,!1,t),RA={},DF=n=>void Object.assign(RA,n);function vte(n,e){function t(c,{args:d=[],attach:h,...g},y){let E=`${c[0].toUpperCase()}${c.slice(1)}`,_;if(c==="primitive"){if(g.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const m=g.object;_=xp(m,{type:c,root:y,attach:h,primitive:!0})}else{const m=RA[E];if(!m)throw new Error(`R3F: ${E} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");_=xp(new m(...d),{type:c,root:y,attach:h,memoizedProps:{args:d}})}return _.__r3f.attach===void 0&&(_ instanceof un?_.__r3f.attach="geometry":_ instanceof es&&(_.__r3f.attach="material")),E!=="inject"&&mE(_,g),_}function r(c,d){let h=!1;if(d){var g,y;(g=d.__r3f)!=null&&g.attach?pE(c,d,d.__r3f.attach):d.isObject3D&&c.isObject3D&&(c.add(d),h=!0),h||(y=c.__r3f)==null||y.objects.push(d),d.__r3f||xp(d,{}),d.__r3f.parent=c,HT(d),wp(d)}}function i(c,d,h){let g=!1;if(d){var y,E;if((y=d.__r3f)!=null&&y.attach)pE(c,d,d.__r3f.attach);else if(d.isObject3D&&c.isObject3D){d.parent=c,d.dispatchEvent({type:"added"});const _=c.children.filter(v=>v!==d),m=_.indexOf(h);c.children=[..._.slice(0,m),d,..._.slice(m)],g=!0}g||(E=c.__r3f)==null||E.objects.push(d),d.__r3f||xp(d,{}),d.__r3f.parent=c,HT(d),wp(d)}}function s(c,d,h=!1){c&&[...c].forEach(g=>o(d,g,h))}function o(c,d,h){if(d){var g,y,E;if(d.__r3f&&(d.__r3f.parent=null),(g=c.__r3f)!=null&&g.objects&&(c.__r3f.objects=c.__r3f.objects.filter(T=>T!==d)),(y=d.__r3f)!=null&&y.attach)yL(c,d,d.__r3f.attach);else if(d.isObject3D&&c.isObject3D){var _;c.remove(d),(_=d.__r3f)!=null&&_.root&&Tte(d.__r3f.root,d)}const v=(E=d.__r3f)==null?void 0:E.primitive,S=h===void 0?d.dispose!==null&&!v:h;if(!v){var m;s((m=d.__r3f)==null?void 0:m.objects,d,S),s(d.children,d,S)}delete d.__r3f,S&&d.dispose&&d.type!=="Scene"&&dL.unstable_scheduleCallback(dL.unstable_IdlePriority,()=>{try{d.dispose()}catch{}}),wp(c)}}function a(c,d,h,g){var y;const E=(y=c.__r3f)==null?void 0:y.parent;if(!E)return;const _=t(d,h,c.__r3f.root);if(c.children){for(const m of c.children)m.__r3f&&r(_,m);c.children=c.children.filter(m=>!m.__r3f)}c.__r3f.objects.forEach(m=>r(_,m)),c.__r3f.objects=[],c.__r3f.autoRemovedBeforeAppend||o(E,c),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),r(E,_),_.raycast&&_.__r3f.eventCount&&_.__r3f.root.getState().internal.interaction.push(_),[g,g.alternate].forEach(m=>{m!==null&&(m.stateNode=_,m.ref&&(typeof m.ref=="function"?m.ref(_):m.ref.current=_))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:fte({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(c,d)=>{if(!d)return;const h=c.getState().scene;h.__r3f&&(h.__r3f.root=c,r(h,d))},removeChildFromContainer:(c,d)=>{d&&o(c.getState().scene,d)},insertInContainerBefore:(c,d,h)=>{if(!d||!h)return;const g=c.getState().scene;g.__r3f&&i(g,d,h)},getRootHostContext:()=>null,getChildHostContext:c=>c,finalizeInitialChildren(c){var d;return!!((d=c==null?void 0:c.__r3f)!=null?d:{}).handlers},prepareUpdate(c,d,h,g){var y;if(((y=c==null?void 0:c.__r3f)!=null?y:{}).primitive&&g.object&&g.object!==c)return[!0];{const{args:_=[],children:m,...v}=g,{args:S=[],children:T,...M}=h;if(!Array.isArray(_))throw new Error("R3F: the args prop must be an array!");if(_.some((R,O)=>R!==S[O]))return[!0];const A=$F(c,v,M,!0);return A.changes.length?[!1,A]:null}},commitUpdate(c,[d,h],g,y,E,_){d?a(c,g,E,_):mE(c,h)},commitMount(c,d,h,g){var y;const E=(y=c.__r3f)!=null?y:{};c.raycast&&E.handlers&&E.eventCount&&c.__r3f.root.getState().internal.interaction.push(c)},getPublicInstance:c=>c,prepareForCommit:()=>null,preparePortalMount:c=>xp(c.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(c){var d;const{attach:h,parent:g}=(d=c.__r3f)!=null?d:{};h&&g&&yL(g,c,h),c.isObject3D&&(c.visible=!1),wp(c)},unhideInstance(c,d){var h;const{attach:g,parent:y}=(h=c.__r3f)!=null?h:{};g&&y&&pE(y,c,g),(c.isObject3D&&d.visible==null||d.visible)&&(c.visible=!0),wp(c)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Mp.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Er.fun(performance.now)?performance.now:Er.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Er.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Er.fun(clearTimeout)?clearTimeout:void 0}),applyProps:mE}}var hL,pL;const hE=n=>"colorSpace"in n||"outputColorSpace"in n,kF=()=>{var n;return(n=RA.ColorManagement)!=null?n:null},UF=n=>n&&n.isOrthographicCamera,_te=n=>n&&n.hasOwnProperty("current"),dv=typeof window<"u"&&((hL=window.document)!=null&&hL.createElement||((pL=window.navigator)==null?void 0:pL.product)==="ReactNative")?Z.useLayoutEffect:Z.useEffect;function FF(n){const e=Z.useRef(n);return dv(()=>void(e.current=n),[n]),e}function xte({set:n}){return dv(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class zF extends Z.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}zF.getDerivedStateFromError=()=>({error:!0});const BF="__default",mL=new Map,wte=n=>n&&!!n.memoized&&!!n.changes;function HF(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const yg=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},Er={obj:n=>n===Object(n)&&!Er.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Er.str(n)||Er.num(n))return n===e;const s=Er.obj(n);if(s&&r==="reference")return n===e;const o=Er.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!Er.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(Er.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Ste(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function xp(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function BT(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const gL=/-\d+$/;function pE(n,e,t){if(Er.str(t)){if(gL.test(t)){const s=t.replace(gL,""),{target:o,key:a}=BT(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=BT(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function yL(n,e,t){var r,i;if(Er.str(t)){const{target:s,key:o}=BT(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function $F(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},u=!1){var c;const d=(c=n==null?void 0:n.__r3f)!=null?c:{},h=Object.entries(i),g=[];if(u){const E=Object.keys(l);for(let _=0;_<E.length;_++)i.hasOwnProperty(E[_])||h.unshift([E[_],BF+"remove"])}h.forEach(([E,_])=>{var m;if((m=n.__r3f)!=null&&m.primitive&&E==="object"||Er.equ(_,l[E]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(E))return g.push([E,_,!0,[]]);let v=[];E.includes("-")&&(v=E.split("-")),g.push([E,_,!1,v]);for(const S in i){const T=i[S];S.startsWith(`${E}-`)&&g.push([S,T,!1,S.split("-")])}});const y={...i};return d.memoizedProps&&d.memoizedProps.args&&(y.args=d.memoizedProps.args),d.memoizedProps&&d.memoizedProps.attach&&(y.attach=d.memoizedProps.attach),{memoized:y,changes:g}}function mE(n,e){var t,r,i;const s=(t=n.__r3f)!=null?t:{},o=s.root,a=(r=o==null||o.getState==null?void 0:o.getState())!=null?r:{},{memoized:l,changes:u}=wte(e)?e:$F(n,e),c=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let h=0;h<u.length;h++){let[g,y,E,_]=u[h];if(hE(n)){const T="srgb",M="srgb-linear";g==="encoding"?(g="colorSpace",y=y===3001?T:M):g==="outputEncoding"&&(g="outputColorSpace",y=y===3001?T:M)}let m=n,v=m[g];if(_.length&&(v=_.reduce((S,T)=>S[T],n),!(v&&v.set))){const[S,...T]=_.reverse();m=T.reverse().reduce((M,A)=>M[A],n),g=S}if(y===BF+"remove")if(m.constructor){let S=mL.get(m.constructor);S||(S=new m.constructor,mL.set(m.constructor,S)),y=S[g]}else y=0;if(E)y?s.handlers[g]=y:delete s.handlers[g],s.eventCount=Object.keys(s.handlers).length;else if(v&&v.set&&(v.copy||v instanceof vd)){if(Array.isArray(y))v.fromArray?v.fromArray(y):v.set(...y);else if(v.copy&&y&&y.constructor&&v.constructor===y.constructor)v.copy(y);else if(y!==void 0){const S=v instanceof gt;!S&&v.setScalar?v.setScalar(y):v instanceof vd&&y instanceof vd?v.mask=y.mask:v.set(y),!kF()&&!a.linear&&S&&v.convertSRGBToLinear()}}else if(m[g]=y,m[g]instanceof Fr&&m[g].format===Qs&&m[g].type===Il){const S=m[g];hE(S)&&hE(a.gl)?S.colorSpace=a.gl.outputColorSpace:S.encoding=a.gl.outputEncoding}wp(n)}if(s.parent&&a.internal&&n.raycast&&c!==s.eventCount){const h=a.internal.interaction.indexOf(n);h>-1&&a.internal.interaction.splice(h,1),s.eventCount&&a.internal.interaction.push(n)}return!(u.length===1&&u[0][0]==="onUpdate")&&u.length&&(i=n.__r3f)!=null&&i.parent&&HT(n),n}function wp(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function HT(n){n.onUpdate==null||n.onUpdate(n)}function Ete(n,e){n.manual||(UF(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function W_(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function bte(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Mp.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Mp.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Mp.ContinuousEventPriority;default:return Mp.DefaultEventPriority}}function GF(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function Tte(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{GF(t.capturedMap,e,r,i)})}function Mte(n){function e(l){const{internal:u}=n.getState(),c=l.offsetX-u.initialClick[0],d=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(c*c+d*d))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(c=>{var d;return(d=u.__r3f)==null?void 0:d.handlers["onPointer"+c]}))}function r(l,u){const c=n.getState(),d=new Set,h=[],g=u?u(c.internal.interaction):c.internal.interaction;for(let m=0;m<g.length;m++){const v=yg(g[m]);v&&(v.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(l,c);function y(m){const v=yg(m);if(!v||!v.events.enabled||v.raycaster.camera===null)return[];if(v.raycaster.camera===void 0){var S;v.events.compute==null||v.events.compute(l,v,(S=v.previousRoot)==null?void 0:S.getState()),v.raycaster.camera===void 0&&(v.raycaster.camera=null)}return v.raycaster.camera?v.raycaster.intersectObject(m,!0):[]}let E=g.flatMap(y).sort((m,v)=>{const S=yg(m.object),T=yg(v.object);return!S||!T?m.distance-v.distance:T.events.priority-S.events.priority||m.distance-v.distance}).filter(m=>{const v=W_(m);return d.has(v)?!1:(d.add(v),!0)});c.events.filter&&(E=c.events.filter(E,c));for(const m of E){let v=m.object;for(;v;){var _;(_=v.__r3f)!=null&&_.eventCount&&h.push({...m,eventObject:v}),v=v.parent}}if("pointerId"in l&&c.internal.capturedMap.has(l.pointerId))for(let m of c.internal.capturedMap.get(l.pointerId).values())d.has(W_(m.intersection))||h.push(m.intersection);return h}function i(l,u,c,d){const h=n.getState();if(l.length){const g={stopped:!1};for(const y of l){const E=yg(y.object)||h,{raycaster:_,pointer:m,camera:v,internal:S}=E,T=new de(m.x,m.y,0).unproject(v),M=k=>{var G,$;return(G=($=S.capturedMap.get(k))==null?void 0:$.has(y.eventObject))!=null?G:!1},A=k=>{const G={intersection:y,target:u.target};S.capturedMap.has(k)?S.capturedMap.get(k).set(y.eventObject,G):S.capturedMap.set(k,new Map([[y.eventObject,G]])),u.target.setPointerCapture(k)},R=k=>{const G=S.capturedMap.get(k);G&&GF(S.capturedMap,y.eventObject,G,k)};let O={};for(let k in u){let G=u[k];typeof G!="function"&&(O[k]=G)}let I={...y,...O,pointer:m,intersections:l,stopped:g.stopped,delta:c,unprojectedPoint:T,ray:_.ray,camera:v,stopPropagation(){const k="pointerId"in u&&S.capturedMap.get(u.pointerId);if((!k||k.has(y.eventObject))&&(I.stopped=g.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(G=>G.eventObject===y.eventObject))){const G=l.slice(0,l.indexOf(y));s([...G,y])}},target:{hasPointerCapture:M,setPointerCapture:A,releasePointerCapture:R},currentTarget:{hasPointerCapture:M,setPointerCapture:A,releasePointerCapture:R},nativeEvent:u};if(d(I),g.stopped===!0)break}}return l}function s(l){const{internal:u}=n.getState();for(const c of u.hovered.values())if(!l.length||!l.find(d=>d.object===c.object&&d.index===c.index&&d.instanceId===c.instanceId)){const h=c.eventObject.__r3f,g=h==null?void 0:h.handlers;if(u.hovered.delete(W_(c)),h!=null&&h.eventCount){const y={...c,intersections:l};g.onPointerOut==null||g.onPointerOut(y),g.onPointerLeave==null||g.onPointerLeave(y)}}}function o(l,u){for(let c=0;c<u.length;c++){const d=u[c].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:c}=n.getState();"pointerId"in u&&c.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{c.capturedMap.has(u.pointerId)&&(c.capturedMap.delete(u.pointerId),s([]))})}}return function(c){const{onPointerMissed:d,internal:h}=n.getState();h.lastEvent.current=c;const g=l==="onPointerMove",y=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=r(c,g?t:void 0),m=y?e(c):0;l==="onPointerDown"&&(h.initialClick=[c.offsetX,c.offsetY],h.initialHits=_.map(S=>S.eventObject)),y&&!_.length&&m<=2&&(o(c,h.interaction),d&&d(c)),g&&s(_);function v(S){const T=S.eventObject,M=T.__r3f,A=M==null?void 0:M.handlers;if(M!=null&&M.eventCount)if(g){if(A.onPointerOver||A.onPointerEnter||A.onPointerOut||A.onPointerLeave){const R=W_(S),O=h.hovered.get(R);O?O.stopped&&S.stopPropagation():(h.hovered.set(R,S),A.onPointerOver==null||A.onPointerOver(S),A.onPointerEnter==null||A.onPointerEnter(S))}A.onPointerMove==null||A.onPointerMove(S)}else{const R=A[l];R?(!y||h.initialHits.includes(T))&&(o(c,h.interaction.filter(O=>!h.initialHits.includes(O))),R(S)):y&&h.initialHits.includes(T)&&o(c,h.interaction.filter(O=>!h.initialHits.includes(O)))}}i(_,c,m,v)}}return{handlePointer:a}}const VF=n=>!!(n!=null&&n.render),jF=Z.createContext(null),Ate=(n,e)=>{const t=ste((a,l)=>{const u=new de,c=new de,d=new de;function h(m=l().camera,v=c,S=l().size){const{width:T,height:M,top:A,left:R}=S,O=T/M;v instanceof de?d.copy(v):d.set(...v);const I=m.getWorldPosition(u).distanceTo(d);if(UF(m))return{width:T/m.zoom,height:M/m.zoom,top:A,left:R,factor:1,distance:I,aspect:O};{const k=m.fov*Math.PI/180,G=2*Math.tan(k/2)*I,$=G*(T/M);return{width:$,height:G,top:A,left:R,factor:T/$,distance:I,aspect:O}}}let g;const y=m=>a(v=>({performance:{...v.performance,current:m}})),E=new Je;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(m=1)=>n(l(),m),advance:(m,v)=>e(m,v,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new bA,pointer:E,mouse:E,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const m=l();g&&clearTimeout(g),m.performance.current!==m.performance.min&&y(m.performance.min),g=setTimeout(()=>y(l().performance.max),m.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:h},setEvents:m=>a(v=>({...v,events:{...v.events,...m}})),setSize:(m,v,S,T,M)=>{const A=l().camera,R={width:m,height:v,top:T||0,left:M||0,updateStyle:S};a(O=>({size:R,viewport:{...O.viewport,...h(A,c,R)}}))},setDpr:m=>a(v=>{const S=HF(m);return{viewport:{...v.viewport,dpr:S,initialDpr:v.viewport.initialDpr||S}}}),setFrameloop:(m="always")=>{const v=l().clock;v.stop(),v.elapsedTime=0,m!=="never"&&(v.start(),v.elapsedTime=0),a(()=>({frameloop:m}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:Z.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(m,v,S)=>{const T=l().internal;return T.priority=T.priority+(v>0?1:0),T.subscribers.push({ref:m,priority:v,store:S}),T.subscribers=T.subscribers.sort((M,A)=>M.priority-A.priority),()=>{const M=l().internal;M!=null&&M.subscribers&&(M.priority=M.priority-(v>0?1:0),M.subscribers=M.subscribers.filter(A=>A.ref!==m))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:c,set:d}=t.getState();if(l!==i||u.dpr!==s){var h;i=l,s=u.dpr,Ete(a,l),c.setPixelRatio(u.dpr);const g=(h=l.updateStyle)!=null?h:typeof HTMLCanvasElement<"u"&&c.domElement instanceof HTMLCanvasElement;c.setSize(l.width,l.height,g)}a!==o&&(o=a,d(g=>({viewport:{...g.viewport,...g.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};function Cte(n,e){const t={callback:n};return e.add(t),()=>void e.delete(t)}let q_,WF=new Set,Rte=new Set,Pte=new Set;const Ite=n=>Cte(n,WF);function gE(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function vg(n,e){switch(n){case"before":return gE(WF,e);case"after":return gE(Rte,e);case"tail":return gE(Pte,e)}}let yE,vE;function _E(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),yE=e.internal.subscribers,q_=0;q_<yE.length;q_++)vE=yE[q_],vE.ref.current(vE.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Lte(n){let e=!1,t,r,i;function s(l){r=requestAnimationFrame(s),e=!0,t=0,vg("before",l);for(const c of n.values()){var u;i=c.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((u=i.gl.xr)!=null&&u.isPresenting)&&(t+=_E(l,i))}if(vg("after",l),t===0)return vg("tail",l),e=!1,cancelAnimationFrame(r)}function o(l,u=1){var c;if(!l)return n.forEach(d=>o(d.store.getState()),u);(c=l.gl.xr)!=null&&c.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+u),e||(e=!0,requestAnimationFrame(s)))}function a(l,u=!0,c,d){if(u&&vg("before",l),c)_E(l,c,d);else for(const h of n.values())_E(l,h.store.getState());u&&vg("after",l)}return{loop:s,invalidate:o,advance:a}}function qF(){const n=Z.useContext(jF);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function gi(n=t=>t,e){return qF()(n,e)}function Q1(n,e=0){const t=qF(),r=t.getState().internal.subscribe,i=FF(n);return dv(()=>r(i,e,t),[e,r,t]),null}const Hp=new Map,{invalidate:vL,advance:_L}=Lte(Hp),{reconciler:Xx,applyProps:id}=vte(Hp,bte),op={objects:"shallow",strict:!1},Nte=(n,e)=>{const t=typeof n=="function"?n(e):n;return VF(t)?t:new iA({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function Ote(n,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:r,top:i,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:r,top:i,left:s}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function Dte(n){const e=Hp.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||Ate(vL,_L),o=t||Xx.createContainer(s,Mp.ConcurrentRoot,null,!1,null,"",i,null);e||Hp.set(n,{fiber:o,store:s});let a,l=!1,u;return{configure(c={}){let{gl:d,size:h,scene:g,events:y,onCreated:E,shadows:_=!1,linear:m=!1,flat:v=!1,legacy:S=!1,orthographic:T=!1,frameloop:M="always",dpr:A=[1,2],performance:R,raycaster:O,camera:I,onPointerMissed:k}=c,G=s.getState(),$=G.gl;G.gl||G.set({gl:$=Nte(d,n)});let U=G.raycaster;U||G.set({raycaster:U=new CA});const{params:ee,...re}=O||{};if(Er.equ(re,U,op)||id(U,{...re}),Er.equ(ee,U.params,op)||id(U,{params:{...U.params,...ee}}),!G.camera||G.camera===u&&!Er.equ(u,I,op)){u=I;const L=I instanceof sv,z=L?I:T?new Ud(0,0,0,0,.1,1e3):new mi(75,0,.1,1e3);L||(z.position.z=5,I&&id(z,I),!G.camera&&!(I!=null&&I.rotation)&&z.lookAt(0,0,0)),G.set({camera:z})}if(!G.scene){let L;g instanceof Ty?L=g:(L=new Ty,g&&id(L,g)),G.set({scene:xp(L)})}if(!G.xr){const L=(B,J)=>{const le=s.getState();le.frameloop!=="never"&&_L(B,!0,le,J)},z=()=>{const B=s.getState();B.gl.xr.enabled=B.gl.xr.isPresenting,B.gl.xr.setAnimationLoop(B.gl.xr.isPresenting?L:null),B.gl.xr.isPresenting||vL(B)},Y={connect(){const B=s.getState().gl;B.xr.addEventListener("sessionstart",z),B.xr.addEventListener("sessionend",z)},disconnect(){const B=s.getState().gl;B.xr.removeEventListener("sessionstart",z),B.xr.removeEventListener("sessionend",z)}};$.xr&&Y.connect(),G.set({xr:Y})}if($.shadowMap){const L=$.shadowMap.enabled,z=$.shadowMap.type;if($.shadowMap.enabled=!!_,Er.boo(_))$.shadowMap.type=Qg;else if(Er.str(_)){var ne;const Y={basic:O3,percentage:b1,soft:Qg,variance:Fa};$.shadowMap.type=(ne=Y[_])!=null?ne:Qg}else Er.obj(_)&&Object.assign($.shadowMap,_);(L!==$.shadowMap.enabled||z!==$.shadowMap.type)&&($.shadowMap.needsUpdate=!0)}const X=kF();X&&("enabled"in X?X.enabled=!S:"legacyMode"in X&&(X.legacyMode=S)),id($,{outputEncoding:m?3e3:3001,toneMapping:v?Ga:zM}),G.legacy!==S&&G.set(()=>({legacy:S})),G.linear!==m&&G.set(()=>({linear:m})),G.flat!==v&&G.set(()=>({flat:v})),d&&!Er.fun(d)&&!VF(d)&&!Er.equ(d,$,op)&&id($,d),y&&!G.events.handlers&&G.set({events:y(s)});const F=Ote(n,h);return Er.equ(F,G.size,op)||G.setSize(F.width,F.height,F.updateStyle,F.top,F.left),A&&G.viewport.dpr!==HF(A)&&G.setDpr(A),G.frameloop!==M&&G.setFrameloop(M),G.onPointerMissed||G.set({onPointerMissed:k}),R&&!Er.equ(R,G.performance,op)&&G.set(L=>({performance:{...L.performance,...R}})),a=E,l=!0,this},render(c){return l||this.configure(),Xx.updateContainer(Z.createElement(kte,{store:s,children:c,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){XF(n)}}}function kte({store:n,children:e,onCreated:t,rootElement:r}){return dv(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),Z.createElement(jF.Provider,{value:n},e)}function XF(n,e){const t=Hp.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),Xx.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),Ste(i),Hp.delete(n)}catch{}},500)})}}Xx.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Z.version});var xE,xL;function Ute(){if(xL)return xE;xL=1;function n(e,t,r){var i,s,o,a,l;t==null&&(t=100);function u(){var d=Date.now()-a;d<t&&d>=0?i=setTimeout(u,t-d):(i=null,r||(l=e.apply(o,s),o=s=null))}var c=function(){o=this,s=arguments,a=Date.now();var d=r&&!i;return i||(i=setTimeout(u,t)),d&&(l=e.apply(o,s),o=s=null),l};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(l=e.apply(o,s),o=s=null,clearTimeout(i),i=null)},c}return n.debounce=n,xE=n,xE}var Fte=Ute();const wL=Bi(Fte);function zte(n){let{debounce:e,scroll:t,polyfill:r,offsetSize:i}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=Z.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=Z.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),u=e?typeof e=="number"?e:e.scroll:null,c=e?typeof e=="number"?e:e.resize:null,d=Z.useRef(!1);Z.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[h,g,y]=Z.useMemo(()=>{const v=()=>{if(!l.current.element)return;const{left:S,top:T,width:M,height:A,bottom:R,right:O,x:I,y:k}=l.current.element.getBoundingClientRect(),G={left:S,top:T,width:M,height:A,bottom:R,right:O,x:I,y:k};l.current.element instanceof HTMLElement&&i&&(G.height=l.current.element.offsetHeight,G.width=l.current.element.offsetWidth),Object.freeze(G),d.current&&!Gte(l.current.lastBounds,G)&&a(l.current.lastBounds=G)};return[v,c?wL(v,c):v,u?wL(v,u):v]},[a,i,u,c]);function E(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(v=>v.removeEventListener("scroll",y,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function _(){l.current.element&&(l.current.resizeObserver=new s(y),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(v=>v.addEventListener("scroll",y,{capture:!0,passive:!0})))}const m=v=>{!v||v===l.current.element||(E(),l.current.element=v,l.current.scrollContainers=YF(v),_())};return Hte(y,!!t),Bte(g),Z.useEffect(()=>{E(),_()},[t,y,g]),Z.useEffect(()=>E,[]),[m,o,h]}function Bte(n){Z.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Hte(n,e){Z.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function YF(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...YF(n.parentElement)]}const $te=["x","y","top","bottom","left","right","width","height"],Gte=(n,e)=>$te.every(t=>n[t]===e[t]);var Vte=Object.defineProperty,jte=Object.defineProperties,Wte=Object.getOwnPropertyDescriptors,SL=Object.getOwnPropertySymbols,qte=Object.prototype.hasOwnProperty,Xte=Object.prototype.propertyIsEnumerable,EL=(n,e,t)=>e in n?Vte(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,bL=(n,e)=>{for(var t in e||(e={}))qte.call(e,t)&&EL(n,t,e[t]);if(SL)for(var t of SL(e))Xte.call(e,t)&&EL(n,t,e[t]);return n},Yte=(n,e)=>jte(n,Wte(e)),TL,ML;typeof window<"u"&&((TL=window.document)!=null&&TL.createElement||((ML=window.navigator)==null?void 0:ML.product)==="ReactNative")?Z.useLayoutEffect:Z.useEffect;function KF(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=n.child;for(;r;){const i=KF(r,e,t);if(i)return i;r=r.sibling}}function JF(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const AL=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=AL;return}return AL.apply(this,arguments)};const PA=JF(Z.createContext(null));class ZF extends Z.Component{render(){return Z.createElement(PA.Provider,{value:this._reactInternals},this.props.children)}}function Kte(){const n=Z.useContext(PA);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Z.useId();return Z.useMemo(()=>{for(const r of[n,n==null?void 0:n.alternate]){if(!r)continue;const i=KF(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[n,e])}function Jte(){const n=Kte(),[e]=Z.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==PA&&!e.has(i)&&e.set(i,Z.useContext(JF(i)))}t=t.return}return e}function Zte(){const n=Jte();return Z.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>Z.createElement(e,null,Z.createElement(t.Provider,Yte(bL({},r),{value:n.get(t)}))),e=>Z.createElement(ZF,bL({},e))),[n])}const wE={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Qte(n){const{handlePointer:e}=Mte(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(wE).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,u]=wE[o];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=wE[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const ene=Z.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=Qte,eventSource:a,eventPrefix:l,shadows:u,linear:c,flat:d,legacy:h,orthographic:g,frameloop:y,dpr:E,performance:_,raycaster:m,camera:v,onPointerMissed:S,onCreated:T,...M},A){Z.useMemo(()=>DF(OF),[]);const R=Zte(),[O,I]=zte({scroll:!0,debounce:{scroll:50,resize:0},...r}),k=Z.useRef(null),G=Z.useRef(null);Z.useImperativeHandle(A,()=>k.current);const $=FF(S),[U,ee]=Z.useState(!1),[re,ne]=Z.useState(!1);if(U)throw U;if(re)throw re;const X=Z.useRef(null);dv(()=>{const K=k.current;I.width>0&&I.height>0&&K&&(X.current||(X.current=Dte(K)),X.current.configure({gl:s,events:o,shadows:u,linear:c,flat:d,legacy:h,orthographic:g,frameloop:y,dpr:E,performance:_,raycaster:m,camera:v,size:I,onPointerMissed:(...F)=>$.current==null?void 0:$.current(...F),onCreated:F=>{F.events.connect==null||F.events.connect(a?_te(a)?a.current:a:G.current),l&&F.setEvents({compute:(L,z)=>{const Y=L[l+"X"],B=L[l+"Y"];z.pointer.set(Y/z.size.width*2-1,-(B/z.size.height)*2+1),z.raycaster.setFromCamera(z.pointer,z.camera)}}),T==null||T(F)}}),X.current.render(Z.createElement(R,null,Z.createElement(zF,{set:ne},Z.createElement(Z.Suspense,{fallback:Z.createElement(xte,{set:ee})},e)))))}),Z.useEffect(()=>{const K=k.current;if(K)return()=>XF(K)},[]);const q=a?"none":"auto";return Z.createElement("div",Td({ref:G,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:q,...i}},M),Z.createElement("div",{ref:O,style:{width:"100%",height:"100%"}},Z.createElement("canvas",{ref:k,style:{display:"block"}},t)))}),tne=Z.forwardRef(function(e,t){return Z.createElement(ZF,null,Z.createElement(ene,Td({},e,{ref:t})))});function nne(n,e,t){var r,i=1;n==null&&(n=0),e==null&&(e=0),t==null&&(t=0);function s(){var o,a=r.length,l,u=0,c=0,d=0;for(o=0;o<a;++o)l=r[o],u+=l.x||0,c+=l.y||0,d+=l.z||0;for(u=(u/a-n)*i,c=(c/a-e)*i,d=(d/a-t)*i,o=0;o<a;++o)l=r[o],u&&(l.x-=u),c&&(l.y-=c),d&&(l.z-=d)}return s.initialize=function(o){r=o},s.x=function(o){return arguments.length?(n=+o,s):n},s.y=function(o){return arguments.length?(e=+o,s):e},s.z=function(o){return arguments.length?(t=+o,s):t},s.strength=function(o){return arguments.length?(i=+o,s):i},s}function rne(n){const e=+this._x.call(null,n);return QF(this.cover(e),e,n)}function QF(n,e,t){if(isNaN(e))return n;var r,i=n._root,s={data:t},o=n._x0,a=n._x1,l,u,c,d,h;if(!i)return n._root=s,n;for(;i.length;)if((c=e>=(l=(o+a)/2))?o=l:a=l,r=i,!(i=i[d=+c]))return r[d]=s,n;if(u=+n._x.call(null,i.data),e===u)return s.next=i,r?r[d]=s:n._root=s,n;do r=r?r[d]=new Array(2):n._root=new Array(2),(c=e>=(l=(o+a)/2))?o=l:a=l;while((d=+c)==(h=+(u>=l)));return r[h]=i,r[d]=s,n}function ine(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,t=new Float64Array(e);let r=1/0,i=-1/0;for(let s=0,o;s<e;++s)isNaN(o=+this._x.call(null,n[s]))||(t[s]=o,o<r&&(r=o),o>i&&(i=o));if(r>i)return this;this.cover(r).cover(i);for(let s=0;s<e;++s)QF(this,t[s],n[s]);return this}function sne(n){if(isNaN(n=+n))return this;var e=this._x0,t=this._x1;if(isNaN(e))t=(e=Math.floor(n))+1;else{for(var r=t-e||1,i=this._root,s,o;e>n||n>=t;)switch(o=+(n<e),s=new Array(2),s[o]=i,i=s,r*=2,o){case 0:t=e+r;break;case 1:e=t-r;break}this._root&&this._root.length&&(this._root=i)}return this._x0=e,this._x1=t,this}function one(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function ane(n){return arguments.length?this.cover(+n[0][0]).cover(+n[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function zu(n,e,t){this.node=n,this.x0=e,this.x1=t}function lne(n,e){var t,r=this._x0,i,s,o=this._x1,a=[],l=this._root,u,c;for(l&&a.push(new zu(l,r,o)),e==null?e=1/0:(r=n-e,o=n+e);u=a.pop();)if(!(!(l=u.node)||(i=u.x0)>o||(s=u.x1)<r))if(l.length){var d=(i+s)/2;a.push(new zu(l[1],d,s),new zu(l[0],i,d)),(c=+(n>=d))&&(u=a[a.length-1],a[a.length-1]=a[a.length-1-c],a[a.length-1-c]=u)}else{var h=Math.abs(n-+this._x.call(null,l.data));h<e&&(e=h,r=n-h,o=n+h,t=l.data)}return t}function une(n){if(isNaN(l=+this._x.call(null,n)))return this;var e,t=this._root,r,i,s,o=this._x0,a=this._x1,l,u,c,d,h;if(!t)return this;if(t.length)for(;;){if((c=l>=(u=(o+a)/2))?o=u:a=u,e=t,!(t=t[d=+c]))return this;if(!t.length)break;e[d+1&1]&&(r=e,h=d)}for(;t.data!==n;)if(i=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,i?(s?i.next=s:delete i.next,this):e?(s?e[d]=s:delete e[d],(t=e[0]||e[1])&&t===(e[1]||e[0])&&!t.length&&(r?r[h]=t:this._root=t),this):(this._root=s,this)}function cne(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function fne(){return this._root}function dne(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function hne(n){var e=[],t,r=this._root,i,s,o;for(r&&e.push(new zu(r,this._x0,this._x1));t=e.pop();)if(!n(r=t.node,s=t.x0,o=t.x1)&&r.length){var a=(s+o)/2;(i=r[1])&&e.push(new zu(i,a,o)),(i=r[0])&&e.push(new zu(i,s,a))}return this}function pne(n){var e=[],t=[],r;for(this._root&&e.push(new zu(this._root,this._x0,this._x1));r=e.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.x1,l=(o+a)/2;(s=i[0])&&e.push(new zu(s,o,l)),(s=i[1])&&e.push(new zu(s,l,a))}t.push(r)}for(;r=t.pop();)n(r.node,r.x0,r.x1);return this}function mne(n){return n[0]}function gne(n){return arguments.length?(this._x=n,this):this._x}function IA(n,e){var t=new LA(e??mne,NaN,NaN);return n==null?t:t.addAll(n)}function LA(n,e,t){this._x=n,this._x0=e,this._x1=t,this._root=void 0}function CL(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var io=IA.prototype=LA.prototype;io.copy=function(){var n=new LA(this._x,this._x0,this._x1),e=this._root,t,r;if(!e)return n;if(!e.length)return n._root=CL(e),n;for(t=[{source:e,target:n._root=new Array(2)}];e=t.pop();)for(var i=0;i<2;++i)(r=e.source[i])&&(r.length?t.push({source:r,target:e.target[i]=new Array(2)}):e.target[i]=CL(r));return n};io.add=rne;io.addAll=ine;io.cover=sne;io.data=one;io.extent=ane;io.find=lne;io.remove=une;io.removeAll=cne;io.root=fne;io.size=dne;io.visit=hne;io.visitAfter=pne;io.x=gne;function yne(n){const e=+this._x.call(null,n),t=+this._y.call(null,n);return ez(this.cover(e,t),e,t,n)}function ez(n,e,t,r){if(isNaN(e)||isNaN(t))return n;var i,s=n._root,o={data:r},a=n._x0,l=n._y0,u=n._x1,c=n._y1,d,h,g,y,E,_,m,v;if(!s)return n._root=o,n;for(;s.length;)if((E=e>=(d=(a+u)/2))?a=d:u=d,(_=t>=(h=(l+c)/2))?l=h:c=h,i=s,!(s=s[m=_<<1|E]))return i[m]=o,n;if(g=+n._x.call(null,s.data),y=+n._y.call(null,s.data),e===g&&t===y)return o.next=s,i?i[m]=o:n._root=o,n;do i=i?i[m]=new Array(4):n._root=new Array(4),(E=e>=(d=(a+u)/2))?a=d:u=d,(_=t>=(h=(l+c)/2))?l=h:c=h;while((m=_<<1|E)===(v=(y>=h)<<1|g>=d));return i[v]=s,i[m]=o,n}function vne(n){var e,t,r=n.length,i,s,o=new Array(r),a=new Array(r),l=1/0,u=1/0,c=-1/0,d=-1/0;for(t=0;t<r;++t)isNaN(i=+this._x.call(null,e=n[t]))||isNaN(s=+this._y.call(null,e))||(o[t]=i,a[t]=s,i<l&&(l=i),i>c&&(c=i),s<u&&(u=s),s>d&&(d=s));if(l>c||u>d)return this;for(this.cover(l,u).cover(c,d),t=0;t<r;++t)ez(this,o[t],a[t],n[t]);return this}function _ne(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var t=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(t))i=(t=Math.floor(n))+1,s=(r=Math.floor(e))+1;else{for(var o=i-t||1,a=this._root,l,u;t>n||n>=i||r>e||e>=s;)switch(u=(e<r)<<1|n<t,l=new Array(4),l[u]=a,a=l,o*=2,u){case 0:i=t+o,s=r+o;break;case 1:t=i-o,s=r+o;break;case 2:i=t+o,r=s-o;break;case 3:t=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=t,this._y0=r,this._x1=i,this._y1=s,this}function xne(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function wne(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ls(n,e,t,r,i){this.node=n,this.x0=e,this.y0=t,this.x1=r,this.y1=i}function Sne(n,e,t){var r,i=this._x0,s=this._y0,o,a,l,u,c=this._x1,d=this._y1,h=[],g=this._root,y,E;for(g&&h.push(new Ls(g,i,s,c,d)),t==null?t=1/0:(i=n-t,s=e-t,c=n+t,d=e+t,t*=t);y=h.pop();)if(!(!(g=y.node)||(o=y.x0)>c||(a=y.y0)>d||(l=y.x1)<i||(u=y.y1)<s))if(g.length){var _=(o+l)/2,m=(a+u)/2;h.push(new Ls(g[3],_,m,l,u),new Ls(g[2],o,m,_,u),new Ls(g[1],_,a,l,m),new Ls(g[0],o,a,_,m)),(E=(e>=m)<<1|n>=_)&&(y=h[h.length-1],h[h.length-1]=h[h.length-1-E],h[h.length-1-E]=y)}else{var v=n-+this._x.call(null,g.data),S=e-+this._y.call(null,g.data),T=v*v+S*S;if(T<t){var M=Math.sqrt(t=T);i=n-M,s=e-M,c=n+M,d=e+M,r=g.data}}return r}function Ene(n){if(isNaN(c=+this._x.call(null,n))||isNaN(d=+this._y.call(null,n)))return this;var e,t=this._root,r,i,s,o=this._x0,a=this._y0,l=this._x1,u=this._y1,c,d,h,g,y,E,_,m;if(!t)return this;if(t.length)for(;;){if((y=c>=(h=(o+l)/2))?o=h:l=h,(E=d>=(g=(a+u)/2))?a=g:u=g,e=t,!(t=t[_=E<<1|y]))return this;if(!t.length)break;(e[_+1&3]||e[_+2&3]||e[_+3&3])&&(r=e,m=_)}for(;t.data!==n;)if(i=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,i?(s?i.next=s:delete i.next,this):e?(s?e[_]=s:delete e[_],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(r?r[m]=t:this._root=t),this):(this._root=s,this)}function bne(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function Tne(){return this._root}function Mne(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function Ane(n){var e=[],t,r=this._root,i,s,o,a,l;for(r&&e.push(new Ls(r,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!n(r=t.node,s=t.x0,o=t.y0,a=t.x1,l=t.y1)&&r.length){var u=(s+a)/2,c=(o+l)/2;(i=r[3])&&e.push(new Ls(i,u,c,a,l)),(i=r[2])&&e.push(new Ls(i,s,c,u,l)),(i=r[1])&&e.push(new Ls(i,u,o,a,c)),(i=r[0])&&e.push(new Ls(i,s,o,u,c))}return this}function Cne(n){var e=[],t=[],r;for(this._root&&e.push(new Ls(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,l=r.x1,u=r.y1,c=(o+l)/2,d=(a+u)/2;(s=i[0])&&e.push(new Ls(s,o,a,c,d)),(s=i[1])&&e.push(new Ls(s,c,a,l,d)),(s=i[2])&&e.push(new Ls(s,o,d,c,u)),(s=i[3])&&e.push(new Ls(s,c,d,l,u))}t.push(r)}for(;r=t.pop();)n(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Rne(n){return n[0]}function Pne(n){return arguments.length?(this._x=n,this):this._x}function Ine(n){return n[1]}function Lne(n){return arguments.length?(this._y=n,this):this._y}function NA(n,e,t){var r=new OA(e??Rne,t??Ine,NaN,NaN,NaN,NaN);return n==null?r:r.addAll(n)}function OA(n,e,t,r,i,s){this._x=n,this._y=e,this._x0=t,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function RL(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var Ds=NA.prototype=OA.prototype;Ds.copy=function(){var n=new OA(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,r;if(!e)return n;if(!e.length)return n._root=RL(e),n;for(t=[{source:e,target:n._root=new Array(4)}];e=t.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?t.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=RL(r));return n};Ds.add=yne;Ds.addAll=vne;Ds.cover=_ne;Ds.data=xne;Ds.extent=wne;Ds.find=Sne;Ds.remove=Ene;Ds.removeAll=bne;Ds.root=Tne;Ds.size=Mne;Ds.visit=Ane;Ds.visitAfter=Cne;Ds.x=Pne;Ds.y=Lne;function Nne(n){const e=+this._x.call(null,n),t=+this._y.call(null,n),r=+this._z.call(null,n);return tz(this.cover(e,t,r),e,t,r,n)}function tz(n,e,t,r,i){if(isNaN(e)||isNaN(t)||isNaN(r))return n;var s,o=n._root,a={data:i},l=n._x0,u=n._y0,c=n._z0,d=n._x1,h=n._y1,g=n._z1,y,E,_,m,v,S,T,M,A,R,O;if(!o)return n._root=a,n;for(;o.length;)if((T=e>=(y=(l+d)/2))?l=y:d=y,(M=t>=(E=(u+h)/2))?u=E:h=E,(A=r>=(_=(c+g)/2))?c=_:g=_,s=o,!(o=o[R=A<<2|M<<1|T]))return s[R]=a,n;if(m=+n._x.call(null,o.data),v=+n._y.call(null,o.data),S=+n._z.call(null,o.data),e===m&&t===v&&r===S)return a.next=o,s?s[R]=a:n._root=a,n;do s=s?s[R]=new Array(8):n._root=new Array(8),(T=e>=(y=(l+d)/2))?l=y:d=y,(M=t>=(E=(u+h)/2))?u=E:h=E,(A=r>=(_=(c+g)/2))?c=_:g=_;while((R=A<<2|M<<1|T)===(O=(S>=_)<<2|(v>=E)<<1|m>=y));return s[O]=o,s[R]=a,n}function One(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,t=new Float64Array(e),r=new Float64Array(e),i=new Float64Array(e);let s=1/0,o=1/0,a=1/0,l=-1/0,u=-1/0,c=-1/0;for(let d=0,h,g,y,E;d<e;++d)isNaN(g=+this._x.call(null,h=n[d]))||isNaN(y=+this._y.call(null,h))||isNaN(E=+this._z.call(null,h))||(t[d]=g,r[d]=y,i[d]=E,g<s&&(s=g),g>l&&(l=g),y<o&&(o=y),y>u&&(u=y),E<a&&(a=E),E>c&&(c=E));if(s>l||o>u||a>c)return this;this.cover(s,o,a).cover(l,u,c);for(let d=0;d<e;++d)tz(this,t[d],r[d],i[d],n[d]);return this}function Dne(n,e,t){if(isNaN(n=+n)||isNaN(e=+e)||isNaN(t=+t))return this;var r=this._x0,i=this._y0,s=this._z0,o=this._x1,a=this._y1,l=this._z1;if(isNaN(r))o=(r=Math.floor(n))+1,a=(i=Math.floor(e))+1,l=(s=Math.floor(t))+1;else{for(var u=o-r||1,c=this._root,d,h;r>n||n>=o||i>e||e>=a||s>t||t>=l;)switch(h=(t<s)<<2|(e<i)<<1|n<r,d=new Array(8),d[h]=c,c=d,u*=2,h){case 0:o=r+u,a=i+u,l=s+u;break;case 1:r=o-u,a=i+u,l=s+u;break;case 2:o=r+u,i=a-u,l=s+u;break;case 3:r=o-u,i=a-u,l=s+u;break;case 4:o=r+u,a=i+u,s=l-u;break;case 5:r=o-u,a=i+u,s=l-u;break;case 6:o=r+u,i=a-u,s=l-u;break;case 7:r=o-u,i=a-u,s=l-u;break}this._root&&this._root.length&&(this._root=c)}return this._x0=r,this._y0=i,this._z0=s,this._x1=o,this._y1=a,this._z1=l,this}function kne(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function Une(n){return arguments.length?this.cover(+n[0][0],+n[0][1],+n[0][2]).cover(+n[1][0],+n[1][1],+n[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function sr(n,e,t,r,i,s,o){this.node=n,this.x0=e,this.y0=t,this.z0=r,this.x1=i,this.y1=s,this.z1=o}function Fne(n,e,t,r){var i,s=this._x0,o=this._y0,a=this._z0,l,u,c,d,h,g,y=this._x1,E=this._y1,_=this._z1,m=[],v=this._root,S,T;for(v&&m.push(new sr(v,s,o,a,y,E,_)),r==null?r=1/0:(s=n-r,o=e-r,a=t-r,y=n+r,E=e+r,_=t+r,r*=r);S=m.pop();)if(!(!(v=S.node)||(l=S.x0)>y||(u=S.y0)>E||(c=S.z0)>_||(d=S.x1)<s||(h=S.y1)<o||(g=S.z1)<a))if(v.length){var M=(l+d)/2,A=(u+h)/2,R=(c+g)/2;m.push(new sr(v[7],M,A,R,d,h,g),new sr(v[6],l,A,R,M,h,g),new sr(v[5],M,u,R,d,A,g),new sr(v[4],l,u,R,M,A,g),new sr(v[3],M,A,c,d,h,R),new sr(v[2],l,A,c,M,h,R),new sr(v[1],M,u,c,d,A,R),new sr(v[0],l,u,c,M,A,R)),(T=(t>=R)<<2|(e>=A)<<1|n>=M)&&(S=m[m.length-1],m[m.length-1]=m[m.length-1-T],m[m.length-1-T]=S)}else{var O=n-+this._x.call(null,v.data),I=e-+this._y.call(null,v.data),k=t-+this._z.call(null,v.data),G=O*O+I*I+k*k;if(G<r){var $=Math.sqrt(r=G);s=n-$,o=e-$,a=t-$,y=n+$,E=e+$,_=t+$,i=v.data}}return i}function zne(n){if(isNaN(h=+this._x.call(null,n))||isNaN(g=+this._y.call(null,n))||isNaN(y=+this._z.call(null,n)))return this;var e,t=this._root,r,i,s,o=this._x0,a=this._y0,l=this._z0,u=this._x1,c=this._y1,d=this._z1,h,g,y,E,_,m,v,S,T,M,A;if(!t)return this;if(t.length)for(;;){if((v=h>=(E=(o+u)/2))?o=E:u=E,(S=g>=(_=(a+c)/2))?a=_:c=_,(T=y>=(m=(l+d)/2))?l=m:d=m,e=t,!(t=t[M=T<<2|S<<1|v]))return this;if(!t.length)break;(e[M+1&7]||e[M+2&7]||e[M+3&7]||e[M+4&7]||e[M+5&7]||e[M+6&7]||e[M+7&7])&&(r=e,A=M)}for(;t.data!==n;)if(i=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,i?(s?i.next=s:delete i.next,this):e?(s?e[M]=s:delete e[M],(t=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&t===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!t.length&&(r?r[A]=t:this._root=t),this):(this._root=s,this)}function Bne(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function Hne(){return this._root}function $ne(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function Gne(n){var e=[],t,r=this._root,i,s,o,a,l,u,c;for(r&&e.push(new sr(r,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=e.pop();)if(!n(r=t.node,s=t.x0,o=t.y0,a=t.z0,l=t.x1,u=t.y1,c=t.z1)&&r.length){var d=(s+l)/2,h=(o+u)/2,g=(a+c)/2;(i=r[7])&&e.push(new sr(i,d,h,g,l,u,c)),(i=r[6])&&e.push(new sr(i,s,h,g,d,u,c)),(i=r[5])&&e.push(new sr(i,d,o,g,l,h,c)),(i=r[4])&&e.push(new sr(i,s,o,g,d,h,c)),(i=r[3])&&e.push(new sr(i,d,h,a,l,u,g)),(i=r[2])&&e.push(new sr(i,s,h,a,d,u,g)),(i=r[1])&&e.push(new sr(i,d,o,a,l,h,g)),(i=r[0])&&e.push(new sr(i,s,o,a,d,h,g))}return this}function Vne(n){var e=[],t=[],r;for(this._root&&e.push(new sr(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=e.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,l=r.z0,u=r.x1,c=r.y1,d=r.z1,h=(o+u)/2,g=(a+c)/2,y=(l+d)/2;(s=i[0])&&e.push(new sr(s,o,a,l,h,g,y)),(s=i[1])&&e.push(new sr(s,h,a,l,u,g,y)),(s=i[2])&&e.push(new sr(s,o,g,l,h,c,y)),(s=i[3])&&e.push(new sr(s,h,g,l,u,c,y)),(s=i[4])&&e.push(new sr(s,o,a,y,h,g,d)),(s=i[5])&&e.push(new sr(s,h,a,y,u,g,d)),(s=i[6])&&e.push(new sr(s,o,g,y,h,c,d)),(s=i[7])&&e.push(new sr(s,h,g,y,u,c,d))}t.push(r)}for(;r=t.pop();)n(r.node,r.x0,r.y0,r.z0,r.x1,r.y1,r.z1);return this}function jne(n){return n[0]}function Wne(n){return arguments.length?(this._x=n,this):this._x}function qne(n){return n[1]}function Xne(n){return arguments.length?(this._y=n,this):this._y}function Yne(n){return n[2]}function Kne(n){return arguments.length?(this._z=n,this):this._z}function DA(n,e,t,r){var i=new kA(e??jne,t??qne,r??Yne,NaN,NaN,NaN,NaN,NaN,NaN);return n==null?i:i.addAll(n)}function kA(n,e,t,r,i,s,o,a,l){this._x=n,this._y=e,this._z=t,this._x0=r,this._y0=i,this._z0=s,this._x1=o,this._y1=a,this._z1=l,this._root=void 0}function PL(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var ms=DA.prototype=kA.prototype;ms.copy=function(){var n=new kA(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,t,r;if(!e)return n;if(!e.length)return n._root=PL(e),n;for(t=[{source:e,target:n._root=new Array(8)}];e=t.pop();)for(var i=0;i<8;++i)(r=e.source[i])&&(r.length?t.push({source:r,target:e.target[i]=new Array(8)}):e.target[i]=PL(r));return n};ms.add=Nne;ms.addAll=One;ms.cover=Dne;ms.data=kne;ms.extent=Une;ms.find=Fne;ms.remove=zne;ms.removeAll=Bne;ms.root=Hne;ms.size=$ne;ms.visit=Gne;ms.visitAfter=Vne;ms.x=Wne;ms.y=Xne;ms.z=Kne;function Dr(n){return function(){return n}}function Yo(n){return(n()-.5)*1e-6}function SE(n){return n.x+n.vx}function IL(n){return n.y+n.vy}function Jne(n){return n.z+n.vz}function nz(n){var e,t,r,i,s=1,o=1;typeof n!="function"&&(n=Dr(n==null?1:+n));function a(){for(var c,d=e.length,h,g,y,E,_,m,v,S=0;S<o;++S)for(h=(t===1?IA(e,SE):t===2?NA(e,SE,IL):t===3?DA(e,SE,IL,Jne):null).visitAfter(l),c=0;c<d;++c)g=e[c],m=r[g.index],v=m*m,y=g.x+g.vx,t>1&&(E=g.y+g.vy),t>2&&(_=g.z+g.vz),h.visit(T);function T(M,A,R,O,I,k,G){var $=[A,R,O,I,k,G],U=$[0],ee=$[1],re=$[2],ne=$[t],X=$[t+1],q=$[t+2],K=M.data,F=M.r,L=m+F;if(K){if(K.index>g.index){var z=y-K.x-K.vx,Y=t>1?E-K.y-K.vy:0,B=t>2?_-K.z-K.vz:0,J=z*z+Y*Y+B*B;J<L*L&&(z===0&&(z=Yo(i),J+=z*z),t>1&&Y===0&&(Y=Yo(i),J+=Y*Y),t>2&&B===0&&(B=Yo(i),J+=B*B),J=(L-(J=Math.sqrt(J)))/J*s,g.vx+=(z*=J)*(L=(F*=F)/(v+F)),t>1&&(g.vy+=(Y*=J)*L),t>2&&(g.vz+=(B*=J)*L),K.vx-=z*(L=1-L),t>1&&(K.vy-=Y*L),t>2&&(K.vz-=B*L))}return}return U>y+L||ne<y-L||t>1&&(ee>E+L||X<E-L)||t>2&&(re>_+L||q<_-L)}}function l(c){if(c.data)return c.r=r[c.data.index];for(var d=c.r=0;d<Math.pow(2,t);++d)c[d]&&c[d].r>c.r&&(c.r=c[d].r)}function u(){if(e){var c,d=e.length,h;for(r=new Array(d),c=0;c<d;++c)h=e[c],r[h.index]=+n(h,c,e)}}return a.initialize=function(c,...d){e=c,i=d.find(h=>typeof h=="function")||Math.random,t=d.find(h=>[1,2,3].includes(h))||2,u()},a.iterations=function(c){return arguments.length?(o=+c,a):o},a.strength=function(c){return arguments.length?(s=+c,a):s},a.radius=function(c){return arguments.length?(n=typeof c=="function"?c:Dr(+c),u(),a):n},a}function Zne(n){return n.index}function LL(n,e){var t=n.get(e);if(!t)throw new Error("node not found: "+e);return t}function rz(n){var e=Zne,t=h,r,i=Dr(30),s,o,a,l,u,c,d=1;n==null&&(n=[]);function h(m){return 1/Math.min(l[m.source.index],l[m.target.index])}function g(m){for(var v=0,S=n.length;v<d;++v)for(var T=0,M,A,R,O=0,I=0,k=0,G,$;T<S;++T)M=n[T],A=M.source,R=M.target,O=R.x+R.vx-A.x-A.vx||Yo(c),a>1&&(I=R.y+R.vy-A.y-A.vy||Yo(c)),a>2&&(k=R.z+R.vz-A.z-A.vz||Yo(c)),G=Math.sqrt(O*O+I*I+k*k),G=(G-s[T])/G*m*r[T],O*=G,I*=G,k*=G,R.vx-=O*($=u[T]),a>1&&(R.vy-=I*$),a>2&&(R.vz-=k*$),A.vx+=O*($=1-$),a>1&&(A.vy+=I*$),a>2&&(A.vz+=k*$)}function y(){if(o){var m,v=o.length,S=n.length,T=new Map(o.map((A,R)=>[e(A,R,o),A])),M;for(m=0,l=new Array(v);m<S;++m)M=n[m],M.index=m,typeof M.source!="object"&&(M.source=LL(T,M.source)),typeof M.target!="object"&&(M.target=LL(T,M.target)),l[M.source.index]=(l[M.source.index]||0)+1,l[M.target.index]=(l[M.target.index]||0)+1;for(m=0,u=new Array(S);m<S;++m)M=n[m],u[m]=l[M.source.index]/(l[M.source.index]+l[M.target.index]);r=new Array(S),E(),s=new Array(S),_()}}function E(){if(o)for(var m=0,v=n.length;m<v;++m)r[m]=+t(n[m],m,n)}function _(){if(o)for(var m=0,v=n.length;m<v;++m)s[m]=+i(n[m],m,n)}return g.initialize=function(m,...v){o=m,c=v.find(S=>typeof S=="function")||Math.random,a=v.find(S=>[1,2,3].includes(S))||2,y()},g.links=function(m){return arguments.length?(n=m,y(),g):n},g.id=function(m){return arguments.length?(e=m,g):e},g.iterations=function(m){return arguments.length?(d=+m,g):d},g.strength=function(m){return arguments.length?(t=typeof m=="function"?m:Dr(+m),E(),g):t},g.distance=function(m){return arguments.length?(i=typeof m=="function"?m:Dr(+m),_(),g):i},g}var Qne={value:()=>{}};function iz(){for(var n=0,e=arguments.length,t={},r;n<e;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new Rx(t)}function Rx(n){this._=n}function ere(n,e){return n.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");if(i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}Rx.prototype=iz.prototype={constructor:Rx,on:function(n,e){var t=this._,r=ere(n+"",t),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(n=r[s]).type)&&(i=tre(t[i],n.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(n=r[s]).type)t[i]=NL(t[i],n.name,e);else if(e==null)for(i in t)t[i]=NL(t[i],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new Rx(n)},call:function(n,e){if((i=arguments.length-2)>0)for(var t=new Array(i),r=0,i,s;r<i;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],r=0,i=s.length;r<i;++r)s[r].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,s=r.length;i<s;++i)r[i].value.apply(e,t)}};function tre(n,e){for(var t=0,r=n.length,i;t<r;++t)if((i=n[t]).name===e)return i.value}function NL(n,e,t){for(var r=0,i=n.length;r<i;++r)if(n[r].name===e){n[r]=Qne,n=n.slice(0,r).concat(n.slice(r+1));break}return t!=null&&n.push({name:e,value:t}),n}var $p=0,Wg=0,_g=0,sz=1e3,Yx,qg,Kx=0,Nd=0,ew=0,Oy=typeof performance=="object"&&performance.now?performance:Date,oz=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function az(){return Nd||(oz(nre),Nd=Oy.now()+ew)}function nre(){Nd=0}function $T(){this._call=this._time=this._next=null}$T.prototype=lz.prototype={constructor:$T,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?az():+t)+(e==null?0:+e),!this._next&&qg!==this&&(qg?qg._next=this:Yx=this,qg=this),this._call=n,this._time=t,GT()},stop:function(){this._call&&(this._call=null,this._time=1/0,GT())}};function lz(n,e,t){var r=new $T;return r.restart(n,e,t),r}function rre(){az(),++$p;for(var n=Yx,e;n;)(e=Nd-n._time)>=0&&n._call.call(void 0,e),n=n._next;--$p}function OL(){Nd=(Kx=Oy.now())+ew,$p=Wg=0;try{rre()}finally{$p=0,sre(),Nd=0}}function ire(){var n=Oy.now(),e=n-Kx;e>sz&&(ew-=e,Kx=n)}function sre(){for(var n,e=Yx,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:Yx=t);qg=n,GT(r)}function GT(n){if(!$p){Wg&&(Wg=clearTimeout(Wg));var e=n-Nd;e>24?(n<1/0&&(Wg=setTimeout(OL,n-Oy.now()-ew)),_g&&(_g=clearInterval(_g))):(_g||(Kx=Oy.now(),_g=setInterval(ire,sz)),$p=1,oz(OL))}}const ore=1664525,are=1013904223,DL=4294967296;function lre(){let n=1;return()=>(n=(ore*n+are)%DL)/DL}var kL=3;function EE(n){return n.x}function UL(n){return n.y}function ure(n){return n.z}var cre=10,fre=Math.PI*(3-Math.sqrt(5)),dre=Math.PI*20/(9+Math.sqrt(221));function uz(n,e){e=e||2;var t=Math.min(kL,Math.max(1,Math.round(e))),r,i=1,s=.001,o=1-Math.pow(s,1/300),a=0,l=.6,u=new Map,c=lz(g),d=iz("tick","end"),h=lre();n==null&&(n=[]);function g(){y(),d.call("tick",r),i<s&&(c.stop(),d.call("end",r))}function y(m){var v,S=n.length,T;m===void 0&&(m=1);for(var M=0;M<m;++M)for(i+=(a-i)*o,u.forEach(function(A){A(i)}),v=0;v<S;++v)T=n[v],T.fx==null?T.x+=T.vx*=l:(T.x=T.fx,T.vx=0),t>1&&(T.fy==null?T.y+=T.vy*=l:(T.y=T.fy,T.vy=0)),t>2&&(T.fz==null?T.z+=T.vz*=l:(T.z=T.fz,T.vz=0));return r}function E(){for(var m=0,v=n.length,S;m<v;++m){if(S=n[m],S.index=m,S.fx!=null&&(S.x=S.fx),S.fy!=null&&(S.y=S.fy),S.fz!=null&&(S.z=S.fz),isNaN(S.x)||t>1&&isNaN(S.y)||t>2&&isNaN(S.z)){var T=cre*(t>2?Math.cbrt(.5+m):t>1?Math.sqrt(.5+m):m),M=m*fre,A=m*dre;t===1?S.x=T:t===2?(S.x=T*Math.cos(M),S.y=T*Math.sin(M)):(S.x=T*Math.sin(M)*Math.cos(A),S.y=T*Math.cos(M),S.z=T*Math.sin(M)*Math.sin(A))}(isNaN(S.vx)||t>1&&isNaN(S.vy)||t>2&&isNaN(S.vz))&&(S.vx=0,t>1&&(S.vy=0),t>2&&(S.vz=0))}}function _(m){return m.initialize&&m.initialize(n,h,t),m}return E(),r={tick:y,restart:function(){return c.restart(g),r},stop:function(){return c.stop(),r},numDimensions:function(m){return arguments.length?(t=Math.min(kL,Math.max(1,Math.round(m))),u.forEach(_),r):t},nodes:function(m){return arguments.length?(n=m,E(),u.forEach(_),r):n},alpha:function(m){return arguments.length?(i=+m,r):i},alphaMin:function(m){return arguments.length?(s=+m,r):s},alphaDecay:function(m){return arguments.length?(o=+m,r):+o},alphaTarget:function(m){return arguments.length?(a=+m,r):a},velocityDecay:function(m){return arguments.length?(l=1-m,r):1-l},randomSource:function(m){return arguments.length?(h=m,u.forEach(_),r):h},force:function(m,v){return arguments.length>1?(v==null?u.delete(m):u.set(m,_(v)),r):u.get(m)},find:function(){var m=Array.prototype.slice.call(arguments),v=m.shift()||0,S=(t>1?m.shift():null)||0,T=(t>2?m.shift():null)||0,M=m.shift()||1/0,A=0,R=n.length,O,I,k,G,$,U;for(M*=M,A=0;A<R;++A)$=n[A],O=v-$.x,I=S-($.y||0),k=T-($.z||0),G=O*O+I*I+k*k,G<M&&(U=$,M=G);return U},on:function(m,v){return arguments.length>1?(d.on(m,v),r):d.on(m)}}}function cz(){var n,e,t,r,i,s=Dr(-30),o,a=1,l=1/0,u=.81;function c(y){var E,_=n.length,m=(e===1?IA(n,EE):e===2?NA(n,EE,UL):e===3?DA(n,EE,UL,ure):null).visitAfter(h);for(i=y,E=0;E<_;++E)t=n[E],m.visit(g)}function d(){if(n){var y,E=n.length,_;for(o=new Array(E),y=0;y<E;++y)_=n[y],o[_.index]=+s(_,y,n)}}function h(y){var E=0,_,m,v=0,S,T,M,A,R=y.length;if(R){for(S=T=M=A=0;A<R;++A)(_=y[A])&&(m=Math.abs(_.value))&&(E+=_.value,v+=m,S+=m*(_.x||0),T+=m*(_.y||0),M+=m*(_.z||0));E*=Math.sqrt(4/R),y.x=S/v,e>1&&(y.y=T/v),e>2&&(y.z=M/v)}else{_=y,_.x=_.data.x,e>1&&(_.y=_.data.y),e>2&&(_.z=_.data.z);do E+=o[_.data.index];while(_=_.next)}y.value=E}function g(y,E,_,m,v){if(!y.value)return!0;var S=[_,m,v][e-1],T=y.x-t.x,M=e>1?y.y-t.y:0,A=e>2?y.z-t.z:0,R=S-E,O=T*T+M*M+A*A;if(R*R/u<O)return O<l&&(T===0&&(T=Yo(r),O+=T*T),e>1&&M===0&&(M=Yo(r),O+=M*M),e>2&&A===0&&(A=Yo(r),O+=A*A),O<a&&(O=Math.sqrt(a*O)),t.vx+=T*y.value*i/O,e>1&&(t.vy+=M*y.value*i/O),e>2&&(t.vz+=A*y.value*i/O)),!0;if(y.length||O>=l)return;(y.data!==t||y.next)&&(T===0&&(T=Yo(r),O+=T*T),e>1&&M===0&&(M=Yo(r),O+=M*M),e>2&&A===0&&(A=Yo(r),O+=A*A),O<a&&(O=Math.sqrt(a*O)));do y.data!==t&&(R=o[y.data.index]*i/O,t.vx+=T*R,e>1&&(t.vy+=M*R),e>2&&(t.vz+=A*R));while(y=y.next)}return c.initialize=function(y,...E){n=y,r=E.find(_=>typeof _=="function")||Math.random,e=E.find(_=>[1,2,3].includes(_))||2,d()},c.strength=function(y){return arguments.length?(s=typeof y=="function"?y:Dr(+y),d(),c):s},c.distanceMin=function(y){return arguments.length?(a=y*y,c):Math.sqrt(a)},c.distanceMax=function(y){return arguments.length?(l=y*y,c):Math.sqrt(l)},c.theta=function(y){return arguments.length?(u=y*y,c):Math.sqrt(u)},c}function hre(n,e,t,r){var i,s,o=Dr(.1),a,l;typeof n!="function"&&(n=Dr(+n)),e==null&&(e=0),t==null&&(t=0),r==null&&(r=0);function u(d){for(var h=0,g=i.length;h<g;++h){var y=i[h],E=y.x-e||1e-6,_=(y.y||0)-t||1e-6,m=(y.z||0)-r||1e-6,v=Math.sqrt(E*E+_*_+m*m),S=(l[h]-v)*a[h]*d/v;y.vx+=E*S,s>1&&(y.vy+=_*S),s>2&&(y.vz+=m*S)}}function c(){if(i){var d,h=i.length;for(a=new Array(h),l=new Array(h),d=0;d<h;++d)l[d]=+n(i[d],d,i),a[d]=isNaN(l[d])?0:+o(i[d],d,i)}}return u.initialize=function(d,...h){i=d,s=h.find(g=>[1,2,3].includes(g))||2,c()},u.strength=function(d){return arguments.length?(o=typeof d=="function"?d:Dr(+d),c(),u):o},u.radius=function(d){return arguments.length?(n=typeof d=="function"?d:Dr(+d),c(),u):n},u.x=function(d){return arguments.length?(e=+d,u):e},u.y=function(d){return arguments.length?(t=+d,u):t},u.z=function(d){return arguments.length?(r=+d,u):r},u}function VT(n){var e=Dr(.1),t,r,i;typeof n!="function"&&(n=Dr(n==null?0:+n));function s(a){for(var l=0,u=t.length,c;l<u;++l)c=t[l],c.vx+=(i[l]-c.x)*r[l]*a}function o(){if(t){var a,l=t.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+n(t[a],a,t))?0:+e(t[a],a,t)}}return s.initialize=function(a){t=a,o()},s.strength=function(a){return arguments.length?(e=typeof a=="function"?a:Dr(+a),o(),s):e},s.x=function(a){return arguments.length?(n=typeof a=="function"?a:Dr(+a),o(),s):n},s}function jT(n){var e=Dr(.1),t,r,i;typeof n!="function"&&(n=Dr(n==null?0:+n));function s(a){for(var l=0,u=t.length,c;l<u;++l)c=t[l],c.vy+=(i[l]-c.y)*r[l]*a}function o(){if(t){var a,l=t.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+n(t[a],a,t))?0:+e(t[a],a,t)}}return s.initialize=function(a){t=a,o()},s.strength=function(a){return arguments.length?(e=typeof a=="function"?a:Dr(+a),o(),s):e},s.y=function(a){return arguments.length?(n=typeof a=="function"?a:Dr(+a),o(),s):n},s}function pre(n){var e=Dr(.1),t,r,i;typeof n!="function"&&(n=Dr(n==null?0:+n));function s(a){for(var l=0,u=t.length,c;l<u;++l)c=t[l],c.vz+=(i[l]-c.z)*r[l]*a}function o(){if(t){var a,l=t.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+n(t[a],a,t))?0:+e(t[a],a,t)}}return s.initialize=function(a){t=a,o()},s.strength=function(a){return arguments.length?(e=typeof a=="function"?a:Dr(+a),o(),s):e},s.z=function(a){return arguments.length?(n=typeof a=="function"?a:Dr(+a),o(),s):n},s}function mre(n){var e=0,t=n.children,r=t&&t.length;if(!r)e=1;else for(;--r>=0;)e+=t[r].value;n.value=e}function gre(){return this.eachAfter(mre)}function yre(n,e){let t=-1;for(const r of this)n.call(e,r,++t,this);return this}function vre(n,e){for(var t=this,r=[t],i,s,o=-1;t=r.pop();)if(n.call(e,t,++o,this),i=t.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function _re(n,e){for(var t=this,r=[t],i=[],s,o,a,l=-1;t=r.pop();)if(i.push(t),s=t.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;t=i.pop();)n.call(e,t,++l,this);return this}function xre(n,e){let t=-1;for(const r of this)if(n.call(e,r,++t,this))return r}function wre(n){return this.eachAfter(function(e){for(var t=+n(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)t+=r[i].value;e.value=t})}function Sre(n){return this.eachBefore(function(e){e.children&&e.children.sort(n)})}function Ere(n){for(var e=this,t=bre(e,n),r=[e];e!==t;)e=e.parent,r.push(e);for(var i=r.length;n!==t;)r.splice(i,0,n),n=n.parent;return r}function bre(n,e){if(n===e)return n;var t=n.ancestors(),r=e.ancestors(),i=null;for(n=t.pop(),e=r.pop();n===e;)i=n,n=t.pop(),e=r.pop();return i}function Tre(){for(var n=this,e=[n];n=n.parent;)e.push(n);return e}function Mre(){return Array.from(this)}function Are(){var n=[];return this.eachBefore(function(e){e.children||n.push(e)}),n}function Cre(){var n=this,e=[];return n.each(function(t){t!==n&&e.push({source:t.parent,target:t})}),e}function*Rre(){var n=this,e,t=[n],r,i,s;do for(e=t.reverse(),t=[];n=e.pop();)if(yield n,r=n.children)for(i=0,s=r.length;i<s;++i)t.push(r[i]);while(t.length)}function tw(n,e){n instanceof Map?(n=[void 0,n],e===void 0&&(e=Lre)):e===void 0&&(e=Ire);for(var t=new Gp(n),r,i=[t],s,o,a,l;r=i.pop();)if((o=e(r.data))&&(l=(o=Array.from(o)).length))for(r.children=o,a=l-1;a>=0;--a)i.push(s=o[a]=new Gp(o[a])),s.parent=r,s.depth=r.depth+1;return t.eachBefore(fz)}function Pre(){return tw(this).eachBefore(Nre)}function Ire(n){return n.children}function Lre(n){return Array.isArray(n)?n[1]:null}function Nre(n){n.data.value!==void 0&&(n.value=n.data.value),n.data=n.data.data}function fz(n){var e=0;do n.height=e;while((n=n.parent)&&n.height<++e)}function Gp(n){this.data=n,this.depth=this.height=0,this.parent=null}Gp.prototype=tw.prototype={constructor:Gp,count:gre,each:yre,eachAfter:_re,eachBefore:vre,find:xre,sum:wre,sort:Sre,path:Ere,ancestors:Tre,descendants:Mre,leaves:Are,links:Cre,copy:Pre,[Symbol.iterator]:Rre};function bE(n){return n==null?null:dz(n)}function dz(n){if(typeof n!="function")throw new Error;return n}function xg(){return 0}function wg(n){return function(){return n}}function Ore(n){n.x0=Math.round(n.x0),n.y0=Math.round(n.y0),n.x1=Math.round(n.x1),n.y1=Math.round(n.y1)}function Dre(n,e,t,r,i){for(var s=n.children,o,a=-1,l=s.length,u=n.value&&(r-e)/n.value;++a<l;)o=s[a],o.y0=t,o.y1=i,o.x0=e,o.x1=e+=o.value*u}var kre={depth:-1},FL={},TE={};function Ure(n){return n.id}function Fre(n){return n.parentId}function zre(){var n=Ure,e=Fre,t;function r(i){var s=Array.from(i),o=n,a=e,l,u,c,d,h,g,y,E,_=new Map;if(t!=null){const m=s.map((T,M)=>Bre(t(T,M,i))),v=m.map(zL),S=new Set(m).add("");for(const T of v)S.has(T)||(S.add(T),m.push(T),v.push(zL(T)),s.push(TE));o=(T,M)=>m[M],a=(T,M)=>v[M]}for(c=0,l=s.length;c<l;++c)u=s[c],g=s[c]=new Gp(u),(y=o(u,c,i))!=null&&(y+="")&&(E=g.id=y,_.set(E,_.has(E)?FL:g)),(y=a(u,c,i))!=null&&(y+="")&&(g.parent=y);for(c=0;c<l;++c)if(g=s[c],y=g.parent){if(h=_.get(y),!h)throw new Error("missing: "+y);if(h===FL)throw new Error("ambiguous: "+y);h.children?h.children.push(g):h.children=[g],g.parent=h}else{if(d)throw new Error("multiple roots");d=g}if(!d)throw new Error("no root");if(t!=null){for(;d.data===TE&&d.children.length===1;)d=d.children[0],--l;for(let m=s.length-1;m>=0&&(g=s[m],g.data===TE);--m)g.data=null}if(d.parent=kre,d.eachBefore(function(m){m.depth=m.parent.depth+1,--l}).eachBefore(fz),d.parent=null,l>0)throw new Error("cycle");return d}return r.id=function(i){return arguments.length?(n=bE(i),r):n},r.parentId=function(i){return arguments.length?(e=bE(i),r):e},r.path=function(i){return arguments.length?(t=bE(i),r):t},r}function Bre(n){n=`${n}`;let e=n.length;return WT(n,e-1)&&!WT(n,e-2)&&(n=n.slice(0,-1)),n[0]==="/"?n:`/${n}`}function zL(n){let e=n.length;if(e<2)return"";for(;--e>1&&!WT(n,e););return n.slice(0,e)}function WT(n,e){if(n[e]==="/"){let t=0;for(;e>0&&n[--e]==="\\";)++t;if((t&1)===0)return!0}return!1}function Hre(n,e){return n.parent===e.parent?1:2}function ME(n){var e=n.children;return e?e[0]:n.t}function AE(n){var e=n.children;return e?e[e.length-1]:n.t}function $re(n,e,t){var r=t/(e.i-n.i);e.c-=r,e.s+=t,n.c+=r,e.z+=t,e.m+=t}function Gre(n){for(var e=0,t=0,r=n.children,i=r.length,s;--i>=0;)s=r[i],s.z+=e,s.m+=e,e+=s.s+(t+=s.c)}function Vre(n,e,t){return n.a.parent===e.parent?n.a:t}function Px(n,e){this._=n,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Px.prototype=Object.create(Gp.prototype);function jre(n){for(var e=new Px(n,0),t,r=[e],i,s,o,a;t=r.pop();)if(s=t._.children)for(t.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=t.children[o]=new Px(s[o],o)),i.parent=t;return(e.parent=new Px(null,0)).children=[e],e}function Wre(){var n=Hre,e=1,t=1,r=null;function i(u){var c=jre(u);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)u.eachBefore(l);else{var d=u,h=u,g=u;u.eachBefore(function(v){v.x<d.x&&(d=v),v.x>h.x&&(h=v),v.depth>g.depth&&(g=v)});var y=d===h?1:n(d,h)/2,E=y-d.x,_=e/(h.x+y+E),m=t/(g.depth||1);u.eachBefore(function(v){v.x=(v.x+E)*_,v.y=v.depth*m})}return u}function s(u){var c=u.children,d=u.parent.children,h=u.i?d[u.i-1]:null;if(c){Gre(u);var g=(c[0].z+c[c.length-1].z)/2;h?(u.z=h.z+n(u._,h._),u.m=u.z-g):u.z=g}else h&&(u.z=h.z+n(u._,h._));u.parent.A=a(u,h,u.parent.A||d[0])}function o(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function a(u,c,d){if(c){for(var h=u,g=u,y=c,E=h.parent.children[0],_=h.m,m=g.m,v=y.m,S=E.m,T;y=AE(y),h=ME(h),y&&h;)E=ME(E),g=AE(g),g.a=u,T=y.z+v-h.z-_+n(y._,h._),T>0&&($re(Vre(y,u,d),u,T),_+=T,m+=T),v+=y.m,_+=h.m,S+=E.m,m+=g.m;y&&!AE(g)&&(g.t=y,g.m+=v-m),h&&!ME(E)&&(E.t=h,E.m+=_-S,d=u)}return d}function l(u){u.x*=e,u.y=u.depth*t}return i.separation=function(u){return arguments.length?(n=u,i):n},i.size=function(u){return arguments.length?(r=!1,e=+u[0],t=+u[1],i):r?null:[e,t]},i.nodeSize=function(u){return arguments.length?(r=!0,e=+u[0],t=+u[1],i):r?[e,t]:null},i}function qre(n,e,t,r,i){for(var s=n.children,o,a=-1,l=s.length,u=n.value&&(i-t)/n.value;++a<l;)o=s[a],o.x0=e,o.x1=r,o.y0=t,o.y1=t+=o.value*u}var Xre=(1+Math.sqrt(5))/2;function Yre(n,e,t,r,i,s){for(var o=[],a=e.children,l,u,c=0,d=0,h=a.length,g,y,E=e.value,_,m,v,S,T,M,A;c<h;){g=i-t,y=s-r;do _=a[d++].value;while(!_&&d<h);for(m=v=_,M=Math.max(y/g,g/y)/(E*n),A=_*_*M,T=Math.max(v/A,A/m);d<h;++d){if(_+=u=a[d].value,u<m&&(m=u),u>v&&(v=u),A=_*_*M,S=Math.max(v/A,A/m),S>T){_-=u;break}T=S}o.push(l={value:_,dice:g<y,children:a.slice(c,d)}),l.dice?Dre(l,t,r,i,E?r+=y*_/E:s):qre(l,t,r,E?t+=g*_/E:i,s),E-=_,c=d}return o}const Kre=function n(e){function t(r,i,s,o,a){Yre(e,r,i,s,o,a)}return t.ratio=function(r){return n((r=+r)>1?r:1)},t}(Xre);function Jre(){var n=Kre,e=!1,t=1,r=1,i=[0],s=xg,o=xg,a=xg,l=xg,u=xg;function c(h){return h.x0=h.y0=0,h.x1=t,h.y1=r,h.eachBefore(d),i=[0],e&&h.eachBefore(Ore),h}function d(h){var g=i[h.depth],y=h.x0+g,E=h.y0+g,_=h.x1-g,m=h.y1-g;_<y&&(y=_=(y+_)/2),m<E&&(E=m=(E+m)/2),h.x0=y,h.y0=E,h.x1=_,h.y1=m,h.children&&(g=i[h.depth+1]=s(h)/2,y+=u(h)-g,E+=o(h)-g,_-=a(h)-g,m-=l(h)-g,_<y&&(y=_=(y+_)/2),m<E&&(E=m=(E+m)/2),n(h,y,E,_,m))}return c.round=function(h){return arguments.length?(e=!!h,c):e},c.size=function(h){return arguments.length?(t=+h[0],r=+h[1],c):[t,r]},c.tile=function(h){return arguments.length?(n=dz(h),c):n},c.padding=function(h){return arguments.length?c.paddingInner(h).paddingOuter(h):c.paddingInner()},c.paddingInner=function(h){return arguments.length?(s=typeof h=="function"?h:wg(+h),c):s},c.paddingOuter=function(h){return arguments.length?c.paddingTop(h).paddingRight(h).paddingBottom(h).paddingLeft(h):c.paddingTop()},c.paddingTop=function(h){return arguments.length?(o=typeof h=="function"?h:wg(+h),c):o},c.paddingRight=function(h){return arguments.length?(a=typeof h=="function"?h:wg(+h),c):a},c.paddingBottom=function(h){return arguments.length?(l=typeof h=="function"?h:wg(+h),c):l},c.paddingLeft=function(h){return arguments.length?(u=typeof h=="function"?h:wg(+h),c):u},c}var CE,BL;function UA(){if(BL)return CE;BL=1;function n(t){return!t||typeof t!="object"||typeof t=="function"||Array.isArray(t)||t instanceof Set||t instanceof Map||t instanceof RegExp||t instanceof Date}function e(t,r){t=t||{};var i={};for(var s in r){var o=t[s],a=r[s];if(!n(a)){i[s]=e(o,a);continue}o===void 0?i[s]=a:i[s]=o}return i}return CE=e,CE}var RE,HL;function Xu(){return HL||(HL=1,RE=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"}),RE}var PE,$L;function Zre(){if($L)return PE;$L=1;var n=UA(),e=Xu(),t={dimensions:["x","y"],center:.5,scale:1};function r(s,o,a){if(!e(o))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");a=n(a,t);var l=a.dimensions;if(!Array.isArray(l)||l.length!==2)throw new Error("graphology-layout/random: given dimensions are invalid.");var u=a.center,c=a.scale,d=Math.PI*2,h=(u-.5)*c,g=o.order,y=l[0],E=l[1];function _(S,T){return T[y]=c*Math.cos(S*d/g)+h,T[E]=c*Math.sin(S*d/g)+h,T}var m=0;if(!s){var v={};return o.forEachNode(function(S){v[S]=_(m++,{})}),v}o.updateEachNodeAttributes(function(S,T){return _(m++,T),T},{attributes:l})}var i=r.bind(null,!1);return i.assign=r.bind(null,!0),PE=i,PE}var Qre=Zre();const eie=Bi(Qre);var IE,GL;function tie(){if(GL)return IE;GL=1;var n=0,e=1,t=2,r=3;function i(o,a){return o+""+a}function s(){return .01*(.5-Math.random())}return IE=function(a,l){var u=a.margin,c=a.ratio,d=a.expansion,h=a.gridSize,g=a.speed,y,E,_,m,v,S,T=!0,M=l.length,A=M/r|0,R=new Float32Array(A),O=new Float32Array(A),I=1/0,k=1/0,G=-1/0,$=-1/0;for(y=0;y<M;y+=r)_=l[y+n],m=l[y+e],S=l[y+t]*c+u,I=Math.min(I,_-S),G=Math.max(G,_+S),k=Math.min(k,m-S),$=Math.max($,m+S);var U=G-I,ee=$-k,re=(I+G)/2,ne=(k+$)/2;I=re-d*U/2,G=re+d*U/2,k=ne-d*ee/2,$=ne+d*ee/2;var X=new Array(h*h),q=X.length,K;for(K=0;K<q;K++)X[K]=[];var F,L,z,Y,B,J,le,pe,he,Ee;for(y=0;y<M;y+=r)for(_=l[y+n],m=l[y+e],S=l[y+t]*c+u,F=_-S,L=_+S,z=m-S,Y=m+S,B=Math.floor(h*(F-I)/(G-I)),J=Math.floor(h*(L-I)/(G-I)),le=Math.floor(h*(z-k)/($-k)),pe=Math.floor(h*(Y-k)/($-k)),he=B;he<=J;he++)for(Ee=le;Ee<=pe;Ee++)X[he*h+Ee].push(y);var _e,te=new Set,j,ce,fe,ie,se,Ae,we,Re,Le,be,Ye,ue,oe;for(K=0;K<q;K++)for(_e=X[K],y=0,v=_e.length;y<v;y++)for(j=_e[y],fe=l[j+n],se=l[j+e],we=l[j+t],E=y+1;E<v;E++)ce=_e[E],Le=i(j,ce),!(q>1&&te.has(Le))&&(q>1&&te.add(Le),ie=l[ce+n],Ae=l[ce+e],Re=l[ce+t],be=ie-fe,Ye=Ae-se,ue=Math.sqrt(be*be+Ye*Ye),oe=ue<we*c+u+(Re*c+u),oe&&(T=!1,ce=ce/r|0,ue>0?(R[ce]+=be/ue*(1+we),O[ce]+=Ye/ue*(1+we)):(R[ce]+=U*s(),O[ce]+=ee*s())));for(y=0,E=0;y<M;y+=r,E++)l[y+n]+=R[E]*.1*g,l[y+e]+=O[E]*.1*g;return{converged:T}},IE}var Kf={},VL;function nie(){if(VL)return Kf;VL=1;var n=3;return Kf.validateSettings=function(e){return"gridSize"in e&&typeof e.gridSize!="number"||e.gridSize<=0?{message:"the `gridSize` setting should be a positive number."}:"margin"in e&&typeof e.margin!="number"||e.margin<0?{message:"the `margin` setting should be 0 or a positive number."}:"expansion"in e&&typeof e.expansion!="number"||e.expansion<=0?{message:"the `expansion` setting should be a positive number."}:"ratio"in e&&typeof e.ratio!="number"||e.ratio<=0?{message:"the `ratio` setting should be a positive number."}:"speed"in e&&typeof e.speed!="number"||e.speed<=0?{message:"the `speed` setting should be a positive number."}:null},Kf.graphToByteArray=function(e,t){var r=e.order,i=new Float32Array(r*n),s=0;return e.forEachNode(function(o,a){typeof t=="function"&&(a=t(o,a)),i[s]=a.x,i[s+1]=a.y,i[s+2]=a.size||1,s+=n}),i},Kf.assignLayoutChanges=function(e,t,r){var i=0;e.forEachNode(function(s){var o={x:t[i],y:t[i+1]};typeof r=="function"&&(o=r(s,o)),e.mergeNodeAttributes(s,o),i+=n})},Kf.collectLayoutChanges=function(e,t,r){var i={},s=0;return e.forEachNode(function(o){var a={x:t[s],y:t[s+1]};typeof r=="function"&&(a=r(o,a)),i[o]=a,s+=n}),i},Kf.createWorker=function(t){var r=window.URL||window.webkitURL,i=t.toString(),s=r.createObjectURL(new Blob(["("+i+").call(this);"],{type:"text/javascript"})),o=new Worker(s);return r.revokeObjectURL(s),o},Kf}var LE,jL;function rie(){return jL||(jL=1,LE={gridSize:20,margin:5,expansion:1.1,ratio:1,speed:3}),LE}var NE,WL;function iie(){if(WL)return NE;WL=1;var n=Xu(),e=tie(),t=nie(),r=rie(),i=500;function s(a,l,u){if(!n(l))throw new Error("graphology-layout-noverlap: the given graph is not a valid graphology instance.");typeof u=="number"?u={maxIterations:u}:u=u||{};var c=u.maxIterations||i;if(typeof c!="number"||c<=0)throw new Error("graphology-layout-force: you should provide a positive number of maximum iterations.");var d=Object.assign({},r,u.settings),h=t.validateSettings(d);if(h)throw new Error("graphology-layout-noverlap: "+h.message);var g=t.graphToByteArray(l,u.inputReducer),y=!1,E;for(E=0;E<c&&!y;E++)y=e(d,g).converged;if(a){t.assignLayoutChanges(l,g,u.outputReducer);return}return t.collectLayoutChanges(l,g,u.outputReducer)}var o=s.bind(null,!1);return o.assign=s.bind(null,!0),NE=o,NE}var sie=iie();const oie=Bi(sie);var Sg={},qL;function nw(){if(qL)return Sg;qL=1;function n(r){return typeof r!="number"||isNaN(r)?1:r}function e(r,i){var s={},o=function(u){return typeof u>"u"?i:u};typeof i=="function"&&(o=i);var a=function(u){return o(u[r])},l=function(){return o(void 0)};return typeof r=="string"?(s.fromAttributes=a,s.fromGraph=function(u,c){return a(u.getNodeAttributes(c))},s.fromEntry=function(u,c){return a(c)}):typeof r=="function"?(s.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},s.fromGraph=function(u,c){return o(r(c,u.getNodeAttributes(c)))},s.fromEntry=function(u,c){return o(r(u,c))}):(s.fromAttributes=l,s.fromGraph=l,s.fromEntry=l),s}function t(r,i){var s={},o=function(u){return typeof u>"u"?i:u};typeof i=="function"&&(o=i);var a=function(u){return o(u[r])},l=function(){return o(void 0)};return typeof r=="string"?(s.fromAttributes=a,s.fromGraph=function(u,c){return a(u.getEdgeAttributes(c))},s.fromEntry=function(u,c){return a(c)},s.fromPartialEntry=s.fromEntry,s.fromMinimalEntry=s.fromEntry):typeof r=="function"?(s.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},s.fromGraph=function(u,c){var d=u.extremities(c);return o(r(c,u.getEdgeAttributes(c),d[0],d[1],u.getNodeAttributes(d[0]),u.getNodeAttributes(d[1]),u.isUndirected(c)))},s.fromEntry=function(u,c,d,h,g,y,E){return o(r(u,c,d,h,g,y,E))},s.fromPartialEntry=function(u,c,d,h){return o(r(u,c,d,h))},s.fromMinimalEntry=function(u,c){return o(r(u,c))}):(s.fromAttributes=l,s.fromGraph=l,s.fromEntry=l,s.fromMinimalEntry=l),s}return Sg.createNodeValueGetter=e,Sg.createEdgeValueGetter=t,Sg.createEdgeWeightGetter=function(r){return t(r,n)},Sg}var OE,XL;function aie(){if(XL)return OE;XL=1;var n=0,e=1,t=2,r=3,i=4,s=5,o=6,a=7,l=8,u=9,c=0,d=1,h=2,g=0,y=1,E=2,_=3,m=4,v=5,S=6,T=7,M=8,A=3,R=10,O=3,I=9,k=10;return OE=function($,U,ee){var re,ne,X,q,K,F,L,z,Y,B,J=U.length,le=ee.length,pe=$.adjustSizes,he=$.barnesHutTheta*$.barnesHutTheta,Ee,_e,te,j,ce,fe,ie,se=[];for(X=0;X<J;X+=R)U[X+i]=U[X+t],U[X+s]=U[X+r],U[X+t]=0,U[X+r]=0;if($.outboundAttractionDistribution){for(Ee=0,X=0;X<J;X+=R)Ee+=U[X+o];Ee/=J/R}if($.barnesHutOptimize){var Ae=1/0,we=-1/0,Re=1/0,Le=-1/0,be,Ye,ue;for(X=0;X<J;X+=R)Ae=Math.min(Ae,U[X+n]),we=Math.max(we,U[X+n]),Re=Math.min(Re,U[X+e]),Le=Math.max(Le,U[X+e]);var oe=we-Ae,ye=Le-Re;for(oe>ye?(Re-=(oe-ye)/2,Le=Re+oe):(Ae-=(ye-oe)/2,we=Ae+ye),se[0+g]=-1,se[0+y]=(Ae+we)/2,se[0+E]=(Re+Le)/2,se[0+_]=Math.max(we-Ae,Le-Re),se[0+m]=-1,se[0+v]=-1,se[0+S]=0,se[0+T]=0,se[0+M]=0,re=1,X=0;X<J;X+=R)for(ne=0,ue=A;;)if(se[ne+v]>=0){U[X+n]<se[ne+y]?U[X+e]<se[ne+E]?be=se[ne+v]:be=se[ne+v]+I:U[X+e]<se[ne+E]?be=se[ne+v]+I*2:be=se[ne+v]+I*3,se[ne+T]=(se[ne+T]*se[ne+S]+U[X+n]*U[X+o])/(se[ne+S]+U[X+o]),se[ne+M]=(se[ne+M]*se[ne+S]+U[X+e]*U[X+o])/(se[ne+S]+U[X+o]),se[ne+S]+=U[X+o],ne=be;continue}else if(se[ne+g]<0){se[ne+g]=X;break}else{if(se[ne+v]=re*I,z=se[ne+_]/2,Y=se[ne+v],se[Y+g]=-1,se[Y+y]=se[ne+y]-z,se[Y+E]=se[ne+E]-z,se[Y+_]=z,se[Y+m]=Y+I,se[Y+v]=-1,se[Y+S]=0,se[Y+T]=0,se[Y+M]=0,Y+=I,se[Y+g]=-1,se[Y+y]=se[ne+y]-z,se[Y+E]=se[ne+E]+z,se[Y+_]=z,se[Y+m]=Y+I,se[Y+v]=-1,se[Y+S]=0,se[Y+T]=0,se[Y+M]=0,Y+=I,se[Y+g]=-1,se[Y+y]=se[ne+y]+z,se[Y+E]=se[ne+E]-z,se[Y+_]=z,se[Y+m]=Y+I,se[Y+v]=-1,se[Y+S]=0,se[Y+T]=0,se[Y+M]=0,Y+=I,se[Y+g]=-1,se[Y+y]=se[ne+y]+z,se[Y+E]=se[ne+E]+z,se[Y+_]=z,se[Y+m]=se[ne+m],se[Y+v]=-1,se[Y+S]=0,se[Y+T]=0,se[Y+M]=0,re+=4,U[se[ne+g]+n]<se[ne+y]?U[se[ne+g]+e]<se[ne+E]?be=se[ne+v]:be=se[ne+v]+I:U[se[ne+g]+e]<se[ne+E]?be=se[ne+v]+I*2:be=se[ne+v]+I*3,se[ne+S]=U[se[ne+g]+o],se[ne+T]=U[se[ne+g]+n],se[ne+M]=U[se[ne+g]+e],se[be+g]=se[ne+g],se[ne+g]=-1,U[X+n]<se[ne+y]?U[X+e]<se[ne+E]?Ye=se[ne+v]:Ye=se[ne+v]+I:U[X+e]<se[ne+E]?Ye=se[ne+v]+I*2:Ye=se[ne+v]+I*3,be===Ye)if(ue--){ne=be;continue}else{ue=A;break}se[Ye+g]=X;break}}if($.barnesHutOptimize)for(_e=$.scalingRatio,X=0;X<J;X+=R)for(ne=0;;)if(se[ne+v]>=0)if(fe=Math.pow(U[X+n]-se[ne+T],2)+Math.pow(U[X+e]-se[ne+M],2),B=se[ne+_],4*B*B/fe<he){if(te=U[X+n]-se[ne+T],j=U[X+e]-se[ne+M],pe===!0?fe>0?(ie=_e*U[X+o]*se[ne+S]/fe,U[X+t]+=te*ie,U[X+r]+=j*ie):fe<0&&(ie=-_e*U[X+o]*se[ne+S]/Math.sqrt(fe),U[X+t]+=te*ie,U[X+r]+=j*ie):fe>0&&(ie=_e*U[X+o]*se[ne+S]/fe,U[X+t]+=te*ie,U[X+r]+=j*ie),ne=se[ne+m],ne<0)break;continue}else{ne=se[ne+v];continue}else{if(F=se[ne+g],F>=0&&F!==X&&(te=U[X+n]-U[F+n],j=U[X+e]-U[F+e],fe=te*te+j*j,pe===!0?fe>0?(ie=_e*U[X+o]*U[F+o]/fe,U[X+t]+=te*ie,U[X+r]+=j*ie):fe<0&&(ie=-_e*U[X+o]*U[F+o]/Math.sqrt(fe),U[X+t]+=te*ie,U[X+r]+=j*ie):fe>0&&(ie=_e*U[X+o]*U[F+o]/fe,U[X+t]+=te*ie,U[X+r]+=j*ie)),ne=se[ne+m],ne<0)break;continue}else for(_e=$.scalingRatio,q=0;q<J;q+=R)for(K=0;K<q;K+=R)te=U[q+n]-U[K+n],j=U[q+e]-U[K+e],pe===!0?(fe=Math.sqrt(te*te+j*j)-U[q+l]-U[K+l],fe>0?(ie=_e*U[q+o]*U[K+o]/fe/fe,U[q+t]+=te*ie,U[q+r]+=j*ie,U[K+t]-=te*ie,U[K+r]-=j*ie):fe<0&&(ie=100*_e*U[q+o]*U[K+o],U[q+t]+=te*ie,U[q+r]+=j*ie,U[K+t]-=te*ie,U[K+r]-=j*ie)):(fe=Math.sqrt(te*te+j*j),fe>0&&(ie=_e*U[q+o]*U[K+o]/fe/fe,U[q+t]+=te*ie,U[q+r]+=j*ie,U[K+t]-=te*ie,U[K+r]-=j*ie));for(Y=$.gravity/$.scalingRatio,_e=$.scalingRatio,X=0;X<J;X+=R)ie=0,te=U[X+n],j=U[X+e],fe=Math.sqrt(Math.pow(te,2)+Math.pow(j,2)),$.strongGravityMode?fe>0&&(ie=_e*U[X+o]*Y):fe>0&&(ie=_e*U[X+o]*Y/fe),U[X+t]-=te*ie,U[X+r]-=j*ie;for(_e=1*($.outboundAttractionDistribution?Ee:1),L=0;L<le;L+=O)q=ee[L+c],K=ee[L+d],z=ee[L+h],ce=Math.pow(z,$.edgeWeightInfluence),te=U[q+n]-U[K+n],j=U[q+e]-U[K+e],pe===!0?(fe=Math.sqrt(te*te+j*j)-U[q+l]-U[K+l],$.linLogMode?$.outboundAttractionDistribution?fe>0&&(ie=-_e*ce*Math.log(1+fe)/fe/U[q+o]):fe>0&&(ie=-_e*ce*Math.log(1+fe)/fe):$.outboundAttractionDistribution?fe>0&&(ie=-_e*ce/U[q+o]):fe>0&&(ie=-_e*ce)):(fe=Math.sqrt(Math.pow(te,2)+Math.pow(j,2)),$.linLogMode?$.outboundAttractionDistribution?fe>0&&(ie=-_e*ce*Math.log(1+fe)/fe/U[q+o]):fe>0&&(ie=-_e*ce*Math.log(1+fe)/fe):$.outboundAttractionDistribution?(fe=1,ie=-_e*ce/U[q+o]):(fe=1,ie=-_e*ce)),fe>0&&(U[q+t]+=te*ie,U[q+r]+=j*ie,U[K+t]-=te*ie,U[K+r]-=j*ie);var Fe,ze,He,Ze,Ke,Ue;if(pe===!0)for(X=0;X<J;X+=R)U[X+u]!==1&&(Fe=Math.sqrt(Math.pow(U[X+t],2)+Math.pow(U[X+r],2)),Fe>k&&(U[X+t]=U[X+t]*k/Fe,U[X+r]=U[X+r]*k/Fe),ze=U[X+o]*Math.sqrt((U[X+i]-U[X+t])*(U[X+i]-U[X+t])+(U[X+s]-U[X+r])*(U[X+s]-U[X+r])),He=Math.sqrt((U[X+i]+U[X+t])*(U[X+i]+U[X+t])+(U[X+s]+U[X+r])*(U[X+s]+U[X+r]))/2,Ze=.1*Math.log(1+He)/(1+Math.sqrt(ze)),Ke=U[X+n]+U[X+t]*(Ze/$.slowDown),U[X+n]=Ke,Ue=U[X+e]+U[X+r]*(Ze/$.slowDown),U[X+e]=Ue);else for(X=0;X<J;X+=R)U[X+u]!==1&&(ze=U[X+o]*Math.sqrt((U[X+i]-U[X+t])*(U[X+i]-U[X+t])+(U[X+s]-U[X+r])*(U[X+s]-U[X+r])),He=Math.sqrt((U[X+i]+U[X+t])*(U[X+i]+U[X+t])+(U[X+s]+U[X+r])*(U[X+s]+U[X+r]))/2,Ze=U[X+a]*Math.log(1+He)/(1+Math.sqrt(ze)),U[X+a]=Math.min(1,Math.sqrt(Ze*(Math.pow(U[X+t],2)+Math.pow(U[X+r],2))/(1+Math.sqrt(ze)))),Ke=U[X+n]+U[X+t]*(Ze/$.slowDown),U[X+n]=Ke,Ue=U[X+e]+U[X+r]*(Ze/$.slowDown),U[X+e]=Ue);return{}},OE}var Mu={},YL;function lie(){if(YL)return Mu;YL=1;var n=10,e=3;return Mu.assign=function(t){t=t||{};var r=Array.prototype.slice.call(arguments).slice(1),i,s,o;for(i=0,o=r.length;i<o;i++)if(r[i])for(s in r[i])t[s]=r[i][s];return t},Mu.validateSettings=function(t){return"linLogMode"in t&&typeof t.linLogMode!="boolean"?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in t&&typeof t.outboundAttractionDistribution!="boolean"?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in t&&typeof t.adjustSizes!="boolean"?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in t&&typeof t.edgeWeightInfluence!="number"?{message:"the `edgeWeightInfluence` setting should be a number."}:"scalingRatio"in t&&!(typeof t.scalingRatio=="number"&&t.scalingRatio>=0)?{message:"the `scalingRatio` setting should be a number >= 0."}:"strongGravityMode"in t&&typeof t.strongGravityMode!="boolean"?{message:"the `strongGravityMode` setting should be a boolean."}:"gravity"in t&&!(typeof t.gravity=="number"&&t.gravity>=0)?{message:"the `gravity` setting should be a number >= 0."}:"slowDown"in t&&!(typeof t.slowDown=="number"||t.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in t&&typeof t.barnesHutOptimize!="boolean"?{message:"the `barnesHutOptimize` setting should be a boolean."}:"barnesHutTheta"in t&&!(typeof t.barnesHutTheta=="number"&&t.barnesHutTheta>=0)?{message:"the `barnesHutTheta` setting should be a number >= 0."}:null},Mu.graphToByteArrays=function(t,r){var i=t.order,s=t.size,o={},a,l=new Float32Array(i*n),u=new Float32Array(s*e);return a=0,t.forEachNode(function(c,d){o[c]=a,l[a]=d.x,l[a+1]=d.y,l[a+2]=0,l[a+3]=0,l[a+4]=0,l[a+5]=0,l[a+6]=1,l[a+7]=1,l[a+8]=d.size||1,l[a+9]=d.fixed?1:0,a+=n}),a=0,t.forEachEdge(function(c,d,h,g,y,E,_){var m=o[h],v=o[g],S=r(c,d,h,g,y,E,_);l[m+6]+=S,l[v+6]+=S,u[a]=m,u[a+1]=v,u[a+2]=S,a+=e}),{nodes:l,edges:u}},Mu.assignLayoutChanges=function(t,r,i){var s=0;t.updateEachNodeAttributes(function(o,a){return a.x=r[s],a.y=r[s+1],s+=n,i?i(o,a):a})},Mu.readGraphPositions=function(t,r){var i=0;t.forEachNode(function(s,o){r[i]=o.x,r[i+1]=o.y,i+=n})},Mu.collectLayoutChanges=function(t,r,i){for(var s=t.nodes(),o={},a=0,l=0,u=r.length;a<u;a+=n){if(i){var c=Object.assign({},t.getNodeAttributes(s[l]));c.x=r[a],c.y=r[a+1],c=i(s[l],c),o[s[l]]={x:c.x,y:c.y}}else o[s[l]]={x:r[a],y:r[a+1]};l++}return o},Mu.createWorker=function(r){var i=window.URL||window.webkitURL,s=r.toString(),o=i.createObjectURL(new Blob(["("+s+").call(this);"],{type:"text/javascript"})),a=new Worker(o);return i.revokeObjectURL(o),a},Mu}var DE,KL;function uie(){return KL||(KL=1,DE={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5}),DE}var kE,JL;function cie(){if(JL)return kE;JL=1;var n=Xu(),e=nw().createEdgeWeightGetter,t=aie(),r=lie(),i=uie();function s(l,u,c){if(!n(u))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");typeof c=="number"&&(c={iterations:c});var d=c.iterations;if(typeof d!="number")throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(d<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var h=e("getEdgeWeight"in c?c.getEdgeWeight:"weight").fromEntry,g=typeof c.outputReducer=="function"?c.outputReducer:null,y=r.assign({},i,c.settings),E=r.validateSettings(y);if(E)throw new Error("graphology-layout-forceatlas2: "+E.message);var _=r.graphToByteArrays(u,h),m;for(m=0;m<d;m++)t(y,_.nodes,_.edges);if(l){r.assignLayoutChanges(u,_.nodes,g);return}return r.collectLayoutChanges(u,_.nodes)}function o(l){var u=typeof l=="number"?l:l.order;return{barnesHutOptimize:u>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(u)}}var a=s.bind(null,!1);return a.assign=s.bind(null,!0),a.inferSettings=o,kE=a,kE}var fie=cie();const die=Bi(fie);var UE,ZL;function hie(){if(ZL)return UE;ZL=1;var n=UA(),e=Xu(),t={dimensions:["x","y"],center:.5,rng:Math.random,scale:1};function r(s,o,a){if(!e(o))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");a=n(a,t);var l=a.dimensions;if(!Array.isArray(l)||l.length<1)throw new Error("graphology-layout/random: given dimensions are invalid.");var u=l.length,c=a.center,d=a.rng,h=a.scale,g=(c-.5)*h;function y(_){for(var m=0;m<u;m++)_[l[m]]=d()*h+g;return _}if(!s){var E={};return o.forEachNode(function(_){E[_]=y({})}),E}o.updateEachNodeAttributes(function(_,m){return y(m),m},{attributes:l})}var i=r.bind(null,!1);return i.assign=r.bind(null,!0),UE=i,UE}var pie=hie();const mie=Bi(pie);var X_={},FE={},QL;function hz(){return QL||(QL=1,function(n){var e=Math.pow(2,8)-1,t=Math.pow(2,16)-1,r=Math.pow(2,32)-1,i=Math.pow(2,7)-1,s=Math.pow(2,15)-1,o=Math.pow(2,31)-1;n.getPointerArray=function(l){var u=l-1;if(u<=e)return Uint8Array;if(u<=t)return Uint16Array;if(u<=r)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},n.getSignedPointerArray=function(l){var u=l-1;return u<=i?Int8Array:u<=s?Int16Array:u<=o?Int32Array:Float64Array},n.getNumberType=function(l){return l===(l|0)?Math.sign(l)===-1?l<=127&&l>=-128?Int8Array:l<=32767&&l>=-32768?Int16Array:Int32Array:l<=255?Uint8Array:l<=65535?Uint16Array:Uint32Array:Float64Array};var a={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};n.getMinimalRepresentation=function(l,u){var c=null,d=0,h,g,y,E,_;for(E=0,_=l.length;E<_;E++)y=u?u(l[E]):l[E],g=n.getNumberType(y),h=a[g.name],h>d&&(d=h,c=g);return c},n.isTypedArray=function(l){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(l)},n.concat=function(){var l=0,u,c,d;for(u=0,d=arguments.length;u<d;u++)l+=arguments[u].length;var h=new arguments[0].constructor(l);for(u=0,c=0;u<d;u++)h.set(arguments[u],c),c+=arguments[u].length;return h},n.indices=function(l){for(var u=n.getPointerArray(l),c=new u(l),d=0;d<l;d++)c[d]=d;return c}}(FE)),FE}var eN;function gie(){if(eN)return X_;eN=1;var n=hz(),e=nw().createEdgeWeightGetter;function t(s,o){return s==="outbound"||s==="inbound"?o.directedSize+o.undirectedSize*2:s==="in"||s==="out"||s==="directed"?o.directedSize:o.undirectedSize*2}function r(s,o){o=o||"outbound";var a=s[o+"Neighbors"].bind(s),l=t(o,s),u=n.getPointerArray(l),c=n.getPointerArray(s.order);this.graph=s,this.neighborhood=new c(l),this.starts=new u(s.order+1),this.nodes=s.nodes();var d={},h,g,y,E,_,m,v=0;for(h=0,g=s.order;h<g;h++)d[this.nodes[h]]=h;for(h=0,g=s.order;h<g;h++)for(_=this.nodes[h],m=a(_),this.starts[h]=v,y=0,E=m.length;y<E;y++)this.neighborhood[v++]=d[m[y]];this.starts[h]=l}r.prototype.bounds=function(s){return[this.starts[s],this.starts[s+1]]},r.prototype.project=function(){var s=this,o={};return s.nodes.forEach(function(a,l){o[a]=Array.from(s.neighborhood.slice(s.starts[l],s.starts[l+1])).map(function(u){return s.nodes[u]})}),o},r.prototype.collect=function(s){var o,a,l={};for(o=0,a=s.length;o<a;o++)l[this.nodes[o]]=s[o];return l},r.prototype.assign=function(s,o){var a=0;this.graph.updateEachNodeAttributes(function(l,u){return u[s]=o[a++],u},{attributes:[s]})},X_.NeighborhoodIndex=r;function i(s,o,a){a=a||"outbound";var l=s[a+"Edges"].bind(s),u=t(a,s),c=n.getPointerArray(u),d=n.getPointerArray(s.order),h=e(o).fromMinimalEntry;this.graph=s,this.neighborhood=new d(u),this.weights=new Float64Array(u),this.outDegrees=new Float64Array(s.order),this.starts=new c(s.order+1),this.nodes=s.nodes();var g={},y,E,_,m,v,S,T,M,A,R=0;for(y=0,E=s.order;y<E;y++)g[this.nodes[y]]=y;for(y=0,E=s.order;y<E;y++)for(v=this.nodes[y],T=l(v),this.starts[y]=R,_=0,m=T.length;_<m;_++)M=T[_],S=s.opposite(v,M),A=h(M,s.getEdgeAttributes(M)),this.neighborhood[R]=g[S],this.weights[R++]=A,this.outDegrees[y]+=A;this.starts[y]=u}return i.prototype.bounds=r.prototype.bounds,i.prototype.project=r.prototype.project,i.prototype.collect=r.prototype.collect,i.prototype.assign=r.prototype.assign,X_.WeightedNeighborhoodIndex=i,X_}var zE,tN;function yie(){if(tN)return zE;tN=1;var n=Xu(),e=UA(),t=gie().WeightedNeighborhoodIndex,r={nodePagerankAttribute:"pagerank",getEdgeWeight:"weight",alpha:.85,maxIterations:100,tolerance:1e-6};function i(o,a,l){if(!n(a))throw new Error("graphology-metrics/centrality/pagerank: the given graph is not a valid graphology instance.");l=e(l,r);var u=l.alpha,c=l.maxIterations,d=l.tolerance,h=l.nodePagerankAttribute,g=a.order,y=1/g,E=new t(a,l.getEdgeWeight),_,m,v,S,T=new Float64Array(a.order),M=new Float64Array(E.weights.length),A=[];for(_=0;_<g;_++)for(T[_]=y,v=E.starts[_+1],S=E.outDegrees[_],S===0&&A.push(_),m=E.starts[_];m<v;m++)M[m]=E.weights[m]/S;for(var R=0,O=0,I,k,G,$=!1;R<c;){for(G=T,T=new Float64Array(a.order),I=0,_=0,v=A.length;_<v;_++)I+=G[A[_]];for(I*=u,_=0;_<g;_++){for(v=E.starts[_+1],m=E.starts[_];m<v;m++)k=E.neighborhood[m],T[k]+=u*G[_]*M[m];T[_]+=I*y+(1-u)*y}for(O=0,_=0;_<g;_++)O+=Math.abs(T[_]-G[_]);if(O<g*d){$=!0;break}R++}if(!$)throw Error("graphology-metrics/centrality/pagerank: failed to converge.");if(o){E.assign(h,T);return}return E.collect(T)}var s=i.bind(null,!1);return s.assign=i.bind(null,!0),zE=s,zE}var vie=yie();const _ie=Bi(vie);var Eg={},nN;function xie(){if(nN)return Eg;nN=1;var n=Xu();function e(s,o,a,l){var u=o+"Centrality";if(!n(a))throw new Error("graphology-centrality/"+u+": the given graph is not a valid graphology instance.");if(o!=="degree"&&a.type==="undirected")throw new Error("graphology-centrality/"+u+": cannot compute "+o+" centrality on an undirected graph.");l=l||{};var c=l.nodeCentralityAttribute||u,d=a.order-1,h=a[o].bind(a);if(s){a.updateEachNodeAttributes(function(y,E){return E[c]=h(y)/d,E},{attributes:[c]});return}var g={};return a.forEachNode(function(y){g[y]=h(y)/d}),g}var t=e.bind(null,!1,"degree"),r=e.bind(null,!1,"inDegree"),i=e.bind(null,!1,"outDegree");return t.assign=e.bind(null,!0,"degree"),r.assign=e.bind(null,!0,"inDegree"),i.assign=e.bind(null,!0,"outDegree"),Eg.degreeCentrality=t,Eg.inDegreeCentrality=r,Eg.outDegreeCentrality=i,Eg}var wie=xie();function Ix(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function Sie(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function pz(n){let e,t,r;n.length!==2?(e=Ix,t=(a,l)=>Ix(n(a),l),r=(a,l)=>n(a)-l):(e=n===Ix||n===Sie?n:Eie,t=n,r=n);function i(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const d=u+c>>>1;t(a[d],l)<0?u=d+1:c=d}while(u<c)}return u}function s(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const d=u+c>>>1;t(a[d],l)<=0?u=d+1:c=d}while(u<c)}return u}function o(a,l,u=0,c=a.length){const d=i(a,l,u,c-1);return d>u&&r(a[d-1],l)>-r(a[d],l)?d-1:d}return{left:i,center:o,right:s}}function Eie(){return 0}function bie(n){return n===null?NaN:+n}const Tie=pz(Ix),Mie=Tie.right;pz(bie).center;const Aie=Math.sqrt(50),Cie=Math.sqrt(10),Rie=Math.sqrt(2);function Jx(n,e,t){const r=(e-n)/Math.max(0,t),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=Aie?10:s>=Cie?5:s>=Rie?2:1;let a,l,u;return i<0?(u=Math.pow(10,-i)/o,a=Math.round(n*u),l=Math.round(e*u),a/u<n&&++a,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*o,a=Math.round(n/u),l=Math.round(e/u),a*u<n&&++a,l*u>e&&--l),l<a&&.5<=t&&t<2?Jx(n,e,t*2):[a,l,u]}function Pie(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const r=e<n,[i,s,o]=r?Jx(e,n,t):Jx(n,e,t);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let u=0;u<a;++u)l[u]=(s-u)/-o;else for(let u=0;u<a;++u)l[u]=(s-u)*o;else if(o<0)for(let u=0;u<a;++u)l[u]=(i+u)/-o;else for(let u=0;u<a;++u)l[u]=(i+u)*o;return l}function qT(n,e,t){return e=+e,n=+n,t=+t,Jx(n,e,t)[2]}function Iie(n,e,t){e=+e,n=+n,t=+t;const r=e<n,i=r?qT(e,n,t):qT(n,e,t);return(r?-1:1)*(i<0?1/-i:i)}function Lie(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function FA(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function mz(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function hv(){}var Dy=.7,Zx=1/Dy,Lp="\\s*([+-]?\\d+)\\s*",ky="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Nl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Nie=/^#([0-9a-f]{3,8})$/,Oie=new RegExp(`^rgb\\(${Lp},${Lp},${Lp}\\)$`),Die=new RegExp(`^rgb\\(${Nl},${Nl},${Nl}\\)$`),kie=new RegExp(`^rgba\\(${Lp},${Lp},${Lp},${ky}\\)$`),Uie=new RegExp(`^rgba\\(${Nl},${Nl},${Nl},${ky}\\)$`),Fie=new RegExp(`^hsl\\(${ky},${Nl},${Nl}\\)$`),zie=new RegExp(`^hsla\\(${ky},${Nl},${Nl},${ky}\\)$`),rN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};FA(hv,Uy,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:iN,formatHex:iN,formatHex8:Bie,formatHsl:Hie,formatRgb:sN,toString:sN});function iN(){return this.rgb().formatHex()}function Bie(){return this.rgb().formatHex8()}function Hie(){return gz(this).formatHsl()}function sN(){return this.rgb().formatRgb()}function Uy(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=Nie.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?oN(e):t===3?new eo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Y_(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Y_(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Oie.exec(n))?new eo(e[1],e[2],e[3],1):(e=Die.exec(n))?new eo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=kie.exec(n))?Y_(e[1],e[2],e[3],e[4]):(e=Uie.exec(n))?Y_(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Fie.exec(n))?uN(e[1],e[2]/100,e[3]/100,1):(e=zie.exec(n))?uN(e[1],e[2]/100,e[3]/100,e[4]):rN.hasOwnProperty(n)?oN(rN[n]):n==="transparent"?new eo(NaN,NaN,NaN,0):null}function oN(n){return new eo(n>>16&255,n>>8&255,n&255,1)}function Y_(n,e,t,r){return r<=0&&(n=e=t=NaN),new eo(n,e,t,r)}function $ie(n){return n instanceof hv||(n=Uy(n)),n?(n=n.rgb(),new eo(n.r,n.g,n.b,n.opacity)):new eo}function XT(n,e,t,r){return arguments.length===1?$ie(n):new eo(n,e,t,r??1)}function eo(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}FA(eo,XT,mz(hv,{brighter(n){return n=n==null?Zx:Math.pow(Zx,n),new eo(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Dy:Math.pow(Dy,n),new eo(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new eo(xd(this.r),xd(this.g),xd(this.b),Qx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:aN,formatHex:aN,formatHex8:Gie,formatRgb:lN,toString:lN}));function aN(){return`#${pd(this.r)}${pd(this.g)}${pd(this.b)}`}function Gie(){return`#${pd(this.r)}${pd(this.g)}${pd(this.b)}${pd((isNaN(this.opacity)?1:this.opacity)*255)}`}function lN(){const n=Qx(this.opacity);return`${n===1?"rgb(":"rgba("}${xd(this.r)}, ${xd(this.g)}, ${xd(this.b)}${n===1?")":`, ${n})`}`}function Qx(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function xd(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function pd(n){return n=xd(n),(n<16?"0":"")+n.toString(16)}function uN(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Ha(n,e,t,r)}function gz(n){if(n instanceof Ha)return new Ha(n.h,n.s,n.l,n.opacity);if(n instanceof hv||(n=Uy(n)),!n)return new Ha;if(n instanceof Ha)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),s=Math.max(e,t,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(t-r)/a+(t<r)*6:t===s?o=(r-e)/a+2:o=(e-t)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Ha(o,a,l,n.opacity)}function Vie(n,e,t,r){return arguments.length===1?gz(n):new Ha(n,e,t,r??1)}function Ha(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}FA(Ha,Vie,mz(hv,{brighter(n){return n=n==null?Zx:Math.pow(Zx,n),new Ha(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Dy:Math.pow(Dy,n),new Ha(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new eo(BE(n>=240?n-240:n+120,i,r),BE(n,i,r),BE(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new Ha(cN(this.h),K_(this.s),K_(this.l),Qx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Qx(this.opacity);return`${n===1?"hsl(":"hsla("}${cN(this.h)}, ${K_(this.s)*100}%, ${K_(this.l)*100}%${n===1?")":`, ${n})`}`}}));function cN(n){return n=(n||0)%360,n<0?n+360:n}function K_(n){return Math.max(0,Math.min(1,n||0))}function BE(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const zA=n=>()=>n;function jie(n,e){return function(t){return n+t*e}}function Wie(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function qie(n){return(n=+n)==1?yz:function(e,t){return t-e?Wie(e,t,n):zA(isNaN(e)?t:e)}}function yz(n,e){var t=e-n;return t?jie(n,t):zA(isNaN(n)?e:n)}const fN=function n(e){var t=qie(e);function r(i,s){var o=t((i=XT(i)).r,(s=XT(s)).r),a=t(i.g,s.g),l=t(i.b,s.b),u=yz(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=n,r}(1);function Xie(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,r=e.slice(),i;return function(s){for(i=0;i<t;++i)r[i]=n[i]*(1-s)+e[i]*s;return r}}function Yie(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Kie(n,e){var t=e?e.length:0,r=n?Math.min(t,n.length):0,i=new Array(r),s=new Array(t),o;for(o=0;o<r;++o)i[o]=BA(n[o],e[o]);for(;o<t;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function Jie(n,e){var t=new Date;return n=+n,e=+e,function(r){return t.setTime(n*(1-r)+e*r),t}}function e1(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function Zie(n,e){var t={},r={},i;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in n?t[i]=BA(n[i],e[i]):r[i]=e[i];return function(s){for(i in t)r[i]=t[i](s);return r}}var YT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,HE=new RegExp(YT.source,"g");function Qie(n){return function(){return n}}function ese(n){return function(e){return n(e)+""}}function tse(n,e){var t=YT.lastIndex=HE.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(n=n+"",e=e+"";(r=YT.exec(n))&&(i=HE.exec(e));)(s=i.index)>t&&(s=e.slice(t,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:e1(r,i)})),t=HE.lastIndex;return t<e.length&&(s=e.slice(t),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?ese(l[0].x):Qie(e):(e=l.length,function(u){for(var c=0,d;c<e;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}function BA(n,e){var t=typeof e,r;return e==null||t==="boolean"?zA(e):(t==="number"?e1:t==="string"?(r=Uy(e))?(e=r,fN):tse:e instanceof Uy?fN:e instanceof Date?Jie:Yie(e)?Xie:Array.isArray(e)?Kie:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Zie:e1)(n,e)}function nse(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function rse(n){return function(){return n}}function ise(n){return+n}var dN=[0,1];function Ap(n){return n}function KT(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:rse(isNaN(e)?NaN:.5)}function sse(n,e){var t;return n>e&&(t=n,n=e,e=t),function(r){return Math.max(n,Math.min(e,r))}}function ose(n,e,t){var r=n[0],i=n[1],s=e[0],o=e[1];return i<r?(r=KT(i,r),s=t(o,s)):(r=KT(r,i),s=t(s,o)),function(a){return s(r(a))}}function ase(n,e,t){var r=Math.min(n.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=KT(n[o],n[o+1]),s[o]=t(e[o],e[o+1]);return function(a){var l=Mie(n,a,1,r)-1;return s[l](i[l](a))}}function lse(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function use(){var n=dN,e=dN,t=BA,r,i,s,o=Ap,a,l,u;function c(){var h=Math.min(n.length,e.length);return o!==Ap&&(o=sse(n[0],n[h-1])),a=h>2?ase:ose,l=u=null,d}function d(h){return h==null||isNaN(h=+h)?s:(l||(l=a(n.map(r),e,t)))(r(o(h)))}return d.invert=function(h){return o(i((u||(u=a(e,n.map(r),e1)))(h)))},d.domain=function(h){return arguments.length?(n=Array.from(h,ise),c()):n.slice()},d.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},d.rangeRound=function(h){return e=Array.from(h),t=nse,c()},d.clamp=function(h){return arguments.length?(o=h?!0:Ap,c()):o!==Ap},d.interpolate=function(h){return arguments.length?(t=h,c()):t},d.unknown=function(h){return arguments.length?(s=h,d):s},function(h,g){return r=h,i=g,c()}}function cse(){return use()(Ap,Ap)}function fse(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function t1(n,e){if((t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"))<0)return null;var t,r=n.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+n.slice(t+1)]}function Vp(n){return n=t1(Math.abs(n)),n?n[1]:NaN}function dse(n,e){return function(t,r){for(var i=t.length,s=[],o=0,a=n[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(t.substring(i-=a,i+a)),!((l+=a+1)>r));)a=n[o=(o+1)%n.length];return s.reverse().join(e)}}function hse(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var pse=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function n1(n){if(!(e=pse.exec(n)))throw new Error("invalid format: "+n);var e;return new HA({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}n1.prototype=HA.prototype;function HA(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}HA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function mse(n){e:for(var e=n.length,t=1,r=-1,i;t<e;++t)switch(n[t]){case".":r=i=t;break;case"0":r===0&&(r=t),i=t;break;default:if(!+n[t])break e;r>0&&(r=0);break}return r>0?n.slice(0,r)+n.slice(i+1):n}var vz;function gse(n,e){var t=t1(n,e);if(!t)return n+"";var r=t[0],i=t[1],s=i-(vz=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+t1(n,Math.max(0,e+s-1))[0]}function hN(n,e){var t=t1(n,e);if(!t)return n+"";var r=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const pN={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:fse,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>hN(n*100,e),r:hN,s:gse,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function mN(n){return n}var gN=Array.prototype.map,yN=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function yse(n){var e=n.grouping===void 0||n.thousands===void 0?mN:dse(gN.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",r=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",s=n.numerals===void 0?mN:hse(gN.call(n.numerals,String)),o=n.percent===void 0?"%":n.percent+"",a=n.minus===void 0?"":n.minus+"",l=n.nan===void 0?"NaN":n.nan+"";function u(d){d=n1(d);var h=d.fill,g=d.align,y=d.sign,E=d.symbol,_=d.zero,m=d.width,v=d.comma,S=d.precision,T=d.trim,M=d.type;M==="n"?(v=!0,M="g"):pN[M]||(S===void 0&&(S=12),T=!0,M="g"),(_||h==="0"&&g==="=")&&(_=!0,h="0",g="=");var A=E==="$"?t:E==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",R=E==="$"?r:/[%p]/.test(M)?o:"",O=pN[M],I=/[defgprs%]/.test(M);S=S===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function k(G){var $=A,U=R,ee,re,ne;if(M==="c")U=O(G)+U,G="";else{G=+G;var X=G<0||1/G<0;if(G=isNaN(G)?l:O(Math.abs(G),S),T&&(G=mse(G)),X&&+G==0&&y!=="+"&&(X=!1),$=(X?y==="("?y:a:y==="-"||y==="("?"":y)+$,U=(M==="s"?yN[8+vz/3]:"")+U+(X&&y==="("?")":""),I){for(ee=-1,re=G.length;++ee<re;)if(ne=G.charCodeAt(ee),48>ne||ne>57){U=(ne===46?i+G.slice(ee+1):G.slice(ee))+U,G=G.slice(0,ee);break}}}v&&!_&&(G=e(G,1/0));var q=$.length+G.length+U.length,K=q<m?new Array(m-q+1).join(h):"";switch(v&&_&&(G=e(K+G,K.length?m-U.length:1/0),K=""),g){case"<":G=$+G+U+K;break;case"=":G=$+K+G+U;break;case"^":G=K.slice(0,q=K.length>>1)+$+G+U+K.slice(q);break;default:G=K+$+G+U;break}return s(G)}return k.toString=function(){return d+""},k}function c(d,h){var g=u((d=n1(d),d.type="f",d)),y=Math.max(-8,Math.min(8,Math.floor(Vp(h)/3)))*3,E=Math.pow(10,-y),_=yN[8+y/3];return function(m){return g(E*m)+_}}return{format:u,formatPrefix:c}}var J_,_z,xz;vse({thousands:",",grouping:[3],currency:["$",""]});function vse(n){return J_=yse(n),_z=J_.format,xz=J_.formatPrefix,J_}function _se(n){return Math.max(0,-Vp(Math.abs(n)))}function xse(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Vp(e)/3)))*3-Vp(Math.abs(n)))}function wse(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,Vp(e)-Vp(n))+1}function Sse(n,e,t,r){var i=Iie(n,e,t),s;switch(r=n1(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(n),Math.abs(e));return r.precision==null&&!isNaN(s=xse(i,o))&&(r.precision=s),xz(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=wse(i,Math.max(Math.abs(n),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=_se(i))&&(r.precision=s-(r.type==="%")*2);break}}return _z(r)}function Ese(n){var e=n.domain;return n.ticks=function(t){var r=e();return Pie(r[0],r[r.length-1],t??10)},n.tickFormat=function(t,r){var i=e();return Sse(i[0],i[i.length-1],t??10,r)},n.nice=function(t){t==null&&(t=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],l,u,c=10;for(a<o&&(u=o,o=a,a=u,u=i,i=s,s=u);c-- >0;){if(u=qT(o,a,t),u===l)return r[i]=o,r[s]=a,e(r);if(u>0)o=Math.floor(o/u)*u,a=Math.ceil(a/u)*u;else if(u<0)o=Math.ceil(o*u)/u,a=Math.floor(a*u)/u;else break;l=u}return n},n}function wz(){var n=cse();return n.copy=function(){return lse(n,wz())},Lie.apply(n,arguments),Ese(n)}const bse={},vN=n=>{let e;const t=new Set,r=(l,u)=>{const c=typeof l=="function"?l(e):l;if(!Object.is(c,e)){const d=e;e=u??typeof c!="object"?c:Object.assign({},e,c),t.forEach(h=>h(e,d))}},i=()=>e,a={setState:r,getState:i,subscribe:l=>(t.add(l),()=>t.delete(l)),destroy:()=>{(bse?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}};return e=n(r,i,a),a},Tse=n=>n?vN(n):vN;var $E={exports:{}},GE={},VE={exports:{}},jE={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _N;function Mse(){if(_N)return jE;_N=1;var n=kd();function e(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,s=n.useLayoutEffect,o=n.useDebugValue;function a(d,h){var g=h(),y=r({inst:{value:g,getSnapshot:h}}),E=y[0].inst,_=y[1];return s(function(){E.value=g,E.getSnapshot=h,l(E)&&_({inst:E})},[d,g,h]),i(function(){return l(E)&&_({inst:E}),d(function(){l(E)&&_({inst:E})})},[d]),o(g),g}function l(d){var h=d.getSnapshot;d=d.value;try{var g=h();return!t(d,g)}catch{return!0}}function u(d,h){return h()}var c=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:a;return jE.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:c,jE}var xN;function Ase(){return xN||(xN=1,VE.exports=Mse()),VE.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wN;function Cse(){if(wN)return GE;wN=1;var n=kd(),e=Ase();function t(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,s=n.useRef,o=n.useEffect,a=n.useMemo,l=n.useDebugValue;return GE.useSyncExternalStoreWithSelector=function(u,c,d,h,g){var y=s(null);if(y.current===null){var E={hasValue:!1,value:null};y.current=E}else E=y.current;y=a(function(){function m(A){if(!v){if(v=!0,S=A,A=h(A),g!==void 0&&E.hasValue){var R=E.value;if(g(R,A))return T=R}return T=A}if(R=T,r(S,A))return R;var O=h(A);return g!==void 0&&g(R,O)?R:(S=A,T=O)}var v=!1,S,T,M=d===void 0?null:d;return[function(){return m(c())},M===null?void 0:function(){return m(M())}]},[c,d,h,g]);var _=i(u,y[0],y[1]);return o(function(){E.hasValue=!0,E.value=_},[_]),l(_),_},GE}var SN;function Rse(){return SN||(SN=1,$E.exports=Cse()),$E.exports}var Pse=Rse();const Ise=Bi(Pse),Lse={},{useSyncExternalStoreWithSelector:Nse}=Ise;function Sz(n,e=n.getState,t){const r=Nse(n.subscribe,n.getState,n.getServerState||n.getState,e,t);return Z.useDebugValue(r),r}const EN=n=>{(Lse?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?Tse(n):n,t=(r,i)=>Sz(e,r,i);return Object.assign(t,e),t},Ose=n=>n?EN(n):EN,Dse={};function kse(){(Dse?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `context` will be removed in a future version. Instead use `import { createStore, useStore } from 'zustand'`. See: https://github.com/pmndrs/zustand/discussions/1180.");const n=Z.createContext(void 0);return{Provider:({createStore:i,children:s})=>{const o=Z.useRef();return o.current||(o.current=i()),Z.createElement(n.Provider,{value:o.current},s)},useStore:(i,s)=>{const o=Z.useContext(n);if(!o)throw new Error("Seems like you have not used zustand provider as an ancestor.");return Sz(o,i,s)},useStoreApi:()=>{const i=Z.useContext(n);if(!i)throw new Error("Seems like you have not used zustand provider as an ancestor.");return Z.useMemo(()=>({...i}),[i])}}}function Use(n,e,t){return Math.max(e,Math.min(n,t))}const yr={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function bN(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function TN(n,e,t,r=.15){return r===0?Use(n,e,t):n<e?-bN(e-n,t-e,r)+e:n>t?+bN(n-t,t-e,r)+t:n}function Fse(n,[e,t],[r,i]){const[[s,o],[a,l]]=n;return[TN(e,s,o,r),TN(t,a,l,i)]}function zse(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Bse(n){var e=zse(n,"string");return typeof e=="symbol"?e:String(e)}function pi(n,e,t){return e=Bse(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function MN(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function kr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?MN(Object(t),!0).forEach(function(r){pi(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):MN(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const Ez={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function AN(n){return n?n[0].toUpperCase()+n.slice(1):""}const Hse=["enter","leave"];function $se(n=!1,e){return n&&!Hse.includes(e)}function Gse(n,e="",t=!1){const r=Ez[n],i=r&&r[e]||e;return"on"+AN(n)+AN(i)+($se(t,i)?"Capture":"")}const Vse=["gotpointercapture","lostpointercapture"];function jse(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const r=Vse.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:t}}function Wse(n,e=""){const t=Ez[n],r=t&&t[e]||e;return n+r}function rw(n){return"touches"in n}function bz(n){return rw(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function qse(n){return Array.from(n.touches).filter(e=>{var t,r;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(r=t.contains)===null||r===void 0?void 0:r.call(t,e.target))})}function Xse(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function Tz(n){return rw(n)?Xse(n)[0]:n}function JT(n,e){try{const t=e.clientX-n.clientX,r=e.clientY-n.clientY,i=(e.clientX+n.clientX)/2,s=(e.clientY+n.clientY)/2,o=Math.hypot(t,r);return{angle:-(Math.atan2(t,r)*180)/Math.PI,distance:o,origin:[i,s]}}catch{}return null}function Yse(n){return qse(n).map(e=>e.identifier)}function CN(n,e){const[t,r]=Array.from(n.touches).filter(i=>e.includes(i.identifier));return JT(t,r)}function WE(n){const e=Tz(n);return rw(n)?e.identifier:e.pointerId}function jp(n){const e=Tz(n);return[e.clientX,e.clientY]}const RN=40,PN=800;function Mz(n){let{deltaX:e,deltaY:t,deltaMode:r}=n;return r===1?(e*=RN,t*=RN):r===2&&(e*=PN,t*=PN),[e,t]}function Kse(n){var e,t;const{scrollX:r,scrollY:i,scrollLeft:s,scrollTop:o}=n.currentTarget;return[(e=r??s)!==null&&e!==void 0?e:0,(t=i??o)!==null&&t!==void 0?t:0]}function Jse(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s})}return e}function r1(n,...e){return typeof n=="function"?n(...e):n}function Zse(){}function Qse(...n){return n.length===0?Zse:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function IN(n,e){return Object.assign({},e,n||{})}const eoe=32;class Az{constructor(e,t,r){this.ctrl=e,this.args=t,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:r,args:i}=this;t[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,r=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=r.from?r1(r.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:r,shared:i}=this;t.args=this.args;let s=0;if(e&&(t.event=e,r.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,Jse(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const A=t._delta.map(Math.abs);yr.addTo(t._distance,A)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[l,u]=r.threshold,{_step:c,values:d}=t;if(r.hasCustomTransform?(c[0]===!1&&(c[0]=Math.abs(o)>=l&&d[0]),c[1]===!1&&(c[1]=Math.abs(a)>=u&&d[1])):(c[0]===!1&&(c[0]=Math.abs(o)>=l&&Math.sign(o)*l),c[1]===!1&&(c[1]=Math.abs(a)>=u&&Math.sign(a)*u)),t.intentional=c[0]!==!1||c[1]!==!1,!t.intentional)return;const h=[0,0];if(r.hasCustomTransform){const[A,R]=d;h[0]=c[0]!==!1?A-c[0]:0,h[1]=c[1]!==!1?R-c[1]:0}else h[0]=c[0]!==!1?o-c[0]:0,h[1]=c[1]!==!1?a-c[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(h);const g=t.offset,y=t._active&&!t._blocked||t.active;y&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in r&&(t._bounds=r1(r.bounds,t)),this.setup&&this.setup()),t.movement=h,this.computeOffset()));const[E,_]=t.offset,[[m,v],[S,T]]=t._bounds;t.overflow=[E<m?-1:E>v?1:0,_<S?-1:_>T?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const M=t._active?r.rubberband||[0,0]:[0,0];if(t.offset=Fse(t._bounds,t.offset,M),t.delta=yr.sub(t.offset,g),this.computeMovement(),y&&(!t.last||s>eoe)){t.delta=yr.sub(t.offset,g);const A=t.delta.map(Math.abs);yr.addTo(t.distance,A),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[A[0]/s,A[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(kr(kr(kr({},t),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function toe([n,e],t){const r=Math.abs(n),i=Math.abs(e);if(r>i&&r>t)return"x";if(i>r&&i>t)return"y"}class pv extends Az{constructor(...e){super(...e),pi(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=yr.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=yr.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,r=this.config;if(!t.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[bz(e)]:r.axisThreshold;t.axis=toe(t._movement,i)}t._blocked=(r.lockDirection||!!r.axis)&&!t.axis||!!r.axis&&r.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const noe=n=>n,LN=.15,Cz={enabled(n=!0){return n},eventOptions(n,e,t){return kr(kr({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[LN,LN];case!1:return[0,0];default:return yr.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return yr.toVector(n)},transform(n,e,t){const r=n||t.shared.transform;return this.hasCustomTransform=!!r,r||noe},threshold(n){return yr.toVector(n,0)}},roe=0,Hd=kr(kr({},Cz),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=roe){return n},bounds(n={}){if(typeof n=="function")return s=>Hd.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:r=-1/0,bottom:i=1/0}=n;return[[e,t],[r,i]]}}),NN={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class ioe extends pv{constructor(...e){super(...e),pi(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:t.left-r.left+e.offset[0],right:t.right-r.right+e.offset[0],top:t.top-r.top+e.offset[1],bottom:t.bottom-r.bottom+e.offset[1]};e._bounds=Hd.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=WE(e),r._pointerActive=!0,this.computeValues(jp(e)),this.computeInitial(),t.preventScrollAxis&&bz(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,r=this.config;if(!t._pointerActive)return;const i=WE(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;const s=jp(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=yr.sub(s,t._values),this.computeValues(s)),yr.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,r=this.config;if(!t._active||!t._pointerActive)return;const i=WE(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=t._distance;if(t.tap=s<=r.tapsThreshold&&o<=r.tapsThreshold,t.tap&&r.filterTaps)t._force=!0;else{const[a,l]=t._delta,[u,c]=t._movement,[d,h]=r.swipe.velocity,[g,y]=r.swipe.distance,E=r.swipe.duration;if(t.elapsedTime<E){const _=Math.abs(a/t.timeDelta),m=Math.abs(l/t.timeDelta);_>d&&Math.abs(u)>g&&(t.swipe[0]=Math.sign(a)),m>h&&Math.abs(c)>y&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,r=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,soe(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=NN[e.key];if(t){const r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=t(this.config.keyboardDisplacement,i),r._keyboardActive=!0,yr.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in NN&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function soe(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const mv=typeof window<"u"&&window.document&&window.document.createElement;function Rz(){return mv&&"ontouchstart"in window}function ooe(){return Rz()||mv&&window.navigator.maxTouchPoints>1}function aoe(){return mv&&"onpointerdown"in window}function loe(){return mv&&"exitPointerLock"in window.document}function uoe(){try{return"constructor"in GestureEvent}catch{return!1}}const Ko={isBrowser:mv,gesture:uoe(),touch:Rz(),touchscreen:ooe(),pointer:aoe(),pointerLock:loe()},coe=250,foe=180,doe=.5,hoe=50,poe=250,moe=10,ON={mouse:0,touch:0,pen:8},goe=kr(kr({},Hd),{},{device(n,e,{pointer:{touch:t=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&Ko.pointerLock,Ko.touch&&t?"touch":this.pointerLock?"mouse":Ko.pointer&&!i?"pointer":Ko.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?coe:void 0,!(!Ko.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:r=3,axis:i=void 0}){const s=yr.toVector(n,t?r:i?1:0);return this.filterTaps=t,this.tapsThreshold=r,s},swipe({velocity:n=doe,distance:e=hoe,duration:t=poe}={}){return{velocity:this.transform(yr.toVector(n)),distance:this.transform(yr.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return foe;case!1:return 0;default:return n}},axisThreshold(n){return n?kr(kr({},ON),n):ON},keyboardDisplacement(n=moe){return n}});function Pz(n){const[e,t]=n.overflow,[r,i]=n._delta,[s,o]=n._direction;(e<0&&r>0&&s<0||e>0&&r<0&&s>0)&&(n._movement[0]=n._movementBound[0]),(t<0&&i>0&&o<0||t>0&&i<0&&o>0)&&(n._movement[1]=n._movementBound[1])}const yoe=30,voe=100;class _oe extends Az{constructor(...e){super(...e),pi(this,"ingKey","pinching"),pi(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:t,lastOffset:r}=this.state;e==="wheel"?this.state.offset=yr.add(t,r):this.state.offset=[(1+t[0])*r[0],t[1]+r[1]]}computeMovement(){const{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){const e=this.state,[t,r]=e._movement;if(!e.axis){const i=Math.abs(t)*yoe-Math.abs(r);i<0?e.axis="angle":i>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const t=this.state,r=this.ctrl.touchIds;if(t._active&&t._touchIds.every(s=>r.has(s))||r.size<2)return;this.start(e),t._touchIds=Array.from(r).slice(0,2);const i=CN(e,t._touchIds);i&&this.pinchStart(e,i)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const t=this.state,r=t._pointerEvents,i=this.ctrl.pointerIds;if(t._active&&Array.from(r.keys()).every(o=>i.has(o))||(r.size<2&&r.set(e.pointerId,e),t._pointerEvents.size<2))return;this.start(e);const s=JT(...Array.from(r.values()));s&&this.pinchStart(e,s)}pinchStart(e,t){const r=this.state;r.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const t=CN(e,this.state._touchIds);t&&this.pinchMove(e,t)}pointerMove(e){const t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;const r=JT(...Array.from(t.values()));r&&this.pinchMove(e,r)}pinchMove(e,t){const r=this.state,i=r._values[1],s=t.angle-i;let o=0;Math.abs(s)>270&&(o+=Math.sign(s)),this.computeValues([t.distance,t.angle-360*o]),r.origin=t.origin,r.turns=o,r._movement=[r._values[0]/r._initial[0]-1,r._values[1]-r._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(t=>!this.ctrl.touchIds.has(t))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];const r=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=yr.sub(t._movement,r),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const t=this.config.modifierKey;t&&(Array.isArray(t)?!t.find(r=>e[r]):!e[t])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const r=this.state;r._delta=[-Mz(e)[1]/voe*r.offset[0],0],yr.addTo(r._movement,r._delta),Pz(r),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const xoe=kr(kr({},Cz),{},{device(n,e,{shared:t,pointer:{touch:r=!1}={}}){if(t.target&&!Ko.touch&&Ko.gesture)return"gesture";if(Ko.touch&&r)return"touch";if(Ko.touchscreen){if(Ko.pointer)return"pointer";if(Ko.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:r={}}){const i=o=>{const a=IN(r1(t,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=IN(r1(r,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof r!="function"?[i(),s()]:o=>[i(o),s(o)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",yr.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});class woe extends pv{constructor(...e){super(...e),pi(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(jp(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const t=jp(e),r=this.state;r._delta=yr.sub(t,r._values),yr.addTo(r._movement,r._delta),this.computeValues(t),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}const Soe=kr(kr({},Hd),{},{mouseOnly:(n=!0)=>n});class Eoe extends pv{constructor(...e){super(...e),pi(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const t=this.state,r=Kse(e);t._delta=yr.sub(r,t._values),yr.addTo(t._movement,t._delta),this.computeValues(r),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const boe=Hd;class Toe extends pv{constructor(...e){super(...e),pi(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=Mz(e),yr.addTo(t._movement,t._delta),Pz(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const Moe=Hd;class Aoe extends pv{constructor(...e){super(...e),pi(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(jp(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;const t=this.state;if(!t._active)return;t._active=!1;const r=jp(e);t._movement=t._delta=yr.sub(r,t._values),this.computeValues(r),this.compute(e),t.delta=t.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}const Coe=kr(kr({},Hd),{},{mouseOnly:(n=!0)=>n}),$A=new Map,ZT=new Map;function Roe(n){$A.set(n.key,n.engine),ZT.set(n.key,n.resolver)}const Poe={key:"drag",engine:ioe,resolver:goe},Ioe={key:"hover",engine:Aoe,resolver:Coe},Loe={key:"move",engine:woe,resolver:Soe},Noe={key:"pinch",engine:_oe,resolver:xoe},Ooe={key:"scroll",engine:Eoe,resolver:boe},Doe={key:"wheel",engine:Toe,resolver:Moe};function koe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Uoe(n,e){if(n==null)return{};var t=koe(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}const Foe={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=Ko.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},zoe=["target","eventOptions","window","enabled","transform"];function Lx(n={},e){const t={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":t[r]=i.call(t,n[r],r,n);break;case"object":t[r]=Lx(n[r],i);break;case"boolean":i&&(t[r]=n[r]);break}return t}function Boe(n,e,t={}){const r=n,{target:i,eventOptions:s,window:o,enabled:a,transform:l}=r,u=Uoe(r,zoe);if(t.shared=Lx({target:i,eventOptions:s,window:o,enabled:a,transform:l},Foe),e){const c=ZT.get(e);t[e]=Lx(kr({shared:t.shared},u),c)}else for(const c in u){const d=ZT.get(c);d&&(t[c]=Lx(kr({shared:t.shared},u[c]),d))}return t}class Iz{constructor(e,t){pi(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,r,i,s){const o=this._listeners,a=Wse(t,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=kr(kr({},l),s);e.addEventListener(a,i,u);const c=()=>{e.removeEventListener(a,i,u),o.delete(c)};return o.add(c),c}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class Hoe{constructor(){pi(this,"_timeouts",new Map)}add(e,t,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(t,r,...i))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}let $oe=class{constructor(e){pi(this,"gestures",new Set),pi(this,"_targetEventStore",new Iz(this)),pi(this,"gestureEventStores",{}),pi(this,"gestureTimeoutStores",{}),pi(this,"handlers",{}),pi(this,"config",{}),pi(this,"pointerIds",new Set),pi(this,"touchIds",new Set),pi(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),Goe(this,e)}setEventIds(e){if(rw(e))return this.touchIds=new Set(Yse(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=Boe(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,r={};let i;if(!(t.target&&(i=t.target(),!i))){if(t.enabled){for(const o of this.gestures){const a=this.config[o],l=DN(r,a.eventOptions,!!i);if(a.enabled){const u=$A.get(o);new u(this,e,o).bind(l)}}const s=DN(r,t.eventOptions,!!i);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](kr(kr({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in r)r[s]=Qse(...r[s]);if(!i)return r;for(const s in r){const{device:o,capture:a,passive:l}=jse(s);this._targetEventStore.add(i,o,"",r[s],{capture:a,passive:l})}}}};function ap(n,e){n.gestures.add(e),n.gestureEventStores[e]=new Iz(n,e),n.gestureTimeoutStores[e]=new Hoe}function Goe(n,e){e.drag&&ap(n,"drag"),e.wheel&&ap(n,"wheel"),e.scroll&&ap(n,"scroll"),e.move&&ap(n,"move"),e.pinch&&ap(n,"pinch"),e.hover&&ap(n,"hover")}const DN=(n,e,t)=>(r,i,s,o={},a=!1)=>{var l,u;const c=(l=o.capture)!==null&&l!==void 0?l:e.capture,d=(u=o.passive)!==null&&u!==void 0?u:e.passive;let h=a?r:Gse(r,i,c);t&&d&&(h+="Passive"),n[h]=n[h]||[],n[h].push(s)},Voe=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function joe(n){const e={},t={},r=new Set;for(let i in n)Voe.test(i)?(r.add(RegExp.lastMatch),t[i]=n[i]):e[i]=n[i];return[t,e,r]}function lp(n,e,t,r,i,s){if(!n.has(t)||!$A.has(r))return;const o=t+"Start",a=t+"End",l=u=>{let c;return u.first&&o in e&&e[o](u),t in e&&(c=e[t](u)),u.last&&a in e&&e[a](u),c};i[r]=l,s[r]=s[r]||{}}function Woe(n,e){const[t,r,i]=joe(n),s={};return lp(i,t,"onDrag","drag",s,e),lp(i,t,"onWheel","wheel",s,e),lp(i,t,"onScroll","scroll",s,e),lp(i,t,"onPinch","pinch",s,e),lp(i,t,"onMove","move",s,e),lp(i,t,"onHover","hover",s,e),{handlers:s,config:e,nativeHandlers:r}}function qoe(n,e={},t,r){const i=hx.useMemo(()=>new $oe(n),[]);if(i.applyHandlers(n,r),i.applyConfig(e,t),hx.useEffect(i.effect.bind(i)),hx.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function Xoe(n){return n.forEach(Roe),function(t,r){const{handlers:i,nativeHandlers:s,config:o}=Woe(t,r||{});return qoe(i,o,void 0,s)}}function Yoe(n,e){return Xoe([Poe,Noe,Ooe,Doe,Loe,Ioe])(n,e||{})}var Na={},Jf={},qE,kN;function iw(){if(kN)return qE;kN=1;function n(e){if(typeof e!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=e}return typeof Symbol<"u"&&(n.prototype[Symbol.iterator]=function(){return this}),n.of=function(){var e=arguments,t=e.length,r=0;return new n(function(){return r>=t?{done:!0}:{done:!1,value:e[r++]}})},n.empty=function(){var e=new n(function(){return{done:!0}});return e},n.fromSequence=function(e){var t=0,r=e.length;return new n(function(){return t>=r?{done:!0}:{done:!1,value:e[t++]}})},n.is=function(e){return e instanceof n?!0:typeof e=="object"&&e!==null&&typeof e.next=="function"},qE=n,qE}var Z_={},UN;function Lz(){return UN||(UN=1,Z_.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",Z_.SYMBOL_SUPPORT=typeof Symbol<"u"),Z_}var XE,FN;function GA(){if(FN)return XE;FN=1;var n=Lz(),e=n.ARRAY_BUFFER_SUPPORT,t=n.SYMBOL_SUPPORT;return XE=function(i,s){var o,a,l,u,c;if(!i)throw new Error("obliterator/forEach: invalid iterable.");if(typeof s!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(i)||e&&ArrayBuffer.isView(i)||typeof i=="string"||i.toString()==="[object Arguments]"){for(l=0,u=i.length;l<u;l++)s(i[l],l);return}if(typeof i.forEach=="function"){i.forEach(s);return}if(t&&Symbol.iterator in i&&typeof i.next!="function"&&(i=i[Symbol.iterator]()),typeof i.next=="function"){for(o=i,l=0;c=o.next(),c.done!==!0;)s(c.value,l),l++;return}for(a in i)i.hasOwnProperty(a)&&s(i[a],a)},XE}var YE,zN;function Koe(){if(zN)return YE;zN=1;var n=iw(),e=GA();function t(){this.clear()}return t.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},t.prototype.enqueue=function(r){return this.items.push(r),++this.size},t.prototype.dequeue=function(){if(this.size){var r=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,r}},t.prototype.peek=function(){if(this.size)return this.items[this.offset]},t.prototype.forEach=function(r,i){i=arguments.length>1?i:this;for(var s=this.offset,o=0,a=this.items.length;s<a;s++,o++)r.call(i,this.items[s],o,this)},t.prototype.toArray=function(){return this.items.slice(this.offset)},t.prototype.values=function(){var r=this.items,i=this.offset;return new n(function(){if(i>=r.length)return{done:!0};var s=r[i];return i++,{value:s,done:!1}})},t.prototype.entries=function(){var r=this.items,i=this.offset,s=0;return new n(function(){if(i>=r.length)return{done:!0};var o=r[i];return i++,{value:[s++,o],done:!1}})},typeof Symbol<"u"&&(t.prototype[Symbol.iterator]=t.prototype.values),t.prototype.toString=function(){return this.toArray().join(",")},t.prototype.toJSON=function(){return this.toArray()},t.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:t,enumerable:!1}),r},typeof Symbol<"u"&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=t.prototype.inspect),t.from=function(r){var i=new t;return e(r,function(s){i.enqueue(s)}),i},t.of=function(){return t.from(arguments)},YE=t,YE}var KE,BN;function Joe(){return BN||(BN=1,KE=function(e,t){var r=t.length;if(r!==0){var i=e.length;e.length+=r;for(var s=0;s<r;s++)e[i+s]=t[s]}}),KE}var HN;function Zoe(){if(HN)return Jf;HN=1;var n=Xu(),e=Koe(),t=Joe();function r(u,c,d){if(!n(u))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!u.hasNode(c))throw new Error('graphology-shortest-path: the "'+c+'" source node does not exist in the given graph.');if(!u.hasNode(d))throw new Error('graphology-shortest-path: the "'+d+'" target node does not exist in the given graph.');if(c=""+c,d=""+d,c===d)return[c];var h=u.inboundNeighbors.bind(u),g=u.outboundNeighbors.bind(u),y={},E={};y[c]=null,E[d]=null;var _=[c],m=[d],v,S,T,M,A,R,O,I,k=!1;e:for(;_.length&&m.length;)if(_.length<=m.length){for(v=_,_=[],A=0,O=v.length;A<O;A++)for(S=v[A],T=g(S),R=0,I=T.length;R<I;R++)if(M=T[R],M in y||(_.push(M),y[M]=S),M in E){k=!0;break e}}else for(v=m,m=[],A=0,O=v.length;A<O;A++)for(S=v[A],T=h(S),R=0,I=T.length;R<I;R++)if(M=T[R],M in E||(m.push(M),E[M]=S),M in y){k=!0;break e}if(!k)return null;for(var G=[];M;)G.unshift(M),M=y[M];for(M=E[G[G.length-1]];M;)G.push(M),M=E[M];return G.length?G:null}function i(u,c){if(!n(u))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!u.hasNode(c))throw new Error('graphology-shortest-path: the "'+c+'" source node does not exist in the given graph.');c=""+c;var d={},h={},g,y,E,_,m,v;for(d[c]=!0,h[c]=[c];Object.keys(d).length;){g=d,d={};for(E in g)for(y=u.outboundNeighbors(E),m=0,v=y.length;m<v;m++)_=y[m],h[_]||(h[_]=h[E].concat(_),d[_]=!0)}return h}function s(u,c,d){if(!n(c))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!c.hasNode(d))throw new Error('graphology-shortest-path: the "'+d+'" source node does not exist in the given graph.');d=""+d;var h=new Set,g={},y=0;g[d]=0;for(var E=[d],_,m,v;E.length!==0;){var S=[];for(_=0,m=E.length;_<m;_++)v=E[_],!h.has(v)&&(h.add(v),t(S,c[u](v)),g[v]=y);y++,E=S}return g}var o=s.bind(null,"outboundNeighbors"),a=s.bind(null,"neighbors");function l(u,c){c=""+c;var d=[],h={},g={},y=u.nodes(),E,_,m,v,S,T,M,A,R;for(T=0,A=y.length;T<A;T++)v=y[T],h[v]=[],g[v]=0;var O={};g[c]=1,O[c]=0;for(var I=e.of(c);I.size;)for(v=I.dequeue(),d.push(v),E=O[v],_=g[v],m=u.outboundNeighbors(v),M=0,R=m.length;M<R;M++)S=m[M],S in O||(I.enqueue(S),O[S]=E+1),O[S]===E+1&&(g[S]+=_,h[S].push(v));return[d,h,g]}return Jf.bidirectional=r,Jf.singleSource=i,Jf.singleSourceLength=o,Jf.undirectedSingleSourceLength=a,Jf.brandes=l,Jf}var JE={},$N;function Qoe(){if($N)return JE;$N=1;var n=function(){return!0};return JE.edgePathFromNodePath=function(e,t){var r=t.length,i,s,o,a;if(r<2)return s=t[0],a=e.multi?e.findEdge(s,s,n):e.edge(s,s),a?[a]:[];r--;var l=new Array(r);for(i=0;i<r;i++){if(s=t[i],o=t[i+1],a=e.multi?e.findOutboundEdge(s,o,n):e.edge(s,o),a===void 0)throw new Error("graphology-shortest-path: given path is impossible in given graph.");l[i]=a}return l},JE}var bg={},up={},GN;function eae(){if(GN)return up;GN=1;var n=function(i,s){return i<s?-1:i>s?1:0},e=function(i,s){return i<s?1:i>s?-1:0};function t(i){return function(s,o){return i(o,s)}}function r(i){return i===2?function(s,o){return s[0]<o[0]?-1:s[0]>o[0]?1:s[1]<o[1]?-1:s[1]>o[1]?1:0}:function(s,o){for(var a=0;a<i;){if(s[a]<o[a])return-1;if(s[a]>o[a])return 1;a++}return 0}}return up.DEFAULT_COMPARATOR=n,up.DEFAULT_REVERSE_COMPARATOR=e,up.reverseComparator=t,up.createTupleComparator=r,up}var cp={},VN;function tae(){if(VN)return cp;VN=1;var n=GA(),e=hz();function t(o){return Array.isArray(o)||e.isTypedArray(o)}function r(o){if(typeof o.length=="number")return o.length;if(typeof o.size=="number")return o.size}function i(o){var a=r(o),l=typeof a=="number"?new Array(a):[],u=0;return n(o,function(c){l[u++]=c}),l}function s(o){var a=r(o),l=typeof a=="number"?e.getPointerArray(a):Array,u=typeof a=="number"?new Array(a):[],c=typeof a=="number"?new l(a):[],d=0;return n(o,function(h){u[d]=h,c[d]=d++}),[u,c]}return cp.isArrayLike=t,cp.guessLength=r,cp.toArray=i,cp.toArrayWithIndices=s,cp}var ZE,jN;function Nz(){if(jN)return ZE;jN=1;var n=GA(),e=eae(),t=tae(),r=e.DEFAULT_COMPARATOR,i=e.reverseComparator;function s(m,v,S,T){for(var M=v[T],A,R;T>S;){if(A=T-1>>1,R=v[A],m(M,R)<0){v[T]=R,T=A;continue}break}v[T]=M}function o(m,v,S){for(var T=v.length,M=S,A=v[S],R=2*S+1,O;R<T;)O=R+1,O<T&&m(v[R],v[O])>=0&&(R=O),v[S]=v[R],S=R,R=2*S+1;v[S]=A,s(m,v,M,S)}function a(m,v,S){v.push(S),s(m,v,0,v.length-1)}function l(m,v){var S=v.pop();if(v.length!==0){var T=v[0];return v[0]=S,o(m,v,0),T}return S}function u(m,v,S){if(v.length===0)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var T=v[0];return v[0]=S,o(m,v,0),T}function c(m,v,S){var T;return v.length!==0&&m(v[0],S)<0&&(T=v[0],v[0]=S,S=T,o(m,v,0)),S}function d(m,v){for(var S=v.length,T=S>>1,M=T;--M>=0;)o(m,v,M)}function h(m,v){for(var S=v.length,T=0,M=new Array(S);T<S;)M[T++]=l(m,v);return M}function g(m,v,S){arguments.length===2&&(S=v,v=m,m=r);var T=i(m),M,A,R,O=1/0,I;if(v===1){if(t.isArrayLike(S)){for(M=0,A=S.length;M<A;M++)R=S[M],(O===1/0||m(R,O)<0)&&(O=R);return I=new S.constructor(1),I[0]=O,I}return n(S,function(G){(O===1/0||m(G,O)<0)&&(O=G)}),[O]}if(t.isArrayLike(S)){if(v>=S.length)return S.slice().sort(m);for(I=S.slice(0,v),d(T,I),M=v,A=S.length;M<A;M++)T(S[M],I[0])>0&&u(T,I,S[M]);return I.sort(m)}var k=t.guessLength(S);return k!==null&&k<v&&(v=k),I=new Array(v),M=0,n(S,function(G){M<v?I[M]=G:(M===v&&d(T,I),T(G,I[0])>0&&u(T,I,G)),M++}),I.length>M&&(I.length=M),I.sort(m)}function y(m,v,S){arguments.length===2&&(S=v,v=m,m=r);var T=i(m),M,A,R,O=-1/0,I;if(v===1){if(t.isArrayLike(S)){for(M=0,A=S.length;M<A;M++)R=S[M],(O===-1/0||m(R,O)>0)&&(O=R);return I=new S.constructor(1),I[0]=O,I}return n(S,function(G){(O===-1/0||m(G,O)>0)&&(O=G)}),[O]}if(t.isArrayLike(S)){if(v>=S.length)return S.slice().sort(T);for(I=S.slice(0,v),d(m,I),M=v,A=S.length;M<A;M++)m(S[M],I[0])>0&&u(m,I,S[M]);return I.sort(T)}var k=t.guessLength(S);return k!==null&&k<v&&(v=k),I=new Array(v),M=0,n(S,function(G){M<v?I[M]=G:(M===v&&d(m,I),m(G,I[0])>0&&u(m,I,G)),M++}),I.length>M&&(I.length=M),I.sort(T)}function E(m){if(this.clear(),this.comparator=m||r,typeof this.comparator!="function")throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}E.prototype.clear=function(){this.items=[],this.size=0},E.prototype.push=function(m){return a(this.comparator,this.items,m),++this.size},E.prototype.peek=function(){return this.items[0]},E.prototype.pop=function(){return this.size!==0&&this.size--,l(this.comparator,this.items)},E.prototype.replace=function(m){return u(this.comparator,this.items,m)},E.prototype.pushpop=function(m){return c(this.comparator,this.items,m)},E.prototype.consume=function(){return this.size=0,h(this.comparator,this.items)},E.prototype.toArray=function(){return h(this.comparator,this.items.slice())},E.prototype.inspect=function(){var m=this.toArray();return Object.defineProperty(m,"constructor",{value:E,enumerable:!1}),m},typeof Symbol<"u"&&(E.prototype[Symbol.for("nodejs.util.inspect.custom")]=E.prototype.inspect);function _(m){if(this.clear(),this.comparator=m||r,typeof this.comparator!="function")throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=i(this.comparator)}return _.prototype=E.prototype,E.from=function(m,v){var S=new E(v),T;return t.isArrayLike(m)?T=m.slice():T=t.toArray(m),d(S.comparator,T),S.items=T,S.size=T.length,S},_.from=function(m,v){var S=new _(v),T;return t.isArrayLike(m)?T=m.slice():T=t.toArray(m),d(S.comparator,T),S.items=T,S.size=T.length,S},E.siftUp=o,E.siftDown=s,E.push=a,E.pop=l,E.replace=u,E.pushpop=c,E.heapify=d,E.consume=h,E.nsmallest=g,E.nlargest=y,E.MinHeap=E,E.MaxHeap=_,ZE=E,ZE}var WN;function nae(){if(WN)return bg;WN=1;var n=Xu(),e=nw().createEdgeWeightGetter,t=Nz(),r="weight";function i(d,h){return d[0]>h[0]?1:d[0]<h[0]?-1:d[1]>h[1]?1:d[1]<h[1]?-1:d[2]>h[2]?1:d[2]<h[2]?-1:0}function s(d,h){return d[0]>h[0]?1:d[0]<h[0]?-1:d[1]>h[1]?1:d[1]<h[1]?-1:d[2]>h[2]?1:d[2]<h[2]?-1:d[3]>h[3]?1:d[3]<h[3]?-1:0}function o(d,h,g,y){if(h=""+h,g=""+g,!n(d))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");if(h&&!d.hasNode(h))throw new Error('graphology-shortest-path/dijkstra: the "'+h+'" source node does not exist in the given graph.');if(g&&!d.hasNode(g))throw new Error('graphology-shortest-path/dijkstra: the "'+g+'" target node does not exist in the given graph.');if(y=e(y||r).fromMinimalEntry,h===g)return[0,[h]];var E=[{},{}],_=[{},{}],m=[new t(i),new t(i)],v=[{},{}];_[0][h]=[h],_[1][g]=[g],v[0][h]=0,v[1][g]=0;var S=[],T=1/0,M=0,A=1,R,O,I,k,G,$,U,ee,re;for(m[0].push([0,M++,h]),m[1].push([0,M++,g]);m[0].size&&m[1].size;)if(A=1-A,R=m[A].pop(),k=R[0],G=R[2],!(G in E[A])){if(E[A][G]=k,G in E[1-A])return[T,S];for(O=A===1?d.inboundEdges(G):d.outboundEdges(G),ee=0,re=O.length;ee<re;ee++){if(U=O[ee],$=d.opposite(G,U),I=E[A][G]+y(U,d.getEdgeAttributes(U)),$ in E[A]&&I<E[A][$])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!($ in v[A])||I<v[A][$])&&(v[A][$]=I,m[A].push([I,M++,$]),_[A][$]=_[A][G].concat($),$ in v[0]&&$ in v[1]&&(k=v[0][$]+v[1][$],(S.length===0||T>k)&&(T=k,S=_[0][$].concat(_[1][$].slice(0,-1).reverse()))))}}return[1/0,null]}function a(d,h,g,y,E,_){if(!n(d))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");g=e(g||r).fromMinimalEntry;var m={},v={},S=new t(i),T=0,M,A,R,O,I,k,G,$,U,ee,re;for($=0,ee=h.length;$<ee;$++)O=h[$],v[O]=0,S.push([0,T++,O]),_&&(_[O]=[O]);for(;S.size;)if(A=S.pop(),G=A[0],O=A[2],!(O in m)){if(m[O]=G,O===E)break;for(M=d.outboundEdges(O),U=0,re=M.length;U<re;U++){if(k=M[U],I=d.opposite(O,k),R=g(k,d.getEdgeAttributes(k))+m[O],I in m&&R<m[I])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(I in v)||R<v[I])&&(v[I]=R,S.push([R,T++,I]),_&&(_[I]=_[O].concat(I)))}}return m}function l(d,h,g){var y={};return a(d,[h],g,0,null,y),y}function u(d,h,g,y){return o(d,h,g,y)[1]}function c(d,h,g){h=""+h,g=e(g||r).fromMinimalEntry;var y=[],E={},_={},m=d.nodes(),v,S,T,M,A,R,O,I,k,G;for(k=0,G=m.length;k<G;k++)R=m[k],E[R]=[],_[R]=0;var $={};_[h]=1;var U={};U[h]=0;var ee=0,re=new t(s);for(re.push([0,ee++,h,h]);re.size;)if(S=re.pop(),M=S[0],T=S[2],R=S[3],!(R in $))for(_[R]+=_[T],y.push(R),$[R]=M,v=d.outboundEdges(R),k=0,G=v.length;k<G;k++)I=v[k],O=d.opposite(R,I),A=M+g(I,d.getEdgeAttributes(I)),!(O in $)&&(!(O in U)||A<U[O])?(U[O]=A,re.push([A,ee++,R,O]),_[O]=0,E[O]=[R]):A===U[O]&&(_[O]+=_[R],E[O].push(R));return[y,E,_]}return bg.bidirectional=u,bg.singleSource=l,bg.brandes=c,bg}var QE={},qN;function rae(){if(qN)return QE;qN=1;var n=Xu(),e=nw().createEdgeWeightGetter,t=Nz(),r="weight";function i(o,a){return o[0]>a[0]?1:o[0]<a[0]?-1:o[1]>a[1]?1:o[1]<a[1]?-1:0}function s(o,a,l,u,c,d){if(!n(o))throw new Error("graphology-shortest-path/astar: invalid graphology instance.");if(a&&!o.hasNode(a))throw new Error('graphology-shortest-path/astar: the "'+a+'" source node does not exist in the given graph.');if(l&&!o.hasNode(l))throw new Error('graphology-shortest-path/astar: the "'+l+'" target node does not exist in the given graph.');if(u=e(u||r).fromMinimalEntry,a===l)return[a];c=c||function(){return 0},d=d||{};var h=0,g=new t(i);g.push([0,h++,a,0,null]);var y={},E={},_,m,v,S,T,M,A,R,O,I,k,G;function $(U,ee,re,ne){if(G=m===re?ne:re,I=u(U,ee),I!==null){if(k=S+I,y.hasOwnProperty(G)){if(v=y[G],R=v[0],O=v[1],R<=k)return}else O=c(G,l);d.cutoff&&k+O>d.cutoff||(y[G]=[k,O],g.push([k+O,h++,G,k,m]))}}for(;g.size!==0;){if(_=g.pop(),m=_[2],S=_[3],T=_[4],m===l){for(M=[m],A=T;A!==null;)M.push(A),A=E[A];return M.reverse(),M}E.hasOwnProperty(m)&&(E[m]===null||(R=y[m][0],R<S))||(E[m]=T,o.forEachOutboundEdge(m,$))}return null}return QE.bidirectional=s,QE}var XN;function iae(){if(XN)return Na;XN=1;var n=Zoe(),e=Qoe();return Na.unweighted=n,Na.dijkstra=nae(),Na.astar=rae(),Na.bidirectional=n.bidirectional,Na.singleSource=n.singleSource,Na.singleSourceLength=n.singleSourceLength,Na.undirectedSingleSourceLength=n.undirectedSingleSourceLength,Na.brandes=n.brandes,Na.edgePathFromNodePath=e.edgePathFromNodePath,Na}iae();var Q_={exports:{}},YN;function sae(){if(YN)return Q_.exports;YN=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(M,A,R){return Function.prototype.apply.call(M,A,R)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(M){return Object.getOwnPropertyNames(M).concat(Object.getOwnPropertySymbols(M))}:t=function(M){return Object.getOwnPropertyNames(M)};function r(T){console&&console.warn&&console.warn(T)}var i=Number.isNaN||function(M){return M!==M};function s(){s.init.call(this)}Q_.exports=s,Q_.exports.once=m,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(T){if(typeof T!="number"||T<0||i(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");o=T}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(M){if(typeof M!="number"||M<0||i(M))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+M+".");return this._maxListeners=M,this};function l(T){return T._maxListeners===void 0?s.defaultMaxListeners:T._maxListeners}s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(M){for(var A=[],R=1;R<arguments.length;R++)A.push(arguments[R]);var O=M==="error",I=this._events;if(I!==void 0)O=O&&I.error===void 0;else if(!O)return!1;if(O){var k;if(A.length>0&&(k=A[0]),k instanceof Error)throw k;var G=new Error("Unhandled error."+(k?" ("+k.message+")":""));throw G.context=k,G}var $=I[M];if($===void 0)return!1;if(typeof $=="function")e($,this,A);else for(var U=$.length,ee=y($,U),R=0;R<U;++R)e(ee[R],this,A);return!0};function u(T,M,A,R){var O,I,k;if(a(A),I=T._events,I===void 0?(I=T._events=Object.create(null),T._eventsCount=0):(I.newListener!==void 0&&(T.emit("newListener",M,A.listener?A.listener:A),I=T._events),k=I[M]),k===void 0)k=I[M]=A,++T._eventsCount;else if(typeof k=="function"?k=I[M]=R?[A,k]:[k,A]:R?k.unshift(A):k.push(A),O=l(T),O>0&&k.length>O&&!k.warned){k.warned=!0;var G=new Error("Possible EventEmitter memory leak detected. "+k.length+" "+String(M)+" listeners added. Use emitter.setMaxListeners() to increase limit");G.name="MaxListenersExceededWarning",G.emitter=T,G.type=M,G.count=k.length,r(G)}return T}s.prototype.addListener=function(M,A){return u(this,M,A,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(M,A){return u(this,M,A,!0)};function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(T,M,A){var R={fired:!1,wrapFn:void 0,target:T,type:M,listener:A},O=c.bind(R);return O.listener=A,R.wrapFn=O,O}s.prototype.once=function(M,A){return a(A),this.on(M,d(this,M,A)),this},s.prototype.prependOnceListener=function(M,A){return a(A),this.prependListener(M,d(this,M,A)),this},s.prototype.removeListener=function(M,A){var R,O,I,k,G;if(a(A),O=this._events,O===void 0)return this;if(R=O[M],R===void 0)return this;if(R===A||R.listener===A)--this._eventsCount===0?this._events=Object.create(null):(delete O[M],O.removeListener&&this.emit("removeListener",M,R.listener||A));else if(typeof R!="function"){for(I=-1,k=R.length-1;k>=0;k--)if(R[k]===A||R[k].listener===A){G=R[k].listener,I=k;break}if(I<0)return this;I===0?R.shift():E(R,I),R.length===1&&(O[M]=R[0]),O.removeListener!==void 0&&this.emit("removeListener",M,G||A)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(M){var A,R,O;if(R=this._events,R===void 0)return this;if(R.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):R[M]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete R[M]),this;if(arguments.length===0){var I=Object.keys(R),k;for(O=0;O<I.length;++O)k=I[O],k!=="removeListener"&&this.removeAllListeners(k);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(A=R[M],typeof A=="function")this.removeListener(M,A);else if(A!==void 0)for(O=A.length-1;O>=0;O--)this.removeListener(M,A[O]);return this};function h(T,M,A){var R=T._events;if(R===void 0)return[];var O=R[M];return O===void 0?[]:typeof O=="function"?A?[O.listener||O]:[O]:A?_(O):y(O,O.length)}s.prototype.listeners=function(M){return h(this,M,!0)},s.prototype.rawListeners=function(M){return h(this,M,!1)},s.listenerCount=function(T,M){return typeof T.listenerCount=="function"?T.listenerCount(M):g.call(T,M)},s.prototype.listenerCount=g;function g(T){var M=this._events;if(M!==void 0){var A=M[T];if(typeof A=="function")return 1;if(A!==void 0)return A.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function y(T,M){for(var A=new Array(M),R=0;R<M;++R)A[R]=T[R];return A}function E(T,M){for(;M+1<T.length;M++)T[M]=T[M+1];T.pop()}function _(T){for(var M=new Array(T.length),A=0;A<M.length;++A)M[A]=T[A].listener||T[A];return M}function m(T,M){return new Promise(function(A,R){function O(k){T.removeListener(M,I),R(k)}function I(){typeof T.removeListener=="function"&&T.removeListener("error",O),A([].slice.call(arguments))}S(T,M,I,{once:!0}),M!=="error"&&v(T,O,{once:!0})})}function v(T,M,A){typeof T.on=="function"&&S(T,"error",M,A)}function S(T,M,A,R){if(typeof T.on=="function")R.once?T.once(M,A):T.on(M,A);else if(typeof T.addEventListener=="function")T.addEventListener(M,function O(I){R.once&&T.removeEventListener(M,O),A(I)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T)}return Q_.exports}var oae=sae(),aae=iw();const ea=Bi(aae);var eb,KN;function Oz(){if(KN)return eb;KN=1;var n=iw(),e=Lz(),t=e.ARRAY_BUFFER_SUPPORT,r=e.SYMBOL_SUPPORT;function i(s){return typeof s=="string"||Array.isArray(s)||t&&ArrayBuffer.isView(s)?n.fromSequence(s):typeof s!="object"||s===null?null:r&&typeof s[Symbol.iterator]=="function"?s[Symbol.iterator]():typeof s.next=="function"?s:null}return eb=function(o){var a=i(o);if(!a)throw new Error("obliterator: target is not iterable nor a valid iterator.");return a},eb}var tb,JN;function lae(){if(JN)return tb;JN=1;var n=Oz();return tb=function(t,r){for(var i=arguments.length>1?r:1/0,s=i!==1/0?new Array(i):[],o,a=0,l=n(t);;){if(a===i)return s;if(o=l.next(),o.done)return a!==r&&(s.length=a),s;s[a++]=o.value}},tb}var uae=lae();const Dz=Bi(uae);var nb,ZN;function cae(){if(ZN)return nb;ZN=1;var n=iw(),e=Oz();return nb=function(){var r=arguments,i=null,s=-1;return new n(function(){var a=null;do{if(i===null){if(s++,s>=r.length)return{done:!0};i=e(r[s])}if(a=i.next(),a.done===!0){i=null;continue}break}while(!0);return a})},nb}var fae=cae();const Bu=Bi(fae);function dae(){const n=arguments[0];for(let e=1,t=arguments.length;e<t;e++)if(arguments[e])for(const r in arguments[e])n[r]=arguments[e][r];return n}let Ti=dae;typeof Object.assign=="function"&&(Ti=Object.assign);function Qo(n,e,t,r){const i=n._nodes.get(e);let s=null;return i&&(r==="mixed"?s=i.out&&i.out[t]||i.undirected&&i.undirected[t]:r==="directed"?s=i.out&&i.out[t]:s=i.undirected&&i.undirected[t]),s}function Zi(n){return typeof n=="object"&&n!==null}function kz(n){let e;for(e in n)return!1;return!0}function Vo(n,e,t){Object.defineProperty(n,e,{enumerable:!1,configurable:!1,writable:!0,value:t})}function Oa(n,e,t){const r={enumerable:!0,configurable:!0};typeof t=="function"?r.get=t:(r.value=t,r.writable=!1),Object.defineProperty(n,e,r)}function QN(n){return!(!Zi(n)||n.attributes&&!Array.isArray(n.attributes))}function hae(){let n=Math.floor(Math.random()*256)&255;return()=>n++}class VA extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class wt extends VA{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,wt.prototype.constructor)}}class dt extends VA{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,dt.prototype.constructor)}}class $t extends VA{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,$t.prototype.constructor)}}function Uz(n,e){this.key=n,this.attributes=e,this.clear()}Uz.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function Fz(n,e){this.key=n,this.attributes=e,this.clear()}Fz.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function zz(n,e){this.key=n,this.attributes=e,this.clear()}zz.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function om(n,e,t,r,i){this.key=e,this.attributes=i,this.undirected=n,this.source=t,this.target=r}om.prototype.attach=function(){let n="out",e="in";this.undirected&&(n=e="undirected");const t=this.source.key,r=this.target.key;this.source[n][r]=this,!(this.undirected&&t===r)&&(this.target[e][t]=this)};om.prototype.attachMulti=function(){let n="out",e="in";const t=this.source.key,r=this.target.key;this.undirected&&(n=e="undirected");const i=this.source[n],s=i[r];if(typeof s>"u"){i[r]=this,this.undirected&&t===r||(this.target[e][t]=this);return}s.previous=this,this.next=s,i[r]=this,this.target[e][t]=this};om.prototype.detach=function(){const n=this.source.key,e=this.target.key;let t="out",r="in";this.undirected&&(t=r="undirected"),delete this.source[t][e],delete this.target[r][n]};om.prototype.detachMulti=function(){const n=this.source.key,e=this.target.key;let t="out",r="in";this.undirected&&(t=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[t][e],delete this.target[r][n]):(this.next.previous=void 0,this.source[t][e]=this.next,this.target[r][n]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const Bz=0,Hz=1,pae=2,$z=3;function Yu(n,e,t,r,i,s,o){let a,l,u,c;if(r=""+r,t===Bz){if(a=n._nodes.get(r),!a)throw new dt(`Graph.${e}: could not find the "${r}" node in the graph.`);u=i,c=s}else if(t===$z){if(i=""+i,l=n._edges.get(i),!l)throw new dt(`Graph.${e}: could not find the "${i}" edge in the graph.`);const d=l.source.key,h=l.target.key;if(r===d)a=l.target;else if(r===h)a=l.source;else throw new dt(`Graph.${e}: the "${r}" node is not attached to the "${i}" edge (${d}, ${h}).`);u=s,c=o}else{if(l=n._edges.get(r),!l)throw new dt(`Graph.${e}: could not find the "${r}" edge in the graph.`);t===Hz?a=l.source:a=l.target,u=i,c=s}return[a,u,c]}function mae(n,e,t){n.prototype[e]=function(r,i,s){const[o,a]=Yu(this,e,t,r,i,s);return o.attributes[a]}}function gae(n,e,t){n.prototype[e]=function(r,i){const[s]=Yu(this,e,t,r,i);return s.attributes}}function yae(n,e,t){n.prototype[e]=function(r,i,s){const[o,a]=Yu(this,e,t,r,i,s);return o.attributes.hasOwnProperty(a)}}function vae(n,e,t){n.prototype[e]=function(r,i,s,o){const[a,l,u]=Yu(this,e,t,r,i,s,o);return a.attributes[l]=u,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function _ae(n,e,t){n.prototype[e]=function(r,i,s,o){const[a,l,u]=Yu(this,e,t,r,i,s,o);if(typeof u!="function")throw new wt(`Graph.${e}: updater should be a function.`);const c=a.attributes,d=u(c[l]);return c[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function xae(n,e,t){n.prototype[e]=function(r,i,s){const[o,a]=Yu(this,e,t,r,i,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function wae(n,e,t){n.prototype[e]=function(r,i,s){const[o,a]=Yu(this,e,t,r,i,s);if(!Zi(a))throw new wt(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function Sae(n,e,t){n.prototype[e]=function(r,i,s){const[o,a]=Yu(this,e,t,r,i,s);if(!Zi(a))throw new wt(`Graph.${e}: provided attributes are not a plain object.`);return Ti(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function Eae(n,e,t){n.prototype[e]=function(r,i,s){const[o,a]=Yu(this,e,t,r,i,s);if(typeof a!="function")throw new wt(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const bae=[{name:n=>`get${n}Attribute`,attacher:mae},{name:n=>`get${n}Attributes`,attacher:gae},{name:n=>`has${n}Attribute`,attacher:yae},{name:n=>`set${n}Attribute`,attacher:vae},{name:n=>`update${n}Attribute`,attacher:_ae},{name:n=>`remove${n}Attribute`,attacher:xae},{name:n=>`replace${n}Attributes`,attacher:wae},{name:n=>`merge${n}Attributes`,attacher:Sae},{name:n=>`update${n}Attributes`,attacher:Eae}];function Tae(n){bae.forEach(function({name:e,attacher:t}){t(n,e("Node"),Bz),t(n,e("Source"),Hz),t(n,e("Target"),pae),t(n,e("Opposite"),$z)})}function Mae(n,e,t){n.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new $t(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $t(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Qo(this,o,a,t),!s)throw new dt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new $t(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new dt(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes[i]}}function Aae(n,e,t){n.prototype[e]=function(r){let i;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new $t(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new $t(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,o=""+arguments[1];if(i=Qo(this,s,o,t),!i)throw new dt(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(t!=="mixed")throw new $t(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new dt(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return i.attributes}}function Cae(n,e,t){n.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new $t(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $t(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Qo(this,o,a,t),!s)throw new dt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new $t(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new dt(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes.hasOwnProperty(i)}}function Rae(n,e,t){n.prototype[e]=function(r,i,s){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new $t(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new $t(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,l=""+i;if(i=arguments[2],s=arguments[3],o=Qo(this,a,l,t),!o)throw new dt(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(t!=="mixed")throw new $t(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new dt(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes[i]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function Pae(n,e,t){n.prototype[e]=function(r,i,s){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new $t(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new $t(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,l=""+i;if(i=arguments[2],s=arguments[3],o=Qo(this,a,l,t),!o)throw new dt(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(t!=="mixed")throw new $t(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new dt(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof s!="function")throw new wt(`Graph.${e}: updater should be a function.`);return o.attributes[i]=s(o.attributes[i]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}function Iae(n,e,t){n.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new $t(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $t(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Qo(this,o,a,t),!s)throw new dt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new $t(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new dt(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return delete s.attributes[i],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:i}),this}}function Lae(n,e,t){n.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new $t(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $t(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Qo(this,o,a,t),!s)throw new dt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new $t(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new dt(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!Zi(i))throw new wt(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=i,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function Nae(n,e,t){n.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new $t(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $t(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Qo(this,o,a,t),!s)throw new dt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new $t(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new dt(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!Zi(i))throw new wt(`Graph.${e}: provided attributes are not a plain object.`);return Ti(s.attributes,i),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:i}),this}}function Oae(n,e,t){n.prototype[e]=function(r,i){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new $t(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $t(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+i;if(i=arguments[2],s=Qo(this,o,a,t),!s)throw new dt(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new $t(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new dt(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof i!="function")throw new wt(`Graph.${e}: provided updater is not a function.`);return s.attributes=i(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const Dae=[{name:n=>`get${n}Attribute`,attacher:Mae},{name:n=>`get${n}Attributes`,attacher:Aae},{name:n=>`has${n}Attribute`,attacher:Cae},{name:n=>`set${n}Attribute`,attacher:Rae},{name:n=>`update${n}Attribute`,attacher:Pae},{name:n=>`remove${n}Attribute`,attacher:Iae},{name:n=>`replace${n}Attributes`,attacher:Lae},{name:n=>`merge${n}Attributes`,attacher:Nae},{name:n=>`update${n}Attributes`,attacher:Oae}];function kae(n){Dae.forEach(function({name:e,attacher:t}){t(n,e("Edge"),"mixed"),t(n,e("DirectedEdge"),"directed"),t(n,e("UndirectedEdge"),"undirected")})}const Uae=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Fae(n,e,t,r){let i=!1;for(const s in e){if(s===r)continue;const o=e[s];if(i=t(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),n&&i)return o.key}}function zae(n,e,t,r){let i,s,o,a=!1;for(const l in e)if(l!==r){i=e[l];do{if(s=i.source,o=i.target,a=t(i.key,i.attributes,s.key,o.key,s.attributes,o.attributes,i.undirected),n&&a)return i.key;i=i.next}while(i!==void 0)}}function rb(n,e){const t=Object.keys(n),r=t.length;let i,s=0;return new ea(function(){do if(i)i=i.next;else{if(s>=r)return{done:!0};const a=t[s++];if(a===e){i=void 0;continue}i=n[a]}while(!i);return{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}}})}function Bae(n,e,t,r){const i=e[t];if(!i)return;const s=i.source,o=i.target;if(r(i.key,i.attributes,s.key,o.key,s.attributes,o.attributes,i.undirected)&&n)return i.key}function Hae(n,e,t,r){let i=e[t];if(!i)return;let s=!1;do{if(s=r(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),n&&s)return i.key;i=i.next}while(i!==void 0)}function ib(n,e){let t=n[e];return t.next!==void 0?new ea(function(){if(!t)return{done:!0};const r={edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected};return t=t.next,{done:!1,value:r}}):ea.of({edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected})}function $ae(n,e){if(n.size===0)return[];if(e==="mixed"||e===n.type)return typeof Array.from=="function"?Array.from(n._edges.keys()):Dz(n._edges.keys(),n._edges.size);const t=e==="undirected"?n.undirectedSize:n.directedSize,r=new Array(t),i=e==="undirected",s=n._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===i&&(r[o++]=l.key);return r}function Gz(n,e,t,r){if(e.size===0)return;const i=t!=="mixed"&&t!==e.type,s=t==="undirected";let o,a,l=!1;const u=e._edges.values();for(;o=u.next(),o.done!==!0;){if(a=o.value,i&&a.undirected!==s)continue;const{key:c,attributes:d,source:h,target:g}=a;if(l=r(c,d,h.key,g.key,h.attributes,g.attributes,a.undirected),n&&l)return c}}function Gae(n,e){if(n.size===0)return ea.empty();const t=e!=="mixed"&&e!==n.type,r=e==="undirected",i=n._edges.values();return new ea(function(){let o,a;for(;;){if(o=i.next(),o.done)return o;if(a=o.value,!(t&&a.undirected!==r))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function jA(n,e,t,r,i,s){const o=e?zae:Fae;let a;if(t!=="undirected"&&(r!=="out"&&(a=o(n,i.in,s),n&&a)||r!=="in"&&(a=o(n,i.out,s,r?void 0:i.key),n&&a))||t!=="directed"&&(a=o(n,i.undirected,s),n&&a))return a}function Vae(n,e,t,r){const i=[];return jA(!1,n,e,t,r,function(s){i.push(s)}),i}function jae(n,e,t){let r=ea.empty();return n!=="undirected"&&(e!=="out"&&typeof t.in<"u"&&(r=Bu(r,rb(t.in))),e!=="in"&&typeof t.out<"u"&&(r=Bu(r,rb(t.out,e?void 0:t.key)))),n!=="directed"&&typeof t.undirected<"u"&&(r=Bu(r,rb(t.undirected))),r}function WA(n,e,t,r,i,s,o){const a=t?Hae:Bae;let l;if(e!=="undirected"&&(typeof i.in<"u"&&r!=="out"&&(l=a(n,i.in,s,o),n&&l)||typeof i.out<"u"&&r!=="in"&&(r||i.key!==s)&&(l=a(n,i.out,s,o),n&&l))||e!=="directed"&&typeof i.undirected<"u"&&(l=a(n,i.undirected,s,o),n&&l))return l}function Wae(n,e,t,r,i){const s=[];return WA(!1,n,e,t,r,i,function(o){s.push(o)}),s}function qae(n,e,t,r){let i=ea.empty();return n!=="undirected"&&(typeof t.in<"u"&&e!=="out"&&r in t.in&&(i=Bu(i,ib(t.in,r))),typeof t.out<"u"&&e!=="in"&&r in t.out&&(e||t.key!==r)&&(i=Bu(i,ib(t.out,r)))),n!=="directed"&&typeof t.undirected<"u"&&r in t.undirected&&(i=Bu(i,ib(t.undirected,r))),i}function Xae(n,e){const{name:t,type:r,direction:i}=e;n.prototype[t]=function(s,o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return $ae(this,r);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new dt(`Graph.${t}: could not find the "${s}" node in the graph.`);return Vae(this.multi,r==="mixed"?this.type:r,i,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new dt(`Graph.${t}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new dt(`Graph.${t}:  could not find the "${o}" target node in the graph.`);return Wae(r,this.multi,i,a,o)}throw new wt(`Graph.${t}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Yae(n,e){const{name:t,type:r,direction:i}=e,s="forEach"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[s]=function(u,c,d){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return d=u,Gz(!1,this,r,d);if(arguments.length===2){u=""+u,d=c;const h=this._nodes.get(u);if(typeof h>"u")throw new dt(`Graph.${s}: could not find the "${u}" node in the graph.`);return jA(!1,this.multi,r==="mixed"?this.type:r,i,h,d)}if(arguments.length===3){u=""+u,c=""+c;const h=this._nodes.get(u);if(!h)throw new dt(`Graph.${s}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(c))throw new dt(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return WA(!1,r,this.multi,i,h,c,d)}throw new wt(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+t[0].toUpperCase()+t.slice(1);n.prototype[o]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();let d;if(u.length===0){let h=0;r!=="directed"&&(h+=this.undirectedSize),r!=="undirected"&&(h+=this.directedSize),d=new Array(h);let g=0;u.push((y,E,_,m,v,S,T)=>{d[g++]=c(y,E,_,m,v,S,T)})}else d=[],u.push((h,g,y,E,_,m,v)=>{d.push(c(h,g,y,E,_,m,v))});return this[s].apply(this,u),d};const a="filter"+t[0].toUpperCase()+t.slice(1);n.prototype[a]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop(),d=[];return u.push((h,g,y,E,_,m,v)=>{c(h,g,y,E,_,m,v)&&d.push(h)}),this[s].apply(this,u),d};const l="reduce"+t[0].toUpperCase()+t.slice(1);n.prototype[l]=function(){let u=Array.prototype.slice.call(arguments);if(u.length<2||u.length>4)throw new wt(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${u.length}).`);if(typeof u[u.length-1]=="function"&&typeof u[u.length-2]!="function")throw new wt(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let c,d;u.length===2?(c=u[0],d=u[1],u=[]):u.length===3?(c=u[1],d=u[2],u=[u[0]]):u.length===4&&(c=u[2],d=u[3],u=[u[0],u[1]]);let h=d;return u.push((g,y,E,_,m,v,S)=>{h=c(h,g,y,E,_,m,v,S)}),this[s].apply(this,u),h}}function Kae(n,e){const{name:t,type:r,direction:i}=e,s="find"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[s]=function(l,u,c){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return c=l,Gz(!0,this,r,c);if(arguments.length===2){l=""+l,c=u;const d=this._nodes.get(l);if(typeof d>"u")throw new dt(`Graph.${s}: could not find the "${l}" node in the graph.`);return jA(!0,this.multi,r==="mixed"?this.type:r,i,d,c)}if(arguments.length===3){l=""+l,u=""+u;const d=this._nodes.get(l);if(!d)throw new dt(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(u))throw new dt(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return WA(!0,r,this.multi,i,d,u,c)}throw new wt(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,g,y,E,_,m)=>u(d,h,g,y,E,_,m)),!!this[s].apply(this,l)};const a="every"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,g,y,E,_,m)=>!u(d,h,g,y,E,_,m)),!this[s].apply(this,l)}}function Jae(n,e){const{name:t,type:r,direction:i}=e,s=t.slice(0,-1)+"Entries";n.prototype[s]=function(o,a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return ea.empty();if(!arguments.length)return Gae(this,r);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new dt(`Graph.${s}: could not find the "${o}" node in the graph.`);return jae(r,i,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new dt(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new dt(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return qae(r,i,l,a)}throw new wt(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Zae(n){Uae.forEach(e=>{Xae(n,e),Yae(n,e),Kae(n,e),Jae(n,e)})}const Qae=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function sw(){this.A=null,this.B=null}sw.prototype.wrap=function(n){this.A===null?this.A=n:this.B===null&&(this.B=n)};sw.prototype.has=function(n){return this.A!==null&&n in this.A||this.B!==null&&n in this.B};function Tg(n,e,t,r,i){for(const s in r){const o=r[s],a=o.source,l=o.target,u=a===t?l:a;if(e&&e.has(u.key))continue;const c=i(u.key,u.attributes);if(n&&c)return u.key}}function qA(n,e,t,r,i){if(e!=="mixed"){if(e==="undirected")return Tg(n,null,r,r.undirected,i);if(typeof t=="string")return Tg(n,null,r,r[t],i)}const s=new sw;let o;if(e!=="undirected"){if(t!=="out"){if(o=Tg(n,null,r,r.in,i),n&&o)return o;s.wrap(r.in)}if(t!=="in"){if(o=Tg(n,s,r,r.out,i),n&&o)return o;s.wrap(r.out)}}if(e!=="directed"&&(o=Tg(n,s,r,r.undirected,i),n&&o))return o}function ele(n,e,t){if(n!=="mixed"){if(n==="undirected")return Object.keys(t.undirected);if(typeof e=="string")return Object.keys(t[e])}const r=[];return qA(!1,n,e,t,function(i){r.push(i)}),r}function Mg(n,e,t){const r=Object.keys(t),i=r.length;let s=0;return new ea(function(){let a=null;do{if(s>=i)return n&&n.wrap(t),{done:!0};const l=t[r[s++]],u=l.source,c=l.target;if(a=u===e?c:u,n&&n.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function tle(n,e,t){if(n!=="mixed"){if(n==="undirected")return Mg(null,t,t.undirected);if(typeof e=="string")return Mg(null,t,t[e])}let r=ea.empty();const i=new sw;return n!=="undirected"&&(e!=="out"&&(r=Bu(r,Mg(i,t,t.in))),e!=="in"&&(r=Bu(r,Mg(i,t,t.out)))),n!=="directed"&&(r=Bu(r,Mg(i,t,t.undirected))),r}function nle(n,e){const{name:t,type:r,direction:i}=e;n.prototype[t]=function(s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new dt(`Graph.${t}: could not find the "${s}" node in the graph.`);return ele(r==="mixed"?this.type:r,i,o)}}function rle(n,e){const{name:t,type:r,direction:i}=e,s="forEach"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[s]=function(u,c){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new dt(`Graph.${s}: could not find the "${u}" node in the graph.`);qA(!1,r==="mixed"?this.type:r,i,d,c)};const o="map"+t[0].toUpperCase()+t.slice(1);n.prototype[o]=function(u,c){const d=[];return this[s](u,(h,g)=>{d.push(c(h,g))}),d};const a="filter"+t[0].toUpperCase()+t.slice(1);n.prototype[a]=function(u,c){const d=[];return this[s](u,(h,g)=>{c(h,g)&&d.push(h)}),d};const l="reduce"+t[0].toUpperCase()+t.slice(1);n.prototype[l]=function(u,c,d){if(arguments.length<3)throw new wt(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h=d;return this[s](u,(g,y)=>{h=c(h,g,y)}),h}}function ile(n,e){const{name:t,type:r,direction:i}=e,s=t[0].toUpperCase()+t.slice(1,-1),o="find"+s;n.prototype[o]=function(u,c){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new dt(`Graph.${o}: could not find the "${u}" node in the graph.`);return qA(!0,r==="mixed"?this.type:r,i,d,c)};const a="some"+s;n.prototype[a]=function(u,c){return!!this[o](u,c)};const l="every"+s;n.prototype[l]=function(u,c){return!this[o](u,(h,g)=>!c(h,g))}}function sle(n,e){const{name:t,type:r,direction:i}=e,s=t.slice(0,-1)+"Entries";n.prototype[s]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return ea.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new dt(`Graph.${s}: could not find the "${o}" node in the graph.`);return tle(r==="mixed"?this.type:r,i,a)}}function ole(n){Qae.forEach(e=>{nle(n,e),rle(n,e),ile(n,e),sle(n,e)})}function ex(n,e,t,r,i){const s=r._nodes.values(),o=r.type;let a,l,u,c,d,h;for(;a=s.next(),a.done!==!0;){let g=!1;if(l=a.value,o!=="undirected"){c=l.out;for(u in c){d=c[u];do h=d.target,g=!0,i(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}if(o!=="directed"){c=l.undirected;for(u in c)if(!(e&&l.key>u)){d=c[u];do h=d.target,h.key!==u&&(h=d.source),g=!0,i(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}t&&!g&&i(l.key,null,l.attributes,null,null,null,null)}}function ale(n,e){const t={key:n};return kz(e.attributes)||(t.attributes=Ti({},e.attributes)),t}function lle(n,e,t){const r={key:e,source:t.source.key,target:t.target.key};return kz(t.attributes)||(r.attributes=Ti({},t.attributes)),n==="mixed"&&t.undirected&&(r.undirected=!0),r}function ule(n){if(!Zi(n))throw new wt('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in n))throw new wt("Graph.import: serialized node is missing its key.");if("attributes"in n&&(!Zi(n.attributes)||n.attributes===null))throw new wt("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function cle(n){if(!Zi(n))throw new wt('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in n))throw new wt("Graph.import: serialized edge is missing its source.");if(!("target"in n))throw new wt("Graph.import: serialized edge is missing its target.");if("attributes"in n&&(!Zi(n.attributes)||n.attributes===null))throw new wt("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in n&&typeof n.undirected!="boolean")throw new wt("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const fle=hae(),dle=new Set(["directed","undirected","mixed"]),eO=new Set(["domain","_events","_eventsCount","_maxListeners"]),hle=[{name:n=>`${n}Edge`,generateKey:!0},{name:n=>`${n}DirectedEdge`,generateKey:!0,type:"directed"},{name:n=>`${n}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:n=>`${n}EdgeWithKey`},{name:n=>`${n}DirectedEdgeWithKey`,type:"directed"},{name:n=>`${n}UndirectedEdgeWithKey`,type:"undirected"}],ple={allowSelfLoops:!0,multi:!1,type:"mixed"};function mle(n,e,t){if(t&&!Zi(t))throw new wt(`Graph.addNode: invalid attributes. Expecting an object but got "${t}"`);if(e=""+e,t=t||{},n._nodes.has(e))throw new $t(`Graph.addNode: the "${e}" node already exist in the graph.`);const r=new n.NodeDataClass(e,t);return n._nodes.set(e,r),n.emit("nodeAdded",{key:e,attributes:t}),r}function tO(n,e,t){const r=new n.NodeDataClass(e,t);return n._nodes.set(e,r),n.emit("nodeAdded",{key:e,attributes:t}),r}function Vz(n,e,t,r,i,s,o,a){if(!r&&n.type==="undirected")throw new $t(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&n.type==="directed")throw new $t(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!Zi(a))throw new wt(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!n.allowSelfLoops&&s===o)throw new $t(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=n._nodes.get(s),u=n._nodes.get(o);if(!l)throw new dt(`Graph.${e}: source node "${s}" not found.`);if(!u)throw new dt(`Graph.${e}: target node "${o}" not found.`);const c={key:null,undirected:r,source:s,target:o,attributes:a};if(t)i=n._edgeKeyGenerator();else if(i=""+i,n._edges.has(i))throw new $t(`Graph.${e}: the "${i}" edge already exists in the graph.`);if(!n.multi&&(r?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new $t(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new om(r,i,l,u,a);n._edges.set(i,d);const h=s===o;return r?(l.undirectedDegree++,u.undirectedDegree++,h&&(l.undirectedLoops++,n._undirectedSelfLoopCount++)):(l.outDegree++,u.inDegree++,h&&(l.directedLoops++,n._directedSelfLoopCount++)),n.multi?d.attachMulti():d.attach(),r?n._undirectedSize++:n._directedSize++,c.key=i,n.emit("edgeAdded",c),i}function gle(n,e,t,r,i,s,o,a,l){if(!r&&n.type==="undirected")throw new $t(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&n.type==="directed")throw new $t(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new wt(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!Zi(a))throw new wt(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let u;if(l&&(u=a,a=void 0),!n.allowSelfLoops&&s===o)throw new $t(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let c=n._nodes.get(s),d=n._nodes.get(o),h,g;if(!t&&(h=n._edges.get(i),h)){if((h.source.key!==s||h.target.key!==o)&&(!r||h.source.key!==o||h.target.key!==s))throw new $t(`Graph.${e}: inconsistency detected when attempting to merge the "${i}" edge with "${s}" source & "${o}" target vs. ("${h.source.key}", "${h.target.key}").`);g=h}if(!g&&!n.multi&&c&&(g=r?c.undirected[o]:c.out[o]),g){const v=[g.key,!1,!1,!1];if(l?!u:!a)return v;if(l){const S=g.attributes;g.attributes=u(S),n.emit("edgeAttributesUpdated",{type:"replace",key:g.key,attributes:g.attributes})}else Ti(g.attributes,a),n.emit("edgeAttributesUpdated",{type:"merge",key:g.key,attributes:g.attributes,data:a});return v}a=a||{},l&&u&&(a=u(a));const y={key:null,undirected:r,source:s,target:o,attributes:a};if(t)i=n._edgeKeyGenerator();else if(i=""+i,n._edges.has(i))throw new $t(`Graph.${e}: the "${i}" edge already exists in the graph.`);let E=!1,_=!1;c||(c=tO(n,s,{}),E=!0,s===o&&(d=c,_=!0)),d||(d=tO(n,o,{}),_=!0),h=new om(r,i,c,d,a),n._edges.set(i,h);const m=s===o;return r?(c.undirectedDegree++,d.undirectedDegree++,m&&(c.undirectedLoops++,n._undirectedSelfLoopCount++)):(c.outDegree++,d.inDegree++,m&&(c.directedLoops++,n._directedSelfLoopCount++)),n.multi?h.attachMulti():h.attach(),r?n._undirectedSize++:n._directedSize++,y.key=i,n.emit("edgeAdded",y),[i,!0,E,_]}function fp(n,e){n._edges.delete(e.key);const{source:t,target:r,attributes:i}=e,s=e.undirected,o=t===r;s?(t.undirectedDegree--,r.undirectedDegree--,o&&(t.undirectedLoops--,n._undirectedSelfLoopCount--)):(t.outDegree--,r.inDegree--,o&&(t.directedLoops--,n._directedSelfLoopCount--)),n.multi?e.detachMulti():e.detach(),s?n._undirectedSize--:n._directedSize--,n.emit("edgeDropped",{key:e.key,attributes:i,source:t.key,target:r.key,undirected:s})}class tr extends oae.EventEmitter{constructor(e){if(super(),e=Ti({},ple,e),typeof e.multi!="boolean")throw new wt(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!dle.has(e.type))throw new wt(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new wt(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const t=e.type==="mixed"?Uz:e.type==="directed"?Fz:zz;Vo(this,"NodeDataClass",t);const r="geid_"+fle()+"_";let i=0;const s=()=>{let o;do o=r+i++;while(this._edges.has(o));return o};Vo(this,"_attributes",{}),Vo(this,"_nodes",new Map),Vo(this,"_edges",new Map),Vo(this,"_directedSize",0),Vo(this,"_undirectedSize",0),Vo(this,"_directedSelfLoopCount",0),Vo(this,"_undirectedSelfLoopCount",0),Vo(this,"_edgeKeyGenerator",s),Vo(this,"_options",e),eO.forEach(o=>Vo(this,o,this[o])),Oa(this,"order",()=>this._nodes.size),Oa(this,"size",()=>this._edges.size),Oa(this,"directedSize",()=>this._directedSize),Oa(this,"undirectedSize",()=>this._undirectedSize),Oa(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Oa(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Oa(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Oa(this,"multi",this._options.multi),Oa(this,"type",this._options.type),Oa(this,"allowSelfLoops",this._options.allowSelfLoops),Oa(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,t){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&!i.undirected}else if(arguments.length===2){e=""+e,t=""+t;const r=this._nodes.get(e);return r?r.out.hasOwnProperty(t):!1}throw new wt(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,t){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&i.undirected}else if(arguments.length===2){e=""+e,t=""+t;const r=this._nodes.get(e);return r?r.undirected.hasOwnProperty(t):!1}throw new wt(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,t){if(arguments.length===1){const r=""+e;return this._edges.has(r)}else if(arguments.length===2){e=""+e,t=""+t;const r=this._nodes.get(e);return r?typeof r.out<"u"&&r.out.hasOwnProperty(t)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(t):!1}throw new wt(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,t){if(this.type==="undirected")return;if(e=""+e,t=""+t,this.multi)throw new $t("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(e);if(!r)throw new dt(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new dt(`Graph.directedEdge: could not find the "${t}" target node in the graph.`);const i=r.out&&r.out[t]||void 0;if(i)return i.key}undirectedEdge(e,t){if(this.type==="directed")return;if(e=""+e,t=""+t,this.multi)throw new $t("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(e);if(!r)throw new dt(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new dt(`Graph.undirectedEdge: could not find the "${t}" target node in the graph.`);const i=r.undirected&&r.undirected[t]||void 0;if(i)return i.key}edge(e,t){if(this.multi)throw new $t("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new dt(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new dt(`Graph.edge: could not find the "${t}" target node in the graph.`);const i=r.out&&r.out[t]||r.undirected&&r.undirected[t]||void 0;if(i)return i.key}areDirectedNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new dt(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in r.in||t in r.out}areOutNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new dt(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in r.out}areInNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new dt(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in r.in}areUndirectedNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new dt(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:t in r.undirected}areNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new dt(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(t in r.in||t in r.out)||this.type!=="directed"&&t in r.undirected}areInboundNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new dt(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in r.in||this.type!=="directed"&&t in r.undirected}areOutboundNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new dt(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in r.out||this.type!=="directed"&&t in r.undirected}inDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new dt(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree}outDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new dt(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree}directedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new dt(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree}undirectedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new dt(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree}inboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new dt(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=t.undirectedDegree),this.type!=="undirected"&&(r+=t.inDegree),r}outboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new dt(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=t.undirectedDegree),this.type!=="undirected"&&(r+=t.outDegree),r}degree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new dt(`Graph.degree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=t.undirectedDegree),this.type!=="undirected"&&(r+=t.inDegree+t.outDegree),r}inDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new dt(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree-t.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new dt(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree-t.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new dt(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree-t.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new dt(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree-t.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new dt(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=t.undirectedDegree,i+=t.undirectedLoops*2),this.type!=="undirected"&&(r+=t.inDegree,i+=t.directedLoops),r-i}outboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new dt(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=t.undirectedDegree,i+=t.undirectedLoops*2),this.type!=="undirected"&&(r+=t.outDegree,i+=t.directedLoops),r-i}degreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new dt(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=t.undirectedDegree,i+=t.undirectedLoops*2),this.type!=="undirected"&&(r+=t.inDegree+t.outDegree,i+=t.directedLoops*2),r-i}source(e){e=""+e;const t=this._edges.get(e);if(!t)throw new dt(`Graph.source: could not find the "${e}" edge in the graph.`);return t.source.key}target(e){e=""+e;const t=this._edges.get(e);if(!t)throw new dt(`Graph.target: could not find the "${e}" edge in the graph.`);return t.target.key}extremities(e){e=""+e;const t=this._edges.get(e);if(!t)throw new dt(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[t.source.key,t.target.key]}opposite(e,t){e=""+e,t=""+t;const r=this._edges.get(t);if(!r)throw new dt(`Graph.opposite: could not find the "${t}" edge in the graph.`);const i=r.source.key,s=r.target.key;if(e===i)return s;if(e===s)return i;throw new dt(`Graph.opposite: the "${e}" node is not attached to the "${t}" edge (${i}, ${s}).`)}hasExtremity(e,t){e=""+e,t=""+t;const r=this._edges.get(e);if(!r)throw new dt(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return r.source.key===t||r.target.key===t}isUndirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new dt(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return t.undirected}isDirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new dt(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!t.undirected}isSelfLoop(e){e=""+e;const t=this._edges.get(e);if(!t)throw new dt(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return t.source===t.target}addNode(e,t){return mle(this,e,t).key}mergeNode(e,t){if(t&&!Zi(t))throw new wt(`Graph.mergeNode: invalid attributes. Expecting an object but got "${t}"`);e=""+e,t=t||{};let r=this._nodes.get(e);return r?(t&&(Ti(r.attributes,t),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:r.attributes,data:t})),[e,!1]):(r=new this.NodeDataClass(e,t),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:t}),[e,!0])}updateNode(e,t){if(t&&typeof t!="function")throw new wt(`Graph.updateNode: invalid updater function. Expecting a function but got "${t}"`);e=""+e;let r=this._nodes.get(e);if(r){if(t){const s=r.attributes;r.attributes=t(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:r.attributes})}return[e,!1]}const i=t?t({}):{};return r=new this.NodeDataClass(e,i),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:i}),[e,!0]}dropNode(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new dt(`Graph.dropNode: could not find the "${e}" node in the graph.`);let r;if(this.type!=="undirected"){for(const i in t.out){r=t.out[i];do fp(this,r),r=r.next;while(r)}for(const i in t.in){r=t.in[i];do fp(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const i in t.undirected){r=t.undirected[i];do fp(this,r),r=r.next;while(r)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:t.attributes})}dropEdge(e){let t;if(arguments.length>1){const r=""+arguments[0],i=""+arguments[1];if(t=Qo(this,r,i,this.type),!t)throw new dt(`Graph.dropEdge: could not find the "${r}" -> "${i}" edge in the graph.`)}else if(e=""+e,t=this._edges.get(e),!t)throw new dt(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return fp(this,t),this}dropDirectedEdge(e,t){if(arguments.length<2)throw new $t("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new $t("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,t=""+t;const r=Qo(this,e,t,"directed");if(!r)throw new dt(`Graph.dropDirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return fp(this,r),this}dropUndirectedEdge(e,t){if(arguments.length<2)throw new $t("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new $t("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=Qo(this,e,t,"undirected");if(!r)throw new dt(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return fp(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let t;for(;t=e.next(),t.done!==!0;)t.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,t){return this._attributes[e]=t,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,t){if(typeof t!="function")throw new wt("Graph.updateAttribute: updater should be a function.");const r=this._attributes[e];return this._attributes[e]=t(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Zi(e))throw new wt("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Zi(e))throw new wt("Graph.mergeAttributes: provided attributes are not a plain object.");return Ti(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new wt("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,t){if(typeof e!="function")throw new wt("Graph.updateEachNodeAttributes: expecting an updater function.");if(t&&!QN(t))throw new wt("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let i,s;for(;i=r.next(),i.done!==!0;)s=i.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:t||null})}updateEachEdgeAttributes(e,t){if(typeof e!="function")throw new wt("Graph.updateEachEdgeAttributes: expecting an updater function.");if(t&&!QN(t))throw new wt("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let i,s,o,a;for(;i=r.next(),i.done!==!0;)s=i.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:t||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new wt("Graph.forEachAdjacencyEntry: expecting a callback.");ex(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new wt("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");ex(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new wt("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");ex(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new wt("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");ex(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):Dz(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new wt("Graph.forEachNode: expecting a callback.");const t=this._nodes.values();let r,i;for(;r=t.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)}findNode(e){if(typeof e!="function")throw new wt("Graph.findNode: expecting a callback.");const t=this._nodes.values();let r,i;for(;r=t.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return i.key}mapNodes(e){if(typeof e!="function")throw new wt("Graph.mapNode: expecting a callback.");const t=this._nodes.values();let r,i;const s=new Array(this.order);let o=0;for(;r=t.next(),r.done!==!0;)i=r.value,s[o++]=e(i.key,i.attributes);return s}someNode(e){if(typeof e!="function")throw new wt("Graph.someNode: expecting a callback.");const t=this._nodes.values();let r,i;for(;r=t.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new wt("Graph.everyNode: expecting a callback.");const t=this._nodes.values();let r,i;for(;r=t.next(),r.done!==!0;)if(i=r.value,!e(i.key,i.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new wt("Graph.filterNodes: expecting a callback.");const t=this._nodes.values();let r,i;const s=[];for(;r=t.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)&&s.push(i.key);return s}reduceNodes(e,t){if(typeof e!="function")throw new wt("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new wt("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=t;const i=this._nodes.values();let s,o;for(;s=i.next(),s.done!==!0;)o=s.value,r=e(r,o.key,o.attributes);return r}nodeEntries(){const e=this._nodes.values();return new ea(()=>{const t=e.next();if(t.done)return t;const r=t.value;return{value:{node:r.key,attributes:r.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let t=0;this._nodes.forEach((i,s)=>{e[t++]=ale(s,i)});const r=new Array(this._edges.size);return t=0,this._edges.forEach((i,s)=>{r[t++]=lle(this.type,s,i)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:r}}import(e,t=!1){if(e instanceof tr)return e.forEachNode((l,u)=>{t?this.mergeNode(l,u):this.addNode(l,u)}),e.forEachEdge((l,u,c,d,h,g,y)=>{t?y?this.mergeUndirectedEdgeWithKey(l,c,d,u):this.mergeDirectedEdgeWithKey(l,c,d,u):y?this.addUndirectedEdgeWithKey(l,c,d,u):this.addDirectedEdgeWithKey(l,c,d,u)}),this;if(!Zi(e))throw new wt("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Zi(e.attributes))throw new wt("Graph.import: invalid attributes. Expecting a plain object.");t?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let r,i,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new wt("Graph.import: invalid nodes. Expecting an array.");for(r=0,i=s.length;r<i;r++){o=s[r],ule(o);const{key:l,attributes:u}=o;t?this.mergeNode(l,u):this.addNode(l,u)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new wt("Graph.import: invalid edges. Expecting an array.");for(r=0,i=s.length;r<i;r++){a=s[r],cle(a);const{source:u,target:c,attributes:d,undirected:h=l}=a;let g;"key"in a?(g=t?h?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:h?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,g.call(this,a.key,u,c,d)):(g=t?h?this.mergeUndirectedEdge:this.mergeDirectedEdge:h?this.addUndirectedEdge:this.addDirectedEdge,g.call(this,u,c,d))}}return this}nullCopy(e){const t=new tr(Ti({},this._options,e));return t.replaceAttributes(Ti({},this.getAttributes())),t}emptyCopy(e){const t=this.nullCopy(e);return this._nodes.forEach((r,i)=>{const s=Ti({},r.attributes);r=new t.NodeDataClass(i,s),t._nodes.set(i,r)}),t}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new $t(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new $t("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new $t("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const t=this.emptyCopy(e),r=this._edges.values();let i,s;for(;i=r.next(),i.done!==!0;)s=i.value,Vz(t,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,Ti({},s.attributes));return t}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const t={},r={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",u=s.source.key,c=s.target.key,d;s.undirected&&u>c&&(d=u,u=c,c=d);const h=`(${u})${a}(${c})`;o.startsWith("geid_")?this.multi&&(typeof r[h]>"u"?r[h]=0:r[h]++,l+=`${r[h]}. `):l+=`[${o}]: `,l+=h,t[l]=s.attributes});const i={};for(const s in this)this.hasOwnProperty(s)&&!eO.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(i[s]=this[s]);return i.attributes=this._attributes,i.nodes=e,i.edges=t,Vo(i,"constructor",this.constructor),i}}typeof Symbol<"u"&&(tr.prototype[Symbol.for("nodejs.util.inspect.custom")]=tr.prototype.inspect);hle.forEach(n=>{["add","merge","update"].forEach(e=>{const t=n.name(e),r=e==="add"?Vz:gle;n.generateKey?tr.prototype[t]=function(i,s,o){return r(this,t,!0,(n.type||this.type)==="undirected",null,i,s,o,e==="update")}:tr.prototype[t]=function(i,s,o,a){return r(this,t,!1,(n.type||this.type)==="undirected",i,s,o,a,e==="update")}})});Tae(tr);kae(tr);Zae(tr);ole(tr);class jz extends tr{constructor(e){const t=Ti({type:"directed"},e);if("multi"in t&&t.multi!==!1)throw new wt("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="directed")throw new wt('DirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class Wz extends tr{constructor(e){const t=Ti({type:"undirected"},e);if("multi"in t&&t.multi!==!1)throw new wt("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="undirected")throw new wt('UndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class qz extends tr{constructor(e){const t=Ti({multi:!0},e);if("multi"in t&&t.multi!==!0)throw new wt("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(t)}}class Xz extends tr{constructor(e){const t=Ti({type:"directed",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new wt("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="directed")throw new wt('MultiDirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class Yz extends tr{constructor(e){const t=Ti({type:"undirected",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new wt("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="undirected")throw new wt('MultiUndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}function am(n){n.from=function(e,t){const r=Ti({},e.options,t),i=new n(r);return i.import(e),i}}am(tr);am(jz);am(Wz);am(qz);am(Xz);am(Yz);tr.Graph=tr;tr.DirectedGraph=jz;tr.UndirectedGraph=Wz;tr.MultiGraph=qz;tr.MultiDirectedGraph=Xz;tr.MultiUndirectedGraph=Yz;tr.InvalidArgumentsGraphError=wt;tr.NotFoundGraphError=dt;tr.UsageGraphError=$t;const gv=new de,XA=new de,yle=new de;function vle(n,e,t){const r=gv.setFromMatrixPosition(n.matrixWorld);r.project(e);const i=t.width/2,s=t.height/2;return[r.x*i+i,-(r.y*s)+s]}function _le(n,e){const t=gv.setFromMatrixPosition(n.matrixWorld),r=XA.setFromMatrixPosition(e.matrixWorld),i=t.sub(r),s=e.getWorldDirection(yle);return i.angleTo(s)>Math.PI/2}function xle(n,e,t,r){const i=gv.setFromMatrixPosition(n.matrixWorld),s=i.clone();s.project(e),t.setFromCamera(s,e);const o=t.intersectObjects(r,!0);if(o.length){const a=o[0].distance;return i.distanceTo(t.ray.origin)<a}return!0}function wle(n,e){if(e instanceof Ud)return e.zoom;if(e instanceof mi){const t=gv.setFromMatrixPosition(n.matrixWorld),r=XA.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,s=t.distanceTo(r);return 1/(2*Math.tan(i/2)*s)}else return 1}function Sle(n,e,t){if(e instanceof mi||e instanceof Ud){const r=gv.setFromMatrixPosition(n.matrixWorld),i=XA.setFromMatrixPosition(e.matrixWorld),s=r.distanceTo(i),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const QT=n=>Math.abs(n)<1e-10?0:n;function Kz(n,e,t=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=QT(e[i]*n.elements[i])+(i!==15?",":")");return t+r}const Ele=(n=>e=>Kz(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),ble=(n=>(e,t)=>Kz(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function Tle(n){return n&&typeof n=="object"&&"current"in n}const YA=Z.forwardRef(({children:n,eps:e=.001,style:t,className:r,prepend:i,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:u=!1,transform:c=!1,occlude:d,onOcclude:h,castShadow:g,receiveShadow:y,material:E,geometry:_,zIndexRange:m=[16777271,0],calculatePosition:v=vle,as:S="div",wrapperClass:T,pointerEvents:M="auto",...A},R)=>{const{gl:O,camera:I,scene:k,size:G,raycaster:$,events:U,viewport:ee}=gi(),[re]=Z.useState(()=>document.createElement(S)),ne=Z.useRef(),X=Z.useRef(null),q=Z.useRef(0),K=Z.useRef([0,0]),F=Z.useRef(null),L=Z.useRef(null),z=(a==null?void 0:a.current)||U.connected||O.domElement.parentNode,Y=Z.useRef(null),B=Z.useRef(!1),J=Z.useMemo(()=>d&&d!=="blending"||Array.isArray(d)&&d.length&&Tle(d[0]),[d]);Z.useLayoutEffect(()=>{const _e=O.domElement;d&&d==="blending"?(_e.style.zIndex=`${Math.floor(m[0]/2)}`,_e.style.position="absolute",_e.style.pointerEvents="none"):(_e.style.zIndex=null,_e.style.position=null,_e.style.pointerEvents=null)},[d]),Z.useLayoutEffect(()=>{if(X.current){const _e=ne.current=MD.createRoot(re);if(k.updateMatrixWorld(),c)re.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const te=v(X.current,I,G);re.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${te[0]}px,${te[1]}px,0);transform-origin:0 0;`}return z&&(i?z.prepend(re):z.appendChild(re)),()=>{z&&z.removeChild(re),_e.unmount()}}},[z,c]),Z.useLayoutEffect(()=>{T&&(re.className=T)},[T]);const le=Z.useMemo(()=>c?{position:"absolute",top:0,left:0,width:G.width,height:G.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-G.height/2,left:-G.width/2,width:G.width,height:G.height},...t},[t,s,o,G,c]),pe=Z.useMemo(()=>({position:"absolute",pointerEvents:M}),[M]);Z.useLayoutEffect(()=>{if(B.current=!1,c){var _e;(_e=ne.current)==null||_e.render(Z.createElement("div",{ref:F,style:le},Z.createElement("div",{ref:L,style:pe},Z.createElement("div",{ref:R,className:r,style:t,children:n}))))}else{var te;(te=ne.current)==null||te.render(Z.createElement("div",{ref:R,style:le,className:r,children:n}))}});const he=Z.useRef(!0);Q1(_e=>{if(X.current){I.updateMatrixWorld(),X.current.updateWorldMatrix(!0,!1);const te=c?K.current:v(X.current,I,G);if(c||Math.abs(q.current-I.zoom)>e||Math.abs(K.current[0]-te[0])>e||Math.abs(K.current[1]-te[1])>e){const j=_le(X.current,I);let ce=!1;J&&(Array.isArray(d)?ce=d.map(Ae=>Ae.current):d!=="blending"&&(ce=[k]));const fe=he.current;if(ce){const Ae=xle(X.current,I,$,ce);he.current=Ae&&!j}else he.current=!j;fe!==he.current&&(h?h(!he.current):re.style.display=he.current?"block":"none");const ie=Math.floor(m[0]/2),se=d?J?[m[0],ie]:[ie-1,0]:m;if(re.style.zIndex=`${Sle(X.current,I,se)}`,c){const[Ae,we]=[G.width/2,G.height/2],Re=I.projectionMatrix.elements[5]*we,{isOrthographicCamera:Le,top:be,left:Ye,bottom:ue,right:oe}=I,ye=Ele(I.matrixWorldInverse),Fe=Le?`scale(${Re})translate(${QT(-(oe+Ye)/2)}px,${QT((be+ue)/2)}px)`:`translateZ(${Re}px)`;let ze=X.current.matrixWorld;u&&(ze=I.matrixWorldInverse.clone().transpose().copyPosition(ze).scale(X.current.scale),ze.elements[3]=ze.elements[7]=ze.elements[11]=0,ze.elements[15]=1),re.style.width=G.width+"px",re.style.height=G.height+"px",re.style.perspective=Le?"":`${Re}px`,F.current&&L.current&&(F.current.style.transform=`${Fe}${ye}translate(${Ae}px,${we}px)`,L.current.style.transform=ble(ze,1/((l||10)/400)))}else{const Ae=l===void 0?1:wle(X.current,I)*l;re.style.transform=`translate3d(${te[0]}px,${te[1]}px,0) scale(${Ae})`}K.current=te,q.current=I.zoom}}if(!J&&Y.current&&!B.current)if(c){if(F.current){const te=F.current.children[0];if(te!=null&&te.clientWidth&&te!=null&&te.clientHeight){const{isOrthographicCamera:j}=I;if(j||_)A.scale&&(Array.isArray(A.scale)?A.scale instanceof de?Y.current.scale.copy(A.scale.clone().divideScalar(1)):Y.current.scale.set(1/A.scale[0],1/A.scale[1],1/A.scale[2]):Y.current.scale.setScalar(1/A.scale));else{const ce=(l||10)/400,fe=te.clientWidth*ce,ie=te.clientHeight*ce;Y.current.scale.set(fe,ie,1)}B.current=!0}}}else{const te=re.children[0];if(te!=null&&te.clientWidth&&te!=null&&te.clientHeight){const j=1/ee.factor,ce=te.clientWidth*j,fe=te.clientHeight*j;Y.current.scale.set(ce,fe,1),B.current=!0}Y.current.lookAt(_e.camera.position)}});const Ee=Z.useMemo(()=>({vertexShader:c?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[c]);return Z.createElement("group",Td({},A,{ref:X}),d&&!J&&Z.createElement("mesh",{castShadow:g,receiveShadow:y,ref:Y},_||Z.createElement("planeGeometry",null),E||Z.createElement("shaderMaterial",{side:Lr,vertexShader:Ee.vertexShader,fragmentShader:Ee.fragmentShader})))});function wd(n,e="pointer",t="auto",r=document.body){Z.useEffect(()=>{if(n)return r.style.cursor=e,()=>void(r.style.cursor=t)},[n])}let KA=vv();const tn=n=>yv(n,KA);let JA=vv();tn.write=n=>yv(n,JA);let ow=vv();tn.onStart=n=>yv(n,ow);let ZA=vv();tn.onFrame=n=>yv(n,ZA);let QA=vv();tn.onFinish=n=>yv(n,QA);let Np=[];tn.setTimeout=(n,e)=>{let t=tn.now()+e,r=()=>{let s=Np.findIndex(o=>o.cancel==r);~s&&Np.splice(s,1),Fc-=~s?1:0},i={time:t,handler:n,cancel:r};return Np.splice(Jz(t),0,i),Fc+=1,Zz(),i};let Jz=n=>~(~Np.findIndex(e=>e.time>n)||~Np.length);tn.cancel=n=>{ow.delete(n),ZA.delete(n),QA.delete(n),KA.delete(n),JA.delete(n)};tn.sync=n=>{eM=!0,tn.batchedUpdates(n),eM=!1};tn.throttle=n=>{let e;function t(){try{n(...e)}finally{e=null}}function r(...i){e=i,tn.onStart(t)}return r.handler=n,r.cancel=()=>{ow.delete(t),e=null},r};let e2=typeof window<"u"?window.requestAnimationFrame:()=>{};tn.use=n=>e2=n;tn.now=typeof performance<"u"?()=>performance.now():Date.now;tn.batchedUpdates=n=>n();tn.catch=console.error;tn.frameLoop="always";tn.advance=()=>{tn.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):eB()};let Uc=-1,Fc=0,eM=!1;function yv(n,e){eM?(e.delete(n),n(0)):(e.add(n),Zz())}function Zz(){Uc<0&&(Uc=0,tn.frameLoop!=="demand"&&e2(Qz))}function Mle(){Uc=-1}function Qz(){~Uc&&(e2(Qz),tn.batchedUpdates(eB))}function eB(){let n=Uc;Uc=tn.now();let e=Jz(Uc);if(e&&(tB(Np.splice(0,e),t=>t.handler()),Fc-=e),!Fc){Mle();return}ow.flush(),KA.flush(n?Math.min(64,Uc-n):16.667),ZA.flush(),JA.flush(),QA.flush()}function vv(){let n=new Set,e=n;return{add(t){Fc+=e==n&&!n.has(t)?1:0,n.add(t)},delete(t){return Fc-=e==n&&n.has(t)?1:0,n.delete(t)},flush(t){e.size&&(n=new Set,Fc-=e.size,tB(e,r=>r(t)&&n.add(r)),Fc+=n.size,e=n)}}}function tB(n,e){n.forEach(t=>{try{e(t)}catch(r){tn.catch(r)}})}function tM(){}const Ale=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),mt={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function Pu(n,e){if(mt.arr(n)){if(!mt.arr(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return n===e}const qn=(n,e)=>n.forEach(e);function Gu(n,e,t){if(mt.arr(n)){for(let r=0;r<n.length;r++)e.call(t,n[r],`${r}`);return}for(const r in n)n.hasOwnProperty(r)&&e.call(t,n[r],r)}const Zo=n=>mt.und(n)?[]:mt.arr(n)?n:[n];function sy(n,e){if(n.size){const t=Array.from(n);n.clear(),qn(t,e)}}const Xg=(n,...e)=>sy(n,t=>t(...e)),t2=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let n2,nB,Vc=null,rB=!1,r2=tM;const Cle=n=>{n.to&&(nB=n.to),n.now&&(tn.now=n.now),n.colors!==void 0&&(Vc=n.colors),n.skipAnimation!=null&&(rB=n.skipAnimation),n.createStringInterpolator&&(n2=n.createStringInterpolator),n.requestAnimationFrame&&tn.use(n.requestAnimationFrame),n.batchedUpdates&&(tn.batchedUpdates=n.batchedUpdates),n.willAdvance&&(r2=n.willAdvance),n.frameLoop&&(tn.frameLoop=n.frameLoop)};var Ul=Object.freeze({__proto__:null,get createStringInterpolator(){return n2},get to(){return nB},get colors(){return Vc},get skipAnimation(){return rB},get willAdvance(){return r2},assign:Cle});const oy=new Set;let Jo=[],sb=[],i1=0;const aw={get idle(){return!oy.size&&!Jo.length},start(n){i1>n.priority?(oy.add(n),tn.onStart(Rle)):(iB(n),tn(nM))},advance:nM,sort(n){if(i1)tn.onFrame(()=>aw.sort(n));else{const e=Jo.indexOf(n);~e&&(Jo.splice(e,1),sB(n))}},clear(){Jo=[],oy.clear()}};function Rle(){oy.forEach(iB),oy.clear(),tn(nM)}function iB(n){Jo.includes(n)||sB(n)}function sB(n){Jo.splice(Ple(Jo,e=>e.priority>n.priority),0,n)}function nM(n){const e=sb;for(let t=0;t<Jo.length;t++){const r=Jo[t];i1=r.priority,r.idle||(r2(r),r.advance(n),r.idle||e.push(r))}return i1=0,sb=Jo,sb.length=0,Jo=e,Jo.length>0}function Ple(n,e){const t=n.findIndex(e);return t<0?n.length:t}const Ile={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},$a="[-+]?\\d*\\.?\\d+",s1=$a+"%";function lw(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}const Lle=new RegExp("rgb"+lw($a,$a,$a)),Nle=new RegExp("rgba"+lw($a,$a,$a,$a)),Ole=new RegExp("hsl"+lw($a,s1,s1)),Dle=new RegExp("hsla"+lw($a,s1,s1,$a)),kle=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Ule=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Fle=/^#([0-9a-fA-F]{6})$/,zle=/^#([0-9a-fA-F]{8})$/;function Ble(n){let e;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(e=Fle.exec(n))?parseInt(e[1]+"ff",16)>>>0:Vc&&Vc[n]!==void 0?Vc[n]:(e=Lle.exec(n))?(dp(e[1])<<24|dp(e[2])<<16|dp(e[3])<<8|255)>>>0:(e=Nle.exec(n))?(dp(e[1])<<24|dp(e[2])<<16|dp(e[3])<<8|iO(e[4]))>>>0:(e=kle.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=zle.exec(n))?parseInt(e[1],16)>>>0:(e=Ule.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Ole.exec(n))?(nO(rO(e[1]),tx(e[2]),tx(e[3]))|255)>>>0:(e=Dle.exec(n))?(nO(rO(e[1]),tx(e[2]),tx(e[3]))|iO(e[4]))>>>0:null}function ob(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function nO(n,e,t){const r=t<.5?t*(1+e):t+e-t*e,i=2*t-r,s=ob(i,r,n+1/3),o=ob(i,r,n),a=ob(i,r,n-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function dp(n){const e=parseInt(n,10);return e<0?0:e>255?255:e}function rO(n){return(parseFloat(n)%360+360)%360/360}function iO(n){const e=parseFloat(n);return e<0?0:e>1?255:Math.round(e*255)}function tx(n){const e=parseFloat(n);return e<0?0:e>100?1:e/100}function sO(n){let e=Ble(n);if(e===null)return n;e=e||0;let t=(e&4278190080)>>>24,r=(e&16711680)>>>16,i=(e&65280)>>>8,s=(e&255)/255;return`rgba(${t}, ${r}, ${i}, ${s})`}const Fy=(n,e,t)=>{if(mt.fun(n))return n;if(mt.arr(n))return Fy({range:n,output:e,extrapolate:t});if(mt.str(n.output[0]))return n2(n);const r=n,i=r.output,s=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(u=>u);return u=>{const c=$le(u,s);return Hle(u,s[c],s[c+1],i[c],i[c+1],l,o,a,r.map)}};function Hle(n,e,t,r,i,s,o,a,l){let u=l?l(n):n;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>t){if(a==="identity")return u;a==="clamp"&&(u=t)}return r===i?r:e===t?n<=e?r:i:(e===-1/0?u=-u:t===1/0?u=u-e:u=(u-e)/(t-e),u=s(u),r===-1/0?u=-u:i===1/0?u=u+r:u=u*(i-r)+r,u)}function $le(n,e){for(var t=1;t<e.length-1&&!(e[t]>=n);++t);return t-1}const Gle={linear:n=>n};function rM(){return rM=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},rM.apply(this,arguments)}const Wp=Symbol.for("FluidValue.get"),Od=Symbol.for("FluidValue.observers"),Ml=n=>!!(n&&n[Wp]),Xo=n=>n&&n[Wp]?n[Wp]():n,oO=n=>n[Od]||null;function Vle(n,e){n.eventObserved?n.eventObserved(e):n(e)}function o1(n,e){let t=n[Od];t&&t.forEach(r=>{Vle(r,e)})}class jle{constructor(e){if(this[Wp]=void 0,this[Od]=void 0,!e&&!(e=this.get))throw Error("Unknown getter");Wle(this,e)}}const Wle=(n,e)=>oB(n,Wp,e);function _v(n,e){if(n[Wp]){let t=n[Od];t||oB(n,Od,t=new Set),t.has(e)||(t.add(e),n.observerAdded&&n.observerAdded(t.size,e))}return e}function a1(n,e){let t=n[Od];if(t&&t.has(e)){const r=t.size-1;r?t.delete(e):n[Od]=null,n.observerRemoved&&n.observerRemoved(r,e)}}const oB=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),Nx=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,qle=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,aO=new RegExp(`(${Nx.source})(%|[a-z]+)`,"i"),Xle=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,uw=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,aB=n=>{const[e,t]=Yle(n);if(!e||t2())return n;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(t&&t.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(t);return i||n}else{if(t&&uw.test(t))return aB(t);if(t)return t}return n},Yle=n=>{const e=uw.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]};let ab;const Kle=(n,e,t,r,i)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(r)}, ${i})`,lB=n=>{ab||(ab=Vc?new RegExp(`(${Object.keys(Vc).join("|")})(?!\\w)`,"g"):/^\b$/);const e=n.output.map(s=>Xo(s).replace(uw,aB).replace(qle,sO).replace(ab,sO)),t=e.map(s=>s.match(Nx).map(Number)),i=t[0].map((s,o)=>t.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Fy(rM({},n,{output:s})));return s=>{var o;const a=!aO.test(e[0])&&((o=e.find(u=>aO.test(u)))==null?void 0:o.replace(Nx,""));let l=0;return e[0].replace(Nx,()=>`${i[l++](s)}${a||""}`).replace(Xle,Kle)}},i2="react-spring: ",uB=n=>{const e=n;let t=!1;if(typeof e!="function")throw new TypeError(`${i2}once requires a function parameter`);return(...r)=>{t||(e(...r),t=!0)}},Jle=uB(console.warn);function Zle(){Jle(`${i2}The "interpolate" function is deprecated in v9 (use "to" instead)`)}const Qle=uB(console.warn);function eue(){Qle(`${i2}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function cw(n){return mt.str(n)&&(n[0]=="#"||/\d/.test(n)||!t2()&&uw.test(n)||n in(Vc||{}))}const s2=t2()?Z.useEffect:Z.useLayoutEffect,tue=()=>{const n=Z.useRef(!1);return s2(()=>(n.current=!0,()=>{n.current=!1}),[]),n};function cB(){const n=Z.useState()[1],e=tue();return()=>{e.current&&n(Math.random())}}function nue(n,e){const[t]=Z.useState(()=>({inputs:e,result:n()})),r=Z.useRef(),i=r.current;let s=i;return s?e&&s.inputs&&rue(e,s.inputs)||(s={inputs:e,result:n()}):s=t,Z.useEffect(()=>{r.current=s,i==t&&(t.inputs=t.result=void 0)},[s]),s.result}function rue(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}const fB=n=>Z.useEffect(n,iue),iue=[];function lO(n){const e=Z.useRef();return Z.useEffect(()=>{e.current=n}),e.current}const zy=Symbol.for("Animated:node"),sue=n=>!!n&&n[zy]===n,bl=n=>n&&n[zy],o2=(n,e)=>Ale(n,zy,e),fw=n=>n&&n[zy]&&n[zy].getPayload();class dB{constructor(){this.payload=void 0,o2(this,this)}getPayload(){return this.payload||[]}}class lm extends dB{constructor(e){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=e,mt.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new lm(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return mt.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,mt.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}class qp extends lm{constructor(e){super(0),this._string=null,this._toString=void 0,this._toString=Fy({output:[e,e]})}static create(e){return new qp(e)}getValue(){let e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(mt.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=Fy({output:[this.getValue(),e]})),this._value=0,super.reset()}}const l1={dependencies:null};class a2 extends dB{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return Gu(this.source,(r,i)=>{sue(r)?t[i]=r.getValue(e):Ml(r)?t[i]=Xo(r):e||(t[i]=r)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&qn(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return Gu(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){l1.dependencies&&Ml(e)&&l1.dependencies.add(e);const t=fw(e);t&&qn(t,r=>this.add(r))}}class l2 extends a2{constructor(e){super(e)}static create(e){return new l2(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((r,i)=>r.setValue(e[i])).some(Boolean):(super.setValue(e.map(oue)),!0)}}function oue(n){return(cw(n)?qp:lm).create(n)}function iM(n){const e=bl(n);return e?e.constructor:mt.arr(n)?l2:cw(n)?qp:lm}function u1(){return u1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},u1.apply(this,arguments)}const uO=(n,e)=>{const t=!mt.fun(n)||n.prototype&&n.prototype.isReactComponent;return Z.forwardRef((r,i)=>{const s=Z.useRef(null),o=t&&Z.useCallback(y=>{s.current=uue(i,y)},[i]),[a,l]=lue(r,e),u=cB(),c=()=>{const y=s.current;if(t&&!y)return;(y?e.applyAnimatedValues(y,a.getValue(!0)):!1)===!1&&u()},d=new aue(c,l),h=Z.useRef();s2(()=>(h.current=d,qn(l,y=>_v(y,d)),()=>{h.current&&(qn(h.current.deps,y=>a1(y,h.current)),tn.cancel(h.current.update))})),Z.useEffect(c,[]),fB(()=>()=>{const y=h.current;qn(y.deps,E=>a1(E,y))});const g=e.getComponentProps(a.getValue());return Z.createElement(n,u1({},g,{ref:o}))})};class aue{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&tn.write(this.update)}}function lue(n,e){const t=new Set;return l1.dependencies=t,n.style&&(n=u1({},n,{style:e.createAnimatedStyle(n.style)})),n=new a2(n),l1.dependencies=null,[n,t]}function uue(n,e){return n&&(mt.fun(n)?n(e):n.current=e),e}const cO=Symbol.for("AnimatedComponent"),cue=(n,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=i=>new a2(i),getComponentProps:r=i=>i}={})=>{const i={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:r},s=o=>{const a=fO(o)||"Anonymous";return mt.str(o)?o=s[o]||(s[o]=uO(o,i)):o=o[cO]||(o[cO]=uO(o,i)),o.displayName=`Animated(${a})`,o};return Gu(n,(o,a)=>{mt.arr(n)&&(a=fO(o)),s[a]=s(o)}),{animated:s}},fO=n=>mt.str(n)?n:n&&mt.str(n.displayName)?n.displayName:mt.fun(n)&&n.name||null;function zi(){return zi=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},zi.apply(this,arguments)}function ld(n,...e){return mt.fun(n)?n(...e):n}const ay=(n,e)=>n===!0||!!(e&&n&&(mt.fun(n)?n(e):Zo(n).includes(e))),hB=(n,e)=>mt.obj(n)?e&&n[e]:n,pB=(n,e)=>n.default===!0?n[e]:n.default?n.default[e]:void 0,fue=n=>n,u2=(n,e=fue)=>{let t=due;n.default&&n.default!==!0&&(n=n.default,t=Object.keys(n));const r={};for(const i of t){const s=e(n[i],i);mt.und(s)||(r[i]=s)}return r},due=["config","onProps","onStart","onChange","onPause","onResume","onRest"],hue={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function pue(n){const e={};let t=0;if(Gu(n,(r,i)=>{hue[i]||(e[i]=r,t++)}),t)return e}function mB(n){const e=pue(n);if(e){const t={to:e};return Gu(n,(r,i)=>i in e||(t[i]=r)),t}return zi({},n)}function By(n){return n=Xo(n),mt.arr(n)?n.map(By):cw(n)?Ul.createStringInterpolator({range:[0,1],output:[n,n]})(1):n}function mue(n){for(const e in n)return!0;return!1}function sM(n){return mt.fun(n)||mt.arr(n)&&mt.obj(n[0])}function gue(n,e){var t;(t=n.ref)==null||t.delete(n),e==null||e.delete(n)}function yue(n,e){if(e&&n.ref!==e){var t;(t=n.ref)==null||t.delete(n),e.add(n),n.ref=e}}const vue={default:{tension:170,friction:26}},oM=zi({},vue.default,{mass:1,damping:1,easing:Gle.linear,clamp:!1});class _ue{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,oM)}}function xue(n,e,t){t&&(t=zi({},t),dO(t,e),e=zi({},t,e)),dO(n,e),Object.assign(n,e);for(const o in oM)n[o]==null&&(n[o]=oM[o]);let{mass:r,frequency:i,damping:s}=n;return mt.und(i)||(i<.01&&(i=.01),s<0&&(s=0),n.tension=Math.pow(2*Math.PI/i,2)*r,n.friction=4*Math.PI*s*r/i),n}function dO(n,e){if(!mt.und(e.decay))n.duration=void 0;else{const t=!mt.und(e.tension)||!mt.und(e.friction);(t||!mt.und(e.frequency)||!mt.und(e.damping)||!mt.und(e.mass))&&(n.duration=void 0,n.decay=void 0),t&&(n.frequency=void 0)}}const hO=[];class wue{constructor(){this.changed=!1,this.values=hO,this.toValues=null,this.fromValues=hO,this.to=void 0,this.from=void 0,this.config=new _ue,this.immediate=!1}}function gB(n,{key:e,props:t,defaultProps:r,state:i,actions:s}){return new Promise((o,a)=>{var l;let u,c,d=ay((l=t.cancel)!=null?l:r==null?void 0:r.cancel,e);if(d)y();else{mt.und(t.pause)||(i.paused=ay(t.pause,e));let E=r==null?void 0:r.pause;E!==!0&&(E=i.paused||ay(E,e)),u=ld(t.delay||0,e),E?(i.resumeQueue.add(g),s.pause()):(s.resume(),g())}function h(){i.resumeQueue.add(g),i.timeouts.delete(c),c.cancel(),u=c.time-tn.now()}function g(){u>0&&!Ul.skipAnimation?(i.delayed=!0,c=tn.setTimeout(y,u),i.pauseQueue.add(h),i.timeouts.add(c)):y()}function y(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(h),i.timeouts.delete(c),n<=(i.cancelId||0)&&(d=!0);try{s.start(zi({},t,{callId:n,cancel:d}),o)}catch(E){a(E)}}})}const c2=(n,e)=>e.length==1?e[0]:e.some(t=>t.cancelled)?Op(n.get()):e.every(t=>t.noop)?yB(n.get()):Ba(n.get(),e.every(t=>t.finished)),yB=n=>({value:n,noop:!0,finished:!0,cancelled:!1}),Ba=(n,e,t=!1)=>({value:n,finished:e,cancelled:t}),Op=n=>({value:n,cancelled:!0,finished:!1});function vB(n,e,t,r){const{callId:i,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=t;return!s&&n===a&&!e.reset?l:t.promise=(async()=>{t.asyncId=i,t.asyncTo=n;const u=u2(e,(_,m)=>m==="onRest"?void 0:_);let c,d;const h=new Promise((_,m)=>(c=_,d=m)),g=_=>{const m=i<=(t.cancelId||0)&&Op(r)||i!==t.asyncId&&Ba(r,!1);if(m)throw _.result=m,d(_),_},y=(_,m)=>{const v=new pO,S=new mO;return(async()=>{if(Ul.skipAnimation)throw Hy(t),S.result=Ba(r,!1),d(S),S;g(v);const T=mt.obj(_)?zi({},_):zi({},m,{to:_});T.parentId=i,Gu(u,(A,R)=>{mt.und(T[R])&&(T[R]=A)});const M=await r.start(T);return g(v),t.paused&&await new Promise(A=>{t.resumeQueue.add(A)}),M})()};let E;if(Ul.skipAnimation)return Hy(t),Ba(r,!1);try{let _;mt.arr(n)?_=(async m=>{for(const v of m)await y(v)})(n):_=Promise.resolve(n(y,r.stop.bind(r))),await Promise.all([_.then(c),h]),E=Ba(r.get(),!0,!1)}catch(_){if(_ instanceof pO)E=_.result;else if(_ instanceof mO)E=_.result;else throw _}finally{i==t.asyncId&&(t.asyncId=s,t.asyncTo=s?a:void 0,t.promise=s?l:void 0)}return mt.fun(o)&&tn.batchedUpdates(()=>{o(E,r,r.item)}),E})()}function Hy(n,e){sy(n.timeouts,t=>t.cancel()),n.pauseQueue.clear(),n.resumeQueue.clear(),n.asyncId=n.asyncTo=n.promise=void 0,e&&(n.cancelId=e)}class pO extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}}class mO extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}}const aM=n=>n instanceof f2;let Sue=1;class f2 extends jle{constructor(...e){super(...e),this.id=Sue++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=bl(this);return e&&e.getValue()}to(...e){return Ul.to(this,e)}interpolate(...e){return Zle(),Ul.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){o1(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||aw.sort(this),o1(this,{type:"priority",parent:this,priority:e})}}const Dd=Symbol.for("SpringPhase"),_B=1,xB=2,wB=4,lb=n=>(n[Dd]&_B)>0,Oc=n=>(n[Dd]&xB)>0,Ag=n=>(n[Dd]&wB)>0,gO=(n,e)=>e?n[Dd]|=xB|_B:n[Dd]&=-3,yO=(n,e)=>e?n[Dd]|=wB:n[Dd]&=-5;class Eue extends f2{constructor(e,t){if(super(),this.key=void 0,this.animation=new wue,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!mt.und(e)||!mt.und(t)){const r=mt.obj(e)?zi({},e):zi({},t,{from:e});mt.und(r.default)&&(r.default=!0),this.start(r)}}get idle(){return!(Oc(this)||this._state.asyncTo)||Ag(this)}get goal(){return Xo(this.animation.to)}get velocity(){const e=bl(this);return e instanceof lm?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return lb(this)}get isAnimating(){return Oc(this)}get isPaused(){return Ag(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,r=!1;const i=this.animation;let{config:s,toValues:o}=i;const a=fw(i.to);!a&&Ml(i.to)&&(o=Zo(Xo(i.to))),i.values.forEach((c,d)=>{if(c.done)return;const h=c.constructor==qp?1:a?a[d].lastPosition:o[d];let g=i.immediate,y=h;if(!g){if(y=c.lastPosition,s.tension<=0){c.done=!0;return}let E=c.elapsedTime+=e;const _=i.fromValues[d],m=c.v0!=null?c.v0:c.v0=mt.arr(s.velocity)?s.velocity[d]:s.velocity;let v;const S=s.precision||(_==h?.005:Math.min(1,Math.abs(h-_)*.001));if(mt.und(s.duration))if(s.decay){const T=s.decay===!0?.998:s.decay,M=Math.exp(-(1-T)*E);y=_+m/(1-T)*(1-M),g=Math.abs(c.lastPosition-y)<=S,v=m*M}else{v=c.lastVelocity==null?m:c.lastVelocity;const T=s.restVelocity||S/10,M=s.clamp?0:s.bounce,A=!mt.und(M),R=_==h?c.v0>0:_<h;let O,I=!1;const k=1,G=Math.ceil(e/k);for(let $=0;$<G&&(O=Math.abs(v)>T,!(!O&&(g=Math.abs(h-y)<=S,g)));++$){A&&(I=y==h||y>h==R,I&&(v=-v*M,y=h));const U=-s.tension*1e-6*(y-h),ee=-s.friction*.001*v,re=(U+ee)/s.mass;v=v+re*k,y=y+v*k}}else{let T=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,E=c.elapsedTime+=e)),T=(s.progress||0)+E/this._memoizedDuration,T=T>1?1:T<0?0:T,c.durationProgress=T),y=_+s.easing(T)*(h-_),v=(y-c.lastPosition)/e,g=T==1}c.lastVelocity=v,Number.isNaN(y)&&(console.warn("Got NaN while animating:",this),g=!0)}a&&!a[d].done&&(g=!1),g?c.done=!0:t=!1,c.setValue(y,s.round)&&(r=!0)});const l=bl(this),u=l.getValue();if(t){const c=Xo(i.to);(u!==c||r)&&!s.decay?(l.setValue(c),this._onChange(c)):r&&s.decay&&this._onChange(u),this._stop()}else r&&this._onChange(u)}set(e){return tn.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Oc(this)){const{to:e,config:t}=this.animation;tn.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let r;return mt.und(e)?(r=this.queue||[],this.queue=[]):r=[mt.obj(e)?e:zi({},t,{to:e})],Promise.all(r.map(i=>this._update(i))).then(i=>c2(this,i))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),Hy(this._state,e&&this._lastCallId),tn.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:r,from:i}=e;r=mt.obj(r)?r[t]:r,(r==null||sM(r))&&(r=void 0),i=mt.obj(i)?i[t]:i,i==null&&(i=void 0);const s={to:r,from:i};return lb(this)||(e.reverse&&([r,i]=[i,r]),i=Xo(i),mt.und(i)?bl(this)||this._set(r):this._set(i)),s}_update(e,t){let r=zi({},e);const{key:i,defaultProps:s}=this;r.default&&Object.assign(s,u2(r,(l,u)=>/^on/.test(u)?hB(l,i):l)),_O(this,r,"onProps"),Rg(this,"onProps",r,this);const o=this._prepareNode(r);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const a=this._state;return gB(++this._lastCallId,{key:i,props:r,defaultProps:s,state:a,actions:{pause:()=>{Ag(this)||(yO(this,!0),Xg(a.pauseQueue),Rg(this,"onPause",Ba(this,Cg(this,this.animation.to)),this))},resume:()=>{Ag(this)&&(yO(this,!1),Oc(this)&&this._resume(),Xg(a.resumeQueue),Rg(this,"onResume",Ba(this,Cg(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then(l=>{if(r.loop&&l.finished&&!(t&&l.noop)){const u=SB(r);if(u)return this._update(u,!0)}return l})}_merge(e,t,r){if(t.cancel)return this.stop(!0),r(Op(this));const i=!mt.und(e.to),s=!mt.und(e.from);if(i||s)if(t.callId>this._lastToId)this._lastToId=t.callId;else return r(Op(this));const{key:o,defaultProps:a,animation:l}=this,{to:u,from:c}=l;let{to:d=u,from:h=c}=e;s&&!i&&(!t.default||mt.und(d))&&(d=h),t.reverse&&([d,h]=[h,d]);const g=!Pu(h,c);g&&(l.from=h),h=Xo(h);const y=!Pu(d,u);y&&this._focus(d);const E=sM(t.to),{config:_}=l,{decay:m,velocity:v}=_;(i||s)&&(_.velocity=0),t.config&&!E&&xue(_,ld(t.config,o),t.config!==a.config?ld(a.config,o):void 0);let S=bl(this);if(!S||mt.und(d))return r(Ba(this,!0));const T=mt.und(t.reset)?s&&!t.default:!mt.und(h)&&ay(t.reset,o),M=T?h:this.get(),A=By(d),R=mt.num(A)||mt.arr(A)||cw(A),O=!E&&(!R||ay(a.immediate||t.immediate,o));if(y){const $=iM(d);if($!==S.constructor)if(O)S=this._set(A);else throw Error(`Cannot animate between ${S.constructor.name} and ${$.name}, as the "to" prop suggests`)}const I=S.constructor;let k=Ml(d),G=!1;if(!k){const $=T||!lb(this)&&g;(y||$)&&(G=Pu(By(M),A),k=!G),(!Pu(l.immediate,O)&&!O||!Pu(_.decay,m)||!Pu(_.velocity,v))&&(k=!0)}if(G&&Oc(this)&&(l.changed&&!T?k=!0:k||this._stop(u)),!E&&((k||Ml(u))&&(l.values=S.getPayload(),l.toValues=Ml(d)?null:I==qp?[1]:Zo(A)),l.immediate!=O&&(l.immediate=O,!O&&!T&&this._set(u)),k)){const{onRest:$}=l;qn(Tue,ee=>_O(this,t,ee));const U=Ba(this,Cg(this,u));Xg(this._pendingCalls,U),this._pendingCalls.add(r),l.changed&&tn.batchedUpdates(()=>{l.changed=!T,$==null||$(U,this),T?ld(a.onRest,U):l.onStart==null||l.onStart(U,this)})}T&&this._set(M),E?r(vB(t.to,t,this._state,this)):k?this._start():Oc(this)&&!y?this._pendingCalls.add(r):r(yB(M))}_focus(e){const t=this.animation;e!==t.to&&(oO(this)&&this._detach(),t.to=e,oO(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;Ml(t)&&(_v(t,this),aM(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;Ml(e)&&a1(e,this)}_set(e,t=!0){const r=Xo(e);if(!mt.und(r)){const i=bl(this);if(!i||!Pu(r,i.getValue())){const s=iM(r);!i||i.constructor!=s?o2(this,s.create(r)):i.setValue(r),i&&tn.batchedUpdates(()=>{this._onChange(r,t)})}}return bl(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Rg(this,"onStart",Ba(this,Cg(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),ld(this.animation.onChange,e,this)),ld(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;bl(this).reset(Xo(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),Oc(this)||(gO(this,!0),Ag(this)||this._resume())}_resume(){Ul.skipAnimation?this.finish():aw.start(this)}_stop(e,t){if(Oc(this)){gO(this,!1);const r=this.animation;qn(r.values,s=>{s.done=!0}),r.toValues&&(r.onChange=r.onPause=r.onResume=void 0),o1(this,{type:"idle",parent:this});const i=t?Op(this.get()):Ba(this.get(),Cg(this,e??r.to));Xg(this._pendingCalls,i),r.changed&&(r.changed=!1,Rg(this,"onRest",i,this))}}}function Cg(n,e){const t=By(e),r=By(n.get());return Pu(r,t)}function SB(n,e=n.loop,t=n.to){let r=ld(e);if(r){const i=r!==!0&&mB(r),s=(i||n).reverse,o=!i||i.reset;return $y(zi({},n,{loop:e,default:!1,pause:void 0,to:!s||sM(t)?t:void 0,from:o?n.from:void 0,reset:o},i))}}function $y(n){const{to:e,from:t}=n=mB(n),r=new Set;return mt.obj(e)&&vO(e,r),mt.obj(t)&&vO(t,r),n.keys=r.size?Array.from(r):null,n}function bue(n){const e=$y(n);return mt.und(e.default)&&(e.default=u2(e)),e}function vO(n,e){Gu(n,(t,r)=>t!=null&&e.add(r))}const Tue=["onStart","onRest","onChange","onPause","onResume"];function _O(n,e,t){n.animation[t]=e[t]!==pB(e,t)?hB(e[t],n.key):void 0}function Rg(n,e,...t){var r,i,s,o;(r=(i=n.animation)[e])==null||r.call(i,...t),(s=(o=n.defaultProps)[e])==null||s.call(o,...t)}const Mue=["onStart","onChange","onRest"];let Aue=1;class Cue{constructor(e,t){this.id=Aue++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start(zi({default:!0},e))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,r)=>e[r]=t.get()),e}set(e){for(const t in e){const r=e[t];mt.und(r)||this.springs[t].set(r)}}update(e){return e&&this.queue.push($y(e)),this}start(e){let{queue:t}=this;return e?t=Zo(e).map($y):this.queue=[],this._flush?this._flush(this,t):(AB(this,t),lM(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const r=this.springs;qn(Zo(t),i=>r[i].stop(!!e))}else Hy(this._state,this._lastAsyncId),this.each(r=>r.stop(!!e));return this}pause(e){if(mt.und(e))this.start({pause:!0});else{const t=this.springs;qn(Zo(e),r=>t[r].pause())}return this}resume(e){if(mt.und(e))this.start({pause:!1});else{const t=this.springs;qn(Zo(e),r=>t[r].resume())}return this}each(e){Gu(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:r}=this._events,i=this._active.size>0,s=this._changed.size>0;(i&&!this._started||s&&!this._started)&&(this._started=!0,sy(e,([l,u])=>{u.value=this.get(),l(u,this,this._item)}));const o=!i&&this._started,a=s||o&&r.size?this.get():null;s&&t.size&&sy(t,([l,u])=>{u.value=a,l(u,this,this._item)}),o&&(this._started=!1,sy(r,([l,u])=>{u.value=a,l(u,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;tn.onFrame(this._onFrame)}}function lM(n,e){return Promise.all(e.map(t=>EB(n,t))).then(t=>c2(n,t))}async function EB(n,e,t){const{keys:r,to:i,from:s,loop:o,onRest:a,onResolve:l}=e,u=mt.obj(e.default)&&e.default;o&&(e.loop=!1),i===!1&&(e.to=null),s===!1&&(e.from=null);const c=mt.arr(i)||mt.fun(i)?i:void 0;c?(e.to=void 0,e.onRest=void 0,u&&(u.onRest=void 0)):qn(Mue,E=>{const _=e[E];if(mt.fun(_)){const m=n._events[E];e[E]=({finished:v,cancelled:S})=>{const T=m.get(_);T?(v||(T.finished=!1),S&&(T.cancelled=!0)):m.set(_,{value:null,finished:v||!1,cancelled:S||!1})},u&&(u[E]=e[E])}});const d=n._state;e.pause===!d.paused?(d.paused=e.pause,Xg(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);const h=(r||Object.keys(n.springs)).map(E=>n.springs[E].start(e)),g=e.cancel===!0||pB(e,"cancel")===!0;(c||g&&d.asyncId)&&h.push(gB(++n._lastAsyncId,{props:e,state:d,actions:{pause:tM,resume:tM,start(E,_){g?(Hy(d,n._lastAsyncId),_(Op(n))):(E.onRest=a,_(vB(c,E,d,n)))}}})),d.paused&&await new Promise(E=>{d.resumeQueue.add(E)});const y=c2(n,await Promise.all(h));if(o&&y.finished&&!(t&&y.noop)){const E=SB(e,o,i);if(E)return AB(n,[E]),EB(n,E,!0)}return l&&tn.batchedUpdates(()=>l(y,n,n.item)),y}function xO(n,e){const t=zi({},n.springs);return e&&qn(Zo(e),r=>{mt.und(r.keys)&&(r=$y(r)),mt.obj(r.to)||(r=zi({},r,{to:void 0})),MB(t,r,i=>TB(i))}),bB(n,t),t}function bB(n,e){Gu(e,(t,r)=>{n.springs[r]||(n.springs[r]=t,_v(t,n))})}function TB(n,e){const t=new Eue;return t.key=n,e&&_v(t,e),t}function MB(n,e,t){e.keys&&qn(e.keys,r=>{(n[r]||(n[r]=t(r)))._prepareNode(e)})}function AB(n,e){qn(e,t=>{MB(n.springs,t,r=>TB(r,n))})}function Rue(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}const Pue=["children"],dw=n=>{let{children:e}=n,t=Rue(n,Pue);const r=Z.useContext(c1),i=t.pause||!!r.pause,s=t.immediate||!!r.immediate;t=nue(()=>({pause:i,immediate:s}),[i,s]);const{Provider:o}=c1;return Z.createElement(o,{value:t},e)},c1=Iue(dw,{});dw.Provider=c1.Provider;dw.Consumer=c1.Consumer;function Iue(n,e){return Object.assign(n,Z.createContext(e)),n.Provider._context=n,n.Consumer._context=n,n}const Lue=()=>{const n=[],e=function(i){eue();const s=[];return qn(n,(o,a)=>{if(mt.und(i))s.push(o.start());else{const l=t(i,o,a);l&&s.push(o.start(l))}}),s};e.current=n,e.add=function(r){n.includes(r)||n.push(r)},e.delete=function(r){const i=n.indexOf(r);~i&&n.splice(i,1)},e.pause=function(){return qn(n,r=>r.pause(...arguments)),this},e.resume=function(){return qn(n,r=>r.resume(...arguments)),this},e.set=function(r){qn(n,i=>i.set(r))},e.start=function(r){const i=[];return qn(n,(s,o)=>{if(mt.und(r))i.push(s.start());else{const a=this._getProps(r,s,o);a&&i.push(s.start(a))}}),i},e.stop=function(){return qn(n,r=>r.stop(...arguments)),this},e.update=function(r){return qn(n,(i,s)=>i.update(this._getProps(r,i,s))),this};const t=function(i,s,o){return mt.fun(i)?i(o,s):i};return e._getProps=t,e};function Nue(n,e,t){const r=mt.fun(e)&&e;r&&!t&&(t=[]);const i=Z.useMemo(()=>r||arguments.length==3?Lue():void 0,[]),s=Z.useRef(0),o=cB(),a=Z.useMemo(()=>({ctrls:[],queue:[],flush(m,v){const S=xO(m,v);return s.current>0&&!a.queue.length&&!Object.keys(S).some(M=>!m.springs[M])?lM(m,v):new Promise(M=>{bB(m,S),a.queue.push(()=>{M(lM(m,v))}),o()})}}),[]),l=Z.useRef([...a.ctrls]),u=[],c=lO(n)||0;Z.useMemo(()=>{qn(l.current.slice(n,c),m=>{gue(m,i),m.stop(!0)}),l.current.length=n,d(c,n)},[n]),Z.useMemo(()=>{d(0,Math.min(c,n))},t);function d(m,v){for(let S=m;S<v;S++){const T=l.current[S]||(l.current[S]=new Cue(null,a.flush)),M=r?r(S,T):e[S];M&&(u[S]=bue(M))}}const h=l.current.map((m,v)=>xO(m,u[v])),g=Z.useContext(dw),y=lO(g),E=g!==y&&mue(g);s2(()=>{s.current++,a.ctrls=l.current;const{queue:m}=a;m.length&&(a.queue=[],qn(m,v=>v())),qn(l.current,(v,S)=>{i==null||i.add(v),E&&v.start({default:g});const T=u[S];T&&(yue(v,T.ref),v.ref?v.queue.push(T):v.start(T))})}),fB(()=>()=>{qn(a.ctrls,m=>m.stop(!0))});const _=h.map(m=>zi({},m));return i?[_,i]:_}function bo(n,e){const t=mt.fun(n),[[r],i]=Nue(1,t?n:[n],t?e||[]:e);return t||arguments.length==2?[r,i]:r}let wO;(function(n){n.MOUNT="mount",n.ENTER="enter",n.UPDATE="update",n.LEAVE="leave"})(wO||(wO={}));class Oue extends f2{constructor(e,t){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=e,this.calc=Fy(...t);const r=this._get(),i=iM(r);o2(this,i.create(r))}advance(e){const t=this._get(),r=this.get();Pu(t,r)||(bl(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&SO(this._active)&&ub(this)}_get(){const e=mt.arr(this.source)?this.source.map(Xo):Zo(Xo(this.source));return this.calc(...e)}_start(){this.idle&&!SO(this._active)&&(this.idle=!1,qn(fw(this),e=>{e.done=!1}),Ul.skipAnimation?(tn.batchedUpdates(()=>this.advance()),ub(this)):aw.start(this))}_attach(){let e=1;qn(Zo(this.source),t=>{Ml(t)&&_v(t,this),aM(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){qn(Zo(this.source),e=>{Ml(e)&&a1(e,this)}),this._active.clear(),ub(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=Zo(this.source).reduce((t,r)=>Math.max(t,(aM(r)?r.priority:0)+1),0))}}function Due(n){return n.idle!==!1}function SO(n){return!n.size||Array.from(n).every(Due)}function ub(n){n.idle||(n.idle=!0,qn(fw(n),e=>{e.done=!0}),o1(n,{type:"idle",parent:n}))}Ul.assign({createStringInterpolator:lB,to:(n,e)=>new Oue(n,e)});const kue=["primitive"].concat(Object.keys(OF).filter(n=>/^[A-Z]/.test(n)).map(n=>n[0].toLowerCase()+n.slice(1)));Ul.assign({createStringInterpolator:lB,colors:Ile,frameLoop:"demand"});Ite(()=>{tn.advance()});const Uue=cue(kue,{applyAnimatedValues:id}),Wr=Uue.animated,nx=(n,e)=>{const t=n[0].index!==null,r=new Set(Object.keys(n[0].attributes)),i=new Set(Object.keys(n[0].morphAttributes)),s={},o={},a=n[0].morphTargetsRelative,l=new un;let u=0;if(n.forEach((c,d)=>{let h=0;if(t!==(c.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let g in c.attributes){if(!r.has(g))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+'. All geometries must have compatible attributes; make sure "'+g+'" attribute exists among all geometries, or in none of them.'),null;s[g]===void 0&&(s[g]=[]),s[g].push(c.attributes[g]),h++}if(h!==r.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". Make sure all geometries have the same number of attributes."),null;if(a!==c.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let g in c.morphAttributes){if(!i.has(g))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+".  .morphAttributes must be consistent throughout all geometries."),null;o[g]===void 0&&(o[g]=[]),o[g].push(c.morphAttributes[g])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(c.userData),e){let g;if(c.index)g=c.index.count;else if(c.attributes.position!==void 0)g=c.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". The geometry must have either an index or a position attribute"),null;l.addGroup(u,g,d),u+=g}}),t){let c=0;const d=[];n.forEach(h=>{const g=h.index;for(let y=0;y<g.count;++y)d.push(g.getX(y)+c);c+=h.attributes.position.count}),l.setIndex(d)}for(let c in s){const d=EO(s[c]);if(!d)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+c+" attribute."),null;l.setAttribute(c,d)}for(let c in o){const d=o[c][0].length;if(d===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[c]=[];for(let h=0;h<d;++h){const g=[];for(let E=0;E<o[c].length;++E)g.push(o[c][E][h]);const y=EO(g);if(!y)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+c+" morphAttribute."),null;l.morphAttributes[c].push(y)}}return l},EO=n=>{let e,t,r,i=0;if(n.forEach(s=>{if(e===void 0&&(e=s.array.constructor),e!==s.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=s.itemSize),t!==s.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(r===void 0&&(r=s.normalized),r!==s.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;i+=s.array.length}),e&&t){const s=new e(i);let o=0;return n.forEach(a=>{s.set(a.array,o),o+=a.array.length}),new Kn(s,t,r)}},cb=new av,fb=new de,hp=new de,Da=new de,Au=new de,vl=new de,Cu=new de,Ru=new de,Pg=new de,Ig=new de,Lg=new de,rx=new de,Ng=new de,Og=new de,Dg=new de;class bO{constructor(e,t,r){this.camera=e,this.scene=t,this.startPoint=new de,this.endPoint=new de,this.collection=[],this.deep=r||Number.MAX_VALUE}select(e,t){return this.startPoint=e||this.startPoint,this.endPoint=t||this.endPoint,this.collection=[],this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum(cb,this.scene),this.collection}updateFrustum(e,t){if(e=e||this.startPoint,t=t||this.endPoint,e.x===t.x&&(t.x+=Number.EPSILON),e.y===t.y&&(t.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera){hp.copy(e),hp.x=Math.min(e.x,t.x),hp.y=Math.max(e.y,t.y),t.x=Math.max(e.x,t.x),t.y=Math.min(e.y,t.y),Da.setFromMatrixPosition(this.camera.matrixWorld),Au.copy(hp),vl.set(t.x,hp.y,0),Cu.copy(t),Ru.set(hp.x,t.y,0),Au.unproject(this.camera),vl.unproject(this.camera),Cu.unproject(this.camera),Ru.unproject(this.camera),Ng.copy(Au).sub(Da),Og.copy(vl).sub(Da),Dg.copy(Cu).sub(Da),Ng.normalize(),Og.normalize(),Dg.normalize(),Ng.multiplyScalar(this.deep),Og.multiplyScalar(this.deep),Dg.multiplyScalar(this.deep),Ng.add(Da),Og.add(Da),Dg.add(Da);var r=cb.planes;r[0].setFromCoplanarPoints(Da,Au,vl),r[1].setFromCoplanarPoints(Da,vl,Cu),r[2].setFromCoplanarPoints(Cu,Ru,Da),r[3].setFromCoplanarPoints(Ru,Au,Da),r[4].setFromCoplanarPoints(vl,Cu,Ru),r[5].setFromCoplanarPoints(Dg,Og,Ng),r[5].normal.multiplyScalar(-1)}else if(this.camera.isOrthographicCamera){const i=Math.min(e.x,t.x),s=Math.max(e.y,t.y),o=Math.max(e.x,t.x),a=Math.min(e.y,t.y);Au.set(i,s,-1),vl.set(o,s,-1),Cu.set(o,a,-1),Ru.set(i,a,-1),Pg.set(i,s,1),Ig.set(o,s,1),Lg.set(o,a,1),rx.set(i,a,1),Au.unproject(this.camera),vl.unproject(this.camera),Cu.unproject(this.camera),Ru.unproject(this.camera),Pg.unproject(this.camera),Ig.unproject(this.camera),Lg.unproject(this.camera),rx.unproject(this.camera);var r=cb.planes;r[0].setFromCoplanarPoints(Au,Pg,Ig),r[1].setFromCoplanarPoints(vl,Ig,Lg),r[2].setFromCoplanarPoints(Lg,rx,Ru),r[3].setFromCoplanarPoints(rx,Pg,Au),r[4].setFromCoplanarPoints(vl,Cu,Ru),r[5].setFromCoplanarPoints(Lg,Ig,Pg),r[5].normal.multiplyScalar(-1)}else console.error("THREE.SelectionBox: Unsupported camera type.")}searchChildInFrustum(e,t){if((t.isMesh||t.isLine||t.isPoints)&&t.material!==void 0&&(t.geometry.boundingSphere===null&&t.geometry.computeBoundingSphere(),fb.copy(t.geometry.boundingSphere.center),fb.applyMatrix4(t.matrixWorld),e.containsPoint(fb)&&this.collection.push(t)),t.children.length>0)for(let r=0;r<t.children.length;r++)this.searchChildInFrustum(e,t.children[r])}}const CB=Z.forwardRef(function({children:e,follow:t=!0,lockX:r=!1,lockY:i=!1,lockZ:s=!1,...o},a){const l=Z.useRef(null),u=Z.useRef(null),c=new Qi;return Q1(({camera:d})=>{if(!t||!u.current)return;const h=u.current.rotation.clone();u.current.updateMatrix(),u.current.updateWorldMatrix(!1,!1),u.current.getWorldQuaternion(c),d.getWorldQuaternion(l.current.quaternion).premultiply(c.invert()),r&&(u.current.rotation.x=h.x),i&&(u.current.rotation.y=h.y),s&&(u.current.rotation.z=h.z)}),Z.useImperativeHandle(a,()=>u.current,[]),Z.createElement("group",Td({ref:u,matrixAutoUpdate:!1,matrixWorldAutoUpdate:!1},o),Z.createElement("group",{ref:l},e))});function Fue(){var n=Object.create(null);function e(i,s){var o=i.id,a=i.name,l=i.dependencies;l===void 0&&(l=[]);var u=i.init;u===void 0&&(u=function(){});var c=i.getTransferables;if(c===void 0&&(c=null),!n[o])try{l=l.map(function(h){return h&&h.isWorkerModule&&(e(h,function(g){if(g instanceof Error)throw g}),h=n[h.id].value),h}),u=r("<"+a+">.init",u),c&&(c=r("<"+a+">.getTransferables",c));var d=null;typeof u=="function"?d=u.apply(void 0,l):console.error("worker module init function failed to rehydrate"),n[o]={id:o,value:d,getTransferables:c},s(d)}catch(h){h&&h.noLog||console.error(h),s(h)}}function t(i,s){var o,a=i.id,l=i.args;(!n[a]||typeof n[a].value!="function")&&s(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var u=(o=n[a]).value.apply(o,l);u&&typeof u.then=="function"?u.then(c,function(d){return s(d instanceof Error?d:new Error(""+d))}):c(u)}catch(d){s(d)}function c(d){try{var h=n[a].getTransferables&&n[a].getTransferables(d);(!h||!Array.isArray(h)||!h.length)&&(h=void 0),s(d,h)}catch(g){console.error(g),s(g)}}}function r(i,s){var o=void 0;self.troikaDefine=function(l){return o=l};var a=URL.createObjectURL(new Blob(["/** "+i.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(l){console.error(l)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(i){var s=i.data,o=s.messageId,a=s.action,l=s.data;try{a==="registerModule"&&e(l,function(u){u instanceof Error?postMessage({messageId:o,success:!1,error:u.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof u=="function"}})}),a==="callModule"&&t(l,function(u,c){u instanceof Error?postMessage({messageId:o,success:!1,error:u.message}):postMessage({messageId:o,success:!0,result:u},c||void 0)})}catch(u){postMessage({messageId:o,success:!1,error:u.stack})}})}function zue(n){var e=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return e._getInitResult().then(function(i){if(typeof i=="function")return i.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,r=n.init;t=Array.isArray(t)?t.map(function(s){return s&&s._getInitResult?s._getInitResult():s}):[];var i=Promise.all(t).then(function(s){return r.apply(null,s)});return e._getInitResult=function(){return i},i},e}var RB=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return RB=function(){return n},n},Bue=0,Hue=0,db=!1,ly=Object.create(null),uy=Object.create(null),uM=Object.create(null);function xv(n){if((!n||typeof n.init!="function")&&!db)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,r=n.getTransferables,i=n.workerId;if(!RB())return zue(n);i==null&&(i="#default");var s="workerModule"+ ++Bue,o=n.name||s,a=null;e=e&&e.map(function(u){return typeof u=="function"&&!u.workerModuleData&&(db=!0,u=xv({workerId:i,name:"<"+o+"> function dependency: "+u.name,init:`function(){return (
`+Ox(u)+`
)}`}),db=!1),u&&u.workerModuleData&&(u=u.workerModuleData),u});function l(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];if(!a){a=TO(i,"registerModule",l.workerModuleData);var d=function(){a=null,uy[i].delete(d)};(uy[i]||(uy[i]=new Set)).add(d)}return a.then(function(h){var g=h.isCallable;if(g)return TO(i,"callModule",{id:s,args:u});throw new Error("Worker module function was called but `init` did not return a callable function")})}return l.workerModuleData={isWorkerModule:!0,id:s,name:o,dependencies:e,init:Ox(t),getTransferables:r&&Ox(r)},l}function $ue(n){uy[n]&&uy[n].forEach(function(e){e()}),ly[n]&&(ly[n].terminate(),delete ly[n])}function Ox(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function Gue(n){var e=ly[n];if(!e){var t=Ox(Fue);e=ly[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(r){var i=r.data,s=i.messageId,o=uM[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete uM[s],o(i)}}return e}function TO(n,e,t){return new Promise(function(r,i){var s=++Hue;uM[s]=function(o){o.success?r(o.result):i(new Error("Error in worker "+e+" call: "+o.error))},Gue(n).postMessage({messageId:s,action:e,data:t})})}function PB(){var n=function(e){function t(K,F,L,z,Y,B,J,le){var pe=1-J;le.x=pe*pe*K+2*pe*J*L+J*J*Y,le.y=pe*pe*F+2*pe*J*z+J*J*B}function r(K,F,L,z,Y,B,J,le,pe,he){var Ee=1-pe;he.x=Ee*Ee*Ee*K+3*Ee*Ee*pe*L+3*Ee*pe*pe*Y+pe*pe*pe*J,he.y=Ee*Ee*Ee*F+3*Ee*Ee*pe*z+3*Ee*pe*pe*B+pe*pe*pe*le}function i(K,F){for(var L=/([MLQCZ])([^MLQCZ]*)/g,z,Y,B,J,le;z=L.exec(K);){var pe=z[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(he){return parseFloat(he)});switch(z[1]){case"M":J=Y=pe[0],le=B=pe[1];break;case"L":(pe[0]!==J||pe[1]!==le)&&F("L",J,le,J=pe[0],le=pe[1]);break;case"Q":{F("Q",J,le,J=pe[2],le=pe[3],pe[0],pe[1]);break}case"C":{F("C",J,le,J=pe[4],le=pe[5],pe[0],pe[1],pe[2],pe[3]);break}case"Z":(J!==Y||le!==B)&&F("L",J,le,Y,B);break}}}function s(K,F,L){L===void 0&&(L=16);var z={x:0,y:0};i(K,function(Y,B,J,le,pe,he,Ee,_e,te){switch(Y){case"L":F(B,J,le,pe);break;case"Q":{for(var j=B,ce=J,fe=1;fe<L;fe++)t(B,J,he,Ee,le,pe,fe/(L-1),z),F(j,ce,z.x,z.y),j=z.x,ce=z.y;break}case"C":{for(var ie=B,se=J,Ae=1;Ae<L;Ae++)r(B,J,he,Ee,_e,te,le,pe,Ae/(L-1),z),F(ie,se,z.x,z.y),ie=z.x,se=z.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,u={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function c(K,F){var L=K.getContext?K.getContext("webgl",u):K,z=l.get(L);if(!z){let Ee=function(ie){var se=B[ie];if(!se&&(se=B[ie]=L.getExtension(ie),!se))throw new Error(ie+" not supported");return se},_e=function(ie,se){var Ae=L.createShader(se);return L.shaderSource(Ae,ie),L.compileShader(Ae),Ae},te=function(ie,se,Ae,we){if(!J[ie]){var Re={},Le={},be=L.createProgram();L.attachShader(be,_e(se,L.VERTEX_SHADER)),L.attachShader(be,_e(Ae,L.FRAGMENT_SHADER)),L.linkProgram(be),J[ie]={program:be,transaction:function(ue){L.useProgram(be),ue({setUniform:function(ye,Fe){for(var ze=[],He=arguments.length-2;He-- >0;)ze[He]=arguments[He+2];var Ze=Le[Fe]||(Le[Fe]=L.getUniformLocation(be,Fe));L["uniform"+ye].apply(L,[Ze].concat(ze))},setAttribute:function(ye,Fe,ze,He,Ze){var Ke=Re[ye];Ke||(Ke=Re[ye]={buf:L.createBuffer(),loc:L.getAttribLocation(be,ye),data:null}),L.bindBuffer(L.ARRAY_BUFFER,Ke.buf),L.vertexAttribPointer(Ke.loc,Fe,L.FLOAT,!1,0,0),L.enableVertexAttribArray(Ke.loc),Y?L.vertexAttribDivisor(Ke.loc,He):Ee("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(Ke.loc,He),Ze!==Ke.data&&(L.bufferData(L.ARRAY_BUFFER,Ze,ze),Ke.data=Ze)}})}}}J[ie].transaction(we)},j=function(ie,se){pe++;try{L.activeTexture(L.TEXTURE0+pe);var Ae=le[ie];Ae||(Ae=le[ie]=L.createTexture(),L.bindTexture(L.TEXTURE_2D,Ae),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MIN_FILTER,L.NEAREST),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MAG_FILTER,L.NEAREST)),L.bindTexture(L.TEXTURE_2D,Ae),se(Ae,pe)}finally{pe--}},ce=function(ie,se,Ae){var we=L.createFramebuffer();he.push(we),L.bindFramebuffer(L.FRAMEBUFFER,we),L.activeTexture(L.TEXTURE0+se),L.bindTexture(L.TEXTURE_2D,ie),L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,ie,0);try{Ae(we)}finally{L.deleteFramebuffer(we),L.bindFramebuffer(L.FRAMEBUFFER,he[--he.length-1]||null)}},fe=function(){B={},J={},le={},pe=-1,he.length=0};var Y=typeof WebGL2RenderingContext<"u"&&L instanceof WebGL2RenderingContext,B={},J={},le={},pe=-1,he=[];L.canvas.addEventListener("webglcontextlost",function(ie){fe(),ie.preventDefault()},!1),l.set(L,z={gl:L,isWebGL2:Y,getExtension:Ee,withProgram:te,withTexture:j,withTextureFramebuffer:ce,handleContextLoss:fe})}F(z)}function d(K,F,L,z,Y,B,J,le){J===void 0&&(J=15),le===void 0&&(le=null),c(K,function(pe){var he=pe.gl,Ee=pe.withProgram,_e=pe.withTexture;_e("copy",function(te,j){he.texImage2D(he.TEXTURE_2D,0,he.RGBA,Y,B,0,he.RGBA,he.UNSIGNED_BYTE,F),Ee("copy",o,a,function(ce){var fe=ce.setUniform,ie=ce.setAttribute;ie("aUV",2,he.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),fe("1i","image",j),he.bindFramebuffer(he.FRAMEBUFFER,le||null),he.disable(he.BLEND),he.colorMask(J&8,J&4,J&2,J&1),he.viewport(L,z,Y,B),he.scissor(L,z,Y,B),he.drawArrays(he.TRIANGLES,0,3)})})})}function h(K,F,L){var z=K.width,Y=K.height;c(K,function(B){var J=B.gl,le=new Uint8Array(z*Y*4);J.readPixels(0,0,z,Y,J.RGBA,J.UNSIGNED_BYTE,le),K.width=F,K.height=L,d(J,le,0,0,z,Y)})}var g=Object.freeze({__proto__:null,withWebGLContext:c,renderImageData:d,resizeWebGLCanvasWithoutClearing:h});function y(K,F,L,z,Y,B){B===void 0&&(B=1);var J=new Uint8Array(K*F),le=z[2]-z[0],pe=z[3]-z[1],he=[];s(L,function(ie,se,Ae,we){he.push({x1:ie,y1:se,x2:Ae,y2:we,minX:Math.min(ie,Ae),minY:Math.min(se,we),maxX:Math.max(ie,Ae),maxY:Math.max(se,we)})}),he.sort(function(ie,se){return ie.maxX-se.maxX});for(var Ee=0;Ee<K;Ee++)for(var _e=0;_e<F;_e++){var te=ce(z[0]+le*(Ee+.5)/K,z[1]+pe*(_e+.5)/F),j=Math.pow(1-Math.abs(te)/Y,B)/2;te<0&&(j=1-j),j=Math.max(0,Math.min(255,Math.round(j*255))),J[_e*K+Ee]=j}return J;function ce(ie,se){for(var Ae=1/0,we=1/0,Re=he.length;Re--;){var Le=he[Re];if(Le.maxX+we<=ie)break;if(ie+we>Le.minX&&se-we<Le.maxY&&se+we>Le.minY){var be=m(ie,se,Le.x1,Le.y1,Le.x2,Le.y2);be<Ae&&(Ae=be,we=Math.sqrt(Ae))}}return fe(ie,se)&&(we=-we),we}function fe(ie,se){for(var Ae=0,we=he.length;we--;){var Re=he[we];if(Re.maxX<=ie)break;var Le=Re.y1>se!=Re.y2>se&&ie<(Re.x2-Re.x1)*(se-Re.y1)/(Re.y2-Re.y1)+Re.x1;Le&&(Ae+=Re.y1<Re.y2?1:-1)}return Ae!==0}}function E(K,F,L,z,Y,B,J,le,pe,he){B===void 0&&(B=1),le===void 0&&(le=0),pe===void 0&&(pe=0),he===void 0&&(he=0),_(K,F,L,z,Y,B,J,null,le,pe,he)}function _(K,F,L,z,Y,B,J,le,pe,he,Ee){B===void 0&&(B=1),pe===void 0&&(pe=0),he===void 0&&(he=0),Ee===void 0&&(Ee=0);for(var _e=y(K,F,L,z,Y,B),te=new Uint8Array(_e.length*4),j=0;j<_e.length;j++)te[j*4+Ee]=_e[j];d(J,te,pe,he,K,F,1<<3-Ee,le)}function m(K,F,L,z,Y,B){var J=Y-L,le=B-z,pe=J*J+le*le,he=pe?Math.max(0,Math.min(1,((K-L)*J+(F-z)*le)/pe)):0,Ee=K-(L+he*J),_e=F-(z+he*le);return Ee*Ee+_e*_e}var v=Object.freeze({__proto__:null,generate:y,generateIntoCanvas:E,generateIntoFramebuffer:_}),S="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",T="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",M="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",A=new Float32Array([0,0,2,0,0,2]),R=null,O=!1,I={},k=new WeakMap;function G(K){if(!O&&!re(K))throw new Error("WebGL generation not supported")}function $(K,F,L,z,Y,B,J){if(B===void 0&&(B=1),J===void 0&&(J=null),!J&&(J=R,!J)){var le=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!le)throw new Error("OffscreenCanvas or DOM canvas not supported");J=R=le.getContext("webgl",{depth:!1})}G(J);var pe=new Uint8Array(K*F*4);c(J,function(te){var j=te.gl,ce=te.withTexture,fe=te.withTextureFramebuffer;ce("readable",function(ie,se){j.texImage2D(j.TEXTURE_2D,0,j.RGBA,K,F,0,j.RGBA,j.UNSIGNED_BYTE,null),fe(ie,se,function(Ae){ee(K,F,L,z,Y,B,j,Ae,0,0,0),j.readPixels(0,0,K,F,j.RGBA,j.UNSIGNED_BYTE,pe)})})});for(var he=new Uint8Array(K*F),Ee=0,_e=0;Ee<pe.length;Ee+=4)he[_e++]=pe[Ee];return he}function U(K,F,L,z,Y,B,J,le,pe,he){B===void 0&&(B=1),le===void 0&&(le=0),pe===void 0&&(pe=0),he===void 0&&(he=0),ee(K,F,L,z,Y,B,J,null,le,pe,he)}function ee(K,F,L,z,Y,B,J,le,pe,he,Ee){B===void 0&&(B=1),pe===void 0&&(pe=0),he===void 0&&(he=0),Ee===void 0&&(Ee=0),G(J);var _e=[];s(L,function(te,j,ce,fe){_e.push(te,j,ce,fe)}),_e=new Float32Array(_e),c(J,function(te){var j=te.gl,ce=te.isWebGL2,fe=te.getExtension,ie=te.withProgram,se=te.withTexture,Ae=te.withTextureFramebuffer,we=te.handleContextLoss;if(se("rawDistances",function(Re,Le){(K!==Re._lastWidth||F!==Re._lastHeight)&&j.texImage2D(j.TEXTURE_2D,0,j.RGBA,Re._lastWidth=K,Re._lastHeight=F,0,j.RGBA,j.UNSIGNED_BYTE,null),ie("main",S,T,function(be){var Ye=be.setAttribute,ue=be.setUniform,oe=!ce&&fe("ANGLE_instanced_arrays"),ye=!ce&&fe("EXT_blend_minmax");Ye("aUV",2,j.STATIC_DRAW,0,A),Ye("aLineSegment",4,j.DYNAMIC_DRAW,1,_e),ue.apply(void 0,["4f","uGlyphBounds"].concat(z)),ue("1f","uMaxDistance",Y),ue("1f","uExponent",B),Ae(Re,Le,function(Fe){j.enable(j.BLEND),j.colorMask(!0,!0,!0,!0),j.viewport(0,0,K,F),j.scissor(0,0,K,F),j.blendFunc(j.ONE,j.ONE),j.blendEquationSeparate(j.FUNC_ADD,ce?j.MAX:ye.MAX_EXT),j.clear(j.COLOR_BUFFER_BIT),ce?j.drawArraysInstanced(j.TRIANGLES,0,3,_e.length/4):oe.drawArraysInstancedANGLE(j.TRIANGLES,0,3,_e.length/4)})}),ie("post",o,M,function(be){be.setAttribute("aUV",2,j.STATIC_DRAW,0,A),be.setUniform("1i","tex",Le),j.bindFramebuffer(j.FRAMEBUFFER,le),j.disable(j.BLEND),j.colorMask(Ee===0,Ee===1,Ee===2,Ee===3),j.viewport(pe,he,K,F),j.scissor(pe,he,K,F),j.drawArrays(j.TRIANGLES,0,3)})}),j.isContextLost())throw we(),new Error("webgl context lost")})}function re(K){var F=!K||K===R?I:K.canvas||K,L=k.get(F);if(L===void 0){O=!0;var z=null;try{var Y=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],B=$(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,K);L=B&&Y.length===B.length&&B.every(function(J,le){return J===Y[le]}),L||(z="bad trial run results",console.info(Y,B))}catch(J){L=!1,z=J.message}z&&console.warn("WebGL SDF generation not supported:",z),O=!1,k.set(F,L)}return L}var ne=Object.freeze({__proto__:null,generate:$,generateIntoCanvas:U,generateIntoFramebuffer:ee,isSupported:re});function X(K,F,L,z,Y,B){Y===void 0&&(Y=Math.max(z[2]-z[0],z[3]-z[1])/2),B===void 0&&(B=1);try{return $.apply(ne,arguments)}catch(J){return console.info("WebGL SDF generation failed, falling back to JS",J),y.apply(v,arguments)}}function q(K,F,L,z,Y,B,J,le,pe,he){Y===void 0&&(Y=Math.max(z[2]-z[0],z[3]-z[1])/2),B===void 0&&(B=1),le===void 0&&(le=0),pe===void 0&&(pe=0),he===void 0&&(he=0);try{return U.apply(ne,arguments)}catch(Ee){return console.info("WebGL SDF generation failed, falling back to JS",Ee),E.apply(v,arguments)}}return e.forEachPathCommand=i,e.generate=X,e.generateIntoCanvas=q,e.javascript=v,e.pathToLineSegments=s,e.webgl=ne,e.webglUtils=g,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}function Vue(){var n=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},r={},i={};r.L=1,i[1]="L",Object.keys(t).forEach(function(we,Re){r[we]=1<<Re+1,i[r[we]]=we}),Object.freeze(r);var s=r.LRI|r.RLI|r.FSI,o=r.L|r.R|r.AL,a=r.B|r.S|r.WS|r.ON|r.FSI|r.LRI|r.RLI|r.PDI,l=r.BN|r.RLE|r.LRE|r.RLO|r.LRO|r.PDF,u=r.S|r.WS|r.B|s|r.PDI|l,c=null;function d(){if(!c){c=new Map;var we=function(Le){if(t.hasOwnProperty(Le)){var be=0;t[Le].split(",").forEach(function(Ye){var ue=Ye.split("+"),oe=ue[0],ye=ue[1];oe=parseInt(oe,36),ye=ye?parseInt(ye,36):0,c.set(be+=oe,r[Le]);for(var Fe=0;Fe<ye;Fe++)c.set(++be,r[Le])})}};for(var Re in t)we(Re)}}function h(we){return d(),c.get(we.codePointAt(0))||r.L}function g(we){return i[h(we)]}var y={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function E(we,Re){var Le=36,be=0,Ye=new Map,ue=Re&&new Map,oe;return we.split(",").forEach(function ye(Fe){if(Fe.indexOf("+")!==-1)for(var ze=+Fe;ze--;)ye(oe);else{oe=Fe;var He=Fe.split(">"),Ze=He[0],Ke=He[1];Ze=String.fromCodePoint(be+=parseInt(Ze,Le)),Ke=String.fromCodePoint(be+=parseInt(Ke,Le)),Ye.set(Ze,Ke),Re&&ue.set(Ke,Ze)}}),{map:Ye,reverseMap:ue}}var _,m,v;function S(){if(!_){var we=E(y.pairs,!0),Re=we.map,Le=we.reverseMap;_=Re,m=Le,v=E(y.canonical,!1).map}}function T(we){return S(),_.get(we)||null}function M(we){return S(),m.get(we)||null}function A(we){return S(),v.get(we)||null}var R=r.L,O=r.R,I=r.EN,k=r.ES,G=r.ET,$=r.AN,U=r.CS,ee=r.B,re=r.S,ne=r.ON,X=r.BN,q=r.NSM,K=r.AL,F=r.LRO,L=r.RLO,z=r.LRE,Y=r.RLE,B=r.PDF,J=r.LRI,le=r.RLI,pe=r.FSI,he=r.PDI;function Ee(we,Re){for(var Le=125,be=new Uint32Array(we.length),Ye=0;Ye<we.length;Ye++)be[Ye]=h(we[Ye]);var ue=new Map;function oe(Br,Kr){var Mr=be[Br];be[Br]=Kr,ue.set(Mr,ue.get(Mr)-1),Mr&a&&ue.set(a,ue.get(a)-1),ue.set(Kr,(ue.get(Kr)||0)+1),Kr&a&&ue.set(a,(ue.get(a)||0)+1)}for(var ye=new Uint8Array(we.length),Fe=new Map,ze=[],He=null,Ze=0;Ze<we.length;Ze++)He||ze.push(He={start:Ze,end:we.length-1,level:Re==="rtl"?1:Re==="ltr"?0:oi(Ze,!1)}),be[Ze]&ee&&(He.end=Ze,He=null);for(var Ke=Y|z|L|F|s|he|B|ee,Ue=function(Br){return Br+(Br&1?1:2)},st=function(Br){return Br+(Br&1?2:1)},ht=0;ht<ze.length;ht++){He=ze[ht];var at=[{_level:He.level,_override:0,_isolate:0}],Qe=void 0,ot=0,xt=0,Ut=0;ue.clear();for(var xe=He.start;xe<=He.end;xe++){var et=be[xe];if(Qe=at[at.length-1],ue.set(et,(ue.get(et)||0)+1),et&a&&ue.set(a,(ue.get(a)||0)+1),et&Ke)if(et&(Y|z)){ye[xe]=Qe._level;var Ne=(et===Y?st:Ue)(Qe._level);Ne<=Le&&!ot&&!xt?at.push({_level:Ne,_override:0,_isolate:0}):ot||xt++}else if(et&(L|F)){ye[xe]=Qe._level;var rt=(et===L?st:Ue)(Qe._level);rt<=Le&&!ot&&!xt?at.push({_level:rt,_override:et&L?O:R,_isolate:0}):ot||xt++}else if(et&s){et&pe&&(et=oi(xe+1,!0)===1?le:J),ye[xe]=Qe._level,Qe._override&&oe(xe,Qe._override);var ct=(et===le?st:Ue)(Qe._level);ct<=Le&&ot===0&&xt===0?(Ut++,at.push({_level:ct,_override:0,_isolate:1,_isolInitIndex:xe})):ot++}else if(et&he){if(ot>0)ot--;else if(Ut>0){for(xt=0;!at[at.length-1]._isolate;)at.pop();var Vt=at[at.length-1]._isolInitIndex;Vt!=null&&(Fe.set(Vt,xe),Fe.set(xe,Vt)),at.pop(),Ut--}Qe=at[at.length-1],ye[xe]=Qe._level,Qe._override&&oe(xe,Qe._override)}else et&B?(ot===0&&(xt>0?xt--:!Qe._isolate&&at.length>1&&(at.pop(),Qe=at[at.length-1])),ye[xe]=Qe._level):et&ee&&(ye[xe]=He.level);else ye[xe]=Qe._level,Qe._override&&et!==X&&oe(xe,Qe._override)}for(var rn=[],xn=null,hn=He.start;hn<=He.end;hn++){var Sn=be[hn];if(!(Sn&l)){var yn=ye[hn],Xt=Sn&s,ti=Sn===he;xn&&yn===xn._level?(xn._end=hn,xn._endsWithIsolInit=Xt):rn.push(xn={_start:hn,_end:hn,_level:yn,_startsWithPDI:ti,_endsWithIsolInit:Xt})}}for(var vr=[],Mn=0;Mn<rn.length;Mn++){var On=rn[Mn];if(!On._startsWithPDI||On._startsWithPDI&&!Fe.has(On._start)){for(var zr=[xn=On],Dn=void 0;xn&&xn._endsWithIsolInit&&(Dn=Fe.get(xn._end))!=null;)for(var nr=Mn+1;nr<rn.length;nr++)if(rn[nr]._start===Dn){zr.push(xn=rn[nr]);break}for(var qr=[],ks=0;ks<zr.length;ks++)for(var Hi=zr[ks],me=Hi._start;me<=Hi._end;me++)qr.push(me);for(var De=ye[qr[0]],je=He.level,Pe=qr[0]-1;Pe>=0;Pe--)if(!(be[Pe]&l)){je=ye[Pe];break}var We=qr[qr.length-1],St=ye[We],Lt=He.level;if(!(be[We]&s)){for(var Ot=We+1;Ot<=He.end;Ot++)if(!(be[Ot]&l)){Lt=ye[Ot];break}}vr.push({_seqIndices:qr,_sosType:Math.max(je,De)%2?O:R,_eosType:Math.max(Lt,St)%2?O:R})}}for(var zt=0;zt<vr.length;zt++){var Jt=vr[zt],qe=Jt._seqIndices,Dt=Jt._sosType,kn=Jt._eosType,En=ye[qe[0]]&1?O:R;if(ue.get(q))for(var Tr=0;Tr<qe.length;Tr++){var Ci=qe[Tr];if(be[Ci]&q){for(var An=Dt,Ft=Tr-1;Ft>=0;Ft--)if(!(be[qe[Ft]]&l)){An=be[qe[Ft]];break}oe(Ci,An&(s|he)?ne:An)}}if(ue.get(I))for(var Zt=0;Zt<qe.length;Zt++){var Gt=qe[Zt];if(be[Gt]&I)for(var Pn=Zt-1;Pn>=-1;Pn--){var _r=Pn===-1?Dt:be[qe[Pn]];if(_r&o){_r===K&&oe(Gt,$);break}}}if(ue.get(K))for(var or=0;or<qe.length;or++){var ts=qe[or];be[ts]&K&&oe(ts,O)}if(ue.get(k)||ue.get(U))for(var In=1;In<qe.length-1;In++){var $n=qe[In];if(be[$n]&(k|U)){for(var Xr=0,dr=0,Ro=In-1;Ro>=0&&(Xr=be[qe[Ro]],!!(Xr&l));Ro--);for(var Po=In+1;Po<qe.length&&(dr=be[qe[Po]],!!(dr&l));Po++);Xr===dr&&(be[$n]===k?Xr===I:Xr&(I|$))&&oe($n,Xr)}}if(ue.get(I))for(var ni=0;ni<qe.length;ni++){var ns=qe[ni];if(be[ns]&I){for(var Za=ni-1;Za>=0&&be[qe[Za]]&(G|l);Za--)oe(qe[Za],I);for(ni++;ni<qe.length&&be[qe[ni]]&(G|l|I);ni++)be[qe[ni]]!==I&&oe(qe[ni],I)}}if(ue.get(G)||ue.get(k)||ue.get(U))for(var so=0;so<qe.length;so++){var $d=qe[so];if(be[$d]&(G|k|U)){oe($d,ne);for(var oo=so-1;oo>=0&&be[qe[oo]]&l;oo--)oe(qe[oo],ne);for(var pn=so+1;pn<qe.length&&be[qe[pn]]&l;pn++)oe(qe[pn],ne)}}if(ue.get(I))for(var Io=0,Qa=Dt;Io<qe.length;Io++){var Ku=qe[Io],Ju=be[Ku];Ju&I?Qa===R&&oe(Ku,R):Ju&o&&(Qa=Ju)}if(ue.get(a)){var Lo=O|I|$,Hl=Lo|R,Us=[];{for(var ao=[],yi=0;yi<qe.length;yi++)if(be[qe[yi]]&a){var jt=we[qe[yi]],Fs=void 0;if(T(jt)!==null)if(ao.length<63)ao.push({char:jt,seqIndex:yi});else break;else if((Fs=M(jt))!==null)for(var gs=ao.length-1;gs>=0;gs--){var No=ao[gs].char;if(No===Fs||No===M(A(jt))||T(A(No))===jt){Us.push([ao[gs].seqIndex,yi]),ao.length=gs;break}}}Us.sort(function(Br,Kr){return Br[0]-Kr[0]})}for(var zs=0;zs<Us.length;zs++){for(var Gd=Us[zs],ar=Gd[0],lo=Gd[1],Vd=!1,Ri=0,el=ar+1;el<lo;el++){var tl=qe[el];if(be[tl]&Hl){Vd=!0;var ys=be[tl]&Lo?O:R;if(ys===En){Ri=ys;break}}}if(Vd&&!Ri){Ri=Dt;for(var ra=ar-1;ra>=0;ra--){var nl=qe[ra];if(be[nl]&Hl){var ri=be[nl]&Lo?O:R;ri!==En?Ri=ri:Ri=En;break}}}if(Ri){if(be[qe[ar]]=be[qe[lo]]=Ri,Ri!==En){for(var ii=ar+1;ii<qe.length;ii++)if(!(be[qe[ii]]&l)){h(we[qe[ii]])&q&&(be[qe[ii]]=Ri);break}}if(Ri!==En){for(var Oo=lo+1;Oo<qe.length;Oo++)if(!(be[qe[Oo]]&l)){h(we[qe[Oo]])&q&&(be[qe[Oo]]=Ri);break}}}}for(var Bs=0;Bs<qe.length;Bs++)if(be[qe[Bs]]&a){for(var $l=Bs,rl=Bs,Pi=Dt,il=Bs-1;il>=0;il--)if(be[qe[il]]&l)$l=il;else{Pi=be[qe[il]]&Lo?O:R;break}for(var rs=kn,ia=Bs+1;ia<qe.length;ia++)if(be[qe[ia]]&(a|l))rl=ia;else{rs=be[qe[ia]]&Lo?O:R;break}for(var si=$l;si<=rl;si++)be[qe[si]]=Pi===rs?Pi:En;Bs=rl}}}for(var Yr=He.start;Yr<=He.end;Yr++){var sa=ye[Yr],is=be[Yr];if(sa&1?is&(R|I|$)&&ye[Yr]++:is&O?ye[Yr]++:is&($|I)&&(ye[Yr]+=2),is&l&&(ye[Yr]=Yr===0?He.level:ye[Yr-1]),Yr===He.end||h(we[Yr])&(re|ee))for(var oa=Yr;oa>=0&&h(we[oa])&u;oa--)ye[oa]=He.level}}return{levels:ye,paragraphs:ze};function oi(Br,Kr){for(var Mr=Br;Mr<we.length;Mr++){var hr=be[Mr];if(hr&(O|K))return 1;if(hr&(ee|R)||Kr&&hr===he)return 0;if(hr&s){var $i=aa(Mr);Mr=$i===-1?we.length:$i}}return 0}function aa(Br){for(var Kr=1,Mr=Br+1;Mr<we.length;Mr++){var hr=be[Mr];if(hr&ee)break;if(hr&he){if(--Kr===0)return Mr}else hr&s&&Kr++}return-1}}var _e="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",te;function j(){if(!te){var we=E(_e,!0),Re=we.map,Le=we.reverseMap;Le.forEach(function(be,Ye){Re.set(Ye,be)}),te=Re}}function ce(we){return j(),te.get(we)||null}function fe(we,Re,Le,be){var Ye=we.length;Le=Math.max(0,Le==null?0:+Le),be=Math.min(Ye-1,be==null?Ye-1:+be);for(var ue=new Map,oe=Le;oe<=be;oe++)if(Re[oe]&1){var ye=ce(we[oe]);ye!==null&&ue.set(oe,ye)}return ue}function ie(we,Re,Le,be){var Ye=we.length;Le=Math.max(0,Le==null?0:+Le),be=Math.min(Ye-1,be==null?Ye-1:+be);var ue=[];return Re.paragraphs.forEach(function(oe){var ye=Math.max(Le,oe.start),Fe=Math.min(be,oe.end);if(ye<Fe){for(var ze=Re.levels.slice(ye,Fe+1),He=Fe;He>=ye&&h(we[He])&u;He--)ze[He]=oe.level;for(var Ze=oe.level,Ke=1/0,Ue=0;Ue<ze.length;Ue++){var st=ze[Ue];st>Ze&&(Ze=st),st<Ke&&(Ke=st|1)}for(var ht=Ze;ht>=Ke;ht--)for(var at=0;at<ze.length;at++)if(ze[at]>=ht){for(var Qe=at;at+1<ze.length&&ze[at+1]>=ht;)at++;at>Qe&&ue.push([Qe+ye,at+ye])}}}),ue}function se(we,Re,Le,be){var Ye=Ae(we,Re,Le,be),ue=[].concat(we);return Ye.forEach(function(oe,ye){ue[ye]=(Re.levels[oe]&1?ce(we[oe]):null)||we[oe]}),ue.join("")}function Ae(we,Re,Le,be){for(var Ye=ie(we,Re,Le,be),ue=[],oe=0;oe<we.length;oe++)ue[oe]=oe;return Ye.forEach(function(ye){for(var Fe=ye[0],ze=ye[1],He=ue.slice(Fe,ze+1),Ze=He.length;Ze--;)ue[ze-Ze]=He[Ze]}),ue}return e.closingToOpeningBracket=M,e.getBidiCharType=h,e.getBidiCharTypeName=g,e.getCanonicalBracket=A,e.getEmbeddingLevels=Ee,e.getMirroredCharacter=ce,e.getMirroredCharactersMap=fe,e.getReorderSegments=ie,e.getReorderedIndices=Ae,e.getReorderedString=se,e.openingToClosingBracket=T,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}const IB=/\bvoid\s+main\s*\(\s*\)\s*{/g;function cM(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(r,i){let s=on[i];return s?cM(s):r}return n.replace(e,t)}const Ji=[];for(let n=0;n<256;n++)Ji[n]=(n<16?"0":"")+n.toString(16);function jue(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Ji[n&255]+Ji[n>>8&255]+Ji[n>>16&255]+Ji[n>>24&255]+"-"+Ji[e&255]+Ji[e>>8&255]+"-"+Ji[e>>16&15|64]+Ji[e>>24&255]+"-"+Ji[t&63|128]+Ji[t>>8&255]+"-"+Ji[t>>16&255]+Ji[t>>24&255]+Ji[r&255]+Ji[r>>8&255]+Ji[r>>16&255]+Ji[r>>24&255]).toUpperCase()}const Zf=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let r=arguments[e];if(r)for(let i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},Wue=Date.now(),MO=new WeakMap,AO=new Map;let que=1e10;function fM(n,e){const t=Jue(e);let r=MO.get(n);if(r||MO.set(n,r=Object.create(null)),r[t])return new r[t];const i=`_onBeforeCompile${t}`,s=function(u,c){n.onBeforeCompile.call(this,u,c);const d=this.customProgramCacheKey()+"|"+u.vertexShader+"|"+u.fragmentShader;let h=AO[d];if(!h){const g=Xue(this,u,e,t);h=AO[d]=g}u.vertexShader=h.vertexShader,u.fragmentShader=h.fragmentShader,Zf(u.uniforms,this.uniforms),e.timeUniform&&(u.uniforms[e.timeUniform]={get value(){return Date.now()-Wue}}),this[i]&&this[i](u)},o=function(){return a(e.chained?n:n.clone())},a=function(u){const c=Object.create(u,l);return Object.defineProperty(c,"baseMaterial",{value:n}),Object.defineProperty(c,"id",{value:que++}),c.uuid=jue(),c.uniforms=Zf({},u.uniforms,e.uniforms),c.defines=Zf({},u.defines,e.defines),c.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",c.extensions=Zf({},u.extensions,e.extensions),c._listeners=void 0,c},l={constructor:{value:o},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return s},set(u){this[i]=u}},copy:{writable:!0,configurable:!0,value:function(u){return n.copy.call(this,u),!n.isShaderMaterial&&!n.isDerivedMaterial&&(Zf(this.extensions,u.extensions),Zf(this.defines,u.defines),Zf(this.uniforms,nA.clone(u.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const u=new n.constructor;return a(u).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let u=this._depthMaterial;return u||(u=this._depthMaterial=fM(n.isDerivedMaterial?n.getDepthMaterial():new P1({depthPacking:YM}),e),u.defines.IS_DEPTH_MATERIAL="",u.uniforms=this.uniforms),u}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let u=this._distanceMaterial;return u||(u=this._distanceMaterial=fM(n.isDerivedMaterial?n.getDistanceMaterial():new I1,e),u.defines.IS_DISTANCE_MATERIAL="",u.uniforms=this.uniforms),u}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:u,_distanceMaterial:c}=this;u&&u.dispose(),c&&c.dispose(),n.dispose.call(this)}}};return r[t]=o,new o}function Xue(n,{vertexShader:e,fragmentShader:t},r,i){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:l,fragmentDefs:u,fragmentMainIntro:c,fragmentMainOutro:d,fragmentColorTransform:h,customRewriter:g,timeUniform:y}=r;if(s=s||"",o=o||"",a=a||"",u=u||"",c=c||"",d=d||"",(l||g)&&(e=cM(e)),(h||g)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=cM(t)),g){let E=g({vertexShader:e,fragmentShader:t});e=E.vertexShader,t=E.fragmentShader}if(h){let E=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,_=>(E.push(_),"")),d=`${h}
${E.join(`
`)}
${d}`}if(y){const E=`
uniform float ${y};
`;s=E+s,u=E+u}return l&&(e=`vec3 troika_position_${i};
vec3 troika_normal_${i};
vec2 troika_uv_${i};
${e}
`,s=`${s}
void troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,o=`
troika_position_${i} = vec3(position);
troika_normal_${i} = vec3(normal);
troika_uv_${i} = vec2(uv);
troikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(E,_,m,v)=>/\battribute\s+vec[23]\s+$/.test(v.substr(0,m))?_:`troika_${_}_${i}`),n.map&&n.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${i}`))),e=CO(e,i,s,o,a),t=CO(t,i,u,c,d),{vertexShader:e,fragmentShader:t}}function CO(n,e,t,r,i){return(r||i||t)&&(n=n.replace(IB,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${r}
  troikaOrigMain${e}();
  ${i}
}`),n}function Yue(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let Kue=0;const RO=new Map;function Jue(n){const e=JSON.stringify(n,Yue);let t=RO.get(e);return t==null&&RO.set(e,t=++Kue),t}function Zue(n,e,t){const{defaultFontURL:r}=t,i=Object.create(null),s=1/0,o=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,a="[^\\S\\u00A0]",l=new RegExp(`${a}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function u(v,S){function T(){const M=A=>{console.error(`Failure loading font ${v}${v===r?"":"; trying fallback"}`,A),v!==r&&(v=r,T())};try{const A=new XMLHttpRequest;A.open("get",v,!0),A.responseType="arraybuffer",A.onload=function(){if(A.status>=400)M(new Error(A.statusText));else if(A.status>0)try{const R=n(A.response);S(R)}catch(R){M(R)}},A.onerror=M,A.send()}catch(A){M(A)}}T()}function c(v,S){v||(v=r);let T=i[v];T?T.pending?T.pending.push(S):S(T):(i[v]={pending:[S]},u(v,M=>{let A=i[v].pending;i[v]=M,A.forEach(R=>R(M))}))}function d({text:v="",font:S=r,sdfGlyphSize:T=64,fontSize:M=1,letterSpacing:A=0,lineHeight:R="normal",maxWidth:O=s,direction:I,textAlign:k="left",textIndent:G=0,whiteSpace:$="normal",overflowWrap:U="normal",anchorX:ee=0,anchorY:re=0,includeCaretPositions:ne=!1,chunkedBoundsSize:X=8192,colorRanges:q=null},K,F=!1){const L=E(),z={fontLoad:0,typesetting:0};v.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),v=v.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),M=+M,A=+A,O=+O,R=R||"normal",G=+G,c(S,Y=>{const B=isFinite(O);let J=null,le=null,pe=null,he=null,Ee=null,_e=null,te=null,j=0,ce=0,fe=$!=="nowrap";const{ascender:ie,descender:se,unitsPerEm:Ae,lineGap:we,capHeight:Re,xHeight:Le}=Y;z.fontLoad=E()-L;const be=E(),Ye=M/Ae;R==="normal"&&(R=(ie-se+we)/Ae),R=R*M;const ue=(R-(ie-se)*Ye)/2,oe=-(ie*Ye+ue),ye=Math.min(R,(ie-se)*Ye),Fe=(ie+se)/2*Ye-ye/2;let ze=G,He=new _;const Ze=[He];Y.forEachGlyph(v,M,A,(st,ht,at)=>{const Qe=v.charAt(at),ot=st.advanceWidth*Ye,xt=He.count;let Ut;if("isEmpty"in st||(st.isWhitespace=!!Qe&&new RegExp(a).test(Qe),st.canBreakAfter=!!Qe&&l.test(Qe),st.isEmpty=st.xMin===st.xMax||st.yMin===st.yMax||o.test(Qe)),!st.isWhitespace&&!st.isEmpty&&ce++,fe&&B&&!st.isWhitespace&&ht+ot+ze>O&&xt){if(He.glyphAt(xt-1).glyphObj.canBreakAfter)Ut=new _,ze=-ht;else for(let et=xt;et--;)if(et===0&&U==="break-word"){Ut=new _,ze=-ht;break}else if(He.glyphAt(et).glyphObj.canBreakAfter){Ut=He.splitAt(et+1);const Ne=Ut.glyphAt(0).x;ze-=Ne;for(let rt=Ut.count;rt--;)Ut.glyphAt(rt).x-=Ne;break}Ut&&(He.isSoftWrapped=!0,He=Ut,Ze.push(He),j=O)}let xe=He.glyphAt(He.count);xe.glyphObj=st,xe.x=ht+ze,xe.width=ot,xe.charIndex=at,Qe===`
`&&(He=new _,Ze.push(He),ze=-(ht+ot+A*M)+G)}),Ze.forEach(st=>{for(let ht=st.count;ht--;){let{glyphObj:at,x:Qe,width:ot}=st.glyphAt(ht);if(!at.isWhitespace){st.width=Qe+ot,st.width>j&&(j=st.width);return}}});let Ke=0,Ue=0;if(ee&&(typeof ee=="number"?Ke=-ee:typeof ee=="string"&&(Ke=-j*(ee==="left"?0:ee==="center"?.5:ee==="right"?1:g(ee)))),re){if(typeof re=="number")Ue=-re;else if(typeof re=="string"){let st=Ze.length*R;Ue=re==="top"?0:re==="top-baseline"?-oe:re==="top-cap"?-oe-Re*Ye:re==="top-ex"?-oe-Le*Ye:re==="middle"?st/2:re==="bottom"?st:re==="bottom-baseline"?st-ue+se*Ye:g(re)*st}}if(!F){const st=e.getEmbeddingLevels(v,I);J=new Uint16Array(ce),le=new Float32Array(ce*2),pe={},_e=[s,s,-s,-s],te=[];let ht=oe;ne&&(Ee=new Float32Array(v.length*3)),q&&(he=new Uint8Array(ce*3));let at=0,Qe=-1,ot=-1,xt,Ut;if(Ze.forEach((xe,et)=>{let{count:Ne,width:rt}=xe;if(Ne>0){let ct=0;for(let yn=Ne;yn--&&xe.glyphAt(yn).glyphObj.isWhitespace;)ct++;let Vt=0,rn=0;if(k==="center")Vt=(j-rt)/2;else if(k==="right")Vt=j-rt;else if(k==="justify"&&xe.isSoftWrapped){let yn=0;for(let Xt=Ne-ct;Xt--;)xe.glyphAt(Xt).glyphObj.isWhitespace&&yn++;rn=(j-rt)/yn}if(rn||Vt){let yn=0;for(let Xt=0;Xt<Ne;Xt++){let ti=xe.glyphAt(Xt);const vr=ti.glyphObj;ti.x+=Vt+yn,rn!==0&&vr.isWhitespace&&Xt<Ne-ct&&(yn+=rn,ti.width+=rn)}}const xn=e.getReorderSegments(v,st,xe.glyphAt(0).charIndex,xe.glyphAt(xe.count-1).charIndex);for(let yn=0;yn<xn.length;yn++){const[Xt,ti]=xn[yn];let vr=1/0,Mn=-1/0;for(let On=0;On<Ne;On++)if(xe.glyphAt(On).charIndex>=Xt){let zr=On,Dn=On;for(;Dn<Ne;Dn++){let nr=xe.glyphAt(Dn);if(nr.charIndex>ti)break;Dn<Ne-ct&&(vr=Math.min(vr,nr.x),Mn=Math.max(Mn,nr.x+nr.width))}for(let nr=zr;nr<Dn;nr++){const qr=xe.glyphAt(nr);qr.x=Mn-(qr.x+qr.width-vr)}break}}let hn;const Sn=yn=>hn=yn;for(let yn=0;yn<Ne;yn++){let Xt=xe.glyphAt(yn);hn=Xt.glyphObj;const ti=hn.index,vr=st.levels[Xt.charIndex]&1;if(vr){const Mn=e.getMirroredCharacter(v[Xt.charIndex]);Mn&&Y.forEachGlyph(Mn,0,0,Sn)}if(ne){const{charIndex:Mn}=Xt,On=Xt.x+Ke,zr=Xt.x+Xt.width+Ke;Ee[Mn*3]=vr?zr:On,Ee[Mn*3+1]=vr?On:zr,Ee[Mn*3+2]=ht+Fe+Ue;const Dn=Mn-Qe;Dn>1&&y(Ee,Qe,Dn),Qe=Mn}if(q){const{charIndex:Mn}=Xt;for(;Mn>ot;)ot++,q.hasOwnProperty(ot)&&(Ut=q[ot])}if(!hn.isWhitespace&&!hn.isEmpty){const Mn=at++;pe[ti]||(pe[ti]={path:hn.path,pathBounds:[hn.xMin,hn.yMin,hn.xMax,hn.yMax]});const On=Xt.x+Ke,zr=ht+Ue;le[Mn*2]=On,le[Mn*2+1]=zr;const Dn=On+hn.xMin*Ye,nr=zr+hn.yMin*Ye,qr=On+hn.xMax*Ye,ks=zr+hn.yMax*Ye;Dn<_e[0]&&(_e[0]=Dn),nr<_e[1]&&(_e[1]=nr),qr>_e[2]&&(_e[2]=qr),ks>_e[3]&&(_e[3]=ks),Mn%X===0&&(xt={start:Mn,end:Mn,rect:[s,s,-s,-s]},te.push(xt)),xt.end++;const Hi=xt.rect;if(Dn<Hi[0]&&(Hi[0]=Dn),nr<Hi[1]&&(Hi[1]=nr),qr>Hi[2]&&(Hi[2]=qr),ks>Hi[3]&&(Hi[3]=ks),J[Mn]=ti,q){const me=Mn*3;he[me]=Ut>>16&255,he[me+1]=Ut>>8&255,he[me+2]=Ut&255}}}}ht-=R}),Ee){const xe=v.length-Qe;xe>1&&y(Ee,Qe,xe)}}z.typesetting=E()-be,K({glyphIds:J,glyphPositions:le,glyphData:pe,caretPositions:Ee,caretHeight:ye,glyphColors:he,chunkedBounds:te,fontSize:M,unitsPerEm:Ae,ascender:ie*Ye,descender:se*Ye,capHeight:Re*Ye,xHeight:Le*Ye,lineHeight:R,topBaseline:oe,blockBounds:[Ke,Ue-Ze.length*R,Ke+j,Ue],visibleBounds:_e,timings:z})})}function h(v,S){d(v,T=>{const[M,A,R,O]=T.blockBounds;S({width:R-M,height:O-A})},{})}function g(v){let S=v.match(/^([\d.]+)%$/),T=S?parseFloat(S[1]):NaN;return isNaN(T)?0:T/100}function y(v,S,T){const M=v[S*3],A=v[S*3+1],R=v[S*3+2],O=(A-M)/T;for(let I=0;I<T;I++){const k=(S+I)*3;v[k]=M+O*I,v[k+1]=M+O*(I+1),v[k+2]=R}}function E(){return(self.performance||Date).now()}function _(){this.data=[]}const m=["glyphObj","x","width","charIndex"];return _.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/m.length)},glyphAt(v){let S=_.flyweight;return S.data=this.data,S.index=v,S},splitAt(v){let S=new _;return S.data=this.data.splice(v*m.length),S}},_.flyweight=m.reduce((v,S,T,M)=>(Object.defineProperty(v,S,{get(){return this.data[this.index*m.length+T]},set(A){this.data[this.index*m.length+T]=A}}),v),{data:null,index:0}),{typeset:d,measure:h,loadFont:c}}const Sd=()=>(self.performance||Date).now(),hw=PB();let PO;function Que(n,e,t,r,i,s,o,a,l,u,c=!0){return c?tce(n,e,t,r,i,s,o,a,l,u).then(null,d=>(PO||(console.warn("WebGL SDF generation failed, falling back to JS",d),PO=!0),LO(n,e,t,r,i,s,o,a,l,u))):LO(n,e,t,r,i,s,o,a,l,u)}const Dx=[],ece=5;let dM=0;function LB(){const n=Sd();for(;Dx.length&&Sd()-n<ece;)Dx.shift()();dM=Dx.length?setTimeout(LB,0):0}const tce=(...n)=>new Promise((e,t)=>{Dx.push(()=>{const r=Sd();try{hw.webgl.generateIntoCanvas(...n),e({timing:Sd()-r})}catch(i){t(i)}}),dM||(dM=setTimeout(LB,0))}),nce=4,rce=2e3,IO={};let ice=0;function LO(n,e,t,r,i,s,o,a,l,u){const c="TroikaTextSDFGenerator_JS_"+ice++%nce;let d=IO[c];return d||(d=IO[c]={workerModule:xv({name:c,workerId:c,dependencies:[PB,Sd],init(h,g){const y=h().javascript.generate;return function(...E){const _=g();return{textureData:y(...E),timing:g()-_}}},getTransferables(h){return[h.textureData.buffer]}}),requests:0,idleTimer:null}),d.requests++,clearTimeout(d.idleTimer),d.workerModule(n,e,t,r,i,s).then(({textureData:h,timing:g})=>{const y=Sd(),E=new Uint8Array(h.length*4);for(let _=0;_<h.length;_++)E[_*4+u]=h[_];return hw.webglUtils.renderImageData(o,E,a,l,n,e,1<<3-u),g+=Sd()-y,--d.requests===0&&(d.idleTimer=setTimeout(()=>{$ue(c)},rce)),{timing:g}})}function sce(n){n._warm||(hw.webgl.isSupported(n),n._warm=!0)}const oce=hw.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function ace(){return typeof window>"u"&&(self.window=self),function(n){var e={parse:function(i){var s=e._bin,o=new Uint8Array(i);if(s.readASCII(o,0,4)=="ttcf"){var a=4;s.readUshort(o,a),a+=2,s.readUshort(o,a),a+=2;var l=s.readUint(o,a);a+=4;for(var u=[],c=0;c<l;c++){var d=s.readUint(o,a);a+=4,u.push(e._readFont(o,d))}return u}return[e._readFont(o,0)]},_readFont:function(i,s){var o=e._bin,a=s;o.readFixed(i,s),s+=4;var l=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2;for(var u=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],c={_data:i,_offset:a},d={},h=0;h<l;h++){var g=o.readASCII(i,s,4);s+=4,o.readUint(i,s),s+=4;var y=o.readUint(i,s);s+=4;var E=o.readUint(i,s);s+=4,d[g]={offset:y,length:E}}for(h=0;h<u.length;h++){var _=u[h];d[_]&&(c[_.trim()]=e[_.trim()].parse(i,d[_].offset,d[_].length,c))}return c},_tabOffset:function(i,s,o){for(var a=e._bin,l=a.readUshort(i,o+4),u=o+12,c=0;c<l;c++){var d=a.readASCII(i,u,4);u+=4,a.readUint(i,u),u+=4;var h=a.readUint(i,u);if(u+=4,a.readUint(i,u),u+=4,d==s)return h}return 0}};e._bin={readFixed:function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<8|i[s+3])/65540},readF2dot14:function(i,s){return e._bin.readShort(i,s)/16384},readInt:function(i,s){return e._bin._view(i).getInt32(s)},readInt8:function(i,s){return e._bin._view(i).getInt8(s)},readShort:function(i,s){return e._bin._view(i).getInt16(s)},readUshort:function(i,s){return e._bin._view(i).getUint16(s)},readUshorts:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(e._bin.readUshort(i,s+2*l));return a},readUint:function(i,s){return e._bin._view(i).getUint32(s)},readUint64:function(i,s){return 4294967296*e._bin.readUint(i,s)+e._bin.readUint(i,s+4)},readASCII:function(i,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(i[s+l]);return a},readUnicode:function(i,s,o){for(var a="",l=0;l<o;l++){var u=i[s++]<<8|i[s++];a+=String.fromCharCode(u)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(i,s,o){var a=e._bin._tdec;return a&&s==0&&o==i.length?a.decode(i):e._bin.readASCII(i,s,o)},readBytes:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(i[s+l]);return a},readASCIIArray:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(String.fromCharCode(i[s+l]));return a},_view:function(i){return i._dataView||(i._dataView=i.buffer?new DataView(i.buffer,i.byteOffset,i.byteLength):new DataView(new Uint8Array(i).buffer))}},e._lctf={},e._lctf.parse=function(i,s,o,a,l){var u=e._bin,c={},d=s;u.readFixed(i,s),s+=4;var h=u.readUshort(i,s);s+=2;var g=u.readUshort(i,s);s+=2;var y=u.readUshort(i,s);return s+=2,c.scriptList=e._lctf.readScriptList(i,d+h),c.featureList=e._lctf.readFeatureList(i,d+g),c.lookupList=e._lctf.readLookupList(i,d+y,l),c},e._lctf.readLookupList=function(i,s,o){var a=e._bin,l=s,u=[],c=a.readUshort(i,s);s+=2;for(var d=0;d<c;d++){var h=a.readUshort(i,s);s+=2;var g=e._lctf.readLookupTable(i,l+h,o);u.push(g)}return u},e._lctf.readLookupTable=function(i,s,o){var a=e._bin,l=s,u={tabs:[]};u.ltype=a.readUshort(i,s),s+=2,u.flag=a.readUshort(i,s),s+=2;var c=a.readUshort(i,s);s+=2;for(var d=u.ltype,h=0;h<c;h++){var g=a.readUshort(i,s);s+=2;var y=o(i,d,l+g,u);u.tabs.push(y)}return u},e._lctf.numOfOnes=function(i){for(var s=0,o=0;o<32;o++)(i>>>o&1)!=0&&s++;return s},e._lctf.readClassDef=function(i,s){var o=e._bin,a=[],l=o.readUshort(i,s);if(s+=2,l==1){var u=o.readUshort(i,s);s+=2;var c=o.readUshort(i,s);s+=2;for(var d=0;d<c;d++)a.push(u+d),a.push(u+d),a.push(o.readUshort(i,s)),s+=2}if(l==2){var h=o.readUshort(i,s);for(s+=2,d=0;d<h;d++)a.push(o.readUshort(i,s)),s+=2,a.push(o.readUshort(i,s)),s+=2,a.push(o.readUshort(i,s)),s+=2}return a},e._lctf.getInterval=function(i,s){for(var o=0;o<i.length;o+=3){var a=i[o],l=i[o+1];if(i[o+2],a<=s&&s<=l)return o}return-1},e._lctf.readCoverage=function(i,s){var o=e._bin,a={};a.fmt=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);return s+=2,a.fmt==1&&(a.tab=o.readUshorts(i,s,l)),a.fmt==2&&(a.tab=o.readUshorts(i,s,3*l)),a},e._lctf.coverageIndex=function(i,s){var o=i.tab;if(i.fmt==1)return o.indexOf(s);if(i.fmt==2){var a=e._lctf.getInterval(o,s);if(a!=-1)return o[a+2]+(s-o[a])}return-1},e._lctf.readFeatureList=function(i,s){var o=e._bin,a=s,l=[],u=o.readUshort(i,s);s+=2;for(var c=0;c<u;c++){var d=o.readASCII(i,s,4);s+=4;var h=o.readUshort(i,s);s+=2;var g=e._lctf.readFeatureTable(i,a+h);g.tag=d.trim(),l.push(g)}return l},e._lctf.readFeatureTable=function(i,s){var o=e._bin,a=s,l={},u=o.readUshort(i,s);s+=2,u>0&&(l.featureParams=a+u);var c=o.readUshort(i,s);s+=2,l.tab=[];for(var d=0;d<c;d++)l.tab.push(o.readUshort(i,s+2*d));return l},e._lctf.readScriptList=function(i,s){var o=e._bin,a=s,l={},u=o.readUshort(i,s);s+=2;for(var c=0;c<u;c++){var d=o.readASCII(i,s,4);s+=4;var h=o.readUshort(i,s);s+=2,l[d.trim()]=e._lctf.readScriptTable(i,a+h)}return l},e._lctf.readScriptTable=function(i,s){var o=e._bin,a=s,l={},u=o.readUshort(i,s);s+=2,l.default=e._lctf.readLangSysTable(i,a+u);var c=o.readUshort(i,s);s+=2;for(var d=0;d<c;d++){var h=o.readASCII(i,s,4);s+=4;var g=o.readUshort(i,s);s+=2,l[h.trim()]=e._lctf.readLangSysTable(i,a+g)}return l},e._lctf.readLangSysTable=function(i,s){var o=e._bin,a={};o.readUshort(i,s),s+=2,a.reqFeature=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);return s+=2,a.features=o.readUshorts(i,s,l),a},e.CFF={},e.CFF.parse=function(i,s,o){var a=e._bin;(i=new Uint8Array(i.buffer,s,o))[s=0],i[++s],i[++s],i[++s],s++;var l=[];s=e.CFF.readIndex(i,s,l);for(var u=[],c=0;c<l.length-1;c++)u.push(a.readASCII(i,s+l[c],l[c+1]-l[c]));s+=l[l.length-1];var d=[];s=e.CFF.readIndex(i,s,d);var h=[];for(c=0;c<d.length-1;c++)h.push(e.CFF.readDict(i,s+d[c],s+d[c+1]));s+=d[d.length-1];var g=h[0],y=[];s=e.CFF.readIndex(i,s,y);var E=[];for(c=0;c<y.length-1;c++)E.push(a.readASCII(i,s+y[c],y[c+1]-y[c]));if(s+=y[y.length-1],e.CFF.readSubrs(i,s,g),g.CharStrings){s=g.CharStrings,y=[],s=e.CFF.readIndex(i,s,y);var _=[];for(c=0;c<y.length-1;c++)_.push(a.readBytes(i,s+y[c],y[c+1]-y[c]));g.CharStrings=_}if(g.ROS){s=g.FDArray;var m=[];for(s=e.CFF.readIndex(i,s,m),g.FDArray=[],c=0;c<m.length-1;c++){var v=e.CFF.readDict(i,s+m[c],s+m[c+1]);e.CFF._readFDict(i,v,E),g.FDArray.push(v)}s+=m[m.length-1],s=g.FDSelect,g.FDSelect=[];var S=i[s];if(s++,S!=3)throw S;var T=a.readUshort(i,s);for(s+=2,c=0;c<T+1;c++)g.FDSelect.push(a.readUshort(i,s),i[s+2]),s+=3}return g.Encoding&&(g.Encoding=e.CFF.readEncoding(i,g.Encoding,g.CharStrings.length)),g.charset&&(g.charset=e.CFF.readCharset(i,g.charset,g.CharStrings.length)),e.CFF._readFDict(i,g,E),g},e.CFF._readFDict=function(i,s,o){var a;for(var l in s.Private&&(a=s.Private[1],s.Private=e.CFF.readDict(i,a,a+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(i,a+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=o[s[l]-426+35])},e.CFF.readSubrs=function(i,s,o){var a=e._bin,l=[];s=e.CFF.readIndex(i,s,l);var u,c=l.length;u=c<1240?107:c<33900?1131:32768,o.Bias=u,o.Subrs=[];for(var d=0;d<l.length-1;d++)o.Subrs.push(a.readBytes(i,s+l[d],l[d+1]-l[d]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(i,s){for(var o=0;o<i.charset.length;o++)if(i.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(i,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(i,e.CFF.tableSE[s])},e.CFF.readEncoding=function(i,s,o){e._bin;var a=[".notdef"],l=i[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var u=i[s];s++;for(var c=0;c<u;c++)a.push(i[s+c]);return a},e.CFF.readCharset=function(i,s,o){var a=e._bin,l=[".notdef"],u=i[s];if(s++,u==0)for(var c=0;c<o;c++){var d=a.readUshort(i,s);s+=2,l.push(d)}else{if(u!=1&&u!=2)throw"error: format: "+u;for(;l.length<o;){d=a.readUshort(i,s),s+=2;var h=0;for(u==1?(h=i[s],s++):(h=a.readUshort(i,s),s+=2),c=0;c<=h;c++)l.push(d),d++}}return l},e.CFF.readIndex=function(i,s,o){var a=e._bin,l=a.readUshort(i,s)+1,u=i[s+=2];if(s++,u==1)for(var c=0;c<l;c++)o.push(i[s+c]);else if(u==2)for(c=0;c<l;c++)o.push(a.readUshort(i,s+2*c));else if(u==3)for(c=0;c<l;c++)o.push(16777215&a.readUint(i,s+3*c-1));else if(l!=1)throw"unsupported offset size: "+u+", count: "+l;return(s+=l*u)-1},e.CFF.getCharString=function(i,s,o){var a=e._bin,l=i[s],u=i[s+1];i[s+2],i[s+3],i[s+4];var c=1,d=null,h=null;l<=20&&(d=l,c=1),l==12&&(d=100*l+u,c=2),21<=l&&l<=27&&(d=l,c=1),l==28&&(h=a.readShort(i,s+1),c=3),29<=l&&l<=31&&(d=l,c=1),32<=l&&l<=246&&(h=l-139,c=1),247<=l&&l<=250&&(h=256*(l-247)+u+108,c=2),251<=l&&l<=254&&(h=256*-(l-251)-u-108,c=2),l==255&&(h=a.readInt(i,s+1)/65535,c=5),o.val=h??"o"+d,o.size=c},e.CFF.readCharString=function(i,s,o){for(var a=s+o,l=e._bin,u=[];s<a;){var c=i[s],d=i[s+1];i[s+2],i[s+3],i[s+4];var h=1,g=null,y=null;c<=20&&(g=c,h=1),c==12&&(g=100*c+d,h=2),c!=19&&c!=20||(g=c,h=2),21<=c&&c<=27&&(g=c,h=1),c==28&&(y=l.readShort(i,s+1),h=3),29<=c&&c<=31&&(g=c,h=1),32<=c&&c<=246&&(y=c-139,h=1),247<=c&&c<=250&&(y=256*(c-247)+d+108,h=2),251<=c&&c<=254&&(y=256*-(c-251)-d-108,h=2),c==255&&(y=l.readInt(i,s+1)/65535,h=5),u.push(y??"o"+g),s+=h}return u},e.CFF.readDict=function(i,s,o){for(var a=e._bin,l={},u=[];s<o;){var c=i[s],d=i[s+1];i[s+2],i[s+3],i[s+4];var h=1,g=null,y=null;if(c==28&&(y=a.readShort(i,s+1),h=3),c==29&&(y=a.readInt(i,s+1),h=5),32<=c&&c<=246&&(y=c-139,h=1),247<=c&&c<=250&&(y=256*(c-247)+d+108,h=2),251<=c&&c<=254&&(y=256*-(c-251)-d-108,h=2),c==255)throw y=a.readInt(i,s+1)/65535,h=5,"unknown number";if(c==30){var E=[];for(h=1;;){var _=i[s+h];h++;var m=_>>4,v=15&_;if(m!=15&&E.push(m),v!=15&&E.push(v),v==15)break}for(var S="",T=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],M=0;M<E.length;M++)S+=T[E[M]];y=parseFloat(S)}c<=21&&(g=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][c],h=1,c==12&&(g=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][d],h=2)),g!=null?(l[g]=u.length==1?u[0]:u,u=[]):u.push(y),s+=h}return l},e.cmap={},e.cmap.parse=function(i,s,o){i=new Uint8Array(i.buffer,s,o),s=0;var a=e._bin,l={};a.readUshort(i,s),s+=2;var u=a.readUshort(i,s);s+=2;var c=[];l.tables=[];for(var d=0;d<u;d++){var h=a.readUshort(i,s);s+=2;var g=a.readUshort(i,s);s+=2;var y=a.readUint(i,s);s+=4;var E="p"+h+"e"+g,_=c.indexOf(y);if(_==-1){var m;_=l.tables.length,c.push(y);var v=a.readUshort(i,y);v==0?m=e.cmap.parse0(i,y):v==4?m=e.cmap.parse4(i,y):v==6?m=e.cmap.parse6(i,y):v==12?m=e.cmap.parse12(i,y):console.debug("unknown format: "+v,h,g,y),l.tables.push(m)}if(l[E]!=null)throw"multiple tables for one platform+encoding";l[E]=_}return l},e.cmap.parse0=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,a.map=[];for(var u=0;u<l-6;u++)a.map.push(i[s+u]);return a},e.cmap.parse4=function(i,s){var o=e._bin,a=s,l={};l.format=o.readUshort(i,s),s+=2;var u=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2;var c=o.readUshort(i,s);s+=2;var d=c/2;l.searchRange=o.readUshort(i,s),s+=2,l.entrySelector=o.readUshort(i,s),s+=2,l.rangeShift=o.readUshort(i,s),s+=2,l.endCount=o.readUshorts(i,s,d),s+=2*d,s+=2,l.startCount=o.readUshorts(i,s,d),s+=2*d,l.idDelta=[];for(var h=0;h<d;h++)l.idDelta.push(o.readShort(i,s)),s+=2;for(l.idRangeOffset=o.readUshorts(i,s,d),s+=2*d,l.glyphIdArray=[];s<a+u;)l.glyphIdArray.push(o.readUshort(i,s)),s+=2;return l},e.cmap.parse6=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,a.firstCode=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2,a.glyphIdArray=[];for(var u=0;u<l;u++)a.glyphIdArray.push(o.readUshort(i,s)),s+=2;return a},e.cmap.parse12=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2,s+=2,o.readUint(i,s),s+=4,o.readUint(i,s),s+=4;var l=o.readUint(i,s);s+=4,a.groups=[];for(var u=0;u<l;u++){var c=s+12*u,d=o.readUint(i,c+0),h=o.readUint(i,c+4),g=o.readUint(i,c+8);a.groups.push([d,h,g])}return a},e.glyf={},e.glyf.parse=function(i,s,o,a){for(var l=[],u=0;u<a.maxp.numGlyphs;u++)l.push(null);return l},e.glyf._parseGlyf=function(i,s){var o=e._bin,a=i._data,l=e._tabOffset(a,"glyf",i._offset)+i.loca[s];if(i.loca[s]==i.loca[s+1])return null;var u={};if(u.noc=o.readShort(a,l),l+=2,u.xMin=o.readShort(a,l),l+=2,u.yMin=o.readShort(a,l),l+=2,u.xMax=o.readShort(a,l),l+=2,u.yMax=o.readShort(a,l),l+=2,u.xMin>=u.xMax||u.yMin>=u.yMax)return null;if(u.noc>0){u.endPts=[];for(var c=0;c<u.noc;c++)u.endPts.push(o.readUshort(a,l)),l+=2;var d=o.readUshort(a,l);if(l+=2,a.length-l<d)return null;u.instructions=o.readBytes(a,l,d),l+=d;var h=u.endPts[u.noc-1]+1;for(u.flags=[],c=0;c<h;c++){var g=a[l];if(l++,u.flags.push(g),(8&g)!=0){var y=a[l];l++;for(var E=0;E<y;E++)u.flags.push(g),c++}}for(u.xs=[],c=0;c<h;c++){var _=(2&u.flags[c])!=0,m=(16&u.flags[c])!=0;_?(u.xs.push(m?a[l]:-a[l]),l++):m?u.xs.push(0):(u.xs.push(o.readShort(a,l)),l+=2)}for(u.ys=[],c=0;c<h;c++)_=(4&u.flags[c])!=0,m=(32&u.flags[c])!=0,_?(u.ys.push(m?a[l]:-a[l]),l++):m?u.ys.push(0):(u.ys.push(o.readShort(a,l)),l+=2);var v=0,S=0;for(c=0;c<h;c++)v+=u.xs[c],S+=u.ys[c],u.xs[c]=v,u.ys[c]=S}else{var T;u.parts=[];do{T=o.readUshort(a,l),l+=2;var M={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(u.parts.push(M),M.glyphIndex=o.readUshort(a,l),l+=2,1&T){var A=o.readShort(a,l);l+=2;var R=o.readShort(a,l);l+=2}else A=o.readInt8(a,l),l++,R=o.readInt8(a,l),l++;2&T?(M.m.tx=A,M.m.ty=R):(M.p1=A,M.p2=R),8&T?(M.m.a=M.m.d=o.readF2dot14(a,l),l+=2):64&T?(M.m.a=o.readF2dot14(a,l),l+=2,M.m.d=o.readF2dot14(a,l),l+=2):128&T&&(M.m.a=o.readF2dot14(a,l),l+=2,M.m.b=o.readF2dot14(a,l),l+=2,M.m.c=o.readF2dot14(a,l),l+=2,M.m.d=o.readF2dot14(a,l),l+=2)}while(32&T);if(256&T){var O=o.readUshort(a,l);for(l+=2,u.instr=[],c=0;c<O;c++)u.instr.push(a[l]),l++}}return u},e.GPOS={},e.GPOS.parse=function(i,s,o,a){return e._lctf.parse(i,s,o,a,e.GPOS.subt)},e.GPOS.subt=function(i,s,o,a){var l=e._bin,u=o,c={};if(c.fmt=l.readUshort(i,o),o+=2,s==1||s==2||s==3||s==7||s==8&&c.fmt<=2){var d=l.readUshort(i,o);o+=2,c.coverage=e._lctf.readCoverage(i,d+u)}if(s==1&&c.fmt==1){var h=l.readUshort(i,o);o+=2;var g=e._lctf.numOfOnes(h);h!=0&&(c.pos=e.GPOS.readValueRecord(i,o,h))}else if(s==2&&c.fmt>=1&&c.fmt<=2){h=l.readUshort(i,o),o+=2;var y=l.readUshort(i,o);o+=2,g=e._lctf.numOfOnes(h);var E=e._lctf.numOfOnes(y);if(c.fmt==1){c.pairsets=[];var _=l.readUshort(i,o);o+=2;for(var m=0;m<_;m++){var v=u+l.readUshort(i,o);o+=2;var S=l.readUshort(i,v);v+=2;for(var T=[],M=0;M<S;M++){var A=l.readUshort(i,v);v+=2,h!=0&&($=e.GPOS.readValueRecord(i,v,h),v+=2*g),y!=0&&(U=e.GPOS.readValueRecord(i,v,y),v+=2*E),T.push({gid2:A,val1:$,val2:U})}c.pairsets.push(T)}}if(c.fmt==2){var R=l.readUshort(i,o);o+=2;var O=l.readUshort(i,o);o+=2;var I=l.readUshort(i,o);o+=2;var k=l.readUshort(i,o);for(o+=2,c.classDef1=e._lctf.readClassDef(i,u+R),c.classDef2=e._lctf.readClassDef(i,u+O),c.matrix=[],m=0;m<I;m++){var G=[];for(M=0;M<k;M++){var $=null,U=null;h!=0&&($=e.GPOS.readValueRecord(i,o,h),o+=2*g),y!=0&&(U=e.GPOS.readValueRecord(i,o,y),o+=2*E),G.push({val1:$,val2:U})}c.matrix.push(G)}}}else{if(s==9&&c.fmt==1){var ee=l.readUshort(i,o);o+=2;var re=l.readUint(i,o);if(o+=4,a.ltype==9)a.ltype=ee;else if(a.ltype!=ee)throw"invalid extension substitution";return e.GPOS.subt(i,a.ltype,u+re)}console.debug("unsupported GPOS table LookupType",s,"format",c.fmt)}return c},e.GPOS.readValueRecord=function(i,s,o){var a=e._bin,l=[];return l.push(1&o?a.readShort(i,s):0),s+=1&o?2:0,l.push(2&o?a.readShort(i,s):0),s+=2&o?2:0,l.push(4&o?a.readShort(i,s):0),s+=4&o?2:0,l.push(8&o?a.readShort(i,s):0),s+=8&o?2:0,l},e.GSUB={},e.GSUB.parse=function(i,s,o,a){return e._lctf.parse(i,s,o,a,e.GSUB.subt)},e.GSUB.subt=function(i,s,o,a){var l=e._bin,u=o,c={};if(c.fmt=l.readUshort(i,o),o+=2,s!=1&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==4||s==5&&c.fmt<=2||s==6&&c.fmt<=2){var d=l.readUshort(i,o);o+=2,c.coverage=e._lctf.readCoverage(i,u+d)}if(s==1&&c.fmt>=1&&c.fmt<=2){if(c.fmt==1)c.delta=l.readShort(i,o),o+=2;else if(c.fmt==2){var h=l.readUshort(i,o);o+=2,c.newg=l.readUshorts(i,o,h),o+=2*c.newg.length}}else if(s==4){c.vals=[],h=l.readUshort(i,o),o+=2;for(var g=0;g<h;g++){var y=l.readUshort(i,o);o+=2,c.vals.push(e.GSUB.readLigatureSet(i,u+y))}}else if(s==5&&c.fmt==2){if(c.fmt==2){var E=l.readUshort(i,o);o+=2,c.cDef=e._lctf.readClassDef(i,u+E),c.scset=[];var _=l.readUshort(i,o);for(o+=2,g=0;g<_;g++){var m=l.readUshort(i,o);o+=2,c.scset.push(m==0?null:e.GSUB.readSubClassSet(i,u+m))}}}else if(s==6&&c.fmt==3){if(c.fmt==3){for(g=0;g<3;g++){h=l.readUshort(i,o),o+=2;for(var v=[],S=0;S<h;S++)v.push(e._lctf.readCoverage(i,u+l.readUshort(i,o+2*S)));o+=2*h,g==0&&(c.backCvg=v),g==1&&(c.inptCvg=v),g==2&&(c.ahedCvg=v)}h=l.readUshort(i,o),o+=2,c.lookupRec=e.GSUB.readSubstLookupRecords(i,o,h)}}else{if(s==7&&c.fmt==1){var T=l.readUshort(i,o);o+=2;var M=l.readUint(i,o);if(o+=4,a.ltype==9)a.ltype=T;else if(a.ltype!=T)throw"invalid extension substitution";return e.GSUB.subt(i,a.ltype,u+M)}console.debug("unsupported GSUB table LookupType",s,"format",c.fmt)}return c},e.GSUB.readSubClassSet=function(i,s){var o=e._bin.readUshort,a=s,l=[],u=o(i,s);s+=2;for(var c=0;c<u;c++){var d=o(i,s);s+=2,l.push(e.GSUB.readSubClassRule(i,a+d))}return l},e.GSUB.readSubClassRule=function(i,s){var o=e._bin.readUshort,a={},l=o(i,s),u=o(i,s+=2);s+=2,a.input=[];for(var c=0;c<l-1;c++)a.input.push(o(i,s)),s+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(i,s,u),a},e.GSUB.readSubstLookupRecords=function(i,s,o){for(var a=e._bin.readUshort,l=[],u=0;u<o;u++)l.push(a(i,s),a(i,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(i,s){var o=e._bin,a=s,l=[],u=o.readUshort(i,s);s+=2;for(var c=0;c<u;c++){var d=o.readUshort(i,s);s+=2,l.push(e.GSUB.readChainSubClassRule(i,a+d))}return l},e.GSUB.readChainSubClassRule=function(i,s){for(var o=e._bin,a={},l=["backtrack","input","lookahead"],u=0;u<l.length;u++){var c=o.readUshort(i,s);s+=2,u==1&&c--,a[l[u]]=o.readUshorts(i,s,c),s+=2*a[l[u]].length}return c=o.readUshort(i,s),s+=2,a.subst=o.readUshorts(i,s,2*c),s+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(i,s){var o=e._bin,a=s,l=[],u=o.readUshort(i,s);s+=2;for(var c=0;c<u;c++){var d=o.readUshort(i,s);s+=2,l.push(e.GSUB.readLigature(i,a+d))}return l},e.GSUB.readLigature=function(i,s){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2;for(var u=0;u<l-1;u++)a.chain.push(o.readUshort(i,s)),s+=2;return a},e.head={},e.head.parse=function(i,s,o){var a=e._bin,l={};return a.readFixed(i,s),s+=4,l.fontRevision=a.readFixed(i,s),s+=4,a.readUint(i,s),s+=4,a.readUint(i,s),s+=4,l.flags=a.readUshort(i,s),s+=2,l.unitsPerEm=a.readUshort(i,s),s+=2,l.created=a.readUint64(i,s),s+=8,l.modified=a.readUint64(i,s),s+=8,l.xMin=a.readShort(i,s),s+=2,l.yMin=a.readShort(i,s),s+=2,l.xMax=a.readShort(i,s),s+=2,l.yMax=a.readShort(i,s),s+=2,l.macStyle=a.readUshort(i,s),s+=2,l.lowestRecPPEM=a.readUshort(i,s),s+=2,l.fontDirectionHint=a.readShort(i,s),s+=2,l.indexToLocFormat=a.readShort(i,s),s+=2,l.glyphDataFormat=a.readShort(i,s),s+=2,l},e.hhea={},e.hhea.parse=function(i,s,o){var a=e._bin,l={};return a.readFixed(i,s),s+=4,l.ascender=a.readShort(i,s),s+=2,l.descender=a.readShort(i,s),s+=2,l.lineGap=a.readShort(i,s),s+=2,l.advanceWidthMax=a.readUshort(i,s),s+=2,l.minLeftSideBearing=a.readShort(i,s),s+=2,l.minRightSideBearing=a.readShort(i,s),s+=2,l.xMaxExtent=a.readShort(i,s),s+=2,l.caretSlopeRise=a.readShort(i,s),s+=2,l.caretSlopeRun=a.readShort(i,s),s+=2,l.caretOffset=a.readShort(i,s),s+=2,s+=8,l.metricDataFormat=a.readShort(i,s),s+=2,l.numberOfHMetrics=a.readUshort(i,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(i,s,o,a){for(var l=e._bin,u={aWidth:[],lsBearing:[]},c=0,d=0,h=0;h<a.maxp.numGlyphs;h++)h<a.hhea.numberOfHMetrics&&(c=l.readUshort(i,s),s+=2,d=l.readShort(i,s),s+=2),u.aWidth.push(c),u.lsBearing.push(d);return u},e.kern={},e.kern.parse=function(i,s,o,a){var l=e._bin,u=l.readUshort(i,s);if(s+=2,u==1)return e.kern.parseV1(i,s-2,o,a);var c=l.readUshort(i,s);s+=2;for(var d={glyph1:[],rval:[]},h=0;h<c;h++){s+=2,o=l.readUshort(i,s),s+=2;var g=l.readUshort(i,s);s+=2;var y=g>>>8;if((y&=15)!=0)throw"unknown kern table format: "+y;s=e.kern.readFormat0(i,s,d)}return d},e.kern.parseV1=function(i,s,o,a){var l=e._bin;l.readFixed(i,s),s+=4;var u=l.readUint(i,s);s+=4;for(var c={glyph1:[],rval:[]},d=0;d<u;d++){l.readUint(i,s),s+=4;var h=l.readUshort(i,s);s+=2,l.readUshort(i,s),s+=2;var g=h>>>8;if((g&=15)!=0)throw"unknown kern table format: "+g;s=e.kern.readFormat0(i,s,c)}return c},e.kern.readFormat0=function(i,s,o){var a=e._bin,l=-1,u=a.readUshort(i,s);s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2;for(var c=0;c<u;c++){var d=a.readUshort(i,s);s+=2;var h=a.readUshort(i,s);s+=2;var g=a.readShort(i,s);s+=2,d!=l&&(o.glyph1.push(d),o.rval.push({glyph2:[],vals:[]}));var y=o.rval[o.rval.length-1];y.glyph2.push(h),y.vals.push(g),l=d}return s},e.loca={},e.loca.parse=function(i,s,o,a){var l=e._bin,u=[],c=a.head.indexToLocFormat,d=a.maxp.numGlyphs+1;if(c==0)for(var h=0;h<d;h++)u.push(l.readUshort(i,s+(h<<1))<<1);if(c==1)for(h=0;h<d;h++)u.push(l.readUint(i,s+(h<<2)));return u},e.maxp={},e.maxp.parse=function(i,s,o){var a=e._bin,l={},u=a.readUint(i,s);return s+=4,l.numGlyphs=a.readUshort(i,s),s+=2,u==65536&&(l.maxPoints=a.readUshort(i,s),s+=2,l.maxContours=a.readUshort(i,s),s+=2,l.maxCompositePoints=a.readUshort(i,s),s+=2,l.maxCompositeContours=a.readUshort(i,s),s+=2,l.maxZones=a.readUshort(i,s),s+=2,l.maxTwilightPoints=a.readUshort(i,s),s+=2,l.maxStorage=a.readUshort(i,s),s+=2,l.maxFunctionDefs=a.readUshort(i,s),s+=2,l.maxInstructionDefs=a.readUshort(i,s),s+=2,l.maxStackElements=a.readUshort(i,s),s+=2,l.maxSizeOfInstructions=a.readUshort(i,s),s+=2,l.maxComponentElements=a.readUshort(i,s),s+=2,l.maxComponentDepth=a.readUshort(i,s),s+=2),l},e.name={},e.name.parse=function(i,s,o){var a=e._bin,l={};a.readUshort(i,s),s+=2;var u=a.readUshort(i,s);s+=2,a.readUshort(i,s);for(var c,d=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],h=s+=2,g=0;g<u;g++){var y=a.readUshort(i,s);s+=2;var E=a.readUshort(i,s);s+=2;var _=a.readUshort(i,s);s+=2;var m=a.readUshort(i,s);s+=2;var v=a.readUshort(i,s);s+=2;var S=a.readUshort(i,s);s+=2;var T,M=d[m],A=h+12*u+S;if(y==0)T=a.readUnicode(i,A,v/2);else if(y==3&&E==0)T=a.readUnicode(i,A,v/2);else if(E==0)T=a.readASCII(i,A,v);else if(E==1)T=a.readUnicode(i,A,v/2);else if(E==3)T=a.readUnicode(i,A,v/2);else{if(y!=1)throw"unknown encoding "+E+", platformID: "+y;T=a.readASCII(i,A,v),console.debug("reading unknown MAC encoding "+E+" as ASCII")}var R="p"+y+","+_.toString(16);l[R]==null&&(l[R]={}),l[R][M!==void 0?M:m]=T,l[R]._lang=_}for(var O in l)if(l[O].postScriptName!=null&&l[O]._lang==1033)return l[O];for(var O in l)if(l[O].postScriptName!=null&&l[O]._lang==0)return l[O];for(var O in l)if(l[O].postScriptName!=null&&l[O]._lang==3084)return l[O];for(var O in l)if(l[O].postScriptName!=null)return l[O];for(var O in l){c=O;break}return console.debug("returning name table with languageID "+l[c]._lang),l[c]},e["OS/2"]={},e["OS/2"].parse=function(i,s,o){var a=e._bin.readUshort(i,s);s+=2;var l={};if(a==0)e["OS/2"].version0(i,s,l);else if(a==1)e["OS/2"].version1(i,s,l);else if(a==2||a==3||a==4)e["OS/2"].version2(i,s,l);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(i,s,l)}return l},e["OS/2"].version0=function(i,s,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(i,s),s+=2,o.usWeightClass=a.readUshort(i,s),s+=2,o.usWidthClass=a.readUshort(i,s),s+=2,o.fsType=a.readUshort(i,s),s+=2,o.ySubscriptXSize=a.readShort(i,s),s+=2,o.ySubscriptYSize=a.readShort(i,s),s+=2,o.ySubscriptXOffset=a.readShort(i,s),s+=2,o.ySubscriptYOffset=a.readShort(i,s),s+=2,o.ySuperscriptXSize=a.readShort(i,s),s+=2,o.ySuperscriptYSize=a.readShort(i,s),s+=2,o.ySuperscriptXOffset=a.readShort(i,s),s+=2,o.ySuperscriptYOffset=a.readShort(i,s),s+=2,o.yStrikeoutSize=a.readShort(i,s),s+=2,o.yStrikeoutPosition=a.readShort(i,s),s+=2,o.sFamilyClass=a.readShort(i,s),s+=2,o.panose=a.readBytes(i,s,10),s+=10,o.ulUnicodeRange1=a.readUint(i,s),s+=4,o.ulUnicodeRange2=a.readUint(i,s),s+=4,o.ulUnicodeRange3=a.readUint(i,s),s+=4,o.ulUnicodeRange4=a.readUint(i,s),s+=4,o.achVendID=[a.readInt8(i,s),a.readInt8(i,s+1),a.readInt8(i,s+2),a.readInt8(i,s+3)],s+=4,o.fsSelection=a.readUshort(i,s),s+=2,o.usFirstCharIndex=a.readUshort(i,s),s+=2,o.usLastCharIndex=a.readUshort(i,s),s+=2,o.sTypoAscender=a.readShort(i,s),s+=2,o.sTypoDescender=a.readShort(i,s),s+=2,o.sTypoLineGap=a.readShort(i,s),s+=2,o.usWinAscent=a.readUshort(i,s),s+=2,o.usWinDescent=a.readUshort(i,s),s+=2},e["OS/2"].version1=function(i,s,o){var a=e._bin;return s=e["OS/2"].version0(i,s,o),o.ulCodePageRange1=a.readUint(i,s),s+=4,o.ulCodePageRange2=a.readUint(i,s),s+=4},e["OS/2"].version2=function(i,s,o){var a=e._bin;return s=e["OS/2"].version1(i,s,o),o.sxHeight=a.readShort(i,s),s+=2,o.sCapHeight=a.readShort(i,s),s+=2,o.usDefault=a.readUshort(i,s),s+=2,o.usBreak=a.readUshort(i,s),s+=2,o.usMaxContext=a.readUshort(i,s),s+=2},e["OS/2"].version5=function(i,s,o){var a=e._bin;return s=e["OS/2"].version2(i,s,o),o.usLowerOpticalPointSize=a.readUshort(i,s),s+=2,o.usUpperOpticalPointSize=a.readUshort(i,s),s+=2},e.post={},e.post.parse=function(i,s,o){var a=e._bin,l={};return l.version=a.readFixed(i,s),s+=4,l.italicAngle=a.readFixed(i,s),s+=4,l.underlinePosition=a.readShort(i,s),s+=2,l.underlineThickness=a.readShort(i,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(i,s){var o=i.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var l=o.tables[a];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var u=-1,c=0;c<l.endCount.length;c++)if(s<=l.endCount[c]){u=c;break}return u==-1||l.startCount[u]>s?0:65535&(l.idRangeOffset[u]!=0?l.glyphIdArray[s-l.startCount[u]+(l.idRangeOffset[u]>>1)-(l.idRangeOffset.length-u)]:s+l.idDelta[u])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(c=0;c<l.groups.length;c++){var d=l.groups[c];if(d[0]<=s&&s<=d[1])return d[2]+(s-d[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(i,s){var o={cmds:[],crds:[]};if(i.SVG&&i.SVG.entries[s]){var a=i.SVG.entries[s];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),i.SVG.entries[s]=a),a)}if(i.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:i.CFF.Private?i.CFF.Private.defaultWidthX:0,open:!1},u=i.CFF,c=i.CFF.Private;if(u.ROS){for(var d=0;u.FDSelect[d+2]<=s;)d+=2;c=u.FDArray[u.FDSelect[d+1]].Private}e.U._drawCFF(i.CFF.CharStrings[s],l,u,c,o)}else i.glyf&&e.U._drawGlyf(s,i,o);return o},e.U._drawGlyf=function(i,s,o){var a=s.glyf[i];a==null&&(a=s.glyf[i]=e.glyf._parseGlyf(s,i)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,s,o))},e.U._simpleGlyph=function(i,s){for(var o=0;o<i.noc;o++){for(var a=o==0?0:i.endPts[o-1]+1,l=i.endPts[o],u=a;u<=l;u++){var c=u==a?l:u-1,d=u==l?a:u+1,h=1&i.flags[u],g=1&i.flags[c],y=1&i.flags[d],E=i.xs[u],_=i.ys[u];if(u==a)if(h){if(!g){e.U.P.moveTo(s,E,_);continue}e.U.P.moveTo(s,i.xs[c],i.ys[c])}else g?e.U.P.moveTo(s,i.xs[c],i.ys[c]):e.U.P.moveTo(s,(i.xs[c]+E)/2,(i.ys[c]+_)/2);h?g&&e.U.P.lineTo(s,E,_):y?e.U.P.qcurveTo(s,E,_,i.xs[d],i.ys[d]):e.U.P.qcurveTo(s,E,_,(E+i.xs[d])/2,(_+i.ys[d])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(i,s,o){for(var a=0;a<i.parts.length;a++){var l={cmds:[],crds:[]},u=i.parts[a];e.U._drawGlyf(u.glyphIndex,s,l);for(var c=u.m,d=0;d<l.crds.length;d+=2){var h=l.crds[d],g=l.crds[d+1];o.crds.push(h*c.a+g*c.b+c.tx),o.crds.push(h*c.c+g*c.d+c.ty)}for(d=0;d<l.cmds.length;d++)o.cmds.push(l.cmds[d])}},e.U._getGlyphClass=function(i,s){var o=e._lctf.getInterval(s,i);return o==-1?0:s[o+2]},e.U.getPairAdjustment=function(i,s,o){var a=!1;if(i.GPOS)for(var l=i.GPOS,u=l.lookupList,c=l.featureList,d=[],h=0;h<c.length;h++){var g=c[h];if(g.tag=="kern"){a=!0;for(var y=0;y<g.tab.length;y++)if(!d[g.tab[y]]){d[g.tab[y]]=!0;for(var E=u[g.tab[y]],_=0;_<E.tabs.length;_++)if(E.tabs[_]!=null){var m,v=E.tabs[_];if((!v.coverage||(m=e._lctf.coverageIndex(v.coverage,s))!=-1)&&E.ltype!=1){if(E.ltype==2){var S=null;if(v.fmt==1){var T=v.pairsets[m];for(h=0;h<T.length;h++)T[h].gid2==o&&(S=T[h])}else if(v.fmt==2){var M=e.U._getGlyphClass(s,v.classDef1),A=e.U._getGlyphClass(o,v.classDef2);S=v.matrix[M][A]}if(S){var R=0;return S.val1&&S.val1[2]&&(R+=S.val1[2]),S.val2&&S.val2[0]&&(R+=S.val2[0]),R}}}}}}}if(i.kern&&!a){var O=i.kern.glyph1.indexOf(s);if(O!=-1){var I=i.kern.rval[O].glyph2.indexOf(o);if(I!=-1)return i.kern.rval[O].vals[I]}}return 0},e.U._applySubs=function(i,s,o,a){for(var l=i.length-s-1,u=0;u<o.tabs.length;u++)if(o.tabs[u]!=null){var c,d=o.tabs[u];if(!d.coverage||(c=e._lctf.coverageIndex(d.coverage,i[s]))!=-1){if(o.ltype==1)i[s],d.fmt==1?i[s]=i[s]+d.delta:i[s]=d.newg[c];else if(o.ltype==4)for(var h=d.vals[c],g=0;g<h.length;g++){var y=h[g],E=y.chain.length;if(!(E>l)){for(var _=!0,m=0,v=0;v<E;v++){for(;i[s+m+(1+v)]==-1;)m++;y.chain[v]!=i[s+m+(1+v)]&&(_=!1)}if(_){for(i[s]=y.nglyph,v=0;v<E+m;v++)i[s+v+1]=-1;break}}}else if(o.ltype==5&&d.fmt==2)for(var S=e._lctf.getInterval(d.cDef,i[s]),T=d.cDef[S+2],M=d.scset[T],A=0;A<M.length;A++){var R=M[A],O=R.input;if(!(O.length>l)){for(_=!0,v=0;v<O.length;v++){var I=e._lctf.getInterval(d.cDef,i[s+1+v]);if(S==-1&&d.cDef[I+2]!=O[v]){_=!1;break}}if(_){var k=R.substLookupRecords;for(g=0;g<k.length;g+=2)k[g],k[g+1]}}}else if(o.ltype==6&&d.fmt==3){if(!e.U._glsCovered(i,d.backCvg,s-d.backCvg.length)||!e.U._glsCovered(i,d.inptCvg,s)||!e.U._glsCovered(i,d.ahedCvg,s+d.inptCvg.length))continue;var G=d.lookupRec;for(A=0;A<G.length;A+=2){S=G[A];var $=a[G[A+1]];e.U._applySubs(i,s+S,$,a)}}}}},e.U._glsCovered=function(i,s,o){for(var a=0;a<s.length;a++)if(e._lctf.coverageIndex(s[a],i[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(i,s,o){for(var a={cmds:[],crds:[]},l=0,u=0;u<s.length;u++){var c=s[u];if(c!=-1){for(var d=u<s.length-1&&s[u+1]!=-1?s[u+1]:0,h=e.U.glyphToPath(i,c),g=0;g<h.crds.length;g+=2)a.crds.push(h.crds[g]+l),a.crds.push(h.crds[g+1]);for(o&&a.cmds.push(o),g=0;g<h.cmds.length;g++)a.cmds.push(h.cmds[g]);o&&a.cmds.push("X"),l+=i.hmtx.aWidth[c],u<s.length-1&&(l+=e.U.getPairAdjustment(i,c,d))}}return a},e.U.P={},e.U.P.moveTo=function(i,s,o){i.cmds.push("M"),i.crds.push(s,o)},e.U.P.lineTo=function(i,s,o){i.cmds.push("L"),i.crds.push(s,o)},e.U.P.curveTo=function(i,s,o,a,l,u,c){i.cmds.push("C"),i.crds.push(s,o,a,l,u,c)},e.U.P.qcurveTo=function(i,s,o,a,l){i.cmds.push("Q"),i.crds.push(s,o,a,l)},e.U.P.closePath=function(i){i.cmds.push("Z")},e.U._drawCFF=function(i,s,o,a,l){for(var u=s.stack,c=s.nStems,d=s.haveWidth,h=s.width,g=s.open,y=0,E=s.x,_=s.y,m=0,v=0,S=0,T=0,M=0,A=0,R=0,O=0,I=0,k=0,G={val:0,size:0};y<i.length;){e.CFF.getCharString(i,y,G);var $=G.val;if(y+=G.size,$=="o1"||$=="o18")u.length%2!=0&&!d&&(h=u.shift()+a.nominalWidthX),c+=u.length>>1,u.length=0,d=!0;else if($=="o3"||$=="o23")u.length%2!=0&&!d&&(h=u.shift()+a.nominalWidthX),c+=u.length>>1,u.length=0,d=!0;else if($=="o4")u.length>1&&!d&&(h=u.shift()+a.nominalWidthX,d=!0),g&&e.U.P.closePath(l),_+=u.pop(),e.U.P.moveTo(l,E,_),g=!0;else if($=="o5")for(;u.length>0;)E+=u.shift(),_+=u.shift(),e.U.P.lineTo(l,E,_);else if($=="o6"||$=="o7")for(var U=u.length,ee=$=="o6",re=0;re<U;re++){var ne=u.shift();ee?E+=ne:_+=ne,ee=!ee,e.U.P.lineTo(l,E,_)}else if($=="o8"||$=="o24"){U=u.length;for(var X=0;X+6<=U;)m=E+u.shift(),v=_+u.shift(),S=m+u.shift(),T=v+u.shift(),E=S+u.shift(),_=T+u.shift(),e.U.P.curveTo(l,m,v,S,T,E,_),X+=6;$=="o24"&&(E+=u.shift(),_+=u.shift(),e.U.P.lineTo(l,E,_))}else{if($=="o11")break;if($=="o1234"||$=="o1235"||$=="o1236"||$=="o1237")$=="o1234"&&(v=_,S=(m=E+u.shift())+u.shift(),k=T=v+u.shift(),A=T,O=_,E=(R=(M=(I=S+u.shift())+u.shift())+u.shift())+u.shift(),e.U.P.curveTo(l,m,v,S,T,I,k),e.U.P.curveTo(l,M,A,R,O,E,_)),$=="o1235"&&(m=E+u.shift(),v=_+u.shift(),S=m+u.shift(),T=v+u.shift(),I=S+u.shift(),k=T+u.shift(),M=I+u.shift(),A=k+u.shift(),R=M+u.shift(),O=A+u.shift(),E=R+u.shift(),_=O+u.shift(),u.shift(),e.U.P.curveTo(l,m,v,S,T,I,k),e.U.P.curveTo(l,M,A,R,O,E,_)),$=="o1236"&&(m=E+u.shift(),v=_+u.shift(),S=m+u.shift(),k=T=v+u.shift(),A=T,R=(M=(I=S+u.shift())+u.shift())+u.shift(),O=A+u.shift(),E=R+u.shift(),e.U.P.curveTo(l,m,v,S,T,I,k),e.U.P.curveTo(l,M,A,R,O,E,_)),$=="o1237"&&(m=E+u.shift(),v=_+u.shift(),S=m+u.shift(),T=v+u.shift(),I=S+u.shift(),k=T+u.shift(),M=I+u.shift(),A=k+u.shift(),R=M+u.shift(),O=A+u.shift(),Math.abs(R-E)>Math.abs(O-_)?E=R+u.shift():_=O+u.shift(),e.U.P.curveTo(l,m,v,S,T,I,k),e.U.P.curveTo(l,M,A,R,O,E,_));else if($=="o14"){if(u.length>0&&!d&&(h=u.shift()+o.nominalWidthX,d=!0),u.length==4){var q=u.shift(),K=u.shift(),F=u.shift(),L=u.shift(),z=e.CFF.glyphBySE(o,F),Y=e.CFF.glyphBySE(o,L);e.U._drawCFF(o.CharStrings[z],s,o,a,l),s.x=q,s.y=K,e.U._drawCFF(o.CharStrings[Y],s,o,a,l)}g&&(e.U.P.closePath(l),g=!1)}else if($=="o19"||$=="o20")u.length%2!=0&&!d&&(h=u.shift()+a.nominalWidthX),c+=u.length>>1,u.length=0,d=!0,y+=c+7>>3;else if($=="o21")u.length>2&&!d&&(h=u.shift()+a.nominalWidthX,d=!0),_+=u.pop(),E+=u.pop(),g&&e.U.P.closePath(l),e.U.P.moveTo(l,E,_),g=!0;else if($=="o22")u.length>1&&!d&&(h=u.shift()+a.nominalWidthX,d=!0),E+=u.pop(),g&&e.U.P.closePath(l),e.U.P.moveTo(l,E,_),g=!0;else if($=="o25"){for(;u.length>6;)E+=u.shift(),_+=u.shift(),e.U.P.lineTo(l,E,_);m=E+u.shift(),v=_+u.shift(),S=m+u.shift(),T=v+u.shift(),E=S+u.shift(),_=T+u.shift(),e.U.P.curveTo(l,m,v,S,T,E,_)}else if($=="o26")for(u.length%2&&(E+=u.shift());u.length>0;)m=E,v=_+u.shift(),E=S=m+u.shift(),_=(T=v+u.shift())+u.shift(),e.U.P.curveTo(l,m,v,S,T,E,_);else if($=="o27")for(u.length%2&&(_+=u.shift());u.length>0;)v=_,S=(m=E+u.shift())+u.shift(),T=v+u.shift(),E=S+u.shift(),_=T,e.U.P.curveTo(l,m,v,S,T,E,_);else if($=="o10"||$=="o29"){var B=$=="o10"?a:o;if(u.length==0)console.debug("error: empty stack");else{var J=u.pop(),le=B.Subrs[J+B.Bias];s.x=E,s.y=_,s.nStems=c,s.haveWidth=d,s.width=h,s.open=g,e.U._drawCFF(le,s,o,a,l),E=s.x,_=s.y,c=s.nStems,d=s.haveWidth,h=s.width,g=s.open}}else if($=="o30"||$=="o31"){var pe=u.length,he=(X=0,$=="o31");for(X+=pe-(U=-3&pe);X<U;)he?(v=_,S=(m=E+u.shift())+u.shift(),_=(T=v+u.shift())+u.shift(),U-X==5?(E=S+u.shift(),X++):E=S,he=!1):(m=E,v=_+u.shift(),S=m+u.shift(),T=v+u.shift(),E=S+u.shift(),U-X==5?(_=T+u.shift(),X++):_=T,he=!0),e.U.P.curveTo(l,m,v,S,T,E,_),X+=4}else{if(($+"").charAt(0)=="o")throw console.debug("Unknown operation: "+$,i),$;u.push($)}}}s.x=E,s.y=_,s.nStems=c,s.haveWidth=d,s.width=h,s.open=g};var t=e,r={Typr:t};return n.Typr=t,n.default=r,Object.defineProperty(n,"__esModule",{value:!0}),n}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function lce(){return function(n){var e=Uint8Array,t=Uint16Array,r=Uint32Array,i=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function($,U){for(var ee=new t(31),re=0;re<31;++re)ee[re]=U+=1<<$[re-1];var ne=new r(ee[30]);for(re=1;re<30;++re)for(var X=ee[re];X<ee[re+1];++X)ne[X]=X-ee[re]<<5|re;return[ee,ne]},l=a(i,2),u=l[0],c=l[1];u[28]=258,c[258]=28;for(var d=a(s,0)[0],h=new t(32768),g=0;g<32768;++g){var y=(43690&g)>>>1|(21845&g)<<1;y=(61680&(y=(52428&y)>>>2|(13107&y)<<2))>>>4|(3855&y)<<4,h[g]=((65280&y)>>>8|(255&y)<<8)>>>1}var E=function($,U,ee){for(var re=$.length,ne=0,X=new t(U);ne<re;++ne)++X[$[ne]-1];var q,K=new t(U);for(ne=0;ne<U;++ne)K[ne]=K[ne-1]+X[ne-1]<<1;{q=new t(1<<U);var F=15-U;for(ne=0;ne<re;++ne)if($[ne])for(var L=ne<<4|$[ne],z=U-$[ne],Y=K[$[ne]-1]++<<z,B=Y|(1<<z)-1;Y<=B;++Y)q[h[Y]>>>F]=L}return q},_=new e(288);for(g=0;g<144;++g)_[g]=8;for(g=144;g<256;++g)_[g]=9;for(g=256;g<280;++g)_[g]=7;for(g=280;g<288;++g)_[g]=8;var m=new e(32);for(g=0;g<32;++g)m[g]=5;var v=E(_,9),S=E(m,5),T=function($){for(var U=$[0],ee=1;ee<$.length;++ee)$[ee]>U&&(U=$[ee]);return U},M=function($,U,ee){var re=U/8|0;return($[re]|$[re+1]<<8)>>(7&U)&ee},A=function($,U){var ee=U/8|0;return($[ee]|$[ee+1]<<8|$[ee+2]<<16)>>(7&U)},R=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],O=function($,U,ee){var re=new Error(U||R[$]);if(re.code=$,Error.captureStackTrace&&Error.captureStackTrace(re,O),!ee)throw re;return re},I=function($,U,ee){var re=$.length;if(!re||ee&&!ee.l&&re<5)return U||new e(0);var ne=!U||ee,X=!ee||ee.i;ee||(ee={}),U||(U=new e(3*re));var q,K=function(Qe){var ot=U.length;if(Qe>ot){var xt=new e(Math.max(2*ot,Qe));xt.set(U),U=xt}},F=ee.f||0,L=ee.p||0,z=ee.b||0,Y=ee.l,B=ee.d,J=ee.m,le=ee.n,pe=8*re;do{if(!Y){ee.f=F=M($,L,1);var he=M($,L+1,3);if(L+=3,!he){var Ee=$[(Le=((q=L)/8|0)+(7&q&&1)+4)-4]|$[Le-3]<<8,_e=Le+Ee;if(_e>re){X&&O(0);break}ne&&K(z+Ee),U.set($.subarray(Le,_e),z),ee.b=z+=Ee,ee.p=L=8*_e;continue}if(he==1)Y=v,B=S,J=9,le=5;else if(he==2){var te=M($,L,31)+257,j=M($,L+10,15)+4,ce=te+M($,L+5,31)+1;L+=14;for(var fe=new e(ce),ie=new e(19),se=0;se<j;++se)ie[o[se]]=M($,L+3*se,7);L+=3*j;var Ae=T(ie),we=(1<<Ae)-1,Re=E(ie,Ae);for(se=0;se<ce;){var Le,be=Re[M($,L,we)];if(L+=15&be,(Le=be>>>4)<16)fe[se++]=Le;else{var Ye=0,ue=0;for(Le==16?(ue=3+M($,L,3),L+=2,Ye=fe[se-1]):Le==17?(ue=3+M($,L,7),L+=3):Le==18&&(ue=11+M($,L,127),L+=7);ue--;)fe[se++]=Ye}}var oe=fe.subarray(0,te),ye=fe.subarray(te);J=T(oe),le=T(ye),Y=E(oe,J),B=E(ye,le)}else O(1);if(L>pe){X&&O(0);break}}ne&&K(z+131072);for(var Fe=(1<<J)-1,ze=(1<<le)-1,He=L;;He=L){var Ze=(Ye=Y[A($,L)&Fe])>>>4;if((L+=15&Ye)>pe){X&&O(0);break}if(Ye||O(2),Ze<256)U[z++]=Ze;else{if(Ze==256){He=L,Y=null;break}var Ke=Ze-254;if(Ze>264){var Ue=i[se=Ze-257];Ke=M($,L,(1<<Ue)-1)+u[se],L+=Ue}var st=B[A($,L)&ze],ht=st>>>4;if(st||O(3),L+=15&st,ye=d[ht],ht>3&&(Ue=s[ht],ye+=A($,L)&(1<<Ue)-1,L+=Ue),L>pe){X&&O(0);break}ne&&K(z+131072);for(var at=z+Ke;z<at;z+=4)U[z]=U[z-ye],U[z+1]=U[z+1-ye],U[z+2]=U[z+2-ye],U[z+3]=U[z+3-ye];z=at}}ee.l=Y,ee.p=He,ee.b=z,Y&&(F=1,ee.m=J,ee.d=B,ee.n=le)}while(!F);return z==U.length?U:function(Qe,ot,xt){(xt==null||xt>Qe.length)&&(xt=Qe.length);var Ut=new(Qe instanceof t?t:Qe instanceof r?r:e)(xt-ot);return Ut.set(Qe.subarray(ot,xt)),Ut}(U,0,z)},k=new e(0),G=typeof TextDecoder<"u"&&new TextDecoder;try{G.decode(k,{stream:!0})}catch{}return n.convert_streams=function($){var U=new DataView($),ee=0;function re(){var te=U.getUint16(ee);return ee+=2,te}function ne(){var te=U.getUint32(ee);return ee+=4,te}function X(te){Ee.setUint16(_e,te),_e+=2}function q(te){Ee.setUint32(_e,te),_e+=4}for(var K={signature:ne(),flavor:ne(),length:ne(),numTables:re(),reserved:re(),totalSfntSize:ne(),majorVersion:re(),minorVersion:re(),metaOffset:ne(),metaLength:ne(),metaOrigLength:ne(),privOffset:ne(),privLength:ne()},F=0;Math.pow(2,F)<=K.numTables;)F++;F--;for(var L=16*Math.pow(2,F),z=16*K.numTables-L,Y=12,B=[],J=0;J<K.numTables;J++)B.push({tag:ne(),offset:ne(),compLength:ne(),origLength:ne(),origChecksum:ne()}),Y+=16;var le,pe=new Uint8Array(12+16*B.length+B.reduce(function(te,j){return te+j.origLength+4},0)),he=pe.buffer,Ee=new DataView(he),_e=0;return q(K.flavor),X(K.numTables),X(L),X(F),X(z),B.forEach(function(te){q(te.tag),q(te.origChecksum),q(Y),q(te.origLength),te.outOffset=Y,(Y+=te.origLength)%4!=0&&(Y+=4-Y%4)}),B.forEach(function(te){var j,ce=$.slice(te.offset,te.offset+te.compLength);if(te.compLength!=te.origLength){var fe=new Uint8Array(te.origLength);j=new Uint8Array(ce,2),I(j,fe)}else fe=new Uint8Array(ce);pe.set(fe,te.outOffset);var ie=0;(Y=te.outOffset+te.origLength)%4!=0&&(ie=4-Y%4),pe.set(new Uint8Array(ie).buffer,te.outOffset+te.origLength),le=Y+ie}),he.slice(0,le)},Object.defineProperty(n,"__esModule",{value:!0}),n}({}).convert_streams}function uce(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=1,s=2,o=4,a=8,l=16,u=32;let c;function d(M){if(!c){const A={R:s,L:i,D:o,C:l,U:u,T:a};c=new Map;for(let R in r){let O=0;r[R].split(",").forEach(I=>{let[k,G]=I.split("+");k=parseInt(k,36),G=G?parseInt(G,36):0,c.set(O+=k,A[R]);for(let $=G;$--;)c.set(++O,A[R])})}}return c.get(M)||u}const h=1,g=2,y=3,E=4,_=[null,"isol","init","fina","medi"];function m(M){const A=new Uint8Array(M.length);let R=u,O=h,I=-1;for(let k=0;k<M.length;k++){const G=M.codePointAt(k);let $=d(G)|0,U=h;$&a||(R&(i|o|l)?$&(s|o|l)?(U=y,(O===h||O===y)&&A[I]++):$&(i|u)&&(O===g||O===E)&&A[I]--:R&(s|u)&&(O===g||O===E)&&A[I]--,O=A[k]=U,R=$,I=k,G>65535&&k++)}return A}function v(M,A){const R=[];for(let I=0;I<A.length;I++){const k=A.codePointAt(I);k>65535&&I++,R.push(n.U.codeToGlyph(M,k))}const O=M.GSUB;if(O){const{lookupList:I,featureList:k}=O;let G;const $=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,U=[];k.forEach(ee=>{if($.test(ee.tag))for(let re=0;re<ee.tab.length;re++){if(U[ee.tab[re]])continue;U[ee.tab[re]]=!0;const ne=I[ee.tab[re]],X=/^(isol|init|fina|medi)$/.test(ee.tag);X&&!G&&(G=m(A));for(let q=0;q<R.length;q++)(!G||!X||_[G[q]]===ee.tag)&&n.U._applySubs(R,q,ne,I)}})}return R}function S(...M){for(let A=0;A<M.length;A++)if(typeof M[A]=="number")return M[A]}function T(M){const A=Object.create(null),R=M["OS/2"],O=M.hhea,I=M.head.unitsPerEm,k=S(R&&R.sTypoAscender,O&&O.ascender,I),G={unitsPerEm:I,ascender:k,descender:S(R&&R.sTypoDescender,O&&O.descender,0),capHeight:S(R&&R.sCapHeight,k),xHeight:S(R&&R.sxHeight,k),lineGap:S(R&&R.sTypoLineGap,O&&O.lineGap),forEachGlyph($,U,ee,re){let ne=0;const X=1/G.unitsPerEm*U,q=v(M,$);let K=0,F=-1;return q.forEach((L,z)=>{if(L!==-1){let Y=A[L];if(!Y){const{cmds:B,crds:J}=n.U.glyphToPath(M,L);let le="",pe=0;for(let j=0,ce=B.length;j<ce;j++){const fe=t[B[j]];le+=B[j];for(let ie=1;ie<=fe;ie++)le+=(ie>1?",":"")+J[pe++]}let he,Ee,_e,te;if(J.length){he=Ee=1/0,_e=te=-1/0;for(let j=0,ce=J.length;j<ce;j+=2){let fe=J[j],ie=J[j+1];fe<he&&(he=fe),ie<Ee&&(Ee=ie),fe>_e&&(_e=fe),ie>te&&(te=ie)}}else he=_e=Ee=te=0;Y=A[L]={index:L,advanceWidth:M.hmtx.aWidth[L],xMin:he,yMin:Ee,xMax:_e,yMax:te,path:le,pathCommandCount:B.length}}F!==-1&&(ne+=n.U.getPairAdjustment(M,F,L)*X),re.call(null,Y,ne,K),Y.advanceWidth&&(ne+=Y.advanceWidth*X),ee&&(ne+=ee*U),F=L}K+=$.codePointAt(K)>65535?2:1}),ne}};return G}return function(A){const R=new Uint8Array(A,0,4),O=n._bin.readASCII(R,0,4);if(O==="wOFF")A=e(A);else if(O==="wOF2")throw new Error("woff2 fonts not supported");return T(n.parse(A)[0])}}const cce=xv({name:"Typr Font Parser",dependencies:[ace,lce,uce],init(n,e,t){const r=n(),i=e();return t(r,i)}}),Cp={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},fce=new gt;function pp(){return(self.performance||Date).now()}const NO=Object.create(null);function NB(n,e){n=pce({},n);const t=pp();if(n.font=mce(n.font||Cp.defaultFontURL),n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||Cp.sdfGlyphSize,n.colorRanges!=null){let d={};for(let h in n.colorRanges)if(n.colorRanges.hasOwnProperty(h)){let g=n.colorRanges[h];typeof g!="number"&&(g=fce.set(g).getHex()),d[h]=g}n.colorRanges=d}Object.freeze(n);const{textureWidth:r,sdfExponent:i}=Cp,{sdfGlyphSize:s}=n,o=r/s*4;let a=NO[s];if(!a){const d=document.createElement("canvas");d.width=r,d.height=s*256/o,a=NO[s]={glyphCount:0,sdfGlyphSize:s,sdfCanvas:d,sdfTexture:new Fr(d,void 0,void 0,void 0,br,br),contextLost:!1,glyphsByFont:new Map},a.sdfTexture.generateMipmaps=!1,dce(a)}const{sdfTexture:l,sdfCanvas:u}=a;let c=a.glyphsByFont.get(n.font);c||a.glyphsByFont.set(n.font,c=new Map),yce(n).then(d=>{const{glyphIds:h,glyphPositions:g,fontSize:y,unitsPerEm:E,timings:_}=d,m=[],v=new Float32Array(h.length*4),S=y/E;let T=0,M=0;const A=pp();h.forEach((G,$)=>{let U=c.get(G);if(!U){const{path:X,pathBounds:q}=d.glyphData[G],K=Math.max(q[2]-q[0],q[3]-q[1])/s*(Cp.sdfMargin*s+.5),F=a.glyphCount++,L=[q[0]-K,q[1]-K,q[2]+K,q[3]+K];c.set(G,U={path:X,atlasIndex:F,sdfViewBox:L}),m.push(U)}const{sdfViewBox:ee}=U,re=g[M++],ne=g[M++];v[T++]=re+ee[0]*S,v[T++]=ne+ee[1]*S,v[T++]=re+ee[2]*S,v[T++]=ne+ee[3]*S,h[$]=U.atlasIndex}),_.quads=(_.quads||0)+(pp()-A);const R=pp();_.sdf={};const O=u.height,I=Math.ceil(a.glyphCount/o),k=Math.pow(2,Math.ceil(Math.log2(I*s)));k>O&&(console.info(`Increasing SDF texture size ${O}->${k}`),oce(u,r,k),l.dispose()),Promise.all(m.map(G=>OB(G,a,n.gpuAccelerateSDF).then(({timing:$})=>{_.sdf[G.atlasIndex]=$}))).then(()=>{m.length&&!a.contextLost&&(DB(a),l.needsUpdate=!0),_.sdfTotal=pp()-R,_.total=pp()-t,e(Object.freeze({parameters:n,sdfTexture:l,sdfGlyphSize:s,sdfExponent:i,glyphBounds:v,glyphAtlasIndices:h,glyphColors:d.glyphColors,caretPositions:d.caretPositions,caretHeight:d.caretHeight,chunkedBounds:d.chunkedBounds,ascender:d.ascender,descender:d.descender,lineHeight:d.lineHeight,capHeight:d.capHeight,xHeight:d.xHeight,topBaseline:d.topBaseline,blockBounds:d.blockBounds,visibleBounds:d.visibleBounds,timings:d.timings}))})}),Promise.resolve().then(()=>{a.contextLost||sce(u)})}function OB({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:r,sdfCanvas:i,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:l}=Cp,u=Math.max(t[2]-t[0],t[3]-t[1]),c=Math.floor(e/4),d=c%(a/r)*r,h=Math.floor(c/(a/r))*r,g=e%4;return Que(r,r,n,t,u,l,i,d,h,g,o)}function dce(n){const e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;const r=[];n.glyphsByFont.forEach(i=>{i.forEach(s=>{r.push(OB(s,n,!0))})}),Promise.all(r).then(()=>{DB(n),n.sdfTexture.needsUpdate=!0})})}function hce({font:n,characters:e,sdfGlyphSize:t},r){let i=Array.isArray(e)?e.join(`
`):""+e;NB({font:n,sdfGlyphSize:t,text:i},r)}function pce(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let ix;function mce(n){return ix||(ix=typeof document>"u"?{}:document.createElement("a")),ix.href=n,ix.href}function DB(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=n,{width:r,height:i}=e,s=n.sdfCanvas.getContext("webgl");let o=t.image.data;(!o||o.length!==r*i*4)&&(o=new Uint8Array(r*i*4),t.image={width:r,height:i,data:o},t.flipY=!1,t.isDataTexture=!0),s.readPixels(0,0,r,i,s.RGBA,s.UNSIGNED_BYTE,o)}}const gce=xv({name:"Typesetter",dependencies:[Cp,cce,Zue,Vue],init(n,e,t,r){const{defaultFontURL:i}=n;return t(e,r(),{defaultFontURL:i})}}),yce=xv({name:"Typesetter",dependencies:[gce],init(n){return function(e){return new Promise(t=>{n.typeset(e,t)})}},getTransferables(n){const e=[n.glyphPositions.buffer,n.glyphIds.buffer];return n.caretPositions&&e.push(n.caretPositions.buffer),n.glyphColors&&e.push(n.glyphColors.buffer),e}}),OO={};function vce(n){let e=OO[n];if(!e){const t=new ef(1,1,n,n),r=t.clone(),i=t.attributes,s=r.attributes,o=new un,a=i.uv.count;for(let l=0;l<a;l++)s.position.array[l*3]*=-1,s.normal.array[l*3+2]*=-1;["position","normal","uv"].forEach(l=>{o.setAttribute(l,new Ct([...i[l].array,...s[l].array],i[l].itemSize))}),o.setIndex([...t.index.array,...r.index.array.map(l=>l+a)]),o.translate(.5,.5,0),e=OO[n]=o}return e}const _ce="aTroikaGlyphBounds",DO="aTroikaGlyphIndex",xce="aTroikaGlyphColor";class wce extends SA{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Ao,this.boundingBox=new Mo}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===ps?t/2:0,e===Lr?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=vce(e);["position","normal","uv"].forEach(r=>{this.attributes[r]=t.attributes[r].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,r,i,s){hb(this,_ce,e,4),hb(this,DO,t,1),hb(this,xce,s,3),this._blockBounds=r,this._chunkedBounds=i,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:r}=this;if(t){const{PI:i,floor:s,min:o,max:a,sin:l,cos:u}=Math,c=i/2,d=i*2,h=Math.abs(t),g=e[0]/h,y=e[2]/h,E=s((g+c)/d)!==s((y+c)/d)?-h:o(l(g)*h,l(y)*h),_=s((g-c)/d)!==s((y-c)/d)?h:a(l(g)*h,l(y)*h),m=s((g+i)/d)!==s((y+i)/d)?h*2:a(h-u(g)*h,h-u(y)*h);r.min.set(E,e[1],t<0?-m:0),r.max.set(_,e[3],t<0?0:m)}else r.min.set(e[0],e[1],0),r.max.set(e[2],e[3],0);r.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(DO).count,r=this._chunkedBounds;if(r)for(let i=r.length;i--;){t=r[i].end;let s=r[i].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=t}}function hb(n,e,t,r){const i=n.getAttribute(e);t?i&&i.array.length===t.length?(i.array.set(t),i.needsUpdate=!0):(n.setAttribute(e,new Rd(t,r)),delete n._maxInstanceCount,n.dispose()):i&&n.deleteAttribute(e)}const Sce=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,Ece=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,bce=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,Tce=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function Mce(n){const e=fM(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Je},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new zn(0,0,0,0)},uTroikaClipRect:{value:new zn(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Je},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new gt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new fn},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:Sce,vertexTransform:Ece,fragmentDefs:bce,fragmentColorTransform:Tce,customRewriter({vertexShader:t,fragmentShader:r}){let i=/\buniform\s+vec3\s+diffuse\b/;return i.test(r)&&(r=r.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(t)||(t=t.replace(IB,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:r}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const d2=new Wu({color:16777215,side:Lr,transparent:!0}),kO=8421504,UO=new Qt,sx=new de,pb=new de,kg=[],Ace=new de,mb="+x+y";function FO(n){return Array.isArray(n)?n[0]:n}let kB=()=>{const n=new Or(new ef(1,1),d2);return kB=()=>n,n},UB=()=>{const n=new Or(new ef(1,1,32,1),d2);return UB=()=>n,n};const Cce={type:"syncstart"},Rce={type:"synccomplete"},FB=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],Pce=FB.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let zB=class extends Or{constructor(){const e=new wce;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=kO,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=mb,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(Cce),NB({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const r=this._queuedSyncs;r&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{r.forEach(i=>i&&i())})),this.dispatchEvent(Rce),e&&e()})))}onBeforeRender(e,t,r,i,s,o){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s),s._hadOwnSide=s.hasOwnProperty("side"),this.geometry.setSide(s._actualSide=s.side),s.side=Dl}onAfterRender(e,t,r,i,s,o){s._hadOwnSide?s.side=s._actualSide:delete s.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=d2.clone());if((!e||e.baseMaterial!==t)&&(e=this._derivedMaterial=Mce(t),t.addEventListener("dispose",function r(){t.removeEventListener("dispose",r),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let r=e._outlineMtl;return r||(r=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),r.isTextOutlineMaterial=!0,r.depthWrite=!1,r.map=null,e.addEventListener("dispose",function i(){e.removeEventListener("dispose",i),r.dispose()})),[r,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return FO(this.material).getDepthMaterial()}get customDistanceMaterial(){return FO(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,r=e.uniforms,i=this.textRenderInfo;if(i){const{sdfTexture:a,blockBounds:l}=i;r.uTroikaSDFTexture.value=a,r.uTroikaSDFTextureSize.value.set(a.image.width,a.image.height),r.uTroikaSDFGlyphSize.value=i.sdfGlyphSize,r.uTroikaSDFExponent.value=i.sdfExponent,r.uTroikaTotalBounds.value.fromArray(l),r.uTroikaUseGlyphColors.value=!t&&!!i.glyphColors;let u=0,c=0,d=0,h,g,y,E=0,_=0;if(t){let{outlineWidth:v,outlineOffsetX:S,outlineOffsetY:T,outlineBlur:M,outlineOpacity:A}=this;u=this._parsePercent(v)||0,c=Math.max(0,this._parsePercent(M)||0),h=A,E=this._parsePercent(S)||0,_=this._parsePercent(T)||0}else d=Math.max(0,this._parsePercent(this.strokeWidth)||0),d&&(y=this.strokeColor,r.uTroikaStrokeColor.value.set(y??kO),g=this.strokeOpacity,g==null&&(g=1)),h=this.fillOpacity;r.uTroikaDistanceOffset.value=u,r.uTroikaPositionOffset.value.set(E,_),r.uTroikaBlurRadius.value=c,r.uTroikaStrokeWidth.value=d,r.uTroikaStrokeOpacity.value=g,r.uTroikaFillOpacity.value=h??1,r.uTroikaCurveRadius.value=this.curveRadius||0;let m=this.clipRect;if(m&&Array.isArray(m)&&m.length===4)r.uTroikaClipRect.value.fromArray(m);else{const v=(this.fontSize||.1)*100;r.uTroikaClipRect.value.set(l[0]-v,l[1]-v,l[2]+v,l[3]+v)}this.geometry.applyClipRect(r.uTroikaClipRect.value)}r.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=t?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const a=e.hasOwnProperty("color")?e.color:e.color=new gt;(s!==a._input||typeof s=="object")&&a.set(a._input=s)}let o=this.orientation||mb;if(o!==e._orientation){let a=r.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let l=o!==mb&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,u,c,d,h]=l;sx.set(0,0,0)[c]=u==="-"?1:-1,pb.set(0,0,0)[h]=d==="-"?-1:1,UO.lookAt(Ace,sx.cross(pb),pb),a.setFromMatrix4(UO)}else a.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),r=t?parseFloat(t[1]):NaN;e=(isNaN(r)?0:r/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new Je){t.copy(e);const r=this.curveRadius;return r&&(t.x=Math.atan2(e.x,Math.abs(r)-Math.abs(e.z))*Math.abs(r)),t}worldPositionToTextCoords(e,t=new Je){return sx.copy(e),this.localPositionToTextCoords(this.worldToLocal(sx),t)}raycast(e,t){const{textRenderInfo:r,curveRadius:i}=this;if(r){const s=r.blockBounds,o=i?UB():kB(),a=o.geometry,{position:l,uv:u}=a.attributes;for(let c=0;c<u.count;c++){let d=s[0]+u.getX(c)*(s[2]-s[0]);const h=s[1]+u.getY(c)*(s[3]-s[1]);let g=0;i&&(g=i-Math.cos(d/i)*i,d=Math.sin(d/i)*i),l.setXYZ(c,d,h,g)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,kg.length=0,o.raycast(e,kg);for(let c=0;c<kg.length;c++)kg[c].object=this,t.push(kg[c])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,Pce.forEach(r=>{this[r]=e[r]}),this}clone(){return new this.constructor().copy(this)}};FB.forEach(n=>{const e="_private_"+n;Object.defineProperty(zB.prototype,n,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});const Ice=Z.forwardRef(({sdfGlyphSize:n=64,anchorX:e="center",anchorY:t="middle",font:r,fontSize:i=1,children:s,characters:o,onSync:a,...l},u)=>{const c=gi(({invalidate:y})=>y),[d]=Z.useState(()=>new zB),[h,g]=Z.useMemo(()=>{const y=[];let E="";return Z.Children.forEach(s,_=>{typeof _=="string"||typeof _=="number"?E+=_:y.push(_)}),[y,E]},[s]);return yte(()=>new Promise(y=>hce({font:r,characters:o},y)),["troika-text",r,o]),Z.useLayoutEffect(()=>void d.sync(()=>{c(),a&&a(d)})),Z.useEffect(()=>()=>d.dispose(),[d]),Z.createElement("primitive",Td({object:d,ref:u,font:r,text:g,anchorX:e,anchorY:t,fontSize:i,sdfGlyphSize:n},l),h)});/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const Rr={LEFT:1,RIGHT:2,MIDDLE:4},Xe=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),mp={NONE:0,IN:1,OUT:-1};function Qf(n){return n.isPerspectiveCamera}function kc(n){return n.isOrthographicCamera}const gp=Math.PI*2,zO=Math.PI/2,BB=1e-5,Ug=Math.PI/180;function Ua(n,e,t){return Math.max(e,Math.min(t,n))}function cr(n,e=BB){return Math.abs(n)<e}function Wn(n,e,t=BB){return cr(n-e,t)}function BO(n,e){return Math.round(n/e)*e}function Fg(n){return isFinite(n)?n:n<0?-Number.MAX_VALUE:Number.MAX_VALUE}function zg(n){return Math.abs(n)<Number.MAX_VALUE?n:n*(1/0)}function ox(n,e,t,r,i=1/0,s){r=Math.max(1e-4,r);const o=2/r,a=o*s,l=1/(1+a+.48*a*a+.235*a*a*a);let u=n-e;const c=e,d=i*r;u=Ua(u,-d,d),e=n-u;const h=(t.value+o*u)*s;t.value=(t.value-o*h)*l;let g=e+(u+h)*l;return c-n>0==g>c&&(g=c,t.value=(g-c)/s),g}function HO(n,e,t,r,i=1/0,s,o){r=Math.max(1e-4,r);const a=2/r,l=a*s,u=1/(1+l+.48*l*l+.235*l*l*l);let c=e.x,d=e.y,h=e.z,g=n.x-c,y=n.y-d,E=n.z-h;const _=c,m=d,v=h,S=i*r,T=S*S,M=g*g+y*y+E*E;if(M>T){const re=Math.sqrt(M);g=g/re*S,y=y/re*S,E=E/re*S}c=n.x-g,d=n.y-y,h=n.z-E;const A=(t.x+a*g)*s,R=(t.y+a*y)*s,O=(t.z+a*E)*s;t.x=(t.x-a*A)*u,t.y=(t.y-a*R)*u,t.z=(t.z-a*O)*u,o.x=c+(g+A)*u,o.y=d+(y+R)*u,o.z=h+(E+O)*u;const I=_-n.x,k=m-n.y,G=v-n.z,$=o.x-_,U=o.y-m,ee=o.z-v;return I*$+k*U+G*ee>0&&(o.x=_,o.y=m,o.z=v,t.x=(o.x-_)/s,t.y=(o.y-m)/s,t.z=(o.z-v)/s),o}function gb(n,e){e.set(0,0),n.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=n.length,e.y/=n.length}function yb(n,e){return kc(n)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}let Lce=class{constructor(){this._listeners={}}addEventListener(e,t){const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e)}}};var vb;const Nce="2.9.0",ax=1/8,Oce=/Mac/.test((vb=globalThis==null?void 0:globalThis.navigator)===null||vb===void 0?void 0:vb.platform);let qt,$O,lx,_b,Ks,cn,Fn,yp,Bg,_l,xl,ed,GO,VO,jo,Hg,vp,jO,xb,WO,wb,Sb,ux,Ui=class hM extends Lce{static install(e){qt=e.THREE,$O=Object.freeze(new qt.Vector3(0,0,0)),lx=Object.freeze(new qt.Vector3(0,1,0)),_b=Object.freeze(new qt.Vector3(0,0,1)),Ks=new qt.Vector2,cn=new qt.Vector3,Fn=new qt.Vector3,yp=new qt.Vector3,Bg=new qt.Vector3,_l=new qt.Vector3,xl=new qt.Vector3,ed=new qt.Vector3,GO=new qt.Vector3,VO=new qt.Vector3,jo=new qt.Spherical,Hg=new qt.Spherical,vp=new qt.Box3,jO=new qt.Box3,xb=new qt.Sphere,WO=new qt.Quaternion,wb=new qt.Quaternion,Sb=new qt.Matrix4,ux=new qt.Raycaster}static get ACTION(){return Xe}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=Xe.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=mp.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new qt.Vector3,this._focalOffsetVelocity=new qt.Vector3,this._zoomVelocity={value:0},this._truckInternal=(m,v,S)=>{let T,M;if(Qf(this._camera)){const A=cn.copy(this._camera.position).sub(this._target),R=this._camera.getEffectiveFOV()*Ug,O=A.length()*Math.tan(R*.5);T=this.truckSpeed*m*O/this._elementRect.height,M=this.truckSpeed*v*O/this._elementRect.height}else if(kc(this._camera)){const A=this._camera;T=m*(A.right-A.left)/A.zoom/this._elementRect.width,M=v*(A.top-A.bottom)/A.zoom/this._elementRect.height}else return;this.verticalDragToForward?(S?this.setFocalOffset(this._focalOffsetEnd.x+T,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(T,0,!0),this.forward(-M,!0)):S?this.setFocalOffset(this._focalOffsetEnd.x+T,this._focalOffsetEnd.y+M,this._focalOffsetEnd.z,!0):this.truck(T,M,!0)},this._rotateInternal=(m,v)=>{const S=gp*this.azimuthRotateSpeed*m/this._elementRect.height,T=gp*this.polarRotateSpeed*v/this._elementRect.height;this.rotate(S,T,!0)},this._dollyInternal=(m,v,S)=>{const T=Math.pow(.95,-m*this.dollySpeed),M=this._sphericalEnd.radius,A=this._sphericalEnd.radius*T,R=Ua(A,this.minDistance,this.maxDistance),O=R-A;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(A,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(O,!0),this._dollyToNoClamp(R,!0)):this._dollyToNoClamp(R,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?A:R)-M,this._dollyControlCoord.set(v,S)),this._lastDollyDirection=Math.sign(-m)},this._zoomInternal=(m,v,S)=>{const T=Math.pow(.95,m*this.dollySpeed),M=this._zoom,A=this._zoom*T;this.zoomTo(A,!0),this.dollyToCursor&&(this._changedZoom+=A-M,this._dollyControlCoord.set(v,S))},typeof qt>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new qt.Quaternion().setFromUnitVectors(this._camera.up,lx),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=Xe.NONE,this._target=new qt.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new qt.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new qt.Spherical().setFromVector3(cn.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new qt.Vector3,new qt.Vector3,new qt.Vector3,new qt.Vector3],this._updateNearPlaneCorners(),this._boundary=new qt.Box3(new qt.Vector3(-1/0,-1/0,-1/0),new qt.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new qt.Vector2,this.mouseButtons={left:Xe.ROTATE,middle:Xe.DOLLY,right:Xe.TRUCK,wheel:Qf(this._camera)?Xe.DOLLY:kc(this._camera)?Xe.ZOOM:Xe.NONE},this.touches={one:Xe.TOUCH_ROTATE,two:Qf(this._camera)?Xe.TOUCH_DOLLY_TRUCK:kc(this._camera)?Xe.TOUCH_ZOOM_TRUCK:Xe.NONE,three:Xe.TOUCH_TRUCK};const r=new qt.Vector2,i=new qt.Vector2,s=new qt.Vector2,o=m=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const T=this._domElement.getBoundingClientRect(),M=m.clientX/T.width,A=m.clientY/T.height;if(M<this._interactiveArea.left||M>this._interactiveArea.right||A<this._interactiveArea.top||A>this._interactiveArea.bottom)return}const v=m.pointerType!=="mouse"?null:(m.buttons&Rr.LEFT)===Rr.LEFT?Rr.LEFT:(m.buttons&Rr.MIDDLE)===Rr.MIDDLE?Rr.MIDDLE:(m.buttons&Rr.RIGHT)===Rr.RIGHT?Rr.RIGHT:null;if(v!==null){const T=this._findPointerByMouseButton(v);T&&this._disposePointer(T)}if((m.buttons&Rr.LEFT)===Rr.LEFT&&this._lockedPointer)return;const S={pointerId:m.pointerId,clientX:m.clientX,clientY:m.clientY,deltaX:0,deltaY:0,mouseButton:v};this._activePointers.push(S),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.addEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),this._isDragging=!0,h(m)},a=m=>{m.cancelable&&m.preventDefault();const v=m.pointerId,S=this._lockedPointer||this._findPointerById(v);if(S){if(S.clientX=m.clientX,S.clientY=m.clientY,S.deltaX=m.movementX,S.deltaY=m.movementY,this._state=0,m.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(m.buttons&Rr.LEFT)===Rr.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(m.buttons&Rr.MIDDLE)===Rr.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(m.buttons&Rr.RIGHT)===Rr.RIGHT&&(this._state=this._state|this.mouseButtons.right);g()}},l=m=>{const v=this._findPointerById(m.pointerId);if(!(v&&v===this._lockedPointer)){if(v&&this._disposePointer(v),m.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=Xe.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=Xe.NONE;y()}};let u=-1;const c=m=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===Xe.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const A=this._domElement.getBoundingClientRect(),R=m.clientX/A.width,O=m.clientY/A.height;if(R<this._interactiveArea.left||R>this._interactiveArea.right||O<this._interactiveArea.top||O>this._interactiveArea.bottom)return}if(m.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===Xe.ROTATE||this.mouseButtons.wheel===Xe.TRUCK){const A=performance.now();u-A<1e3&&this._getClientRect(this._elementRect),u=A}const v=Oce?-1:-3,S=m.deltaMode===1?m.deltaY/v:m.deltaY/(v*10),T=this.dollyToCursor?(m.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,M=this.dollyToCursor?(m.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case Xe.ROTATE:{this._rotateInternal(m.deltaX,m.deltaY),this._isUserControllingRotate=!0;break}case Xe.TRUCK:{this._truckInternal(m.deltaX,m.deltaY,!1),this._isUserControllingTruck=!0;break}case Xe.OFFSET:{this._truckInternal(m.deltaX,m.deltaY,!0),this._isUserControllingOffset=!0;break}case Xe.DOLLY:{this._dollyInternal(-S,T,M),this._isUserControllingDolly=!0;break}case Xe.ZOOM:{this._zoomInternal(-S,T,M),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},d=m=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===hM.ACTION.NONE){const v=m instanceof PointerEvent?m.pointerId:0,S=this._findPointerById(v);S&&this._disposePointer(S),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l);return}m.preventDefault()}},h=m=>{if(!this._enabled)return;if(gb(this._activePointers,Ks),this._getClientRect(this._elementRect),r.copy(Ks),i.copy(Ks),this._activePointers.length>=2){const S=Ks.x-this._activePointers[1].clientX,T=Ks.y-this._activePointers[1].clientY,M=Math.sqrt(S*S+T*T);s.set(0,M);const A=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,R=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;i.set(A,R)}if(this._state=0,!m)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in m&&m.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(m.buttons&Rr.LEFT)===Rr.LEFT&&(this._state=this._state|this.mouseButtons.left),(m.buttons&Rr.MIDDLE)===Rr.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(m.buttons&Rr.RIGHT)===Rr.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&Xe.ROTATE)===Xe.ROTATE||(this._state&Xe.TOUCH_ROTATE)===Xe.TOUCH_ROTATE||(this._state&Xe.TOUCH_DOLLY_ROTATE)===Xe.TOUCH_DOLLY_ROTATE||(this._state&Xe.TOUCH_ZOOM_ROTATE)===Xe.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&Xe.TRUCK)===Xe.TRUCK||(this._state&Xe.TOUCH_TRUCK)===Xe.TOUCH_TRUCK||(this._state&Xe.TOUCH_DOLLY_TRUCK)===Xe.TOUCH_DOLLY_TRUCK||(this._state&Xe.TOUCH_ZOOM_TRUCK)===Xe.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&Xe.DOLLY)===Xe.DOLLY||(this._state&Xe.TOUCH_DOLLY)===Xe.TOUCH_DOLLY||(this._state&Xe.TOUCH_DOLLY_TRUCK)===Xe.TOUCH_DOLLY_TRUCK||(this._state&Xe.TOUCH_DOLLY_OFFSET)===Xe.TOUCH_DOLLY_OFFSET||(this._state&Xe.TOUCH_DOLLY_ROTATE)===Xe.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&Xe.ZOOM)===Xe.ZOOM||(this._state&Xe.TOUCH_ZOOM)===Xe.TOUCH_ZOOM||(this._state&Xe.TOUCH_ZOOM_TRUCK)===Xe.TOUCH_ZOOM_TRUCK||(this._state&Xe.TOUCH_ZOOM_OFFSET)===Xe.TOUCH_ZOOM_OFFSET||(this._state&Xe.TOUCH_ZOOM_ROTATE)===Xe.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&Xe.OFFSET)===Xe.OFFSET||(this._state&Xe.TOUCH_OFFSET)===Xe.TOUCH_OFFSET||(this._state&Xe.TOUCH_DOLLY_OFFSET)===Xe.TOUCH_DOLLY_OFFSET||(this._state&Xe.TOUCH_ZOOM_OFFSET)===Xe.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},g=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,gb(this._activePointers,Ks);const v=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,S=v?-v.deltaX:i.x-Ks.x,T=v?-v.deltaY:i.y-Ks.y;if(i.copy(Ks),((this._state&Xe.ROTATE)===Xe.ROTATE||(this._state&Xe.TOUCH_ROTATE)===Xe.TOUCH_ROTATE||(this._state&Xe.TOUCH_DOLLY_ROTATE)===Xe.TOUCH_DOLLY_ROTATE||(this._state&Xe.TOUCH_ZOOM_ROTATE)===Xe.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(S,T),this._isUserControllingRotate=!0),(this._state&Xe.DOLLY)===Xe.DOLLY||(this._state&Xe.ZOOM)===Xe.ZOOM){const M=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,A=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0,R=this.dollyDragInverted?-1:1;(this._state&Xe.DOLLY)===Xe.DOLLY?(this._dollyInternal(R*T*ax,M,A),this._isUserControllingDolly=!0):(this._zoomInternal(R*T*ax,M,A),this._isUserControllingZoom=!0)}if((this._state&Xe.TOUCH_DOLLY)===Xe.TOUCH_DOLLY||(this._state&Xe.TOUCH_ZOOM)===Xe.TOUCH_ZOOM||(this._state&Xe.TOUCH_DOLLY_TRUCK)===Xe.TOUCH_DOLLY_TRUCK||(this._state&Xe.TOUCH_ZOOM_TRUCK)===Xe.TOUCH_ZOOM_TRUCK||(this._state&Xe.TOUCH_DOLLY_OFFSET)===Xe.TOUCH_DOLLY_OFFSET||(this._state&Xe.TOUCH_ZOOM_OFFSET)===Xe.TOUCH_ZOOM_OFFSET||(this._state&Xe.TOUCH_DOLLY_ROTATE)===Xe.TOUCH_DOLLY_ROTATE||(this._state&Xe.TOUCH_ZOOM_ROTATE)===Xe.TOUCH_ZOOM_ROTATE){const M=Ks.x-this._activePointers[1].clientX,A=Ks.y-this._activePointers[1].clientY,R=Math.sqrt(M*M+A*A),O=s.y-R;s.set(0,R);const I=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,k=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&Xe.TOUCH_DOLLY)===Xe.TOUCH_DOLLY||(this._state&Xe.TOUCH_DOLLY_ROTATE)===Xe.TOUCH_DOLLY_ROTATE||(this._state&Xe.TOUCH_DOLLY_TRUCK)===Xe.TOUCH_DOLLY_TRUCK||(this._state&Xe.TOUCH_DOLLY_OFFSET)===Xe.TOUCH_DOLLY_OFFSET?(this._dollyInternal(O*ax,I,k),this._isUserControllingDolly=!0):(this._zoomInternal(O*ax,I,k),this._isUserControllingZoom=!0)}((this._state&Xe.TRUCK)===Xe.TRUCK||(this._state&Xe.TOUCH_TRUCK)===Xe.TOUCH_TRUCK||(this._state&Xe.TOUCH_DOLLY_TRUCK)===Xe.TOUCH_DOLLY_TRUCK||(this._state&Xe.TOUCH_ZOOM_TRUCK)===Xe.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(S,T,!1),this._isUserControllingTruck=!0),((this._state&Xe.OFFSET)===Xe.OFFSET||(this._state&Xe.TOUCH_OFFSET)===Xe.TOUCH_OFFSET||(this._state&Xe.TOUCH_DOLLY_OFFSET)===Xe.TOUCH_DOLLY_OFFSET||(this._state&Xe.TOUCH_ZOOM_OFFSET)===Xe.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(S,T,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},y=()=>{gb(this._activePointers,Ks),i.copy(Ks),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",E),this._domElement.ownerDocument.addEventListener("pointerlockerror",_),this._domElement.ownerDocument.addEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),h())},this.unlockPointer=()=>{var m,v,S;this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),(m=this._domElement)===null||m===void 0||m.ownerDocument.exitPointerLock(),(v=this._domElement)===null||v===void 0||v.ownerDocument.removeEventListener("pointerlockchange",E),(S=this._domElement)===null||S===void 0||S.ownerDocument.removeEventListener("pointerlockerror",_),this.cancel()};const E=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},_=()=>{this.unlockPointer()};this._addAllEventListeners=m=>{this._domElement=m,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",o),this._domElement.addEventListener("pointercancel",l),this._domElement.addEventListener("wheel",c,{passive:!1}),this._domElement.addEventListener("contextmenu",d)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",o),this._domElement.removeEventListener("pointercancel",l),this._domElement.removeEventListener("wheel",c,{passive:!1}),this._domElement.removeEventListener("contextmenu",d),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.removeEventListener("pointerlockchange",E),this._domElement.ownerDocument.removeEventListener("pointerlockerror",_))},this.cancel=()=>{this._state!==Xe.NONE&&(this._state=Xe.NONE,this._activePointers.length=0,y())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=Ua(e.width,0,1),this._interactiveArea.height=Ua(e.height,0,1),this._interactiveArea.x=Ua(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=Ua(e.y,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,r=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,r)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,r=!1){this._isUserControllingRotate=!1;const i=Ua(e,this.minAzimuthAngle,this.maxAzimuthAngle),s=Ua(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=i,this._sphericalEnd.phi=s,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,r||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!r||Wn(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Wn(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=mp.NONE,this._changedDolly=0,this._dollyToNoClamp(Ua(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const r=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const o=this._collisionTest(),a=Wn(o,this._spherical.radius);if(!(r>e)&&a)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,o)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const s=!t||Wn(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(s)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(Bg).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const r=!t||Wn(this._target.x,this._targetEnd.x,this.restThreshold)&&Wn(this._target.y,this._targetEnd.y,this.restThreshold)&&Wn(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(r)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=Ua(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const r=!t||Wn(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(r)}pan(e,t,r=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,r)}truck(e,t,r=!1){this._camera.updateMatrix(),_l.setFromMatrixColumn(this._camera.matrix,0),xl.setFromMatrixColumn(this._camera.matrix,1),_l.multiplyScalar(e),xl.multiplyScalar(-t);const i=cn.copy(_l).add(xl),s=Fn.copy(this._targetEnd).add(i);return this.moveTo(s.x,s.y,s.z,r)}forward(e,t=!1){cn.setFromMatrixColumn(this._camera.matrix,0),cn.crossVectors(this._camera.up,cn),cn.multiplyScalar(e);const r=Fn.copy(this._targetEnd).add(cn);return this.moveTo(r.x,r.y,r.z,t)}elevate(e,t=!1){return cn.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+cn.x,this._targetEnd.y+cn.y,this._targetEnd.z+cn.z,t)}moveTo(e,t,r,i=!1){this._isUserControllingTruck=!1;const s=cn.set(e,t,r).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,s,this.boundaryFriction),this._needsUpdate=!0,i||this._target.copy(this._targetEnd);const o=!i||Wn(this._target.x,this._targetEnd.x,this.restThreshold)&&Wn(this._target.y,this._targetEnd.y,this.restThreshold)&&Wn(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(e,t,r,i=!1){const a=cn.set(e,t,r).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(a.x,a.y,a.z,i)}fitToBox(e,t,{cover:r=!1,paddingLeft:i=0,paddingRight:s=0,paddingBottom:o=0,paddingTop:a=0}={}){const l=[],u=e.isBox3?vp.copy(e):vp.setFromObject(e);u.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const c=BO(this._sphericalEnd.theta,zO),d=BO(this._sphericalEnd.phi,zO);l.push(this.rotateTo(c,d,t));const h=cn.setFromSpherical(this._sphericalEnd).normalize(),g=WO.setFromUnitVectors(h,_b),y=Wn(Math.abs(h.y),1);y&&g.multiply(wb.setFromAxisAngle(lx,c)),g.multiply(this._yAxisUpSpaceInverse);const E=jO.makeEmpty();Fn.copy(u.min).applyQuaternion(g),E.expandByPoint(Fn),Fn.copy(u.min).setX(u.max.x).applyQuaternion(g),E.expandByPoint(Fn),Fn.copy(u.min).setY(u.max.y).applyQuaternion(g),E.expandByPoint(Fn),Fn.copy(u.max).setZ(u.min.z).applyQuaternion(g),E.expandByPoint(Fn),Fn.copy(u.min).setZ(u.max.z).applyQuaternion(g),E.expandByPoint(Fn),Fn.copy(u.max).setY(u.min.y).applyQuaternion(g),E.expandByPoint(Fn),Fn.copy(u.max).setX(u.min.x).applyQuaternion(g),E.expandByPoint(Fn),Fn.copy(u.max).applyQuaternion(g),E.expandByPoint(Fn),E.min.x-=i,E.min.y-=o,E.max.x+=s,E.max.y+=a,g.setFromUnitVectors(_b,h),y&&g.premultiply(wb.invert()),g.premultiply(this._yAxisUpSpace);const _=E.getSize(cn),m=E.getCenter(Fn).applyQuaternion(g);if(Qf(this._camera)){const v=this.getDistanceToFitBox(_.x,_.y,_.z,r);l.push(this.moveTo(m.x,m.y,m.z,t)),l.push(this.dollyTo(v,t)),l.push(this.setFocalOffset(0,0,0,t))}else if(kc(this._camera)){const v=this._camera,S=v.right-v.left,T=v.top-v.bottom,M=r?Math.max(S/_.x,T/_.y):Math.min(S/_.x,T/_.y);l.push(this.moveTo(m.x,m.y,m.z,t)),l.push(this.zoomTo(M,t)),l.push(this.setFocalOffset(0,0,0,t))}return Promise.all(l)}fitToSphere(e,t){const r=[],s="isObject3D"in e?hM.createBoundingSphere(e,xb):xb.copy(e);if(r.push(this.moveTo(s.center.x,s.center.y,s.center.z,t)),Qf(this._camera)){const o=this.getDistanceToFitSphere(s.radius);r.push(this.dollyTo(o,t))}else if(kc(this._camera)){const o=this._camera.right-this._camera.left,a=this._camera.top-this._camera.bottom,l=2*s.radius,u=Math.min(o/l,a/l);r.push(this.zoomTo(u,t))}return r.push(this.setFocalOffset(0,0,0,t)),Promise.all(r)}setLookAt(e,t,r,i,s,o,a=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=mp.NONE,this._changedDolly=0;const l=Fn.set(i,s,o),u=cn.set(e,t,r);this._targetEnd.copy(l),this._sphericalEnd.setFromVector3(u.sub(l).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const c=!a||Wn(this._target.x,this._targetEnd.x,this.restThreshold)&&Wn(this._target.y,this._targetEnd.y,this.restThreshold)&&Wn(this._target.z,this._targetEnd.z,this.restThreshold)&&Wn(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Wn(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Wn(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(c)}lerpLookAt(e,t,r,i,s,o,a,l,u,c,d,h,g,y=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=mp.NONE,this._changedDolly=0;const E=cn.set(i,s,o),_=Fn.set(e,t,r);jo.setFromVector3(_.sub(E).applyQuaternion(this._yAxisUpSpace));const m=yp.set(c,d,h),v=Fn.set(a,l,u);Hg.setFromVector3(v.sub(m).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(E.lerp(m,g));const S=Hg.theta-jo.theta,T=Hg.phi-jo.phi,M=Hg.radius-jo.radius;this._sphericalEnd.set(jo.radius+M*g,jo.phi+T*g,jo.theta+S*g),this.normalizeRotations(),this._needsUpdate=!0,y||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const A=!y||Wn(this._target.x,this._targetEnd.x,this.restThreshold)&&Wn(this._target.y,this._targetEnd.y,this.restThreshold)&&Wn(this._target.z,this._targetEnd.z,this.restThreshold)&&Wn(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Wn(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Wn(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(A)}setPosition(e,t,r,i=!1){return this.setLookAt(e,t,r,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,i)}setTarget(e,t,r,i=!1){const s=this.getPosition(cn),o=this.setLookAt(s.x,s.y,s.z,e,t,r,i);return this._sphericalEnd.phi=Ua(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(e,t,r,i=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,r),this._needsUpdate=!0,i||this._focalOffset.copy(this._focalOffsetEnd);const s=!i||Wn(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&Wn(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&Wn(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}setOrbitPoint(e,t,r){this._camera.updateMatrixWorld(),_l.setFromMatrixColumn(this._camera.matrixWorldInverse,0),xl.setFromMatrixColumn(this._camera.matrixWorldInverse,1),ed.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const i=cn.set(e,t,r),s=i.distanceTo(this._camera.position),o=i.sub(this._camera.position);_l.multiplyScalar(o.x),xl.multiplyScalar(o.y),ed.multiplyScalar(o.z),cn.copy(_l).add(xl).add(ed),cn.z=cn.z+s,this.dollyTo(s,!1),this.setFocalOffset(-cn.x,cn.y,-cn.z,!1),this.moveTo(e,t,r,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,r,i){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new qt.Vector4,typeof e=="number"?this._viewport.set(e,t,r,i):this._viewport.copy(e)}getDistanceToFitBox(e,t,r,i=!1){if(yb(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const s=e/t,o=this._camera.getEffectiveFOV()*Ug,a=this._camera.aspect;return((i?s>a:s<a)?t:e/a)*.5/Math.tan(o*.5)+r*.5}getDistanceToFitSphere(e){if(yb(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*Ug,r=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,i=1<this._camera.aspect?t:r;return e/Math.sin(i*.5)}getTarget(e,t=!0){return(e&&e.isVector3?e:new qt.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new qt.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e||new qt.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new qt.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%gp,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=gp),this._spherical.theta+=gp*Math.round((this._sphericalEnd.theta-this._spherical.theta)/gp)}stop(){this._focalOffset.copy(this._focalOffsetEnd),this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd),this._zoom=this._zoomEnd}reset(e=!1){if(!Wn(this._camera.up.x,this._cameraUp0.x)||!Wn(this._camera.up.y,this._cameraUp0.y)||!Wn(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const r=this.getPosition(cn);this.updateCameraUp(),this.setPosition(r.x,r.y,r.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,lx),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=cn.subVectors(this._target,this._camera.position).normalize(),t=Fn.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();const r=this.getPosition(cn);this.updateCameraUp(),this.setPosition(r.x,r.y,r.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,r=this._sphericalEnd.phi-this._spherical.phi,i=this._sphericalEnd.radius-this._spherical.radius,s=GO.subVectors(this._targetEnd,this._target),o=VO.subVectors(this._focalOffsetEnd,this._focalOffset),a=this._zoomEnd-this._zoom;if(cr(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const d=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=ox(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,d,1/0,e),this._needsUpdate=!0}if(cr(r))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const d=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=ox(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,d,1/0,e),this._needsUpdate=!0}if(cr(i))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const d=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=ox(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,d,this.maxSpeed,e),this._needsUpdate=!0}if(cr(s.x)&&cr(s.y)&&cr(s.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const d=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;HO(this._target,this._targetEnd,this._targetVelocity,d,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(cr(o.x)&&cr(o.y)&&cr(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const d=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;HO(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,d,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(cr(a))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const d=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=ox(this._zoom,this._zoomEnd,this._zoomVelocity,d,1/0,e)}if(this.dollyToCursor){if(Qf(this._camera)&&this._changedDolly!==0){const d=this._spherical.radius-this._lastDistance,h=this._camera,g=this._getCameraDirection(Bg),y=cn.copy(g).cross(h.up).normalize();y.lengthSq()===0&&(y.x=1);const E=Fn.crossVectors(y,g),_=this._sphericalEnd.radius*Math.tan(h.getEffectiveFOV()*Ug*.5),v=(this._sphericalEnd.radius-d-this._sphericalEnd.radius)/this._sphericalEnd.radius,S=yp.copy(this._targetEnd).add(y.multiplyScalar(this._dollyControlCoord.x*_*h.aspect)).add(E.multiplyScalar(this._dollyControlCoord.y*_)),T=cn.copy(this._targetEnd).lerp(S,v),M=this._lastDollyDirection===mp.IN&&this._spherical.radius<=this.minDistance,A=this._lastDollyDirection===mp.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(M||A)){this._sphericalEnd.radius-=d,this._spherical.radius-=d;const O=Fn.copy(g).multiplyScalar(-d);T.add(O)}this._boundary.clampPoint(T,T);const R=Fn.subVectors(T,this._targetEnd);this._targetEnd.copy(T),this._target.add(R),this._changedDolly-=d,cr(this._changedDolly)&&(this._changedDolly=0)}else if(kc(this._camera)&&this._changedZoom!==0){const d=this._zoom-this._lastZoom,h=this._camera,g=cn.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(h.near+h.far)/(h.near-h.far)).unproject(h),y=Fn.set(0,0,-1).applyQuaternion(h.quaternion),E=yp.copy(g).add(y.multiplyScalar(-g.dot(h.up))),m=-(this._zoom-d-this._zoom)/this._zoom,v=this._getCameraDirection(Bg),S=this._targetEnd.dot(v),T=cn.copy(this._targetEnd).lerp(E,m),M=T.dot(v),A=v.multiplyScalar(M-S);T.sub(A),this._boundary.clampPoint(T,T);const R=Fn.subVectors(T,this._targetEnd);this._targetEnd.copy(T),this._target.add(R),this._changedZoom-=d,cr(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const l=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,l),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!cr(this._focalOffset.x)||!cr(this._focalOffset.y)||!cr(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),_l.setFromMatrixColumn(this._camera.matrix,0),xl.setFromMatrixColumn(this._camera.matrix,1),ed.setFromMatrixColumn(this._camera.matrix,2),_l.multiplyScalar(this._focalOffset.x),xl.multiplyScalar(-this._focalOffset.y),ed.multiplyScalar(this._focalOffset.z),cn.copy(_l).add(xl).add(ed),this._camera.position.add(cn)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),cn.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const c=this._needsUpdate;return c&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):c?(this.dispatchEvent({type:"update"}),cr(t,this.restThreshold)&&cr(r,this.restThreshold)&&cr(i,this.restThreshold)&&cr(s.x,this.restThreshold)&&cr(s.y,this.restThreshold)&&cr(s.z,this.restThreshold)&&cr(o.x,this.restThreshold)&&cr(o.y,this.restThreshold)&&cr(o.z,this.restThreshold)&&cr(a,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!c&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=c,this._needsUpdate=!1,c}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:Fg(this.maxDistance),minZoom:this.minZoom,maxZoom:Fg(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:Fg(this.maxPolarAngle),minAzimuthAngle:Fg(this.minAzimuthAngle),maxAzimuthAngle:Fg(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:cn.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const r=JSON.parse(e);this.enabled=r.enabled,this.minDistance=r.minDistance,this.maxDistance=zg(r.maxDistance),this.minZoom=r.minZoom,this.maxZoom=zg(r.maxZoom),this.minPolarAngle=r.minPolarAngle,this.maxPolarAngle=zg(r.maxPolarAngle),this.minAzimuthAngle=zg(r.minAzimuthAngle),this.maxAzimuthAngle=zg(r.maxAzimuthAngle),this.smoothTime=r.smoothTime,this.draggingSmoothTime=r.draggingSmoothTime,this.dollySpeed=r.dollySpeed,this.truckSpeed=r.truckSpeed,this.dollyToCursor=r.dollyToCursor,this.verticalDragToForward=r.verticalDragToForward,this._target0.fromArray(r.target0),this._position0.fromArray(r.position0),this._zoom0=r.zoom0,this._focalOffset0.fromArray(r.focalOffset0),this.moveTo(r.target[0],r.target[1],r.target[2],t),jo.setFromVector3(cn.fromArray(r.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(jo.theta,jo.phi,t),this.dollyTo(jo.radius,t),this.zoomTo(r.zoom,t),this.setFocalOffset(r.focalOffset[0],r.focalOffset[1],r.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",Nce),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=>t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=>t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,r){const i=t.lengthSq();if(i===0)return e;const s=Fn.copy(t).add(e),a=this._boundary.clampPoint(s,yp).sub(s),l=a.lengthSq();if(l===0)return e.add(t);if(l===i)return e;if(r===0)return e.add(t).add(a);{const u=1+r*l/t.dot(a);return e.add(Fn.copy(t).multiplyScalar(u)).add(a.multiplyScalar(1-r))}}_updateNearPlaneCorners(){if(Qf(this._camera)){const e=this._camera,t=e.near,r=e.getEffectiveFOV()*Ug,i=Math.tan(r*.5)*t,s=i*e.aspect;this._nearPlaneCorners[0].set(-s,-i,0),this._nearPlaneCorners[1].set(s,-i,0),this._nearPlaneCorners[2].set(s,i,0),this._nearPlaneCorners[3].set(-s,i,0)}else if(kc(this._camera)){const e=this._camera,t=1/e.zoom,r=e.left*t,i=e.right*t,s=e.top*t,o=e.bottom*t;this._nearPlaneCorners[0].set(r,s,0),this._nearPlaneCorners[1].set(i,s,0),this._nearPlaneCorners[2].set(i,o,0),this._nearPlaneCorners[3].set(r,o,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||yb(this._camera,"_collisionTest"))return e;const r=this._getTargetDirection(Bg);Sb.lookAt($O,r,this._camera.up);for(let i=0;i<4;i++){const s=Fn.copy(this._nearPlaneCorners[i]);s.applyMatrix4(Sb);const o=yp.addVectors(this._target,s);ux.set(o,r),ux.far=this._spherical.radius+1;const a=ux.intersectObjects(this.colliderMeshes);a.length!==0&&a[0].distance<e&&(e=a[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(t=>{const r=()=>{this.removeEventListener("rest",r),t()};this.addEventListener("rest",r)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new qt.Sphere){const r=t,i=r.center;vp.makeEmpty(),e.traverseVisible(o=>{o.isMesh&&vp.expandByObject(o)}),vp.getCenter(i);let s=0;return e.traverseVisible(o=>{if(!o.isMesh)return;const a=o,l=a.geometry.clone();l.applyMatrix4(a.matrixWorld);const c=l.attributes.position;for(let d=0,h=c.count;d<h;d++)cn.fromBufferAttribute(c,d),s=Math.max(s,i.distanceToSquared(cn))}),r.radius=Math.sqrt(s),r}};var $g={exports:{}},qO;function Dce(){if(qO)return $g.exports;qO=1;var n={ellipse:"",chars:[" ","-"],max:140,truncate:!0};function e(r,i,s,o){if(r<=i)return r;if(i<2)return r.slice(0,i-s.length)+s;for(var a=i-s.length,l=Math.floor(a/2),u=l,c=r.length-l,d=0;d<l;d++){var h=r.charAt(d),g=r.length-d,y=r.charAt(g);o.indexOf(h)!==-1&&(u=d),o.indexOf(y)!==-1&&(c=g)}return r.slice(0,u)+s+r.slice(c)}function t(r,i,s,o,a){if(r.length<=i)return r;for(var l=i-s.length,u=l,c=0;c<=l;c++){var d=r.charAt(c);o.indexOf(d)!==-1&&(u=c)}return!a&&u==l?"":r.slice(0,u)+s}return $g.exports=function(r,i,s){if(typeof r!="string"||r.length===0||i===0)return"";s=s||{};for(var o in n)(s[o]===null||typeof s[o]>"u")&&(s[o]=n[o]);return s.max=i||s.max,s.truncate=="middle"?e(r,s.max,s.ellipse,s.chars):t(r,s.max,s.ellipse,s.chars,s.truncate)},$g.exports.ellipsizeMiddle=e,$g.exports.ellipsize=t,$g.exports}var kce=Dce();const Uce=Bi(kce),HB=["ctrl","alt","meta","shift"],$B="__0_1_2_3_4_5_6_7_8_9_a_b_c_d_e_f_g_h_i_j_k_l_m_n_o_p_q_r_s_t_u_v_w_x_y_z_ _`_'_\"_~_!_@_#_$_%_^_&_*_(_)_._-_+_=_[_]_{_}_<_>_,_/_?_;_:_\\_|_capslock_numlock_enter_tab_arrowdown_arrowleft_arrowright_arrowup_end_home_pagedown_pageup_backspace_delete_insert_escape_f1_f2_f3_f4_f5_f6_f7_f8_f9_f10_f11_f12_f13_f14_f15_f16_f17_f18_f19_f20_f21_f22_f23".split("_");$B[1]="_";const h2={};for(const[n,e]of $B.entries())h2[e]=n;const Fce={space:" ",plus:"+",up:"arrowup",down:"arrowdown",left:"arrowleft",right:"arrowright",esc:"escape"},p2=4,zce=9,m2=zce+p2,Bce=2**p2,GB=2**m2,Hce=2**(2*m2),$ce=2**(3*m2);function Gce(n){let e;return n==="+"?["+"]:(n.slice(-1)=="+"?(e=n.slice(0,-2).split("+"),e.push("+")):e=n.split("+"),e.map(t=>Fce[t]||t))}function Vce(n){const e=new Set(n);let t=h2[n[n.length-1].toLowerCase()]||0;for(const r of HB)t=2*t+(e.has(r)?1:0);return t}function XO(n){return n>>p2}function Eb(n){return n%Bce}function jce(n,e){if(n===void 0||XO(n)>0)return!1;const t=Eb(n),r=Eb(e);return t===r&&XO(e)===0?!1:(t&Eb(e))===t}function Wce(n){let e=h2[n.key.toLowerCase()]||0;for(const t of HB)e=2*e+(n[`${t}Key`]?1:0);return e}function pw(n){return n.map(Gce)}function mw(n){if(n.length>4)throw"Can't encode sequence of more than 4 keys!";let e=0;for(const t of n)e=e*GB+Vce(t);return e}function qce(n){return n<GB?1:n<Hce?2:n<$ce?3:4}function Xce(n){const e=[];let t=0,r=0;for(let i=n.length-1;i>=0;i--)t=2**r*n[i]+t,r=r+13,e.push(t);return e}function Yce(n={}){return{history:[],historySize:0,bindings:new Map,disabledSequenceCodes:new Set,...n}}function Kce(n,e,t){const r=mw(pw(e));return n.bindings.has(r)||n.bindings.set(r,new Set),n.bindings.get(r).add(t),VB(n)}function Jce(n,e,t){const r=mw(pw(e)),i=n.bindings.get(r);return i&&(i.delete(t),i.size==0&&n.bindings.delete(r)),VB(n)}function Zce(n,e){const t=mw(pw(e));return n.disabledSequenceCodes.delete(t),n}function Qce(n,e){const t=mw(pw(e));return n.disabledSequenceCodes.add(t),n}function efe(n,e){const t=Wce(e),r=n.history.at(-1);return jce(r,t)&&n.history.pop(),n.history.push(t),n.history.length>n.historySize&&n.history.shift(),n}function tfe(n){const e=[];for(const t of Xce(n.history))n.disabledSequenceCodes.has(t)||e.push(...n.bindings.get(t)||[]);return e}function nfe(n,e){n=efe(n,e);const t=tfe(n);for(const r of t)r(e);return[n,t]}function VB(n){n.historySize=0;for(const e of n.bindings.keys())n.historySize=Math.max(n.historySize,qce(e));return n}class rfe{add(...e){const t=e.slice(0,-1),r=e.at(-1);return this.state=Kce(this.state,t,r),this}remove(...e){const t=e.slice(0,-1),r=e.at(-1);return this.state=Jce(this.state,t,r),this}enable(...e){return this.state=Zce(this.state,e),this}disable(...e){return this.state=Qce(this.state,e),this}handle(e){const[t,r]=nfe(this.state,e);return this.state=t,r.length>0}constructor(e){this.state=e,this.add=this.add.bind(this),this.remove=this.remove.bind(this),this.handle=this.handle.bind(this)}}function gw(){return new rfe(Yce())}let YO=!1;const g2=gw(),y2=gw(),v2=gw(),jB=new Map;let td=[];const jc=n=>Array.isArray(n)?n.map(e=>e.toLowerCase()):[n.toLowerCase()],ife=n=>e=>{const t=e.target,r=t.tagName==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(t.type);if(!(t.isContentEditable||(r||t.tagName==="TEXTAREA"||t.tagName==="SELECT")&&!t.readOnly))return n(e)},sfe=n=>{(!n.action||n.action==="keypress")&&g2.add(...jc(n.keys),n.callback),n.action==="keyup"&&y2.add(...jc(n.keys),n.callback),n.action==="keydown"&&v2.add(...jc(n.keys),n.callback)},ofe=n=>{(!n.action||n.action==="keypress")&&g2.remove(...jc(n.keys),n.callback),n.action==="keyup"&&y2.remove(...jc(n.keys),n.callback),n.action==="keydown"&&v2.remove(...jc(n.keys),n.callback)},afe=n=>{var e,t,r;const i=gw();i.add(...jc(n.keys),n.callback),(t=(e=n.ref)==null?void 0:e.current)==null||t.addEventListener(n.action??"keypress",i.handle),jB.set((r=n.ref)==null?void 0:r.current,i)},lfe=n=>{var e,t,r,i;if((e=n.ref)!=null&&e.current&&!n.disabled){const s=jB.get((t=n.ref)==null?void 0:t.current);s.remove(...jc(n.keys),n.callback),(i=(r=n.ref)==null?void 0:r.current)==null||i.removeEventListener(n.action??"keypress",s.handle)}},WB=(n=[])=>{const[e,t]=Z.useState([]);return Z.useLayoutEffect(()=>{!YO&&window!==void 0&&(window.addEventListener("keypress",g2.handle),window.addEventListener("keyup",y2.handle),window.addEventListener("keydown",v2.handle),YO=!0)},[]),Z.useLayoutEffect(()=>(n.map(r=>{var i;r.disabled||(r.callback=ife(r.callback),(i=r.ref)!=null&&i.current?(afe(r),td=[...td,r]):r.ref||(sfe(r),td=[...td,r]))}),()=>{n.map(r=>{lfe(r),ofe(r),td=td.filter(i=>r!==i)})}),[n]),Z.useEffect(()=>{t(td)},[]),e};function ufe(){try{return navigator.platform.toUpperCase().indexOf("MAC")>=0}catch{return!1}}function cfe(){return ufe()?"":"CTRL"}cfe();/*!
 * hold-event
 * https://github.com/yomotsu/hold-event
 * (c) 2020 @yomotsu
 * Released under the MIT License.
 */var cy;(function(n){n.HOLD_START="holdStart",n.HOLD_END="holdEnd",n.HOLDING="holding"})(cy||(cy={}));class ffe{constructor(){this._listeners={}}addEventListener(e,t){const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}removeEventListener(e,t){const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e)}}}class dfe extends ffe{constructor(e){super(),this._enabled=!0,this._holding=!1,this._intervalId=-1,this._deltaTime=0,this._elapsedTime=0,this._lastTime=0,this._holdStart=t=>{if(!this._enabled||this._holding)return;this._deltaTime=0,this._elapsedTime=0,this._lastTime=performance.now(),this.dispatchEvent({type:cy.HOLD_START,deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:t}),this._holding=!0;const r=()=>{this._intervalId=this.holdIntervalDelay?window.setTimeout(r,this.holdIntervalDelay):window.requestAnimationFrame(r);const i=performance.now();this._deltaTime=i-this._lastTime,this._elapsedTime+=this._deltaTime,this._lastTime=performance.now(),this.dispatchEvent({type:cy.HOLDING,deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:t})};this._intervalId=this.holdIntervalDelay?window.setTimeout(r,this.holdIntervalDelay):window.requestAnimationFrame(r)},this._holdEnd=t=>{if(!this._enabled||!this._holding)return;const r=performance.now();this._deltaTime=r-this._lastTime,this._elapsedTime+=this._deltaTime,this._lastTime=performance.now(),this.dispatchEvent({type:cy.HOLD_END,deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:t}),window.clearTimeout(this._intervalId),window.cancelAnimationFrame(this._intervalId),this._holding=!1},this.holdIntervalDelay=e}get enabled(){return this._enabled}set enabled(e){this._enabled!==e&&(this._enabled=e,this._enabled||this._holdEnd())}}class yw extends dfe{constructor(e,t){super(t),this._holdStart=this._holdStart.bind(this),this._holdEnd=this._holdEnd.bind(this);const r=s=>{hfe(s)||s.keyCode===e&&this._holdStart(s)},i=s=>{s.keyCode===e&&this._holdEnd(s)};document.addEventListener("keydown",r),document.addEventListener("keyup",i),window.addEventListener("blur",this._holdEnd)}}function hfe(n){const e=n.target;return e.tagName==="INPUT"||e.tagName==="SELECT"||e.tagName==="TEXTAREA"||e.isContentEditable}var bb={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var KO;function pfe(){return KO||(KO=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=i(s,r(a)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=i(o,a));return o}function i(s,o){return o?s?s+" "+o:s+o:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(bb)),bb.exports}pfe();(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode(`._canvas_670zp_1 {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}
._container_155l7_1 {
  transform-origin: bottom right;
  overflow: hidden;
  position: absolute;
  border: solid 1px var(--radial-menu-border);
}

  ._container_155l7_1._disabled_155l7_7 {
    opacity: 0.6;
  }

  ._container_155l7_1._disabled_155l7_7 ._contentContainer_155l7_10 {
      cursor: not-allowed;
    }

  ._container_155l7_1:not(._disabled_155l7_7) ._contentContainer_155l7_10 {
      cursor: pointer;
    }

  ._container_155l7_1:not(._disabled_155l7_7) ._contentContainer_155l7_10:hover {
        color: var(--radial-menu-active-color);
        background: var(--radial-menu-active-background);
      }

  ._container_155l7_1 ._contentContainer_155l7_10 {
    width: 200%;
    height: 200%;
    transform-origin: 50% 50%;
    border-radius: 50%;
    outline: none;
    transition: background 150ms ease-in-out;
    color: var(--radial-menu-color);
  }

  ._container_155l7_1 ._contentContainer_155l7_10 ._contentInner_155l7_35 {
      position: absolute;
      width: 100%;
      text-align: center;
    }

  ._container_155l7_1 ._contentContainer_155l7_10 ._contentInner_155l7_35 ._content_155l7_10 {
        display: inline-block;
      }

  ._container_155l7_1 svg {
    margin: 0 auto;
    fill: var(--radial-menu-active-color);
    height: 25px;
    width: 25px;
    display: block;
  }
._container_x9hyx_1 {
  border-radius: 50%;
  z-index: 9;
  position: relative;
  height: 175px;
  width: 175px;
  border: solid 5px var(--radial-menu-border);
  overflow: hidden;
  background: var(--radial-menu-background);
}

  ._container_x9hyx_1:before {
    content: ' ';
    background: var(--radial-menu-border);
    border-radius: 50%;
    height: 25px;
    width: 25px;
    position: absolute;
    z-index: 9;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }`)),document.head.appendChild(n)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();var JO,ZO;function qB(n,e=[]){const t=e.length;for(const r of n){const i=e.indexOf(r);if(i>-1){const s=[...e.slice(i),r].map(o=>o.data.id);throw new Error(`Invalid Graph: Circular node path detected: ${s.join(" -> ")}.`)}t>r.depth&&(r.depth=t,qB(r.out,[...e,r]))}}function XB(n,e){let t=!1;const r=n.reduce((o,a)=>({...o,[a.id]:{data:a,out:[],depth:-1,ins:[]}}),{});try{for(const o of e){const a=o.source,l=o.target;if(!r.hasOwnProperty(a))throw new Error(`Missing source Node ${a}`);if(!r.hasOwnProperty(l))throw new Error(`Missing target Node ${l}`);const u=r[a],c=r[l];c.ins.push(u),u.out.push(c)}qB(Object.values(r))}catch{t=!0}const i=Object.keys(r).map(o=>r[o].depth),s=Math.max(...i);return{invalid:t,depths:r,maxDepth:s||1}}const QO=["radialin","radialout"];function mfe({nodes:n,edges:e,mode:t="lr",nodeLevelRatio:r=2}){const{depths:i,maxDepth:s,invalid:o}=XB(n,e);if(o)return null;const a=QO.includes(t)?1:5,l=n.length/s*r*a;if(t){const u=(g,y)=>E=>g?(i[E.id].depth-s/2)*l*(y?-1:1):void 0,c=u(["lr","rl"].includes(t),t==="rl"),d=u(["td","bu"].includes(t),t==="td"),h=u(["zin","zout"].includes(t),t==="zout");n.forEach(g=>{g.fx=c(g),g.fy=d(g),g.fz=h(g)})}return QO.includes(t)?hre(u=>{const c=i[u.id];return(t==="radialin"?s-c.depth:c.depth)*l}).strength(1):null}function gfe(n){return new Promise((e,t)=>{let r;function i(){r?e(r):(r=n.step(),i())}i()})}function wv(n){const e=[],t=[];return n.forEachNode((r,i)=>{e.push({...i,id:r,radius:i.size||1})}),n.forEachEdge((r,i)=>{t.push({...i,id:r})}),{nodes:e,edges:t}}function yfe(){const n=X=>()=>X;let t=X=>X.index,r=[],i=[],s,o,a=[100,100],l=n(1),u=n(-1),c=n(100),d=n(.1),h={},g=.1,y=.001,E=[],_=[0,0],m,v=X=>X.cluster,S="treemap",T=!0,M=.1;function A(X){if(!T)return A;S==="force"&&(m.tick(),U());for(let q=0,K=r.length,F,L=X*M;q<K;++q)F=r[q],F.vx+=(h[v(F)].x-F.x)*L,F.vy+=(h[v(F)].y-F.y)*L}function R(){r&&(S==="treemap"?ee():ne())}A.initialize=function(X){r=X,R()};function O(X){let q=v(X.source),K=v(X.target);return q<=K?q+"~"+K:K+"~"+q}function I(X){let q=new Map,K={};return X.forEach(function(F){q.has(v(F))||q.set(v(F),{count:0,sumforceNodeSize:0})}),X.forEach(function(F){K=q.get(v(F)),K.count=K.count+1,K.sumforceNodeSize=K.sumforceNodeSize+Math.PI*(l(F)*l(F))*1.3,q.set(v(F),K)}),q}function k(X){let q=new Map,K=[];return X.forEach(function(F){let L=O(F),z;q.has(L)?z=q.get(L):z=0,z+=1,q.set(L,z)}),q.forEach(function(F,L){let z,Y;z=L.split("~")[0],Y=L.split("~")[1],z!==void 0&&Y!==void 0&&K.push({source:z,target:Y,count:F})}),K}function G(){let X=[],q=[],K=new Map,F,L,z,Y,B;Y=I(r),B=k(i);for(F of Y.keys())z=Y.get(F),X.push({id:F,size:z.count,r:Math.sqrt(z.sumforceNodeSize/Math.PI)}),K.set(F,L);return B.forEach(function(J){let le=K.get(J.source),pe=K.get(J.target);le!==void 0&&pe!==void 0&&q.push({source:le,target:pe,count:J.count})}),{nodes:X,links:q}}function $(){let X=[],q,K,F;F=I(A.nodes());for(q of F.keys())K=F.get(q),X.push({id:q,size:K.count});return{id:"clustersTree",children:X}}function U(){return h.none={x:0,y:0},E.forEach(function(X){S==="treemap"?h[X.data.id]={x:X.x0+(X.x1-X.x0)/2-_[0],y:X.y0+(X.y1-X.y0)/2-_[1]}:h[X.id]={x:X.x-_[0],y:X.y-_[1]}}),h}function ee(){let X=Jre().size(A.size());o=tw($()).sum(q=>q.radius).sort(function(q,K){return K.height-q.height||K.value-q.value}),E=X(o).leaves(),U()}function re(){let X=0;r.length!==0&&i.forEach(function(q){let K,F;if(r){if(K=q.source,F=q.target,typeof q.source!="object"&&(K=r.find(L=>L.id===q.source)),typeof q.target!="object"&&(F=r.find(L=>L.id===q.target)),K===void 0||F===void 0)throw Error("Error setting links, couldnt find nodes for a link (see it on the console)");q.source=K,q.target=F,q.index=X++}})}function ne(){let X;!r||!r.length||(re(),X=G(),s.size>0&&X.nodes.forEach(q=>{var K,F,L,z;q.fx=(F=(K=s.get(q.id))==null?void 0:K.position)==null?void 0:F.x,q.fy=(z=(L=s.get(q.id))==null?void 0:L.position)==null?void 0:z.y}),m=uz(X.nodes).force("x",VT(a[0]/2).strength(.1)).force("y",jT(a[1]/2).strength(.1)).force("collide",nz(q=>q.r).iterations(4)).force("charge",cz().strength(u)).force("links",rz(X.nodes.length?X.links:[]).distance(c).strength(d)),E=m.nodes(),U())}return A.template=function(X){return arguments.length?(S=X,R(),A):S},A.groupBy=function(X){return arguments.length?typeof X=="string"?(v=function(q){return q[X]},A):(v=X,A):v},A.enableGrouping=function(X){return arguments.length?(T=X,A):T},A.strength=function(X){return arguments.length?(M=X,A):M},A.getLinkStrength=function(X){return T?v(X.source)===v(X.target)?typeof g=="function"?g(X):g:typeof y=="function"?y(X):y:typeof g=="function"?g(X):g},A.id=function(X){return arguments.length?(t=X,A):t},A.size=function(X){return arguments.length?(a=X,A):a},A.linkStrengthInterCluster=function(X){return arguments.length?(y=X,A):y},A.linkStrengthIntraCluster=function(X){return arguments.length?(g=X,A):g},A.nodes=function(X){return arguments.length?(r=X,A):r},A.links=function(X){return arguments.length?(X===null?i=[]:i=X,R(),A):i},A.template=function(X){return arguments.length?(S=X,R(),A):S},A.forceNodeSize=function(X){return arguments.length?(l=typeof X=="function"?X:n(+X),R(),A):l},A.nodeSize=A.forceNodeSize,A.forceCharge=function(X){return arguments.length?(u=typeof X=="function"?X:n(+X),R(),A):u},A.forceLinkDistance=function(X){return arguments.length?(c=typeof X=="function"?X:n(+X),R(),A):c},A.forceLinkStrength=function(X){return arguments.length?(d=typeof X=="function"?X:n(+X),R(),A):d},A.offset=function(X){return arguments.length?(_=typeof X=="function"?X:n(+X),A):_},A.getFocis=U,A.setClusters=function(X){return s=X,A},A}function Dc({graph:n,nodeLevelRatio:e=2,mode:t=null,dimensions:r=2,nodeStrength:i=-250,linkDistance:s=50,clusterStrength:o=.5,linkStrengthInterCluster:a=.01,linkStrengthIntraCluster:l=.5,forceLinkDistance:u=100,forceLinkStrength:c=.1,clusterType:d="force",forceCharge:h=-700,getNodePosition:g,drags:y,clusters:E,clusterAttribute:_,forceLayout:m}){const{nodes:v,edges:S}=wv(n),M=r===2&&S.length>25?i*2:i;let A,R;m==="forceDirected2d"?(A=VT(),R=jT()):(A=VT(600).strength(.05),R=jT(600).strength(.05));const O=uz().force("center",nne(0,0)).force("link",rz()).force("charge",cz().strength(M)).force("x",A).force("y",R).force("z",pre()).force("collide",nz($=>$.radius+10)).force("dagRadial",mfe({nodes:v,edges:S,mode:t,nodeLevelRatio:e})).stop();let I;if(_){let $=h;if(v!=null&&v.length){const U=Math.ceil(v.length/200);$=h*U}I=yfe().setClusters(E).strength(o).template(d).groupBy(U=>U.data[_]).links(S).size([100,100]).linkStrengthInterCluster(a).linkStrengthIntraCluster(l).forceLinkDistance(u).forceLinkStrength(c).forceCharge($).forceNodeSize(U=>U.radius)}let k=O.numDimensions(r).nodes(v);if(I&&(k=k.force("group",I)),s){let $=k.force("link");$&&($.id(U=>U.id).links(S).distance(s),I&&($=$.strength((I==null?void 0:I.getLinkStrength)??.1)))}const G=new Map(v.map($=>[$.id,$]));return{step(){for(;O.alpha()>.01;)O.tick();return!0},getNodePosition($){var U,ee;if(g){const re=g($,{graph:n,drags:y,nodes:v,edges:S});if(re)return re}return(U=y==null?void 0:y[$])!=null&&U.position?(ee=y==null?void 0:y[$])==null?void 0:ee.position:G.get($)}}}function vfe({graph:n,radius:e,drags:t,getNodePosition:r}){const i=eie(n,{scale:e}),{nodes:s,edges:o}=wv(n);return{step(){return!0},getNodePosition(a){var l,u;if(r){const c=r(a,{graph:n,drags:t,nodes:s,edges:o});if(c)return c}return(l=t==null?void 0:t[a])!=null&&l.position?(u=t==null?void 0:t[a])==null?void 0:u.position:i==null?void 0:i[a]}}}const _fe={td:{x:"x",y:"y",factor:-1},lr:{x:"y",y:"x",factor:1}};function eD({graph:n,drags:e,mode:t="td",nodeSeparation:r=1,nodeSize:i=[50,50],getNodePosition:s}){const{nodes:o,edges:a}=wv(n),{depths:l}=XB(o,a),u=Object.keys(l).map(E=>l[E]),c=zre().id(E=>E.data.id).parentId(E=>{var _,m,v;return(v=(m=(_=E.ins)==null?void 0:_[0])==null?void 0:m.data)==null?void 0:v.id})(u),h=Wre().separation(()=>r).nodeSize(i)(tw(c)).descendants(),g=_fe[t],y=new Map(o.map(E=>{const{x:_,y:m}=h.find(v=>v.data.id===E.id);return[E.id,{...E,[g.x]:_*g.factor,[g.y]:m*g.factor,z:0}]}));return{step(){return!0},getNodePosition(E){var _,m;if(s){const v=s(E,{graph:n,drags:e,nodes:o,edges:a});if(v)return v}return(_=e==null?void 0:e[E])!=null&&_.position?(m=e==null?void 0:e[E])==null?void 0:m.position:y.get(E)}}}function xfe({graph:n,margin:e,drags:t,getNodePosition:r,ratio:i,gridSize:s,maxIterations:o}){const{nodes:a,edges:l}=wv(n),u=oie(n,{maxIterations:o,inputReducer:(c,d)=>({...d,x:d.x||0,y:d.y||0}),settings:{ratio:i,margin:e,gridSize:s}});return{step(){return!0},getNodePosition(c){var d,h;if(r){const g=r(c,{graph:n,drags:t,nodes:a,edges:l});if(g)return g}return(d=t==null?void 0:t[c])!=null&&d.position?(h=t==null?void 0:t[c])==null?void 0:h.position:u==null?void 0:u[c]}}}function wfe({graph:n,drags:e,iterations:t,...r}){mie.assign(n);const i=die(n,{iterations:t,settings:r});return{step(){return!0},getNodePosition(s){var o;return((o=e==null?void 0:e[s])==null?void 0:o.position)||(i==null?void 0:i[s])}}}function Sfe({graph:n,drags:e,getNodePosition:t}){const{nodes:r,edges:i}=wv(n);return{step(){return!0},getNodePosition(s){return t(s,{graph:n,drags:e,nodes:r,edges:i})}}}const Efe=["forceDirected2d","treeTd2d","treeLr2d","radialOut2d","treeTd3d","treeLr3d","radialOut3d","forceDirected3d"];function bfe({type:n,...e}){if(Efe.includes(n)){const{nodeStrength:t,linkDistance:r,nodeLevelRatio:i}=e;if(n==="forceDirected2d")return Dc({...e,dimensions:2,nodeLevelRatio:i||2,nodeStrength:t||-250,linkDistance:r,forceLayout:n});if(n==="treeTd2d")return Dc({...e,mode:"td",dimensions:2,nodeLevelRatio:i||5,nodeStrength:t||-250,linkDistance:r||50,forceLayout:n});if(n==="treeLr2d")return Dc({...e,mode:"lr",dimensions:2,nodeLevelRatio:i||5,nodeStrength:t||-250,linkDistance:r||50,forceLayout:n});if(n==="radialOut2d")return Dc({...e,mode:"radialout",dimensions:2,nodeLevelRatio:i||5,nodeStrength:t||-500,linkDistance:r||100,forceLayout:n});if(n==="treeTd3d")return Dc({...e,mode:"td",dimensions:3,nodeLevelRatio:i||2,nodeStrength:t||-500,linkDistance:r||50});if(n==="treeLr3d")return Dc({...e,mode:"lr",dimensions:3,nodeLevelRatio:i||2,nodeStrength:t||-500,linkDistance:r||50,forceLayout:n});if(n==="radialOut3d")return Dc({...e,mode:"radialout",dimensions:3,nodeLevelRatio:i||2,nodeStrength:t||-500,linkDistance:r||100,forceLayout:n});if(n==="forceDirected3d")return Dc({...e,dimensions:3,nodeLevelRatio:i||2,nodeStrength:t||-250,linkDistance:r,forceLayout:n})}else if(n==="circular2d"){const{radius:t}=e;return vfe({...e,radius:t||300})}else{if(n==="hierarchicalTd")return eD({...e,mode:"td"});if(n==="hierarchicalLr")return eD({...e,mode:"lr"});if(n==="nooverlap"){const{graph:t,maxIterations:r,ratio:i,margin:s,gridSize:o,...a}=e;return xfe({graph:t,margin:s||10,maxIterations:r||50,ratio:i||10,gridSize:o||20,...a})}else if(n==="forceatlas2"){const{graph:t,iterations:r,gravity:i,scalingRatio:s,...o}=e;return wfe({type:"forceatlas2",graph:t,...o,scalingRatio:s||100,gravity:i||10,iterations:r||50})}else if(n==="custom")return Sfe({...e})}throw new Error(`Layout ${n} not found.`)}function YB({nodeCount:n,nodePosition:e,labelType:t,camera:r}){return(i,s)=>{var o;if(r&&e&&((o=r==null?void 0:r.position)==null?void 0:o.z)/(r==null?void 0:r.zoom)-(e==null?void 0:e.z)>6e3)return!1;if(t==="all")return!0;if(t==="nodes"&&i==="node")return!0;if(t==="edges"&&i==="edge")return!0;if(t==="auto"&&i==="node"){if(s>7)return!0;if(r&&e&&r.position.z/r.zoom-e.z<3e3)return!0}return!1}}function KB(n,e){switch(e){case"above":return n;case"below":return-n;case"inline":case"natural":default:return 0}}function Tfe({graph:n}){const e=_ie(n);return{ranks:e,getSizeForNode:t=>e[t]*80}}function Mfe({graph:n}){const e=wie.degreeCentrality(n);return{ranks:e,getSizeForNode:t=>e[t]*20}}function Afe({graph:n,attribute:e,defaultSize:t}){const r=new Map;return e?n.forEachNode((i,s)=>{var o;const a=(o=s.data)==null?void 0:o[e];isNaN(a)&&console.warn(`Attribute ${a} is not a number for node ${s.id}`),r.set(i,a||0)}):console.warn("Attribute sizing configured but no attribute provided"),{getSizeForNode:i=>!e||!r?t:r.get(i)}}const tD={pagerank:Tfe,centrality:Mfe,attribute:Afe,none:({defaultSize:n})=>({getSizeForNode:e=>n})};function Cfe({type:n,...e}){var t;const r=(t=tD[n])==null?void 0:t.call(tD,e);if(!r&&n!=="default")throw new Error(`Unknown sizing strategy: ${n}`);const{graph:i,minSize:s,maxSize:o}=e,a=new Map;let l,u;if(i.forEachNode((c,d)=>{let h;n==="default"?h=d.size||e.defaultSize:h=r.getSizeForNode(c),(l===void 0||h<l)&&(l=h),(u===void 0||h>u)&&(u=h),a.set(c,h)}),n!=="none"){const c=wz().domain([l,u]).rangeRound([s,o]);for(const[d,h]of a)a.set(d,c(h))}return a}function Rfe(n,e,t){n.clear();for(const r of e)try{n.addNode(r.id,r)}catch({message:i}){console.error(`[Graph] ${i}`)}for(const r of t)try{n.addEdge(r.source,r.target,r)}catch({message:i}){console.error(`[Graph] ${i}`)}return n}function Pfe({graph:n,layout:e,sizingType:t,labelType:r,sizingAttribute:i,defaultNodeSize:s,minNodeSize:o,maxNodeSize:a,clusterAttribute:l}){const u=[],c=[],d=new Map,h=Cfe({graph:n,type:t,attribute:i,minSize:o,maxSize:a,defaultSize:s}),g=n.nodes().length,y=YB({nodeCount:g,labelType:r});return n.forEachNode((E,_)=>{const m=e.getNodePosition(E),{data:v,fill:S,icon:T,label:M,size:A,...R}=_,O=h.get(_.id),I=y("node",O),G=(n.inboundNeighbors(_.id)||[]).map(U=>n.getNodeAttributes(U)),$={..._,size:O,labelVisible:I,label:M,icon:T,fill:S,cluster:l?v[l]:void 0,parents:G,data:{...R,...v??{}},position:{...m,x:m.x||0,y:m.y||0,z:m.z||1}};d.set(_.id,$),u.push($)}),n.forEachEdge((E,_)=>{const m=d.get(_.source),v=d.get(_.target);if(m&&v){const{data:S,id:T,label:M,size:A,...R}=_,O=y("edge",A);c.push({..._,id:T,label:M,labelVisible:O,size:A,data:{...R,id:T,...S||{}}})}}),{nodes:u,edges:c}}const To={mass:10,tension:1e3,friction:300,precision:.1};function JB(n,e,t){const r=e.getLength(),i=n==="end"?r:r/2,s=n==="end"?t/2:0,o=(i-s)/r,a=e.getPointAt(o),l=e.getTangentAt(o);return[a,l]}function ZB(n){return[n+6,2+n/1.5]}const nD=.7;function QB(n,e,t=0){const r=new de(n.x,n.y||0,n.z||0),i=new de(e.x,e.y||0,e.z||0),s=new de().addVectors(r,i).divideScalar(2);return s.setLength(s.length()+t)}function Ife(n,e,t=-1){const r=n.clone(),i=e.clone(),s=new de().subVectors(i,r),o=s.length(),a=s.clone().normalize(),l=new de().subVectors(i,r).divideScalar(2),u=Math.abs(a.x)%1,c=new de(-a.y,a.x-u*a.z,u*a.y).normalize(),d=new de().add(r).add(l).add(c.multiplyScalar(o/4).multiplyScalar(t));return[n,d,e]}function Gy(n,e,t,r,i,s){const o=rD(n,t,e),a=rD(t,n,r);return i?new F1(...Ife(o,a,s)):new fA(o,a)}function Vy(n){return new de(n.position.x,n.position.y,n.position.z||0)}function rD(n,e,t){const r=n.distanceTo(e);return n.clone().add(e.clone().sub(n).multiplyScalar(t/r))}function iD(n,e){return{...n,position:{...n.position,x:n.position.x+e.x,y:n.position.y+e.y,z:n.position.z+e.z}}}function Lfe({edge:n,edges:e,curved:t}){let r=t,i;const s=e.filter(o=>o.target===n.target&&o.source===n.source).map(o=>o.id);if(s.length>1){r=!0;const o=s.indexOf(n.id);s.length===2?i=o===0?nD:-.7:i=(o-Math.floor(s.length/2))*nD}return{curved:r,curveOffset:i}}function jy(n){let e=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(let a of n)e=Math.min(e,a.position.x),t=Math.max(t,a.position.x),r=Math.min(r,a.position.y),i=Math.max(i,a.position.y),s=Math.min(s,a.position.z),o=Math.max(o,a.position.z);return{height:i-r,width:t-e,minX:e,maxX:t,minY:r,maxY:i,minZ:s,maxZ:o,x:(t+e)/2,y:(i+r)/2,z:(o+s)/2}}function Nfe(n,e){return e?n.reduce((t,r)=>{const i=r.data[e];return i&&t.set(i,[...t.get(i)||[],r]),t},new Map):new Map}function Ofe({nodes:n,clusterAttribute:e}){const t=new Map;if(e){const r=Nfe(n,e);for(const[i,s]of r){const o=jy(s);t.set(i,{label:i,nodes:s,position:o})}}return t}const _2=({sensitivity:n=7,interval:e=50,timeout:t=0,disabled:r,onPointerOver:i,onPointerOut:s})=>{const o=Z.useRef(!1),a=Z.useRef(null),l=Z.useRef(0),u=Z.useRef({x:null,y:null,px:null,py:null}),c=Z.useCallback(_=>{u.current.x=_.clientX,u.current.y=_.clientY},[]),d=Z.useCallback(_=>{a.current=clearTimeout(a.current);const{px:m,x:v,py:S,y:T}=u.current;Math.abs(m-v)+Math.abs(S-T)<n?(l.current=1,i(_)):(u.current.px=v,u.current.py=T,a.current=setTimeout(()=>d(_),e))},[e,i,n]),h=Z.useCallback(()=>{clearTimeout(a.current),typeof window<"u"&&document.removeEventListener("mousemove",c,!1)},[c]),g=Z.useCallback(_=>{r||(o.current=!0,h(),l.current!==1&&(u.current.px=_.pointer.x,u.current.py=_.pointer.y,typeof window<"u"&&document.addEventListener("mousemove",c,!1),a.current=setTimeout(()=>d(_),t)))},[h,d,r,c,t]),y=Z.useCallback(_=>{a.current=clearTimeout(a.current),l.current=0,s(_)},[s]),E=Z.useCallback(_=>{o.current=!1,h(),l.current===1&&(a.current=setTimeout(()=>y(_),t))},[h,y,t]);return{pointerOver:g,pointerOut:E}},e4=({draggable:n,set:e,position:t,bounds:r,onDragStart:i,onDragEnd:s})=>{const o=gi(_=>_.camera),a=gi(_=>_.raycaster),l=gi(_=>_.size),u=gi(_=>_.gl),{mouse2D:c,mouse3D:d,offset:h,normal:g,plane:y}=Z.useMemo(()=>({mouse2D:new Je,mouse3D:new de,offset:new de,normal:new de,plane:new Lu}),[]),E=Z.useMemo(()=>u.domElement.getBoundingClientRect(),[u.domElement]);return Yoe({onDragStart:({event:_})=>{const{eventObject:m,point:v}=_;m.getWorldPosition(h).sub(v),d.copy(v),i()},onDrag:({xy:_,buttons:m,cancel:v})=>{if(m!==1){v();return}const S=(_[0]-((E==null?void 0:E.left)??0))/l.width*2-1,T=-((_[1]-((E==null?void 0:E.top)??0))/l.height)*2+1;c.set(S,T),a.setFromCamera(c,o),o.getWorldDirection(g).negate(),y.setFromNormalAndCoplanarPoint(g,d),a.ray.intersectPlane(y,d);const M=new de(t.x,t.y,t.z).copy(d).add(h);if(r){const A=new de((r.minX+r.maxX)/2,(r.minY+r.maxY)/2,(r.minZ+r.maxZ)/2),R=(r.maxX-r.minX)/2,O=M.clone().sub(A);O.length()>R&&(O.normalize().multiplyScalar(R),M.copy(A).add(O))}return e(M)},onDragEnd:s},{drag:{enabled:n,threshold:10}})},{Provider:Dfe,useStore:pt}=kse(),kfe=({actives:n=[],selections:e=[],collapsedNodeIds:t=[],theme:r})=>Ose(i=>({theme:{...r,edge:{...r.edge,label:{...r.edge.label,fontSize:r.edge.label.fontSize??6}}},edges:[],nodes:[],collapsedNodeIds:t,clusters:new Map,panning:!1,draggingIds:[],actives:n,edgeContextMenus:new Set,edgeMeshes:[],selections:e,hoveredNodeId:null,drags:{},graph:new tr({multi:!0}),setTheme:s=>i(o=>({...o,theme:s})),setClusters:s=>i(o=>({...o,clusters:s})),setEdgeContextMenus:s=>i(o=>({...o,edgeContextMenus:s})),setEdgeMeshes:s=>i(o=>({...o,edgeMeshes:s})),setPanning:s=>i(o=>({...o,panning:s})),setDrags:s=>i(o=>({...o,drags:s})),addDraggingId:s=>i(o=>({...o,draggingIds:[...o.draggingIds,s]})),removeDraggingId:s=>i(o=>({...o,draggingIds:o.draggingIds.filter(a=>a!==s)})),setActives:s=>i(o=>({...o,actives:s})),setSelections:s=>i(o=>({...o,selections:s})),setHoveredNodeId:s=>i(o=>({...o,hoveredNodeId:s})),setNodes:s=>i(o=>({...o,nodes:s,centerPosition:jy(s)})),setEdges:s=>i(o=>({...o,edges:s})),setNodePosition:(s,o)=>i(a=>{var l,u;const c=a.nodes.find(E=>E.id===s),d=Vy(c),g=new de(o.x,o.y,o.z).sub(d),y=[...a.nodes];if((l=a.selections)!=null&&l.includes(s))(u=a.selections)==null||u.forEach(E=>{const _=a.nodes.find(m=>m.id===E);if(_){const m=a.nodes.indexOf(_);y[m]=iD(_,g)}});else{const E=a.nodes.indexOf(c);y[E]=iD(c,g)}return{...a,drags:{...a.drags,[s]:c},nodes:y}}),setCollapsedNodeIds:(s=[])=>i(o=>({...o,collapsedNodeIds:s})),setClusterPosition:(s,o)=>i(a=>{const l=new Map(a.clusters),u=l.get(s);if(u){const c=u.position,d=new de(o.x-c.x,o.y-c.y,o.z-(c.z??0)),h=[...a.nodes],g={...a.drags};h.forEach((_,m)=>{_.cluster===s&&(h[m]={..._,position:{..._.position,x:_.position.x+d.x,y:_.position.y+d.y,z:_.position.z+(d.z??0)}},g[_.id]=_)});const y=h.filter(_=>_.cluster===s),E=jy(y);return l.set(s,{...u,position:E}),{...a,drags:{...g,[s]:u},clusters:l,nodes:h}}return a})}));function t4({nodeId:n,nodes:e,edges:t,currentHiddenNodes:r,currentHiddenEdges:i}){const s=[],o=[],a=r.map(g=>g.id),l=i.map(g=>g.id),u=t.filter(g=>g.source===n),c=u.map(g=>g.target);o.push(...u);for(const g of c){const y=t.filter(_=>_.target===g&&_.source!==n);let E=!1;if((y.length===0||y.length>0&&!a.includes(g)&&y.map(m=>m.id).every(m=>l.includes(m)))&&(E=!0),E){const _=e.find(v=>v.id===g);_&&s.push(_);const m=t4({nodeId:g,nodes:e,edges:t,currentHiddenEdges:o,currentHiddenNodes:s});o.push(...m.hiddenEdges),s.push(...m.hiddenNodes)}}const d=Object.values(o.reduce((g,y)=>({...g,[y.id]:y}),{})),h=Object.values(s.reduce((g,y)=>({...g,[y.id]:y}),{}));return{hiddenEdges:d,hiddenNodes:h}}const Ufe=({collapsedIds:n,nodes:e,edges:t})=>{const r=[],i=[];for(const u of n){const{hiddenEdges:c,hiddenNodes:d}=t4({nodeId:u,nodes:e,edges:t,currentHiddenEdges:i,currentHiddenNodes:r});r.push(...d),i.push(...c)}const s=r.map(u=>u.id),o=i.map(u=>u.id),a=e.filter(u=>!s.includes(u.id)),l=t.filter(u=>!o.includes(u.id));return{visibleNodes:a,visibleEdges:l}},Ffe=({layoutType:n,sizingType:e,labelType:t,sizingAttribute:r,clusterAttribute:i,selections:s,nodes:o,edges:a,actives:l,collapsedNodeIds:u,defaultNodeSize:c,maxNodeSize:d,minNodeSize:h,layoutOverrides:g,constrainDragging:y})=>{const E=pt(L=>L.graph),_=pt(L=>L.clusters),m=pt(L=>L.nodes),v=pt(L=>L.setClusters),S=pt(L=>L.collapsedNodeIds),T=pt(L=>L.setEdges),M=pt(L=>L.nodes),A=pt(L=>L.setNodes),R=pt(L=>L.setSelections),O=pt(L=>L.setActives),I=pt(L=>L.drags),k=pt(L=>L.setDrags),G=pt(L=>L.setCollapsedNodeIds),$=Z.useRef(!1),U=Z.useRef(null),ee=gi(L=>L.camera),re=Z.useRef(I),ne=Z.useRef([]);Z.useEffect(()=>{var L;if(!i)return;const z=m.map(B=>B.id),Y=o.find(B=>!z.includes(B.id));if(Y){const B=Y.data[i],J=_.get(B),le={...re.current};(L=J==null?void 0:J.nodes)==null||L.forEach(pe=>le[pe.id]=void 0),re.current=le,k(le)}},[m,o,i,_,k]);const{visibleEdges:X,visibleNodes:q}=Z.useMemo(()=>Ufe({collapsedIds:S,nodes:o,edges:a}),[S,o,a]),K=Z.useCallback(L=>{const z={...re.current};L.forEach(Y=>z[Y.id]=Y),re.current=z,k(z)},[k]),F=Z.useCallback(async L=>{U.current=L||bfe({...g,type:n,graph:E,drags:re.current,clusters:ne==null?void 0:ne.current,clusterAttribute:i}),await gfe(U.current);const z=Pfe({graph:E,layout:U.current,sizingType:e,labelType:t,sizingAttribute:r,maxNodeSize:d,minNodeSize:h,defaultNodeSize:c,clusterAttribute:i}),Y=Ofe({nodes:z.nodes,clusterAttribute:i});y&&Y.forEach(B=>{var J,le;const pe=ne.current.get(B.label);(pe==null?void 0:pe.nodes.length)===B.nodes.length&&(B.position=((le=(J=ne.current)==null?void 0:J.get(B.label))==null?void 0:le.position)??B.position)}),T(z.edges),A(z.nodes),v(Y),i&&K(z.nodes)},[g,n,i,e,t,r,d,h,c,T,A,v]);return Z.useEffect(()=>{re.current=I},[I,i,F]),Z.useEffect(()=>{ne.current=_},[_]),Z.useEffect(()=>{const L=M.map(Y=>({...Y,labelVisible:YB({nodeCount:M==null?void 0:M.length,labelType:t,camera:ee,nodePosition:Y==null?void 0:Y.position})("node",Y==null?void 0:Y.size)}));L.some((Y,B)=>Y.labelVisible!==M[B].labelVisible)&&A(L)},[ee,ee.zoom,ee.position.z,A,M,t]),Z.useEffect(()=>{$.current&&R(s)},[s,R]),Z.useEffect(()=>{$.current&&O(l)},[l,O]),Z.useEffect(()=>{async function L(){$.current=!1,Rfe(E,q,X),await F(),requestAnimationFrame(()=>$.current=!0)}L()},[q,X]),Z.useEffect(()=>{$.current&&G(u)},[u,G]),Z.useEffect(()=>{$.current&&(re.current={},k({}),F())},[n,F,k]),Z.useEffect(()=>{$.current&&F(U.current)},[e,r,t,F]),{updateLayout:F}},Wy=({text:n,fontSize:e=7,fontUrl:t,color:r="#2A6475",opacity:i=1,stroke:s,active:o,ellipsis:a=75,rotation:l})=>{const u=a&&!o?Uce(n,a):n,c=Z.useMemo(()=>new gt(r),[r]),d=Z.useMemo(()=>s?new gt(s):void 0,[s]);return W.jsx(CB,{position:[0,0,1],children:W.jsx(Ice,{font:t,fontSize:e,color:c,fillOpacity:i,textAlign:"center",outlineWidth:s?1:0,outlineColor:d,depthOffset:0,maxWidth:100,overflowWrap:"break-word",rotation:l,children:u})})},zfe=({color:n="#D8E6EA",size:e=1,opacity:t=.5,animated:r,strokeWidth:i=5,innerRadius:s=4,segments:o=25})=>{const a=Z.useMemo(()=>new gt(n),[n]),{ringSize:l,ringOpacity:u}=bo({from:{ringOpacity:0,ringSize:[1e-5,1e-5,1e-5]},to:{ringOpacity:t,ringSize:[e/2,e/2,1]},config:{...To,duration:r?void 0:0}}),c=i/10,d=s+c;return W.jsx(CB,{position:[0,0,1],children:W.jsxs(Wr.mesh,{scale:l,children:[W.jsx("ringGeometry",{attach:"geometry",args:[s,d,o]}),W.jsx(Wr.meshBasicMaterial,{attach:"material",color:a,transparent:!0,depthTest:!1,opacity:u,side:Lr,fog:!0})]})})},Bfe=({color:n,id:e,size:t,selected:r,opacity:i=1,animated:s})=>{const{scale:o,nodeOpacity:a}=bo({from:{scale:[1e-5,1e-5,1e-5],nodeOpacity:0},to:{scale:[t,t,t],nodeOpacity:i},config:{...To,duration:s?void 0:0}}),l=Z.useMemo(()=>new gt(n),[n]),u=pt(c=>c.theme);return W.jsxs(W.Fragment,{children:[W.jsxs(Wr.mesh,{userData:{id:e,type:"node"},scale:o,children:[W.jsx("sphereGeometry",{attach:"geometry",args:[1,25,25]}),W.jsx(Wr.meshPhongMaterial,{attach:"material",side:Lr,transparent:!0,fog:!0,opacity:a,color:l})]}),W.jsx(zfe,{opacity:r?.5:0,size:t,animated:s,color:r?u.ring.activeFill:u.ring.fill})]})},n4=Z.createContext({controls:null,resetControls:()=>{},zoomIn:()=>{},zoomOut:()=>{},dollyIn:()=>{},dollyOut:()=>{},panLeft:()=>{},panRight:()=>{},panUp:()=>{},panDown:()=>{},freeze:()=>{},unFreeze:()=>{}}),vw=()=>{const n=Z.useContext(n4);if(n===void 0)throw new Error("`useCameraControls` hook must be used within a `ControlsProvider` component");return n};Ui.install({THREE:{MOUSE:I3,Vector2:Je,Vector3:de,Vector4:zn,Quaternion:Qi,Matrix4:Qt,Spherical:LF,Box3:Mo,Sphere:Ao,Raycaster:CA,MathUtils:{DEG2RAD:(JO=qx)==null?void 0:JO.DEG2RAD,clamp:(ZO=qx)==null?void 0:ZO.clamp}}});DF({ThreeCameraControls:Ui});const _w={ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40},sD=new yw(_w.ARROW_LEFT,100),oD=new yw(_w.ARROW_RIGHT,100),aD=new yw(_w.ARROW_UP,100),lD=new yw(_w.ARROW_DOWN,100),Hfe=Z.forwardRef(({mode:n="rotate",children:e,animated:t,disabled:r,minDistance:i=1e3,maxDistance:s=5e4},o)=>{const a=Z.useRef(null),l=gi(I=>I.camera),u=gi(I=>I.gl),c=n==="orbit",d=pt(I=>I.setPanning),h=pt(I=>I.draggingIds.length>0),g=Z.useRef(0);Q1((I,k)=>{var G,$;(G=a.current)!=null&&G.enabled&&(($=a.current)==null||$.update(k)),c&&(a.current.azimuthAngle+=20*k*qx.DEG2RAD)},-1),Z.useEffect(()=>()=>{var I;return(I=a.current)==null?void 0:I.dispose()},[]);const y=Z.useCallback(()=>{var I;(I=a.current)==null||I.zoom(l.zoom/2,t)},[t,l.zoom]),E=Z.useCallback(()=>{var I;(I=a.current)==null||I.zoom(-l.zoom/2,t)},[t,l.zoom]),_=Z.useCallback(I=>{var k;(k=a.current)==null||k.dolly(I,t)},[t]),m=Z.useCallback(I=>{var k;(k=a.current)==null||k.dolly(I,t)},[t]),v=Z.useCallback(I=>{var k;c||(k=a.current)==null||k.truck(-.03*I.deltaTime,0,t)},[t,c]),S=Z.useCallback(I=>{var k;c||(k=a.current)==null||k.truck(.03*I.deltaTime,0,t)},[t,c]),T=Z.useCallback(I=>{var k;c||(k=a.current)==null||k.truck(0,.03*I.deltaTime,t)},[t,c]),M=Z.useCallback(I=>{var k;c||(k=a.current)==null||k.truck(0,-.03*I.deltaTime,t)},[t,c]),A=Z.useCallback(I=>{I.code==="Space"&&(n==="rotate"?a.current.mouseButtons.left=Ui.ACTION.TRUCK:a.current.mouseButtons.left=Ui.ACTION.ROTATE)},[n]),R=Z.useCallback(I=>{I.code==="Space"&&(n==="rotate"?a.current.mouseButtons.left=Ui.ACTION.ROTATE:a.current.mouseButtons.left=Ui.ACTION.TRUCK)},[n]);Z.useEffect(()=>(r||(sD.addEventListener("holding",S),oD.addEventListener("holding",v),aD.addEventListener("holding",T),lD.addEventListener("holding",M),typeof window<"u"&&(window.addEventListener("keydown",A),window.addEventListener("keyup",R))),()=>{sD.removeEventListener("holding",S),oD.removeEventListener("holding",v),aD.removeEventListener("holding",T),lD.removeEventListener("holding",M),typeof window<"u"&&(window.removeEventListener("keydown",A),window.removeEventListener("keyup",R))}),[r,A,R,M,S,v,T]),Z.useEffect(()=>{r?(a.current.mouseButtons.left=Ui.ACTION.NONE,a.current.mouseButtons.middle=Ui.ACTION.NONE,a.current.mouseButtons.wheel=Ui.ACTION.NONE):(a.current.mouseButtons.left=Ui.ACTION.TRUCK,a.current.mouseButtons.middle=Ui.ACTION.TRUCK,a.current.mouseButtons.wheel=Ui.ACTION.DOLLY)},[r]),Z.useEffect(()=>{const I=()=>d(!0),k=()=>d(!1),G=a.current;return G&&(G.addEventListener("control",I),G.addEventListener("controlend",k)),()=>{G&&(G.removeEventListener("control",I),G.removeEventListener("controlend",k))}},[a,d]),Z.useEffect(()=>{h?(a.current.mouseButtons.left=Ui.ACTION.NONE,a.current.touches.one=Ui.ACTION.NONE):n==="rotate"?(a.current.mouseButtons.left=Ui.ACTION.ROTATE,a.current.touches.one=Ui.ACTION.TOUCH_ROTATE):(a.current.touches.one=Ui.ACTION.TOUCH_TRUCK,a.current.mouseButtons.left=Ui.ACTION.TRUCK)},[h,n]),WB([{name:"Zoom In",disabled:r,category:"Graph",keys:"command+shift+i",callback:I=>{I.preventDefault(),y()}},{name:"Zoom Out",category:"Graph",disabled:r,keys:"command+shift+o",callback:I=>{I.preventDefault(),E()}}]);const O=Z.useMemo(()=>({controls:a.current,zoomIn:()=>y(),zoomOut:()=>E(),dollyIn:(I=1e3)=>_(I),dollyOut:(I=-1e3)=>m(I),panLeft:(I=100)=>S({deltaTime:I}),panRight:(I=100)=>v({deltaTime:I}),panDown:(I=100)=>M({deltaTime:I}),panUp:(I=100)=>T({deltaTime:I}),resetControls:I=>{var k;return(k=a.current)==null?void 0:k.reset(I)},freeze:()=>{a.current.truckSpeed&&(g.current=a.current.truckSpeed),a.current.truckSpeed=0},unFreeze:()=>a.current.truckSpeed=g.current}),[y,E,S,v,M,T,a.current]);return Z.useImperativeHandle(o,()=>O),W.jsxs(n4.Provider,{value:O,children:[W.jsx("threeCameraControls",{ref:a,args:[l,u.domElement],smoothTime:.1,minDistance:i,dollyToCursor:!0,maxDistance:s}),e]})});function r4(n,e){const t=e.position.z;n<t?n-=t:n+=t;const r=e.fov/e.zoom*Math.PI/180;return 2*Math.tan(r/2)*Math.abs(n)}function $fe(n,e){return r4(n,e)*e.aspect}function uD(n,e){var t,r,i,s;const o=$fe(1,n),a=r4(1,n),l={x0:((t=n==null?void 0:n.position)==null?void 0:t.x)-o/2,x1:((r=n==null?void 0:n.position)==null?void 0:r.x)+o/2,y0:((i=n==null?void 0:n.position)==null?void 0:i.y)-a/2,y1:((s=n==null?void 0:n.position)==null?void 0:s.y)+a/2};return(e==null?void 0:e.x)>l.x0&&(e==null?void 0:e.x)<l.x1&&(e==null?void 0:e.y)>l.y0&&(e==null?void 0:e.y)<l.y1}function cD(n,e){return e.reduce((t,r)=>Math.abs(r-n%Math.PI)<Math.abs(t-n%Math.PI)?r:t)}function Gfe(n,e){const t=cD(n,[0,Math.PI]),r=cD(e,[Math.PI/2,3*Math.PI/2]);return{horizontalRotation:t-n%Math.PI,verticalRotation:r-e%Math.PI}}const cx=50,Vfe=({animated:n,disabled:e,layoutType:t})=>{const r=pt(E=>E.nodes),[i,s]=Z.useState(!1),o=gi(E=>E.invalidate),{controls:a}=vw(),l=gi(E=>E.camera),u=Z.useRef(!1),c=Z.useCallback(async(E,_)=>{const m=(_==null?void 0:_.animated)!==void 0?_==null?void 0:_.animated:!0,v=(_==null?void 0:_.centerOnlyIfNodesNotInView)!==void 0?_==null?void 0:_.centerOnlyIfNodesNotInView:!1;if(!u.current||!v||v&&(E!=null&&E.some(S=>!uD(l,S.position)))){const{x:S,y:T,z:M}=jy(E);await a.setTarget(S,T,M,m),i||s(!0),o()}},[o,a,r]),d=Z.useCallback(async(E,_={animated:!0,fitOnlyIfNodesNotInView:!1})=>{const{fitOnlyIfNodesNotInView:m}=_;if(!m||m&&(E!=null&&E.some(v=>!uD(l,v.position)))){const{minX:v,maxX:S,minY:T,maxY:M,minZ:A,maxZ:R}=jy(E);if(!t.includes("3d")){const{horizontalRotation:O,verticalRotation:I}=Gfe(a==null?void 0:a.azimuthAngle,a==null?void 0:a.polarAngle);a==null||a.rotate(O,I,!0)}await(a==null?void 0:a.zoomTo(1,_==null?void 0:_.animated)),await(a==null?void 0:a.fitToBox(new Mo(new de(v,T,A),new de(S,M,R)),_==null?void 0:_.animated,{cover:!1,paddingLeft:cx,paddingRight:cx,paddingBottom:cx,paddingTop:cx}))}},[l,a,t]),h=Z.useCallback(E=>{let _=null;return E!=null&&E.length&&(_=E.reduce((m,v)=>{const S=r.find(T=>T.id===v);if(S)m.push(S);else throw new Error(`Attempted to center ${v} but it was not found in the nodes`);return m},[])),_},[r]),g=Z.useCallback((E,_)=>{const m=h(E);c(m||r,{animated:n,centerOnlyIfNodesNotInView:_==null?void 0:_.centerOnlyIfNodesNotInView})},[n,c,h,r]),y=Z.useCallback(async(E,_)=>{const m=h(E);await d(m||r,{animated:n,..._})},[n,d,h,r]);return Z.useLayoutEffect(()=>{async function E(){a&&(r!=null&&r.length)&&(u.current||(await c(r,{animated:!1}),await d(r,{animated:!1}),u.current=!0))}E()},[a,c,r,n,l,d]),WB([{name:"Center",disabled:e,category:"Graph",keys:["command+shift+c"],callback:()=>c(r)}]),{centerNodes:c,centerNodesById:g,fitNodesInViewById:y,isCentered:i}},jfe=({image:n,id:e,size:t,opacity:r=1,animated:i})=>{const s=Z.useMemo(()=>new xF().load(n),[n]),{scale:o,spriteOpacity:a}=bo({from:{scale:[1e-5,1e-5,1e-5],spriteOpacity:0},to:{scale:[t,t,t],spriteOpacity:r},config:{...To,duration:i?void 0:0}});return W.jsx(Wr.sprite,{userData:{id:e,type:"node"},scale:o,children:W.jsx(Wr.spriteMaterial,{attach:"material",opacity:a,fog:!0,depthTest:!1,transparent:!0,side:Lr,children:W.jsx("primitive",{attach:"map",object:s,minFilter:br})})})},Wfe=({animated:n,disabled:e,id:t,draggable:r=!1,labelFontUrl:i,contextMenu:s,onClick:o,onDoubleClick:a,onPointerOver:l,onDragged:u,onPointerOut:c,onContextMenu:d,renderNode:h,constrainDragging:g})=>{var y,E,_;const m=vw(),v=pt(ye=>ye.theme),S=pt(ye=>ye.nodes.find(Fe=>Fe.id===t)),T=pt(ye=>ye.edges),M=pt(ye=>ye.draggingIds),A=pt(ye=>ye.collapsedNodeIds),R=pt(ye=>ye.addDraggingId),O=pt(ye=>ye.removeDraggingId),I=pt(ye=>ye.setHoveredNodeId),k=pt(ye=>ye.setNodePosition),G=pt(ye=>ye.setCollapsedNodeIds),$=pt(ye=>ye.collapsedNodeIds.includes(t)),U=pt(ye=>{var Fe;return(Fe=ye.actives)==null?void 0:Fe.includes(t)}),ee=pt(ye=>{var Fe;return(Fe=ye.selections)==null?void 0:Fe.includes(t)}),re=pt(ye=>{var Fe;return((Fe=ye.selections)==null?void 0:Fe.length)>0}),ne=pt(ye=>ye.centerPosition),X=pt(ye=>ye.clusters.get(S.cluster)),q=M.includes(t),K=M.length>0,{position:F,label:L,subLabel:z,size:Y=7,labelVisible:B=!0}=S,J=Z.useRef(null),[le,pe]=Z.useState(!1),[he,Ee]=Z.useState(!1),_e=le||ee||U,te=re?_e?v.node.selectedOpacity:v.node.inactiveOpacity:v.node.opacity,j=Z.useMemo(()=>T.filter(Fe=>Fe.source===t).length>0||$,[T,t,$]),ce=Z.useCallback(()=>{j&&G($?A.filter(ye=>ye!==t):[...A,t])},[j,A,t,$,G]),[{nodePosition:fe,labelPosition:ie,subLabelPosition:se}]=bo(()=>({from:{nodePosition:ne?[ne.x,ne.y,0]:[0,0,0],labelPosition:[0,-(Y+7),2],subLabelPosition:[0,-(Y+14),2]},to:{nodePosition:F?[F.x,F.y,_e?F.z+1:F.z]:[0,0,0],labelPosition:[0,-(Y+7),2],subLabelPosition:[0,-(Y+14),2]},config:{...To,duration:n&&!K?void 0:0}}),[q,F,n,Y,_e]),Ae=e4({draggable:r,position:F,bounds:g?X==null?void 0:X.position:void 0,set:ye=>k(t,ye),onDragStart:()=>{R(t),pe(!0)},onDragEnd:()=>{O(t),u==null||u(S)}});wd(le&&!K&&o!==void 0,"pointer"),wd(le&&r&&!q&&o===void 0,"grab"),wd(q,"grabbing");const we=_e||q,Re=we?v.node.activeFill:S.fill||v.node.fill,{pointerOver:Le,pointerOut:be}=_2({disabled:e||q,onPointerOver:ye=>{m.freeze(),pe(!0),l==null||l(S,ye),I(t)},onPointerOut:ye=>{m.unFreeze(),pe(!1),c==null||c(S,ye),I(null)}}),Ye=Z.useMemo(()=>h?h({id:t,color:Re,size:Y,active:we,opacity:te,animated:n,selected:ee,node:S}):W.jsx(W.Fragment,{children:S.icon?W.jsx(jfe,{id:t,image:S.icon||"",size:Y+8,opacity:te,animated:n,color:Re,node:S,active:we,selected:ee}):W.jsx(Bfe,{id:t,size:Y,opacity:te,animated:n,color:Re,node:S,active:we,selected:ee})}),[h,t,Re,Y,we,te,n,ee,S]),ue=Z.useMemo(()=>{var ye,Fe,ze;return B&&(B||ee||le)&&L&&W.jsxs(W.Fragment,{children:[W.jsx(Wr.group,{position:ie,children:W.jsx(Wy,{text:L,fontUrl:i,opacity:te,stroke:v.node.label.stroke,active:ee||le||q||U,color:ee||le||q||U?v.node.label.activeColor:v.node.label.color})}),z&&W.jsx(Wr.group,{position:se,children:W.jsx(Wy,{text:z,fontUrl:i,fontSize:5,opacity:te,stroke:(ye=v.node.subLabel)==null?void 0:ye.stroke,active:ee||le||q||U,color:ee||le||q||U?(Fe=v.node.subLabel)==null?void 0:Fe.activeColor:(ze=v.node.subLabel)==null?void 0:ze.color})})]})},[le,U,q,ee,L,i,ie,B,te,z,se,v.node.label.activeColor,v.node.label.color,v.node.label.stroke,(y=v.node.subLabel)==null?void 0:y.activeColor,(E=v.node.subLabel)==null?void 0:E.color,(_=v.node.subLabel)==null?void 0:_.stroke]),oe=Z.useMemo(()=>he&&s&&W.jsx(YA,{prepend:!0,center:!0,children:s({data:S,canCollapse:j,isCollapsed:$,onCollapse:ce,onClose:()=>Ee(!1)})}),[he,s,S,j,$,ce]);return W.jsxs(Wr.group,{renderOrder:1,userData:{id:t,type:"node"},ref:J,position:fe,onPointerOver:Le,onPointerOut:be,onClick:ye=>{!e&&!q&&(o==null||o(S,{canCollapse:j,isCollapsed:$},ye))},onDoubleClick:ye=>{!e&&!q&&(a==null||a(S,ye))},onContextMenu:()=>{e||(Ee(!0),d==null||d(S,{canCollapse:j,isCollapsed:$,onCollapse:ce}))},...Ae(),children:[Ye,oe,ue]})},qfe=({animated:n,color:e="#D8E6EA",length:t,opacity:r=.5,position:i,rotation:s,size:o=1,onActive:a,onContextMenu:l})=>{const u=Z.useMemo(()=>new gt(e),[e]),c=Z.useRef(null),d=pt(_=>_.draggingIds.length>0),h=pt(_=>_.centerPosition),[{pos:g,arrowOpacity:y}]=bo(()=>({from:{pos:h?[h.x,h.y,h.z]:[0,0,0],arrowOpacity:0},to:{pos:[i.x,i.y,i.z],arrowOpacity:r},config:{...To,duration:n&&!d?void 0:0}}),[n,d,r,i]),E=Z.useCallback(()=>{var _;const m=new de(0,1,0);(_=c.current)==null||_.quaternion.setFromUnitVectors(m,s)},[s,c]);return Z.useEffect(()=>E(),[E]),W.jsxs(Wr.mesh,{position:g,ref:c,scale:[1,1,1],onPointerOver:()=>a(!0),onPointerOut:()=>a(!1),onPointerDown:_=>{_.nativeEvent.buttons===2&&(_.stopPropagation(),l())},children:[W.jsx("cylinderGeometry",{args:[0,o,t,20,1,!0],attach:"geometry"}),W.jsx(Wr.meshBasicMaterial,{attach:"material",color:u,depthTest:!1,opacity:y,transparent:!0,side:Lr,fog:!0})]})},Xfe=({curveOffset:n,animated:e,color:t="#000",curve:r,curved:i=!1,id:s,opacity:o=1,size:a=1,onContextMenu:l,onClick:u,onPointerOver:c,onPointerOut:d})=>{const h=Z.useRef(null),g=pt(v=>v.draggingIds.length>0),y=Z.useMemo(()=>new gt(t),[t]),E=pt(v=>v.centerPosition),_=Z.useRef(!1),{lineOpacity:m}=bo({from:{lineOpacity:0},to:{lineOpacity:o},config:{...To,duration:e?void 0:0}});return bo(()=>{const v=r.getPoint(0),S=r.getPoint(1);return{from:{fromVertices:_.current?[S==null?void 0:S.x,S==null?void 0:S.y,(S==null?void 0:S.z)||0]:[E==null?void 0:E.x,E==null?void 0:E.y,(E==null?void 0:E.z)||0],toVertices:[v==null?void 0:v.x,v==null?void 0:v.y,(v==null?void 0:v.z)||0]},to:{fromVertices:[v==null?void 0:v.x,v==null?void 0:v.y,(v==null?void 0:v.z)||0],toVertices:[S==null?void 0:S.x,S==null?void 0:S.y,(S==null?void 0:S.z)||0]},onChange:T=>{const{fromVertices:M,toVertices:A}=T.value,R=new de(...M),O=new de(...A),I=Gy(R,0,O,0,i,n);h.current.copy(new Id(I,20,a/2,5,!1))},config:{...To,duration:e&&!g?void 0:0}}},[e,g,r,a]),Z.useEffect(()=>{_.current=!0},[]),W.jsxs("mesh",{userData:{id:s,type:"edge"},onPointerOver:c,onPointerOut:d,onClick:u,onPointerDown:v=>{v.nativeEvent.buttons===2&&(v.stopPropagation(),l())},children:[W.jsx("tubeGeometry",{attach:"geometry",ref:h}),W.jsx(Wr.meshBasicMaterial,{attach:"material",opacity:m,fog:!0,transparent:!0,depthTest:!1,color:y})]})},fD=3,Yfe=({animated:n,arrowPlacement:e="end",contextMenu:t,disabled:r,labelPlacement:i="inline",id:s,interpolation:o,labelFontUrl:a,onContextMenu:l,onClick:u,onPointerOver:c,onPointerOut:d})=>{const h=pt(ce=>ce.theme),g=pt(ce=>ce.draggingIds.length>0),[y,E]=Z.useState(!1),[_,m]=Z.useState(!1),v=pt(ce=>ce.edges),S=v.find(ce=>ce.id===s),{target:T,source:M,label:A,labelVisible:R=!1,size:O=1,fill:I}=S,k=pt(ce=>ce.nodes.find(fe=>fe.id===M)),G=pt(ce=>ce.nodes.find(fe=>fe.id===T)),$=(O+h.edge.label.fontSize)/2,[U,ee]=Z.useMemo(()=>ZB(O),[O]),{curveOffset:re,curved:ne}=Z.useMemo(()=>Lfe({edge:S,edges:v,curved:o==="curved"}),[S,v,o]),[X,q,K]=Z.useMemo(()=>{const ce=Vy(k),fe=k.size,ie=Vy(G),se=G.size;let Ae=Gy(ce,fe,ie,se,ne,re);const[we,Re]=JB(e,Ae,U);return e==="end"&&(Ae=Gy(ce,fe,we,0,ne,re)),[Ae,we,Re]},[k,G,ne,re,e,U]),F=Z.useMemo(()=>{let ce=QB(k.position,G.position,KB($,i));if(ne){const fe=new de().subVectors(ce,X.getPoint(.5));switch(i){case"above":fe.y=fe.y-fD;break;case"below":fe.y=fe.y+fD;break}ce=ce.sub(fe)}return ce},[k.position,G.position,$,i,ne,X]),L=pt(ce=>{var fe;return(fe=ce.selections)==null?void 0:fe.includes(s)}),z=pt(ce=>{var fe;return(fe=ce.selections)==null?void 0:fe.length}),Y=pt(ce=>{var fe;return(fe=ce.actives)==null?void 0:fe.includes(s)}),B=pt(ce=>ce.centerPosition),J=z?L||Y?h.edge.selectedOpacity:h.edge.inactiveOpacity:h.edge.opacity,[{labelPosition:le}]=bo(()=>({from:{labelPosition:B?[B.x,B.y,B.z]:[0,0,0]},to:{labelPosition:[F.x,F.y,F.z]},config:{...To,duration:n&&!g?void 0:0}}),[F,n,g]),pe=Z.useMemo(()=>new Yc(0,0,i==="natural"?0:Math.atan((G.position.y-k.position.y)/(G.position.x-k.position.x))),[G.position.x,G.position.y,k.position.x,k.position.y,i]);wd(y&&!g&&u!==void 0,"pointer");const{pointerOver:he,pointerOut:Ee}=_2({disabled:r,onPointerOver:ce=>{E(!0),c==null||c(S,ce)},onPointerOut:ce=>{E(!1),d==null||d(S,ce)}}),_e=Z.useMemo(()=>e!=="none"&&W.jsx(qfe,{animated:n,color:L||y||Y?h.arrow.activeFill:I||h.arrow.fill,length:U,opacity:J,position:q,rotation:K,size:ee,onActive:E,onContextMenu:()=>{r||(m(!0),l==null||l(S))}}),[I,y,n,U,e,q,K,ee,r,S,Y,L,l,J,h.arrow.activeFill,h.arrow.fill]),te=Z.useMemo(()=>R&&A&&W.jsx(Wr.group,{position:le,onContextMenu:()=>{r||(m(!0),l==null||l(S))},onPointerOver:he,onPointerOut:Ee,children:W.jsx(Wy,{text:A,ellipsis:15,fontUrl:a,stroke:h.edge.label.stroke,color:L||y||Y?h.edge.label.activeColor:h.edge.label.color,opacity:J,fontSize:h.edge.label.fontSize,rotation:pe})}),[y,r,S,Y,L,A,a,le,pe,R,l,Ee,he,J,h.edge.label.activeColor,h.edge.label.color,h.edge.label.fontSize,h.edge.label.stroke]),j=Z.useMemo(()=>_&&t&&W.jsx(YA,{prepend:!0,center:!0,position:F,children:t({data:S,onClose:()=>m(!1)})}),[_,t,F,S]);return W.jsxs("group",{children:[W.jsx(Xfe,{curveOffset:re,animated:n,color:L||y||Y?h.edge.activeFill:I||h.edge.fill,curve:X,curved:ne,id:s,opacity:J,size:O,onClick:ce=>{r||u==null||u(S,ce)},onPointerOver:he,onPointerOut:Ee,onContextMenu:()=>{r||(m(!0),l==null||l(S))}}),_e,te,j]})},dD=new qu(0,0,0);function Kfe(n,e){const t=Z.useRef(),r=pt(u=>u.theme);pt(u=>{t.current=u});const i=Z.useRef(new Map);Z.useRef(new qu(0,0,0));const s=Z.useRef(),o=e==="curved",a=Z.useCallback(u=>{const c=[],d=i.current,{nodes:h}=t.current,g=new Map(h.map(E=>[E.id,E])),y=r.edge.label.fontSize;return n!=="none"&&!s.current&&(s.current=new Fd(0,1,1,20,1,!0)),u.forEach(E=>{const{target:_,source:m,size:v=1}=E,S=g.get(m),T=g.get(_);if(!S||!T)return;const M=`${S.position.x},${S.position.y},${T.position.x},${T.position.y},${v}`;if(d.has(M)){c.push(d.get(M));return}const A=Vy(S),R=S.size+y,O=Vy(T),I=T.size+y;let k=Gy(A,R,O,I,o),G=new Id(k,20,v/2,5,!1);if(n==="none"){c.push(G),d.set(M,G);return}const[$,U]=ZB(v),ee=s.current.clone();ee.scale(U,$,U);const[re,ne]=JB(n,k,$),X=new Qi;if(X.setFromUnitVectors(new de(0,1,0),ne),ee.applyQuaternion(X),ee.translate(re.x,re.y,re.z),n&&n==="end"){const K=Gy(A,R,re,0,o);G=new Id(K,20,v/2,5,!1)}const q=nx([G,ee]);c.push(q),d.set(M,q)}),c},[n,o,r.edge.label.fontSize]),l=Z.useCallback((u,c)=>{const d=a(u),h=a(c);return nx([h.length?nx(h):dD,d.length?nx(d):dD],!0)},[a]);return{getGeometries:a,getGeometry:l}}function Jfe(n,e,t){const r=Z.useRef(n);Z.useEffect(()=>{r.current=n},[n]);const i=pt(d=>d.edgeContextMenus),s=pt(Z.useCallback(d=>d.setEdgeContextMenus,[])),o=Z.useRef(!1),a=Z.useCallback(()=>{o.current=!0},[]),l=Z.useRef(!1),u=Z.useCallback(()=>{l.current=!0},[]),c=Z.useCallback((d,h)=>{const{onClick:g,onContextMenu:y,onPointerOver:E,onPointerOut:_}=r.current;if(g&&o.current&&!t){o.current=!1;for(const m of h)g(m)}if((e||y)&&l.current&&!t){l.current=!1;const m=new Set(i);let v=!1;for(const S of h)i.has(S.id)||(m.add(S.id),v=!0,y==null||y(S));v&&s(m)}E&&h.filter(v=>!d.includes(v)).forEach(v=>{E(v)}),_&&d.filter(v=>!h.includes(v)).forEach(v=>{_(v)})},[e,t,i,s]);return{handleClick:a,handleContextMenu:u,handleIntersections:c}}function Zfe(n,e){const t=Z.useRef(n),r=Z.useRef();Z.useEffect(()=>{t.current=n;const o=n.getAttribute("position");r.current=new Float32Array(o.array.length)},[n]);const i=Z.useCallback(()=>{const o=t.current.getAttribute("position");return{from:new Float32Array(o.array.length),to:o.array}},[]),s=Z.useCallback(o=>{const a=r.current;a.set(o);const l=new Kn(a,3,!1);t.current.setAttribute("position",l),l.needsUpdate=!0},[]);bo(()=>{if(!e)return null;const o=i();return{from:{positions:o.from},to:{positions:o.to},onChange:a=>{s(a.value.positions)},config:{...To,duration:e?void 0:0}}},[e,i,s])}function Qfe(n,e,t){const[{activeOpacity:r,inactiveOpacity:i}]=bo(()=>({from:{activeOpacity:0,inactiveOpacity:0},to:{activeOpacity:e?t.edge.selectedOpacity:t.edge.opacity,inactiveOpacity:e?t.edge.inactiveOpacity:t.edge.opacity},config:{...To,duration:n?void 0:0}}),[n,e,t]);return{activeOpacity:r,inactiveOpacity:i}}const ede=({animated:n,color:e,contextMenu:t,edge:r,labelFontUrl:i,labelPlacement:s="inline",opacity:o})=>{const a=pt(k=>k.theme),{target:l,source:u,label:c,labelVisible:d=!1,size:h=1}=r,g=pt(k=>k.nodes),[y,E]=Z.useMemo(()=>[g.find(k=>k.id===u),g.find(k=>k.id===l)],[g,u,l]),_=pt(k=>k.draggingIds.length>0),m=Z.useMemo(()=>(h+a.edge.label.fontSize)/2,[h,a.edge.label.fontSize]),v=Z.useMemo(()=>QB(y.position,E.position,KB(m,s)),[y.position,E.position,m,s]),S=pt(k=>k.edgeContextMenus),T=pt(k=>k.setEdgeContextMenus),[{labelPosition:M}]=bo(()=>({from:{labelPosition:[0,0,0]},to:{labelPosition:[v.x,v.y,v.z]},config:{...To,duration:n&&!_?void 0:0}}),[v,n,_]),A=Z.useCallback(k=>{S.delete(k),T(new Set(S))},[S,T]),R=Z.useMemo(()=>s==="natural"?new Yc(0,0,0):new Yc(0,0,Math.atan2(E.position.y-y.position.y,E.position.x-y.position.x)),[s,E.position.y,E.position.x,y.position.y,y.position.x]),O=Z.useMemo(()=>({prepend:!0,center:!0,position:v}),[v]),I=Z.useMemo(()=>({text:c,ellipsis:15,fontUrl:i,stroke:a.edge.label.stroke,color:e,opacity:o,fontSize:a.edge.label.fontSize,rotation:R}),[c,i,a.edge.label.stroke,e,o,a.edge.label.fontSize,R]);return W.jsxs("group",{children:[d&&c&&W.jsx(Wr.group,{position:M,children:W.jsx(Wy,{...I})}),t&&S.has(r.id)&&W.jsx(YA,{...O,children:t({data:r,onClose:()=>A(r.id)})})]})},tde=({interpolation:n="linear",arrowPlacement:e="end",labelPlacement:t="inline",animated:r,contextMenu:i,disabled:s,edges:o,labelFontUrl:a,onClick:l,onContextMenu:u,onPointerOut:c,onPointerOver:d})=>{const h=pt(F=>F.theme),{getGeometries:g,getGeometry:y}=Kfe(e,n),E=pt(F=>F.draggingIds),_=pt(F=>F.edgeMeshes),m=pt(F=>F.setEdgeMeshes),v=pt(F=>F.actives||[]),S=pt(F=>F.selections||[]),[T,M,A,R]=Z.useMemo(()=>{const F=[],L=[],z=[],Y=[];return o.forEach(B=>{if(E.includes(B.source)||E.includes(B.target)){S.includes(B.id)||v.includes(B.id)?z.push(B):Y.push(B);return}S.includes(B.id)||v.includes(B.id)?F.push(B):L.push(B)}),[F,L,z,Y]},[o,v,S,E]),O=!!S.length,I=Z.useMemo(()=>y(T,M),[y,T,M]),{activeOpacity:k,inactiveOpacity:G}=Qfe(r,O,h);Zfe(I,r),Z.useEffect(()=>{if(E.length===0){const L=g(o).map(z=>new Or(z));m(L)}},[g,m,o,E.length]);const $=Z.useRef(new Or),U=Z.useRef(new Or),ee=Z.useCallback(F=>{if(!F.camera)return[];const L=F.intersectObjects(_);return L.length?L.map(z=>o[_.indexOf(z.object)]):[]},[_,o]),{handleClick:re,handleContextMenu:ne,handleIntersections:X}=Jfe({onClick:l,onContextMenu:u,onPointerOut:c,onPointerOver:d},i,s),q=Z.useRef([]),K=Z.useRef([]);return Q1(F=>{if($.current.geometry=I,s)return;const L=q.current;if((E.length||E.length===0&&L!==null)&&(U.current.geometry=y(A,R)),q.current=E,E.length)return;const z=K.current,Y=ee(F.raycaster);X(z,Y),Y.join()!==z.join()&&(U.current.geometry=y(Y,[])),K.current=Y}),W.jsxs("group",{onClick:re,onContextMenu:ne,children:[W.jsxs("mesh",{ref:$,children:[W.jsx(Wr.meshBasicMaterial,{attach:"material-0",color:h.edge.fill,depthTest:!1,fog:!0,opacity:G,side:Lr,transparent:!0}),W.jsx(Wr.meshBasicMaterial,{attach:"material-1",color:h.edge.activeFill,depthTest:!1,fog:!0,opacity:k,side:Lr,transparent:!0})]}),W.jsxs("mesh",{ref:U,children:[W.jsx(Wr.meshBasicMaterial,{attach:"material-0",color:h.edge.fill,depthTest:!1,fog:!0,opacity:G,side:Lr,transparent:!0}),W.jsx(Wr.meshBasicMaterial,{attach:"material-1",color:h.edge.activeFill,depthTest:!1,fog:!0,opacity:k,side:Lr,transparent:!0})]}),o.map(F=>W.jsx(ede,{animated:r,contextMenu:i,color:h.edge.label.color,disabled:s,edge:F,labelFontUrl:a,labelPlacement:t},F.id))]})},nde=({outerRadius:n,innerRadius:e,padding:t,normalizedFill:r,normalizedStroke:i,opacity:s,animated:o,theme:a})=>{var l;const{opacity:u}=bo({from:{opacity:0},to:{opacity:s},config:{...To,duration:o?void 0:0}});return W.jsxs(W.Fragment,{children:[W.jsxs("mesh",{children:[W.jsx("ringGeometry",{attach:"geometry",args:[n,0,128]}),W.jsx(Wr.meshBasicMaterial,{attach:"material",color:r,transparent:!0,depthTest:!1,opacity:(l=a.cluster)!=null&&l.fill?u:0,side:Lr,fog:!0})]}),W.jsxs("mesh",{children:[W.jsx("ringGeometry",{attach:"geometry",args:[n,e+t,128]}),W.jsx(Wr.meshBasicMaterial,{attach:"material",color:i,transparent:!0,depthTest:!1,opacity:u,side:Lr,fog:!0})]})]})},rde=({animated:n,position:e,padding:t=40,labelFontUrl:r,disabled:i,radius:s=2,nodes:o,label:a,onClick:l,onPointerOver:u,onPointerOut:c,draggable:d=!1,onDragged:h,onRender:g})=>{var y,E,_,m,v,S,T;const M=pt(j=>j.theme),A=Math.max(e.width,e.height)/2,R=A-s+t,[O,I]=Z.useState(!1),k=pt(j=>j.centerPosition),G=pt(j=>j.nodes),$=vw(),U=pt(j=>j.draggingIds),ee=U.includes(a),re=U.length>0,ne=pt(j=>{var ce;return(ce=j.actives)==null?void 0:ce.some(fe=>o.some(ie=>ie.id===fe))}),X=pt(j=>j.hoveredNodeId),q=pt(j=>{var ce;return(ce=j.selections)==null?void 0:ce.some(fe=>o.some(ie=>ie.id===fe))}),F=pt(j=>{var ce;return((ce=j.selections)==null?void 0:ce.length)>0})?q||O||ne?(y=M.cluster)==null?void 0:y.selectedOpacity:(E=M.cluster)==null?void 0:E.inactiveOpacity:(_=M.cluster)==null?void 0:_.opacity,L=Z.useMemo(()=>{var j,ce;const fe=[0,-R,2],ie=(ce=(j=M.cluster)==null?void 0:j.label)==null?void 0:ce.offset;return ie?[fe[0]-ie[0],fe[1]-ie[1],fe[2]-ie[2]]:fe},[R,(v=(m=M.cluster)==null?void 0:m.label)==null?void 0:v.offset]),{circlePosition:z}=bo({from:{circlePosition:[k.x,k.y,-1]},to:{circlePosition:e?[e.x,e.y,-1]:[0,0,-1]},config:{...To,duration:n&&!re?void 0:0}}),Y=Z.useMemo(()=>{var j;return new gt((j=M.cluster)==null?void 0:j.stroke)},[(S=M.cluster)==null?void 0:S.stroke]),B=Z.useMemo(()=>{var j;return new gt((j=M.cluster)==null?void 0:j.fill)},[(T=M.cluster)==null?void 0:T.fill]),J=pt(j=>j.addDraggingId),le=pt(j=>j.removeDraggingId),pe=pt(j=>j.setClusterPosition),he=e4({draggable:d&&!X,position:{x:e.x,y:e.y,z:-1},set:j=>pe(a,j),onDragStart:()=>{J(a),I(!0)},onDragEnd:()=>{le(a),I(!1);const j=G.filter(ce=>ce.cluster===a);h==null||h({nodes:j,label:a})}});wd(O&&!re&&l!==void 0,"pointer"),wd(O&&d&&!ee&&l===void 0,"grab"),wd(ee,"grabbing");const{pointerOver:Ee,pointerOut:_e}=_2({disabled:i,onPointerOver:j=>{I(!0),$.freeze(),u==null||u({nodes:o,label:a},j)},onPointerOut:j=>{I(!1),$.unFreeze(),c==null||c({nodes:o,label:a},j)}});return Z.useMemo(()=>{var j,ce,fe;return M.cluster&&W.jsx(Wr.group,{userData:{id:a,type:"cluster"},position:z,onPointerOver:Ee,onPointerOut:_e,onClick:ie=>{!i&&!ee&&(l==null||l({nodes:o,label:a},ie))},...he(),children:g?g({label:{position:L,text:a,opacity:F,fontUrl:r},opacity:F,outerRadius:R,innerRadius:A,padding:t,theme:M}):W.jsxs(W.Fragment,{children:[W.jsx(nde,{outerRadius:R,innerRadius:A,padding:t,normalizedFill:B,normalizedStroke:Y,opacity:F,animated:n,theme:M}),((j=M.cluster)==null?void 0:j.label)&&W.jsx(Wr.group,{position:L,children:W.jsx(Wy,{text:a,opacity:F,fontUrl:r,stroke:M.cluster.label.stroke,active:!1,color:(ce=M.cluster)==null?void 0:ce.label.color,fontSize:((fe=M.cluster)==null?void 0:fe.label.fontSize)??12})})]})})},[M,z,Ee,_e,R,B,A,t,Y,L,a,F,r,i,l,o,he,ee,g,n])},ide=Z.forwardRef(({onNodeClick:n,onNodeDoubleClick:e,onNodeContextMenu:t,onEdgeContextMenu:r,onEdgeClick:i,onEdgePointerOver:s,onEdgePointerOut:o,onNodePointerOver:a,onNodePointerOut:l,onClusterClick:u,onNodeDragged:c,onClusterDragged:d,onClusterPointerOver:h,onClusterPointerOut:g,contextMenu:y,animated:E,disabled:_,draggable:m,constrainDragging:v=!1,edgeLabelPosition:S,edgeArrowPosition:T,edgeInterpolation:M="linear",labelFontUrl:A,renderNode:R,onRenderCluster:O,...I},k)=>{const{layoutType:G,clusterAttribute:$}=I,U=gi(he=>he.gl),ee=gi(he=>he.scene),re=gi(he=>he.camera),{updateLayout:ne}=Ffe({...I,constrainDragging:v});if($&&!(G==="forceDirected2d"||G==="forceDirected3d"))throw new Error("Clustering is only supported for the force directed layouts.");const X=pt(he=>he.graph),q=pt(he=>he.nodes),K=pt(he=>he.edges),F=pt(he=>[...he.clusters.values()]),{centerNodesById:L,fitNodesInViewById:z,isCentered:Y}=Vfe({animated:E,disabled:_,layoutType:G});Z.useImperativeHandle(k,()=>({centerGraph:L,fitNodesInView:z,graph:X,renderScene:()=>U.render(ee,re)}),[L,z,X,U,ee,re]);const B=Z.useCallback(he=>{c==null||c(he),$&&ne()},[$,c,ne]),J=Z.useMemo(()=>q.map(he=>W.jsx(Wfe,{id:he==null?void 0:he.id,labelFontUrl:A,draggable:m,constrainDragging:v,disabled:_,animated:E,contextMenu:y,renderNode:R,onClick:n,onDoubleClick:e,onContextMenu:t,onPointerOver:a,onPointerOut:l,onDragged:B},he==null?void 0:he.id)),[v,E,y,_,m,A,q,n,t,e,B,l,a,R]),le=Z.useMemo(()=>E?K.map(he=>W.jsx(Yfe,{id:he.id,disabled:_,animated:E,labelFontUrl:A,labelPlacement:S,arrowPlacement:T,interpolation:M,contextMenu:y,onClick:i,onContextMenu:r,onPointerOver:s,onPointerOut:o},he.id)):W.jsx(tde,{edges:K,disabled:_,animated:E,labelFontUrl:A,labelPlacement:S,arrowPlacement:T,interpolation:M,contextMenu:y,onClick:i,onContextMenu:r,onPointerOver:s,onPointerOut:o}),[E,y,_,T,M,S,K,A,i,r,o,s]),pe=Z.useMemo(()=>F.map(he=>W.jsx(rde,{animated:E,disabled:_,draggable:m,labelFontUrl:A,onClick:u,onPointerOver:h,onPointerOut:g,onDragged:d,onRender:O,...he},he.label)),[E,F,_,m,A,u,g,h,d,O]);return Y&&W.jsxs(Z.Fragment,{children:[le,J,pe]})}),sde={canvas:{background:"#fff"},node:{fill:"#7CA0AB",activeFill:"#1DE9AC",opacity:1,selectedOpacity:1,inactiveOpacity:.2,label:{color:"#2A6475",stroke:"#fff",activeColor:"#1DE9AC"},subLabel:{color:"#ddd",stroke:"transparent",activeColor:"#1DE9AC"}},lasso:{border:"1px solid #55aaff",background:"rgba(75, 160, 255, 0.1)"},ring:{fill:"#D8E6EA",activeFill:"#1DE9AC"},edge:{fill:"#D8E6EA",activeFill:"#1DE9AC",opacity:1,selectedOpacity:1,inactiveOpacity:.1,label:{stroke:"#fff",color:"#2A6475",activeColor:"#1DE9AC",fontSize:6}},arrow:{fill:"#D8E6EA",activeFill:"#1DE9AC"},cluster:{stroke:"#D8E6EA",opacity:1,selectedOpacity:1,inactiveOpacity:.1,label:{stroke:"#fff",color:"#2A6475"}}};function fx(n,e,t){const{offsetX:r,offsetY:i}=n,{width:s,height:o}=t;e.set(r/s*2-1,-(i/o)*2+1)}function ode(n){const e=document.createElement("div");return e.style.pointerEvents="none",e.style.border=n.lasso.border,e.style.backgroundColor=n.lasso.background,e.style.position="fixed",e}const ade=({children:n,type:e="none",onLasso:t,onLassoEnd:r,disabled:i})=>{var s;const o=pt(U=>U.theme),a=gi(U=>U.camera),l=gi(U=>U.gl),u=gi(U=>U.setEvents),c=gi(U=>U.size),d=gi(U=>U.get),h=gi(U=>U.scene),g=vw(),y=pt(U=>U.actives),E=pt(U=>U.setActives),_=pt(U=>U.edges),m=pt(U=>U.edgeMeshes),v=Z.useRef(!1),S=Z.useRef(null),T=Z.useRef(null),M=Z.useRef(ode(o)),A=Z.useRef(null),R=Z.useRef(!1),O=Z.useRef(d().events.enabled),I=Z.useRef((s=g.controls)==null?void 0:s.enabled);Z.useEffect(()=>{v.current&&(t==null||t(y)),v.current=!0},[y,t]);const k=Z.useCallback(U=>{if(R.current){const[ee,re,ne]=A.current;ne.x=Math.max(ee.x,U.clientX),ne.y=Math.max(ee.y,U.clientY),re.x=Math.min(ee.x,U.clientX),re.y=Math.min(ee.y,U.clientY),M.current.style.left=`${re.x}px`,M.current.style.top=`${re.y}px`,M.current.style.width=`${ne.x-re.x}px`,M.current.style.height=`${ne.y-re.y}px`,fx(U,S.current.endPoint,c),fx(U,T.current.endPoint,c);const X=[],q=T.current.select().sort(F=>F.uuid).map(F=>_[m.indexOf(F)].id);X.push(...q);const K=S.current.select().sort(F=>F.uuid).filter(F=>{var L,z;return F.isMesh&&((L=F.userData)==null?void 0:L.id)&&(((z=F.userData)==null?void 0:z.type)===e||e==="all")}).map(F=>F.userData.id);X.push(...K),requestAnimationFrame(()=>{E(X)}),document.addEventListener("pointermove",k,{passive:!0,capture:!0,once:!0})}},[_,m,E,c,e]),G=Z.useCallback(()=>{var U;R.current&&(u({enabled:O.current}),R.current=!1,(U=M.current.parentElement)==null||U.removeChild(M.current),g.controls.enabled=I.current,r==null||r(y),document.removeEventListener("pointermove",k),document.removeEventListener("pointerup",G))},[u,g.controls,r,y,k]),$=Z.useCallback(U=>{var ee,re;if(U.shiftKey){O.current=d().events.enabled,I.current=(ee=g.controls)==null?void 0:ee.enabled,S.current=new bO(a,h);const ne=new Ty;m.length&&ne.add(...m),T.current=new bO(a,ne),A.current=[new Je,new Je,new Je];const[X]=A.current;g.controls.enabled=!1,u({enabled:!1}),R.current=!0,(re=l.domElement.parentElement)==null||re.appendChild(M.current),M.current.style.left=`${U.clientX}px`,M.current.style.top=`${U.clientY}px`,M.current.style.width="0px",M.current.style.height="0px",X.x=U.clientX,X.y=U.clientY,fx(U,S.current.startPoint,c),fx(U,T.current.startPoint,c),document.addEventListener("pointermove",k,{passive:!0,capture:!0,once:!0}),document.addEventListener("pointerup",G,{passive:!0})}},[a,g.controls,m,d,l.domElement.parentElement,k,G,h,u,c]);return Z.useEffect(()=>{if(!(i||e==="none"))return typeof window<"u"&&(document.addEventListener("pointerdown",$,{passive:!0}),document.addEventListener("pointermove",k,{passive:!0}),document.addEventListener("pointerup",G,{passive:!0})),()=>{typeof window<"u"&&(document.removeEventListener("pointerdown",$),document.removeEventListener("pointermove",k),document.removeEventListener("pointerup",G))}},[e,i,$,k,G]),W.jsx("group",{children:n})},lde="_canvas_670zp_1",ude={canvas:lde},cde={alpha:!0,antialias:!0},fde={position:[0,0,1e3],near:5,far:5e4,fov:10},dde=Z.forwardRef(({cameraMode:n="pan",layoutType:e="forceDirected2d",sizingType:t="default",labelType:r="auto",theme:i=sde,animated:s=!0,defaultNodeSize:o=7,minNodeSize:a=5,maxNodeSize:l=15,lassoType:u="none",glOptions:c={},edges:d,children:h,nodes:g,minDistance:y,maxDistance:E,onCanvasClick:_,disabled:m,onLasso:v,onLassoEnd:S,...T},M)=>{var A,R;const O=Z.useRef(null),I=Z.useRef(null),k=Z.useRef(null);Z.useImperativeHandle(M,()=>({centerGraph:(ne,X)=>{var q;return(q=O.current)==null?void 0:q.centerGraph(ne,X)},fitNodesInView:(ne,X)=>{var q;return(q=O.current)==null?void 0:q.fitNodesInView(ne,X)},zoomIn:()=>{var ne;return(ne=I.current)==null?void 0:ne.zoomIn()},zoomOut:()=>{var ne;return(ne=I.current)==null?void 0:ne.zoomOut()},dollyIn:ne=>{var X;return(X=I.current)==null?void 0:X.dollyIn(ne)},dollyOut:ne=>{var X;return(X=I.current)==null?void 0:X.dollyOut(ne)},panLeft:()=>{var ne;return(ne=I.current)==null?void 0:ne.panLeft()},panRight:()=>{var ne;return(ne=I.current)==null?void 0:ne.panRight()},panDown:()=>{var ne;return(ne=I.current)==null?void 0:ne.panDown()},panUp:()=>{var ne;return(ne=I.current)==null?void 0:ne.panUp()},resetControls:ne=>{var X;return(X=I.current)==null?void 0:X.resetControls(ne)},getControls:()=>{var ne;return(ne=I.current)==null?void 0:ne.controls},getGraph:()=>{var ne;return(ne=O.current)==null?void 0:ne.graph},exportCanvas:()=>(O.current.renderScene(),k.current.toDataURL()),freeze:()=>{var ne;return(ne=I.current)==null?void 0:ne.freeze()},unFreeze:()=>{var ne;return(ne=I.current)==null?void 0:ne.unFreeze()}}));const{selections:G,actives:$,collapsedNodeIds:U}=T,ee=d.length+g.length>400?!1:s,re=Z.useMemo(()=>({...c,...cde}),[c]);return W.jsx("div",{className:ude.canvas,children:W.jsx(tne,{legacy:!0,linear:!0,ref:k,flat:!0,gl:re,camera:fde,onPointerMissed:_,children:W.jsxs(Dfe,{createStore:()=>kfe({selections:G,actives:$,theme:i,collapsedNodeIds:U}),children:[((A=i.canvas)==null?void 0:A.background)&&W.jsx("color",{attach:"background",args:[i.canvas.background]}),W.jsx("ambientLight",{intensity:1}),h,((R=i.canvas)==null?void 0:R.fog)&&W.jsx("fog",{attach:"fog",args:[i.canvas.fog,4e3,9e3]}),W.jsx(Hfe,{mode:n,ref:I,disabled:m,minDistance:y,maxDistance:E,animated:s,children:W.jsx(ade,{disabled:m,type:u,onLasso:v,onLassoEnd:S,children:W.jsx(Z.Suspense,{children:W.jsx(ide,{ref:O,disabled:m,animated:ee,edges:d,nodes:g,layoutType:e,sizingType:t,labelType:r,defaultNodeSize:o,minNodeSize:a,maxNodeSize:l,...T})})})})]})})})}),Iu=({accordinId:n,labelId:e,label:t,hiddenElement:r,titleClassName:i,show:s=!1})=>{const o=()=>{const a=document.getElementById(`${n}-button`),l=document.getElementById(`${n}-collapse`);l&&(l.classList.contains("collapse")?(l.classList.remove("collapse"),l.classList.add("show"),a.classList.remove("collapsed")):(l.classList.remove("show"),l.classList.add("collapse"),a.classList.add("collapsed")))};return W.jsxs("div",{className:"accordion-item",children:[W.jsx("div",{className:"accordion-header",id:n,children:W.jsx(Cl,{action:o,text:e?W.jsx(Nt,{id:e}):W.jsx(W.Fragment,{children:t}),btnClassName:`accordion-button ${s?"show":"collapsed"}`,textClassName:i||_n.contextAccordinTitle,id:`${n}-button`,ariaLabel:"Toggle Accordin"})}),W.jsx("div",{id:`${n}-collapse`,className:`accordion-collapse ${s?"show":"collapse"}`,role:"region","aria-labelledby":n,children:r})]})};var Tb={exports:{}},hD;function hde(){return hD||(hD=1,function(n){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var t=function(r){var i=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,s=0,o={},a={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function v(S){return S instanceof l?new l(S.type,v(S.content),S.alias):Array.isArray(S)?S.map(v):S.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(v){return Object.prototype.toString.call(v).slice(8,-1)},objId:function(v){return v.__id||Object.defineProperty(v,"__id",{value:++s}),v.__id},clone:function v(S,T){T=T||{};var M,A;switch(a.util.type(S)){case"Object":if(A=a.util.objId(S),T[A])return T[A];M={},T[A]=M;for(var R in S)S.hasOwnProperty(R)&&(M[R]=v(S[R],T));return M;case"Array":return A=a.util.objId(S),T[A]?T[A]:(M=[],T[A]=M,S.forEach(function(O,I){M[I]=v(O,T)}),M);default:return S}},getLanguage:function(v){for(;v;){var S=i.exec(v.className);if(S)return S[1].toLowerCase();v=v.parentElement}return"none"},setLanguage:function(v,S){v.className=v.className.replace(RegExp(i,"gi"),""),v.classList.add("language-"+S)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(M){var v=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(M.stack)||[])[1];if(v){var S=document.getElementsByTagName("script");for(var T in S)if(S[T].src==v)return S[T]}return null}},isActive:function(v,S,T){for(var M="no-"+S;v;){var A=v.classList;if(A.contains(S))return!0;if(A.contains(M))return!1;v=v.parentElement}return!!T}},languages:{plain:o,plaintext:o,text:o,txt:o,extend:function(v,S){var T=a.util.clone(a.languages[v]);for(var M in S)T[M]=S[M];return T},insertBefore:function(v,S,T,M){M=M||a.languages;var A=M[v],R={};for(var O in A)if(A.hasOwnProperty(O)){if(O==S)for(var I in T)T.hasOwnProperty(I)&&(R[I]=T[I]);T.hasOwnProperty(O)||(R[O]=A[O])}var k=M[v];return M[v]=R,a.languages.DFS(a.languages,function(G,$){$===k&&G!=v&&(this[G]=R)}),R},DFS:function v(S,T,M,A){A=A||{};var R=a.util.objId;for(var O in S)if(S.hasOwnProperty(O)){T.call(S,O,S[O],M||O);var I=S[O],k=a.util.type(I);k==="Object"&&!A[R(I)]?(A[R(I)]=!0,v(I,T,null,A)):k==="Array"&&!A[R(I)]&&(A[R(I)]=!0,v(I,T,O,A))}}},plugins:{},highlightAll:function(v,S){a.highlightAllUnder(document,v,S)},highlightAllUnder:function(v,S,T){var M={callback:T,container:v,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};a.hooks.run("before-highlightall",M),M.elements=Array.prototype.slice.apply(M.container.querySelectorAll(M.selector)),a.hooks.run("before-all-elements-highlight",M);for(var A=0,R;R=M.elements[A++];)a.highlightElement(R,S===!0,M.callback)},highlightElement:function(v,S,T){var M=a.util.getLanguage(v),A=a.languages[M];a.util.setLanguage(v,M);var R=v.parentElement;R&&R.nodeName.toLowerCase()==="pre"&&a.util.setLanguage(R,M);var O=v.textContent,I={element:v,language:M,grammar:A,code:O};function k($){I.highlightedCode=$,a.hooks.run("before-insert",I),I.element.innerHTML=I.highlightedCode,a.hooks.run("after-highlight",I),a.hooks.run("complete",I),T&&T.call(I.element)}if(a.hooks.run("before-sanity-check",I),R=I.element.parentElement,R&&R.nodeName.toLowerCase()==="pre"&&!R.hasAttribute("tabindex")&&R.setAttribute("tabindex","0"),!I.code){a.hooks.run("complete",I),T&&T.call(I.element);return}if(a.hooks.run("before-highlight",I),!I.grammar){k(a.util.encode(I.code));return}if(S&&r.Worker){var G=new Worker(a.filename);G.onmessage=function($){k($.data)},G.postMessage(JSON.stringify({language:I.language,code:I.code,immediateClose:!0}))}else k(a.highlight(I.code,I.grammar,I.language))},highlight:function(v,S,T){var M={code:v,grammar:S,language:T};if(a.hooks.run("before-tokenize",M),!M.grammar)throw new Error('The language "'+M.language+'" has no grammar.');return M.tokens=a.tokenize(M.code,M.grammar),a.hooks.run("after-tokenize",M),l.stringify(a.util.encode(M.tokens),M.language)},tokenize:function(v,S){var T=S.rest;if(T){for(var M in T)S[M]=T[M];delete S.rest}var A=new d;return h(A,A.head,v),c(v,A,S,A.head,0),y(A)},hooks:{all:{},add:function(v,S){var T=a.hooks.all;T[v]=T[v]||[],T[v].push(S)},run:function(v,S){var T=a.hooks.all[v];if(!(!T||!T.length))for(var M=0,A;A=T[M++];)A(S)}},Token:l};r.Prism=a;function l(v,S,T,M){this.type=v,this.content=S,this.alias=T,this.length=(M||"").length|0}l.stringify=function v(S,T){if(typeof S=="string")return S;if(Array.isArray(S)){var M="";return S.forEach(function(k){M+=v(k,T)}),M}var A={type:S.type,content:v(S.content,T),tag:"span",classes:["token",S.type],attributes:{},language:T},R=S.alias;R&&(Array.isArray(R)?Array.prototype.push.apply(A.classes,R):A.classes.push(R)),a.hooks.run("wrap",A);var O="";for(var I in A.attributes)O+=" "+I+'="'+(A.attributes[I]||"").replace(/"/g,"&quot;")+'"';return"<"+A.tag+' class="'+A.classes.join(" ")+'"'+O+">"+A.content+"</"+A.tag+">"};function u(v,S,T,M){v.lastIndex=S;var A=v.exec(T);if(A&&M&&A[1]){var R=A[1].length;A.index+=R,A[0]=A[0].slice(R)}return A}function c(v,S,T,M,A,R){for(var O in T)if(!(!T.hasOwnProperty(O)||!T[O])){var I=T[O];I=Array.isArray(I)?I:[I];for(var k=0;k<I.length;++k){if(R&&R.cause==O+","+k)return;var G=I[k],$=G.inside,U=!!G.lookbehind,ee=!!G.greedy,re=G.alias;if(ee&&!G.pattern.global){var ne=G.pattern.toString().match(/[imsuy]*$/)[0];G.pattern=RegExp(G.pattern.source,ne+"g")}for(var X=G.pattern||G,q=M.next,K=A;q!==S.tail&&!(R&&K>=R.reach);K+=q.value.length,q=q.next){var F=q.value;if(S.length>v.length)return;if(!(F instanceof l)){var L=1,z;if(ee){if(z=u(X,K,v,U),!z||z.index>=v.length)break;var le=z.index,Y=z.index+z[0].length,B=K;for(B+=q.value.length;le>=B;)q=q.next,B+=q.value.length;if(B-=q.value.length,K=B,q.value instanceof l)continue;for(var J=q;J!==S.tail&&(B<Y||typeof J.value=="string");J=J.next)L++,B+=J.value.length;L--,F=v.slice(K,B),z.index-=K}else if(z=u(X,0,F,U),!z)continue;var le=z.index,pe=z[0],he=F.slice(0,le),Ee=F.slice(le+pe.length),_e=K+F.length;R&&_e>R.reach&&(R.reach=_e);var te=q.prev;he&&(te=h(S,te,he),K+=he.length),g(S,te,L);var j=new l(O,$?a.tokenize(pe,$):pe,re,pe);if(q=h(S,te,j),Ee&&h(S,q,Ee),L>1){var ce={cause:O+","+k,reach:_e};c(v,S,T,q.prev,K,ce),R&&ce.reach>R.reach&&(R.reach=ce.reach)}}}}}}function d(){var v={value:null,prev:null,next:null},S={value:null,prev:v,next:null};v.next=S,this.head=v,this.tail=S,this.length=0}function h(v,S,T){var M=S.next,A={value:T,prev:S,next:M};return S.next=A,M.prev=A,v.length++,A}function g(v,S,T){for(var M=S.next,A=0;A<T&&M!==v.tail;A++)M=M.next;S.next=M,M.prev=S,v.length-=A}function y(v){for(var S=[],T=v.head.next;T!==v.tail;)S.push(T.value),T=T.next;return S}if(!r.document)return r.addEventListener&&(a.disableWorkerMessageHandler||r.addEventListener("message",function(v){var S=JSON.parse(v.data),T=S.language,M=S.code,A=S.immediateClose;r.postMessage(a.highlight(M,a.languages[T],T)),A&&r.close()},!1)),a;var E=a.util.currentScript();E&&(a.filename=E.src,E.hasAttribute("data-manual")&&(a.manual=!0));function _(){a.manual||a.highlightAll()}if(!a.manual){var m=document.readyState;m==="loading"||m==="interactive"&&E&&E.defer?document.addEventListener("DOMContentLoaded",_):window.requestAnimationFrame?window.requestAnimationFrame(_):window.setTimeout(_,16)}return a}(e);n.exports&&(n.exports=t),typeof J2<"u"&&(J2.Prism=t),t.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.languages.markup.doctype.inside["internal-subset"].inside=t.languages.markup,t.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(i,s){var o={};o["language-"+s]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[s]},o.cdata=/^<!\[CDATA\[|\]\]>$/i;var a={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:o}};a["language-"+s]={pattern:/[\s\S]+/,inside:t.languages[s]};var l={};l[i]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return i}),"i"),lookbehind:!0,greedy:!0,inside:a},t.languages.insertBefore("markup","cdata",l)}}),Object.defineProperty(t.languages.markup.tag,"addAttribute",{value:function(r,i){t.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[i,"language-"+i],inside:t.languages[i]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.xml=t.languages.extend("markup",{}),t.languages.ssml=t.languages.xml,t.languages.atom=t.languages.xml,t.languages.rss=t.languages.xml,function(r){var i=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+i.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+i.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+i.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+i.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:i,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var s=r.languages.markup;s&&(s.tag.addInlined("style","css"),s.tag.addAttribute("style","css"))}(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:t.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),t.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),t.languages.markup&&(t.languages.markup.tag.addInlined("script","javascript"),t.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),t.languages.js=t.languages.javascript,function(){if(typeof t>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",i=function(E,_){return" Error "+E+" while fetching file: "+_},s=" Error: File does not exist or is empty",o={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},a="data-src-status",l="loading",u="loaded",c="failed",d="pre[data-src]:not(["+a+'="'+u+'"]):not(['+a+'="'+l+'"])';function h(E,_,m){var v=new XMLHttpRequest;v.open("GET",E,!0),v.onreadystatechange=function(){v.readyState==4&&(v.status<400&&v.responseText?_(v.responseText):v.status>=400?m(i(v.status,v.statusText)):m(s))},v.send(null)}function g(E){var _=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(E||"");if(_){var m=Number(_[1]),v=_[2],S=_[3];return v?S?[m,Number(S)]:[m,void 0]:[m,m]}}t.hooks.add("before-highlightall",function(E){E.selector+=", "+d}),t.hooks.add("before-sanity-check",function(E){var _=E.element;if(_.matches(d)){E.code="",_.setAttribute(a,l);var m=_.appendChild(document.createElement("CODE"));m.textContent=r;var v=_.getAttribute("data-src"),S=E.language;if(S==="none"){var T=(/\.(\w+)$/.exec(v)||[,"none"])[1];S=o[T]||T}t.util.setLanguage(m,S),t.util.setLanguage(_,S);var M=t.plugins.autoloader;M&&M.loadLanguages(S),h(v,function(A){_.setAttribute(a,u);var R=g(_.getAttribute("data-range"));if(R){var O=A.split(/\r\n?|\n/g),I=R[0],k=R[1]==null?O.length:R[1];I<0&&(I+=O.length),I=Math.max(0,Math.min(I-1,O.length)),k<0&&(k+=O.length),k=Math.max(0,Math.min(k,O.length)),A=O.slice(I,k).join(`
`),_.hasAttribute("data-start")||_.setAttribute("data-start",String(I+1))}m.textContent=A,t.highlightElement(m)},function(A){_.setAttribute(a,c),m.textContent=A})}}),t.plugins.fileHighlight={highlight:function(_){for(var m=(_||document).querySelectorAll(d),v=0,S;S=m[v++];)t.highlightElement(S)}};var y=!1;t.fileHighlight=function(){y||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),y=!0),t.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(Tb)),Tb.exports}var pde=hde();const mde=Bi(pde);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;const pD=({code:n,language:e})=>(Z.useEffect(()=>{mde.highlightAll()},[]),W.jsx("div",{className:"Code",children:W.jsx("pre",{children:W.jsx("code",{className:`language-${e}`,children:n})})})),pM=({id:n,raw:e,decodedPayload:t,decodedHeader:r,validationFn:i,headerValidationFn:s,schemaUrl:o,headerSchemaUrl:a})=>{const[l,u]=Z.useState("UNKNOWN"),[c,d]=Z.useState(void 0),[h,g]=Z.useState("UNKNOWN"),[y,E]=Z.useState(void 0),_=JSON.stringify(t,null,4),m=JSON.stringify(r,null,4),v=S=>{const T=S==="header"?"header":"payload",M=S==="header"?"payload":"header",A=document.getElementById(`${n}-nav-${T}`);A&&(A.classList.add("active"),A.classList.add("show"));const R=document.getElementById(`${n}-nav-${T}-tab`);R&&R.classList.add("active");const O=document.getElementById(`${n}-nav-${M}`);O&&(O.classList.remove("active"),O.classList.remove("show"));const I=document.getElementById(`${n}-nav-${M}-tab`);I&&I.classList.remove("active")};return Z.useEffect(()=>{(l==="UNKNOWN"||h==="UNKNOWN")&&(async()=>{if(!(!i&&!s)){if(i){const[T,M]=await i(t);T?u("VALID"):(u("INVALID"),d(M))}if(s){const[T,M]=await s(r);T?g("VALID"):(g("INVALID"),E(M))}}})()},[l,h]),W.jsxs("div",{className:"container",style:{width:"100%",padding:"14px 24px"},children:[W.jsx("div",{className:"row",style:{padding:"8px"},children:i&&W.jsxs("div",{className:"col",children:[W.jsx("table",{style:{width:"100%",tableLayout:"fixed"},"data-testid":`${n}-schema-validation-table-payload`,children:W.jsx("tbody",{children:W.jsxs("tr",{children:[W.jsxs("td",{children:[W.jsx(Ir,{iconID:`${l==="VALID"?"#it-check":"#it-close"}`,className:`icon-sm ${l==="VALID"?"icon-success":"icon-danger"}`,isRounded:!1}),W.jsx("span",{className:_n.contextAccordinText,children:l==="UNKNOWN"?W.jsx(Nt,{id:"validate_schema"}):l==="VALID"?W.jsx(Nt,{id:"valid_schema"}):W.jsx(Nt,{id:"invalid_schema"})})]}),o&&W.jsx("td",{children:W.jsx("a",{href:o,className:_n.contextAccordinText,children:W.jsx(Nt,{id:"schema_validation_url"})})})]})})}),c&&W.jsx("div",{className:"alert alert-danger",role:"alert",children:W.jsx("span",{className:_n.contextAccordinText,children:c})}),W.jsx("table",{className:"mt-3",style:{width:"100%",tableLayout:"fixed"},"data-testid":`${n}-schema-validation-table-header`,children:W.jsx("tbody",{children:W.jsxs("tr",{children:[W.jsxs("td",{children:[W.jsx(Ir,{iconID:`${h==="VALID"?"#it-check":"#it-close"}`,className:`icon-sm ${h==="VALID"?"icon-success":"icon-danger"}`,isRounded:!1}),W.jsx("span",{className:_n.contextAccordinText,children:h==="UNKNOWN"?W.jsx(Nt,{id:"validate_header_schema"}):h==="VALID"?W.jsx(Nt,{id:"valid_header_schema"}):W.jsx(Nt,{id:"invalid_header_schema"})})]}),a&&W.jsx("td",{children:W.jsx("a",{href:a,className:_n.contextAccordinText,children:W.jsx(Nt,{id:"schema_validation_url"})})})]})})}),y&&W.jsx("div",{className:"alert alert-danger",role:"alert",children:W.jsx("span",{className:_n.contextAccordinText,children:y})})]})}),W.jsx("div",{className:"row",style:{padding:"8px"},children:W.jsx("div",{className:"col-4",children:W.jsxs("button",{className:"btn btn-primary btn-icon btn-xs py-1 px-1",title:"Discovery","aria-label":"Discovery",onClick:()=>navigator.clipboard.writeText(e),"data-testid":"copy-raw-jwt-button",children:[W.jsx(Ir,{iconID:"#it-copy",className:"icon-xs icon-white",isRounded:!1}),W.jsx("span",{className:_n.contextAccordinButton,children:"Copy raw JWT"})]})})}),W.jsx("div",{className:"row",style:{padding:"8px"},children:W.jsxs("div",{className:"col",children:[W.jsxs("ul",{className:"nav nav-tabs auto","data-testid":"jwt-tabs",children:[W.jsx("li",{className:"nav-item",children:W.jsx("span",{"data-testid":"jwt-header-tab",className:"nav-link active",id:`${n}-nav-header-tab`,role:"tab",onClick:()=>v("header"),children:W.jsx("span",{className:_n.contextAccordinText,children:W.jsx(Nt,{id:"header"})})})}),W.jsx("li",{className:"nav-item","data-testid":"jwt-payload-li",children:W.jsx("span",{"data-testid":"jwt-payload-tab",className:"nav-link",id:`${n}-nav-payload-tab`,role:"tab",onClick:()=>v("payload"),children:W.jsx("span",{className:_n.contextAccordinText,children:W.jsx(Nt,{id:"payload"})})})})]}),W.jsxs("div",{className:"tab-content",id:"nav-tabContent",children:[W.jsx("div",{className:"tab-pane fade show active",id:`${n}-nav-header`,role:"tabpanel","aria-labelledby":"nav-header-tab","data-testid":"jwt-header-tab-content",children:W.jsx(pD,{language:"json",code:m})}),W.jsx("div",{className:"tab-pane fade",id:`${n}-nav-payload`,role:"tabpanel","aria-labelledby":"nav-payload-tab","data-testid":"jwt-payload-tab-content",children:W.jsx(pD,{language:"json",code:_})})]})]})})]})},i4=({id:n,infos:e})=>{const t=(r,i)=>W.jsxs("tr",{className:_n.contextAccordinText,children:[W.jsx("td",{style:{whiteSpace:"nowrap"},children:W.jsx(Nt,{id:r[0].toString()})}),W.jsx("td",{children:r[1]})]},`${n}-info${i}`);return W.jsx("div",{className:"container",style:{padding:"14px 24px"},children:W.jsx("table",{className:"table",children:W.jsx("tbody",{children:e.map(t)})})})},mD=({isInDiscoveryQueue:n,onNodesRemove:e,addEntities:t,addFilteredEntities:r,removeAllEntities:i,isFailed:s,isDiscovered:o,onSelection:a,isDisconnected:l,onEdgeAdd:u})=>{const c=y=>s(y)?"btn-secondary":o(y)?l(y)?"btn-warning":"btn-danger":"btn-success",d=y=>s(y)?"#it-warning":o(y)?l(y)?"#it-plug":"#it-minus":"#it-plus",h=y=>s(y)?()=>{}:o(y)?l(y)?()=>u(y):()=>e([y]):()=>t(y);return({items:y})=>{const E=y.filter(_=>!o(_)).length;return W.jsxs(W.Fragment,{children:[W.jsx("ul",{style:{listStyleType:"none",paddingLeft:"0.8rem"},children:y&&y.map(_=>W.jsx("li",{className:"it-list-item pt-2","data-testid":"entity-item",style:{width:"auto",height:"auto"},children:W.jsxs("div",{className:"row justify-content-md-start",children:[W.jsx("div",{className:"col-md-auto",children:n(_)?W.jsx("div",{className:"progress-spinner progress-spinner-double size-sm progress-spinner-active",children:W.jsx("span",{className:"visually-hidden",children:"Loading..."})}):W.jsx(Cl,{test_id:"add-remove-entities-button",action:h(_),iconID:d(_),btnClassName:`btn-sm py-0 px-1 ${c(_)}`,title:"Remove",ariaLabel:"Remove",disabled:s(_)})}),W.jsx("div",{className:"col-md-auto",children:W.jsx(Cl,{test_id:"highlight-entities-button",action:()=>a(_),iconID:"#it-pin",btnClassName:"btn-sm py-0 px-1 btn-primary",title:"Highlight",ariaLabel:"Highlight",disabled:!o(_)})}),W.jsx("div",{className:"col-md-auto",children:W.jsx("span",{className:_n.contextAccordinText,style:{whiteSpace:"nowrap"},children:o3(_,42)})})]})},_))}),W.jsx("div",{className:"container justify-content-md-between",children:W.jsxs("div",{className:"row",children:[W.jsx("div",{className:"col-md-auto",children:W.jsx(Cl,{id:"add-all-entities-button",action:()=>t(y),iconID:"#it-plus",btnClassName:"btn-sm py-0 px-1 btn-primary",title:"Discovery",ariaLabel:"Discovery",text:`Add all this ${E} in page`,disabled:E===0})}),W.jsx("div",{className:"col-md-auto",children:W.jsx(Cl,{id:"remove-all-entities-button",action:i,iconID:"#it-restore",btnClassName:"btn-sm py-0 px-1 btn-danger",title:"Discovery",ariaLabel:"Discovery",text:"Remove All"})}),W.jsx("div",{className:"col-md-auto",children:W.jsx(Cl,{id:"add-filtered-entities-button",action:r,iconID:"#it-plus-circle",btnClassName:"btn-sm py-0 px-1 btn-outline-primary",iconClassName:"icon-xs icon-primary",title:"Discovery",ariaLabel:"Discovery",text:"Add all filtered"})})]})})]})}};var dx={exports:{}},Mb={},gD;function gde(){return gD||(gD=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatNames=n.fastFormats=n.fullFormats=void 0;function e(G,$){return{validate:G,compare:$}}n.fullFormats={date:e(s,o),time:e(l(!0),u),"date-time":e(h(!0),g),"iso-time":e(l(),c),"iso-date-time":e(h(),y),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:m,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:k,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:S,int32:{type:"number",validate:A},int64:{type:"number",validate:R},float:{type:"number",validate:O},double:{type:"number",validate:O},password:!0,binary:!0},n.fastFormats={...n.fullFormats,date:e(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,o),time:e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,u),"date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,g),"iso-time":e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,c),"iso-date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,y),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},n.formatNames=Object.keys(n.fullFormats);function t(G){return G%4===0&&(G%100!==0||G%400===0)}const r=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,i=[0,31,28,31,30,31,30,31,31,30,31,30,31];function s(G){const $=r.exec(G);if(!$)return!1;const U=+$[1],ee=+$[2],re=+$[3];return ee>=1&&ee<=12&&re>=1&&re<=(ee===2&&t(U)?29:i[ee])}function o(G,$){if(G&&$)return G>$?1:G<$?-1:0}const a=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function l(G){return function(U){const ee=a.exec(U);if(!ee)return!1;const re=+ee[1],ne=+ee[2],X=+ee[3],q=ee[4],K=ee[5]==="-"?-1:1,F=+(ee[6]||0),L=+(ee[7]||0);if(F>23||L>59||G&&!q)return!1;if(re<=23&&ne<=59&&X<60)return!0;const z=ne-L*K,Y=re-F*K-(z<0?1:0);return(Y===23||Y===-1)&&(z===59||z===-1)&&X<61}}function u(G,$){if(!(G&&$))return;const U=new Date("2020-01-01T"+G).valueOf(),ee=new Date("2020-01-01T"+$).valueOf();if(U&&ee)return U-ee}function c(G,$){if(!(G&&$))return;const U=a.exec(G),ee=a.exec($);if(U&&ee)return G=U[1]+U[2]+U[3],$=ee[1]+ee[2]+ee[3],G>$?1:G<$?-1:0}const d=/t|\s/i;function h(G){const $=l(G);return function(ee){const re=ee.split(d);return re.length===2&&s(re[0])&&$(re[1])}}function g(G,$){if(!(G&&$))return;const U=new Date(G).valueOf(),ee=new Date($).valueOf();if(U&&ee)return U-ee}function y(G,$){if(!(G&&$))return;const[U,ee]=G.split(d),[re,ne]=$.split(d),X=o(U,re);if(X!==void 0)return X||u(ee,ne)}const E=/\/|:/,_=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function m(G){return E.test(G)&&_.test(G)}const v=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function S(G){return v.lastIndex=0,v.test(G)}const T=-2147483648,M=2**31-1;function A(G){return Number.isInteger(G)&&G<=M&&G>=T}function R(G){return Number.isInteger(G)}function O(){return!0}const I=/[^\\]\\Z/;function k(G){if(I.test(G))return!1;try{return new RegExp(G),!0}catch{return!1}}}(Mb)),Mb}var Ab={},yD;function yde(){return yD||(yD=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatLimitDefinition=void 0;const e=C3(),t=gn(),r=t.operators,i={formatMaximum:{okStr:"<=",ok:r.LTE,fail:r.GT},formatMinimum:{okStr:">=",ok:r.GTE,fail:r.LT},formatExclusiveMaximum:{okStr:"<",ok:r.LT,fail:r.GTE},formatExclusiveMinimum:{okStr:">",ok:r.GT,fail:r.LTE}},s={message:({keyword:a,schemaCode:l})=>(0,t.str)`should be ${i[a].okStr} ${l}`,params:({keyword:a,schemaCode:l})=>(0,t._)`{comparison: ${i[a].okStr}, limit: ${l}}`};n.formatLimitDefinition={keyword:Object.keys(i),type:"string",schemaType:"string",$data:!0,error:s,code(a){const{gen:l,data:u,schemaCode:c,keyword:d,it:h}=a,{opts:g,self:y}=h;if(!g.validateFormats)return;const E=new e.KeywordCxt(h,y.RULES.all.format.definition,"format");E.$data?_():m();function _(){const S=l.scopeValue("formats",{ref:y.formats,code:g.code.formats}),T=l.const("fmt",(0,t._)`${S}[${E.schemaCode}]`);a.fail$data((0,t.or)((0,t._)`typeof ${T} != "object"`,(0,t._)`${T} instanceof RegExp`,(0,t._)`typeof ${T}.compare != "function"`,v(T)))}function m(){const S=E.schema,T=y.formats[S];if(!T||T===!0)return;if(typeof T!="object"||T instanceof RegExp||typeof T.compare!="function")throw new Error(`"${d}": format "${S}" does not define "compare" function`);const M=l.scopeValue("formats",{key:S,ref:T,code:g.code.formats?(0,t._)`${g.code.formats}${(0,t.getProperty)(S)}`:void 0});a.fail$data(v(M))}function v(S){return(0,t._)`${S}.compare(${u}, ${c}) ${i[d].fail} 0`}},dependencies:["format"]};const o=a=>(a.addKeyword(n.formatLimitDefinition),a);n.default=o}(Ab)),Ab}var vD;function vde(){return vD||(vD=1,function(n,e){Object.defineProperty(e,"__esModule",{value:!0});const t=gde(),r=yde(),i=gn(),s=new i.Name("fullFormats"),o=new i.Name("fastFormats"),a=(u,c={keywords:!0})=>{if(Array.isArray(c))return l(u,c,t.fullFormats,s),u;const[d,h]=c.mode==="fast"?[t.fastFormats,o]:[t.fullFormats,s],g=c.formats||t.formatNames;return l(u,g,d,h),c.keywords&&(0,r.default)(u),u};a.get=(u,c="full")=>{const h=(c==="fast"?t.fastFormats:t.fullFormats)[u];if(!h)throw new Error(`Unknown format "${u}"`);return h};function l(u,c,d,h){var g,y;(g=(y=u.opts.code).formats)!==null&&g!==void 0||(y.formats=(0,i._)`require("ajv-formats/dist/formats").${h}`);for(const E of c)u.addFormat(E,d[E])}n.exports=e=a,Object.defineProperty(e,"__esModule",{value:!0}),e.default=a}(dx,dx.exports)),dx.exports}var _de=vde();const xde=Bi(_de),wde="object",Sde={alg:{type:"string",not:{enum:["none","HS512","HS256","HS384"]}},kid:{type:"string"},typ:{type:"string",const:"entity-statement+jwt"}},Ede=["alg","kid","typ"],bde={type:wde,properties:Sde,required:Ede},Tde="http://json-schema.org/draft-07/schema#",Mde={authority_hints:{items:{type:"string"},type:"array"},exp:{type:"number"},iat:{type:"number"},iss:{type:"string"},jwks:{properties:{keys:{items:{},type:"array"}},type:"object"},metadata:{properties:{federation_entity:{properties:{contacts:{items:{type:"string"},type:"array"},federation_fetch_endpoint:{type:"string"},federation_list_endpoint:{type:"string"},homepage_uri:{type:"string"},organization_name:{type:"string"}},type:"object"},openid_provider:{properties:{authorization_endpoint:{type:"string"},client_registration_types_supported:{items:{type:"string"},type:"array"},federation_registration_endpoint:{type:"string"},grant_types_supported:{items:{type:"string"},type:"array"},id_token_signing_alg_values_supported:{items:{type:"string"},type:"array"},issuer:{type:"string"},logo_uri:{type:"string"},op_policy_uri:{type:"string"},response_types_supported:{items:{type:"string"},type:"array"},signed_jwks_uri:{type:"string"},subject_types_supported:{items:{type:"string"},type:"array"},token_endpoint:{type:"string"},token_endpoint_auth_methods_supported:{items:{type:"string"},type:"array"}},type:"object"}},type:"object"},sub:{type:"string"}},Ade="object",Cde={$schema:Tde,properties:Mde,type:Ade},Rde="http://json-schema.org/draft-07/schema#",Pde="object",Ide={iss:{type:"string",format:"uri",pattern:"^https://"},sub:{type:"string",format:"uri",pattern:"^https://"},iat:{type:"integer",minimum:0},exp:{type:"integer",minimum:0},jwks:{type:"object",properties:{keys:{type:"array",items:{type:"object",properties:{kty:{type:"string"},n:{type:"string"},e:{type:"string"},kid:{type:"string"}},required:["kty","kid"]}}},required:["keys"],additionalProperties:!1},metadata:{type:"object",properties:{openid_relying_party:{type:"object",properties:{redirect_uris:{type:"array",items:{type:"string",format:"uri"}},grant_types:{type:"array",items:{type:"string",enum:["refresh_token","authorization_code"]},minItems:1,maxItems:2,uniqueItems:!0,contains:{const:"authorization_code"}},jwks:{type:"object",properties:{keys:{type:"array",items:{type:"object",properties:{kty:{type:"string"},use:{type:"string"},n:{type:"string"},e:{type:"string"},kid:{type:"string"}},required:["kty","kid"]}}},required:["keys"]},id_token_signed_response_alg:{type:"string",not:{enum:["none","HS512","HS256","HS384"]}},id_token_encrypted_response_alg:{type:"string",not:{enum:["RS_1_5"]}},id_token_encrypted_response_enc:{type:"string"},userinfo_signed_response_alg:{type:"string",not:{enum:["none","HS512","HS256","HS384"]}},userinfo_encrypted_response_alg:{type:"string",not:{enum:["RS_1_5"]}},userinfo_encrypted_response_enc:{type:"string"},token_endpoint_auth_method:{type:"string",const:"private_key_jwt"},client_id:{type:"string",format:"uri",pattern:"^https://[^?#]+$"},client_registration_types:{type:"array",items:{type:"string",const:"automatic"}},response_types:{type:"array",items:{type:"string"},contains:{type:"string",const:"code"}}},required:["grant_types","redirect_uris","id_token_signed_response_alg","userinfo_signed_response_alg","userinfo_encrypted_response_alg","userinfo_encrypted_response_enc","token_endpoint_auth_method","client_id","client_registration_types","response_types"],dependencies:{id_token_encrypted_response_alg:["id_token_encrypted_response_enc"]}},federation_entity:{type:"object",properties:{federation_resolve_endpoint:{type:"string",format:"uri",pattern:"^https://.*?/resolve/?"},organization_name:{type:"string"},homepage_uri:{type:"string",format:"uri"},policy_uri:{type:"string",format:"uri"},logo_uri:{type:"string",format:"uri",pattern:"^https://.*\\.svg"},contacts:{type:"array",items:{type:"string"}}},required:["federation_resolve_endpoint","organization_name","homepage_uri","policy_uri","contacts"]},openid_provider:{type:"object"},oauth_authorization_server:{type:"object"},oauth_resource:{type:"object"}},additionalProperties:!1,required:["openid_relying_party","federation_entity"]},authority_hints:{type:"array",items:{type:"string",format:"uri",pattern:"^https://"}},trust_marks:{type:"array",items:{type:"object",properties:{id:{type:"string",format:"uri",pattern:"^https://"},trust_mark:{type:"string",pattern:"^[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+$"}},required:["id","trust_mark"]}}},Lde=["iss","sub","iat","exp","jwks","metadata","authority_hints","trust_marks"],Nde={$schema:Rde,type:Pde,properties:Ide,required:Lde},Ode="http://json-schema.org/draft-07/schema#",Dde={exp:{type:"number"},iat:{type:"number"},iss:{type:"string"},jwks:{properties:{keys:{items:{},type:"array"}},type:"object"},metadata_policy:{properties:{openid_provider:{properties:{contacts:{properties:{add:{items:{type:"string"},type:"array"}},type:"object"},organization_name:{properties:{value:{type:"string"}},type:"object"},subject_types_supported:{properties:{value:{items:{type:"string"},type:"array"}},type:"object"},token_endpoint_auth_methods_supported:{properties:{default:{items:{type:"string"},type:"array"},subset_of:{items:{type:"string"},type:"array"},superset_of:{items:{type:"string"},type:"array"}},type:"object"}},type:"object"}},type:"object"},source_endpoint:{type:"string"},sub:{type:"string"}},kde="object",Ude={$schema:Ode,properties:Dde,type:kde},Fde="object",zde={alg:{type:"string",minLength:1,not:{enum:["none","HS512","HS256","HS384"]}},kid:{type:"string",minLength:1},typ:{type:"string",minLength:1}},Bde=["alg","kid","typ"],Hde={type:Fde,properties:zde,required:Bde},$de="object",Gde={iss:{type:"string",format:"uri",pattern:"^https://"},sub:{type:"string",format:"uri",pattern:"^https://"},trust_mark_type:{type:"string"},iat:{type:"integer",minimum:0},logo_uri:{type:"string",format:"uri",pattern:"^https://.*\\.svg$"},exp:{type:"integer",minimum:0},ref:{type:"string",format:"uri",pattern:"^https://"},organization_type:{type:"string",enum:["public","private"]},id_code:{type:"object",properties:{ipa_code:{type:"string"},aoo_code:{type:"string"},uo_code:{type:"string"},vat_number:{type:"string"},fiscal_number:{type:"string"}}},email:{type:"string",format:"email"},organization_name:{type:"string"},sa_profile:{type:"string",enum:["full","light"]}},Vde=["iss","sub","id","iat","logo_uri","exp","ref","organization_type","id_code","email","organization_name"],jde=[{if:{properties:{organization_type:{const:"public"}}},then:{properties:{id_code:{type:"object",required:["ipa_code"]}}}},{if:{properties:{organization_type:{const:"private"}}},then:{anyOf:[{properties:{id_code:{type:"object",required:["vat_number"]}}},{properties:{id_code:{type:"object",required:["fiscal_number"]}}}]}}],Wde={type:$de,properties:Gde,required:Vde,allOf:jde},Co=new R3({logger:console,allErrors:!0,verbose:!0});xde(Co);const _D=Co.compile(bde),xD=Co.compile(Cde),wD=Co.compile(Nde),SD=Co.compile(Ude),ED=Co.compile(Hde),bD=Co.compile(Wde),qde=async n=>await _D(n)?[!0,void 0]:[!1,Co.errorsText(_D.errors)],Xde=async n=>await xD(n)?[!0,void 0]:[!1,Co.errorsText(xD.errors)],Yde=async n=>await wD(n)?[!0,void 0]:[!1,Co.errorsText(wD.errors)],Kde=async n=>await ED(n)?[!0,void 0]:[!1,Co.errorsText(ED.errors)],Jde=async n=>await bD(n)?[!0,void 0]:[!1,Co.errorsText(bD.errors)],Zde=async n=>await SD(n)?[!0,void 0]:[!1,Co.errorsText(SD.errors)],Qde=({id:n,subordinateUrl:e,originalList:t,onListChange:r,showModalError:i})=>{const[s,o]=Z.useState(!1),[a,l]=Z.useState(!1),[u,c]=Z.useState(""),[d,h]=Z.useState(""),g=async()=>{const E=new URLSearchParams;s&&E.append("trust_marked","true"),a&&E.append("intermediate","true"),u!==""&&E.append("entity_type",u),d!==""&&E.append("trust_mark_id",d);try{const _=await fr.get(e,{params:E});r(_.data)}catch(_){const m=_.response;if((m==null?void 0:m.status)===400){const v=m==null?void 0:m.data;i([v.error_description]);return}i([(m==null?void 0:m.statusText)||"Unknown error"])}},y=()=>r(t);return W.jsx("div",{style:{padding:"12px"},children:W.jsxs("div",{className:"container",children:[W.jsxs("div",{className:"row",children:[W.jsx("div",{className:"col-6",children:W.jsxs("div",{className:`${_n.contextAccordinText}`,children:[W.jsx("input",{className:"form-check-input",type:"checkbox",onChange:E=>o(E.target.checked),id:`${n}-trustMarked`}),W.jsx("label",{className:"form-check-label",htmlFor:`${n}-trustMarked`,style:{padding:"0 0.75rem"},children:"Trust Marked"})]})}),W.jsx("div",{className:"col-6",children:W.jsxs("div",{className:`${_n.contextAccordinText}`,children:[W.jsx("input",{className:"form-check-input",type:"checkbox",onChange:E=>l(E.target.checked),id:`${n}-intermediate`}),W.jsx("label",{className:"form-check-label",htmlFor:`${n}-intermediate`,style:{padding:"0 0.75rem"},children:"Intermediate"})]})})]}),W.jsx("div",{className:"row mt-1",children:W.jsx("div",{className:"col-11",children:W.jsx("input",{type:"text",className:`form-control ${_n.contextAccordinText}`,id:`${n}-trustMarkID`,onChange:E=>h(E.target.value),placeholder:"Trust Mark ID"})})}),W.jsx("div",{className:"row mt-1",children:W.jsx("div",{className:"col-11",children:W.jsx("input",{type:"text",className:`form-control ${_n.contextAccordinText}`,id:`${n}-entityType`,onChange:E=>c(E.target.value),placeholder:"Entity Type"})})}),W.jsxs("div",{className:"row mt-2",children:[W.jsx("div",{className:"col-3",children:W.jsxs("button",{className:"btn btn-primary btn-icon btn-xs py-1 px-1",title:"Search","aria-label":"Search",onClick:()=>g(),children:[W.jsx(Ir,{iconID:"#it-search",className:"icon-xs icon-white",isRounded:!1}),W.jsx("span",{className:_n.contextAccordinButton,children:W.jsx(Nt,{id:"search"})})]})}),W.jsx("div",{className:"col-3",children:W.jsxs("button",{className:"btn btn-warning btn-icon btn-xs py-1 px-1",title:"Discovery","aria-label":"Discovery",onClick:()=>y(),children:[W.jsx(Ir,{iconID:"#it-restore",className:"icon-xs icon-white",isRounded:!1}),W.jsx("span",{className:_n.contextAccordinButton,children:W.jsx(Nt,{id:"restore"})})]})})]})]})})},ehe=({id:n,trustMarkListUrl:e,onModalError:t})=>{const[r,i]=Z.useState(""),[s,o]=Z.useState(""),[a,l]=Z.useState([]),u=({items:d})=>W.jsx("table",{style:{listStyleType:"none",width:"100%"},children:W.jsx("tbody",{children:d.map((h,g)=>W.jsx("tr",{children:W.jsx("td",{children:W.jsx("div",{className:"row justify-content-center",children:h})})},g))})}),c=async()=>{const d=new URLSearchParams;r!==""&&d.append("sub",r),s!==""&&d.append("trust_mark_id",s);try{const h=await fr.get(e,{params:d});l(h.data)}catch(h){const g=h.response;if((g==null?void 0:g.status)===400){const y=g==null?void 0:g.data;t([y.error_description]);return}t([(g==null?void 0:g.statusText)||"Unknown error"])}};return W.jsx("div",{style:{padding:"12px"},children:W.jsxs("div",{className:"container",children:[W.jsx("div",{className:"row mt-1",children:W.jsx("div",{className:"col-11",children:W.jsx("input",{type:"text",className:`form-control ${_n.contextAccordinText}`,id:`${n}-trustMarkID`,onChange:d=>o(d.target.value),placeholder:"Trust Mark ID"})})}),W.jsx("div",{className:"row mt-1",children:W.jsx("div",{className:"col-11",children:W.jsx("input",{type:"text",className:`form-control ${_n.contextAccordinText}`,id:`${n}-sub`,onChange:d=>i(d.target.value),placeholder:"Subordinate"})})}),W.jsxs("div",{className:"row mt-2",children:[W.jsx("div",{className:"col-3",children:W.jsxs("button",{className:"btn btn-primary btn-icon btn-xs py-1 px-1",title:"Search","aria-label":"Search",onClick:()=>c(),disabled:s==="",children:[W.jsx(Ir,{iconID:"#it-search",className:"icon-xs icon-white",isRounded:!1}),W.jsx("span",{className:_n.contextAccordinButton,children:W.jsx(Nt,{id:"search"})})]})}),W.jsx("div",{className:"row mt-2",children:W.jsx("div",{className:"col-11",children:W.jsx(hy,{items:a,itemsPerPage:5,ItemsRenderer:u,filterFn:void 0,onItemsFiltered:void 0})})})]})]})})},the=({data:n,onNodesAdd:e,onNodesRemove:t,onEdgeAdd:r,isInDiscoveryQueue:i,isDiscovered:s,isFailed:o,isDisconnected:a,onSelection:l,onModalError:u})=>{var B,J,le,pe,he,Ee;const[c,d]=Z.useState((J=(B=n.info.ec.payload.metadata)==null?void 0:B.federation_entity)==null?void 0:J.federation_list_endpoint),[h,g]=Z.useState((le=n.info.ec.payload.metadata)!=null&&le.federation_entity?(pe=n.info.ec.payload.metadata)==null?void 0:pe.federation_entity.federation_trust_mark_list_endpoint:void 0),[y,E]=Z.useState([]),[_,m]=Z.useState([]),[v,S]=Z.useState([]),[T,M]=Z.useState(!1),[A,R]=Z.useState(n.info.immDependants||[]),[O,I]=Z.useState(!1),[k,G]=Z.useState(!0),$=_e=>t(_e),U=(_e=!1)=>{S(_e?y:_)},ee=_e=>{const j=(Array.isArray(_e)?_e:[_e]).filter(ce=>!o(ce)&&!i(ce));S(j)},re=(_e=!1)=>()=>{if(_e)$(n.info.immDependants.filter(te=>s(te)));else{const te=n.info.ec.payload.authority_hints;if(!te)return;$(te.filter(j=>s(j)))}},ne=re(!0),X=re(!1),q=(_e,te=!1)=>{te?E(_e):m(_e)},K=(_e,te)=>_e.toLowerCase().includes(te.toLowerCase()),F=(((he=n.info.immDependants)==null?void 0:he.length)??0)===0,L=Z.useCallback(async _e=>{if(F){const te=await Yde(_e);return[te[0]&&n.info.ec.valid,te[1]]}else{const te=await Xde(_e);return[te[0]&&n.info.ec.valid,te[1]]}},[F,n.info.ec]),z=async _e=>{const te=await Jde(_e);return[te[0]&&n.info.ec.valid,te[1]]};Z.useEffect(()=>{v.length!==0&&e(v.filter(_e=>!s(_e)&&!o(_e)))},[v]),Z.useEffect(()=>{R(T?n.info.immDependants.filter(_e=>!s(_e)):n.info.immDependants)},[T]),Z.useEffect(()=>{var _e,te,j,ce;G(!1),setTimeout(()=>{G(!0)},0),R(n.info.immDependants),E(n.info.immDependants||[]),m(n.info.ec.payload.authority_hints||[]),S([]),M(!1),I(!1),d((te=(_e=n.info.ec.payload.metadata)==null?void 0:_e.federation_entity)==null?void 0:te.federation_list_endpoint),g((ce=(j=n.info.ec.payload.metadata)==null?void 0:j.federation_entity)==null?void 0:ce.federation_trust_mark_list_endpoint)},[n]);const Y=[["entity_id_label",n.info.ec.entity],["federation_entity_type_label",n.info.type],["immediate_subordinate_count_label",n.info.immDependants.length],["status_label",s3(n.info.ec.valid,n.info.ec.invalidReason)],["expiring_date_label",CM(n.info.ec.payload.exp)],["entity_type_label",H9(n.info.ec.payload).join(", ")]];return W.jsx(W.Fragment,{children:W.jsxs("div",{className:"row","data-testid":"node-context-sidebar",children:[W.jsxs("div",{className:"accordion",children:[k&&W.jsx(Iu,{accordinId:"info-details",labelId:"node_info",show:!0,hiddenElement:W.jsx(i4,{id:`${n.info.ec.entity}-view`,infos:Y})}),n.info.ec.payload.authority_hints&&n.info.ec.payload.authority_hints.length>0&&W.jsx(Iu,{accordinId:"hauthority-hints-list",labelId:"authority_hints_list",hiddenElement:W.jsx(hy,{items:n.info.ec.payload.authority_hints,itemsPerPage:5,ItemsRenderer:mD({isInDiscoveryQueue:i,addEntities:ee,addFilteredEntities:()=>U(),onNodesRemove:t,removeAllEntities:X,isFailed:o,onSelection:l,isDisconnected:a,isDiscovered:s,onEdgeAdd:r}),filterFn:K,onItemsFiltered:_e=>q(_e,!1)})}),A.length>0&&W.jsx(Iu,{accordinId:"immediate-subordinates-list",labelId:"subordinate_list",hiddenElement:W.jsxs(W.Fragment,{children:[W.jsxs("div",{style:{width:"100%",paddingLeft:"8px"},children:[W.jsx("div",{className:"toggles",children:W.jsxs("label",{htmlFor:"filteredToggle",className:_n.contextAccordinText,children:[W.jsx(Nt,{id:"filter_discovered"}),W.jsx("input",{type:"checkbox",id:"filteredToggle",onChange:()=>M(!T)}),W.jsx("span",{className:"lever"})]})}),W.jsxs("div",{className:`${_n.contextAccordinText}`,children:[W.jsx("input",{className:"form-check-input",type:"checkbox",onChange:_e=>I(_e.target.checked),id:"intermediate"}),W.jsx("label",{className:"form-check-label",htmlFor:"intermediate",style:{padding:"0 0.75rem"},children:W.jsx(Nt,{id:"advanced_filters"})})]}),O&&W.jsx(Qde,{id:"subordinate-advance-search",subordinateUrl:c||"",originalList:n.info.immDependants,onListChange:R,showModalError:u})]}),W.jsx(hy,{items:A,itemsPerPage:5,ItemsRenderer:mD({isInDiscoveryQueue:i,addEntities:ee,addFilteredEntities:()=>U(!0),onNodesRemove:t,removeAllEntities:ne,isFailed:o,onSelection:l,isDisconnected:a,isDiscovered:s,onEdgeAdd:r}),filterFn:K,onItemsFiltered:_e=>q(_e,!0)})]})}),W.jsx(Iu,{accordinId:"entity-configuration",labelId:"entity_configuration_data",hiddenElement:W.jsx(pM,{id:"entity-configuration-view",raw:n.info.ec.jwt,decodedPayload:n.info.ec.payload,decodedHeader:n.info.ec.header,validationFn:L,headerValidationFn:qde,schemaUrl:"https://raw.githubusercontent.com/italia/openid-federation-browser/refs/heads/main/src/lib/openid-federation/schemas/entityConfiguration.schema.json",headerSchemaUrl:"undefined"},`jwt-${F?"leaf":"entity"}-${+n.info.ec.jwt?n.info.ec.jwt.slice(0,12):"no"}`)}),n.info.trustMarks&&W.jsx(Iu,{accordinId:"trust-marks",labelId:"trust_marks",hiddenElement:W.jsx(W.Fragment,{children:n.info.trustMarks.map((_e,te)=>W.jsx("div",{style:{padding:"12px 12px"},"data-testid":"trust-mark",children:W.jsx(Iu,{accordinId:`trust-mark-${te}`,label:_e.id,hiddenElement:W.jsx(pM,{id:`trust-mark-${te}-view`,raw:_e.jwt,decodedPayload:_e.payload,decodedHeader:_e.header,validationFn:z,headerValidationFn:Kde,schemaUrl:"undefined",headerSchemaUrl:"undefined"})},te)},te))})}),h&&W.jsx(Iu,{accordinId:"trust-marks-list",labelId:"trust_marks_listing_endpoint",hiddenElement:W.jsx(ehe,{id:"trust-mark-listing",trustMarkListUrl:h,onModalError:u})})]}),W.jsx("div",{className:"col-12",children:n.info.istanciatedFrom&&!((Ee=n.info.ec.payload.authority_hints)!=null&&Ee.some(_e=>er(_e)===er(n.info.istanciatedFrom)))&&W.jsx("div",{className:"alert alert-warning",role:"alert",children:W.jsx(Nt,{id:"entity_instanciated_from_authority_hint"})})})]})})},nhe=({data:n})=>{const e=async t=>{const r=await Zde(t);return[r[0]&&n.subStatement.valid,r[1]]};return W.jsx("div",{className:"row justify-content-center",children:n.subStatement?W.jsxs("div",{className:"accordion",children:[W.jsx(Iu,{accordinId:"info-details",labelId:"edge_info",hiddenElement:W.jsx(i4,{id:`${n.label}-view`,infos:[["source",n.source],["target",n.target],["substatement_status_label",s3(n.subStatement.valid,n.subStatement.invalidReason)],["expiring_date_label",CM(n.subStatement.payload.exp)]]})}),W.jsx(Iu,{accordinId:"subordinate-statement",labelId:"subordinate_statement_data",hiddenElement:W.jsx(pM,{id:"subordinate-statement-viewer",raw:n.subStatement.jwt,decodedPayload:n.subStatement.payload,decodedHeader:n.subStatement.header,validationFn:e,schemaUrl:"https://raw.githubusercontent.com/italia/openid-federation-browser/refs/heads/main/src/lib/openid-federation/schemas/subordinateStatement.schema.json"})})]}):W.jsx("div",{className:"col-md-10 text-center",children:W.jsx("h6",{children:"No subordinate statement available"})})})},rhe=({visible:n,onClose:e,onNodesAdd:t,onNodesRemove:r,onEdgeAdd:i,onEdgeRemove:s,onModalError:o,isDisconnected:a,isDiscovered:l,isInDiscoveryQueue:u,isFailed:c,onSelection:d,currentVisualizedData:h})=>{const g=h!==void 0;return W.jsx(ek,{locale:navigator.language.split(",")[0],defaultLocale:"en-EN",messages:f1(navigator.language),children:W.jsxs("div",{"data-testid":"context-sidebar",className:`sidebar-wrapper ${n?"show":"collapse"}`,style:{border:"solid hsl(210,4%,78%)",backgroundColor:"hsl(0, 0%, 96%)",height:"88%",zIndex:10,position:"absolute",minWidth:"34rem",top:"110px",left:"0px",width:"34rem",overflowY:"scroll",overflowX:"hidden"},children:[W.jsx("div",{className:"container",children:W.jsxs("div",{className:"row justify-content-center",children:[W.jsx("div",{className:"col-md-10",children:W.jsx("h3",{children:"Inspection Window"})}),W.jsx("div",{className:"col-md-auto",onClick:()=>e(),children:W.jsx(Ir,{iconID:"#it-close",className:"icon-sm"})})]})}),g?mS(h)?W.jsx(the,{data:h,onNodesRemove:r,onNodesAdd:t,onEdgeAdd:y=>i(h.id,y),isFailed:c,isInDiscoveryQueue:u,isDiscovered:l,onSelection:d,onModalError:o,isDisconnected:y=>a(h.id,y)}):W.jsx(nhe,{data:h}):W.jsxs("div",{className:"alert alert-warning",role:"alert",children:[W.jsx(Ir,{iconID:"#it-warning",className:"icon-sm"}),W.jsx("span",{children:"No data Selected"})]}),W.jsxs("div",{className:"row justify-content-center",children:[W.jsx("div",{className:"col-md-6",style:{position:"relative",top:"10px"},children:W.jsx(Cl,{text:"Delete element from graph",iconID:"#it-delete",btnClassName:"btn btn-danger btn-sm",action:()=>{g&&(mS(h)?r([h.id]):s(h.id),e())}})}),W.jsx("div",{className:"col-md-6",style:{position:"relative",top:"10px"},children:g&&!mS(h)&&W.jsx(Cl,{text:"Select linked entity on map",iconID:"#it-pin",btnClassName:"btn btn-primary btn-sm",action:()=>{d(h.target)}})})]})]})})},Cb=({modalID:n,headerID:e,descriptionID:t,description:r,dismissActionID:i,acceptActionID:s,details:o,onAccept:a,onDismiss:l})=>W.jsx("div",{className:"modal",tabIndex:-1,role:"dialog",id:n,"data-testid":"warning-modal",children:W.jsx("div",{className:"modal-dialog",role:"document",children:W.jsxs("div",{className:"modal-content",children:[W.jsx("div",{className:"modal-header",children:W.jsx("p",{className:"modal-title",style:{fontSize:"18px"},id:"modal1Title",children:W.jsx(Nt,{id:e})})}),W.jsxs("div",{className:"modal-body",children:[W.jsx("p",{children:r!==void 0?W.jsx("span",{className:_n.contextAccordinTitle,children:r}):W.jsx(Nt,{id:t})}),o&&W.jsxs("ul",{children:[o.slice(0,5).map((u,c)=>{const[d,h]=u.split(" - ");return W.jsxs("li",{className:_n.contextAccordinText,children:[W.jsx("p",{className:"p-warning",children:d}),W.jsx("p",{className:"p-warning",children:h})]},c)}),o.length>5&&W.jsx("li",{children:W.jsx("p",{className:"p-warning",children:"others ..."})})]})]}),W.jsxs("div",{className:"modal-footer",children:[W.jsx("button",{"data-testid":"warning-modal-dismiss-button",className:"btn btn-outline-primary btn-sm",type:"button","data-bs-dismiss":"modal",onClick:l,children:W.jsx(Nt,{id:i})}),s&&W.jsx("button",{"data-testid":"warning-modal-accept-button",className:"btn btn-primary btn-sm",type:"button","data-bs-dismiss":"modal",onClick:a,children:W.jsx(Nt,{id:s})})]})]})})}),TD=({modalID:n,headerID:e,placeorderID:t,dismissActionID:r,acceptActionID:i,onAccept:s,onDismiss:o,inputVerifyFn:a,invalidInputMessageID:l})=>{const[u,c]=Z.useState(""),d=Z.useRef(null),h=y=>{c(y.target.value),Jg(`${n}-invalid-input-collapse`,!1)},g=()=>{if(a&&a(u)){Jg(`${n}-invalid-input-collapse`,!0);return}s(u),i3(`${n}-input-value`),Jg(`${n}-invalid-input-collapse`,!1),OW(d)};return W.jsx("div",{className:"modal",tabIndex:-1,role:"dialog",id:n,ref:d,children:W.jsx("div",{className:"modal-dialog",role:"document",children:W.jsxs("div",{className:"modal-content",children:[W.jsx("div",{className:"modal-header",children:W.jsx("p",{className:"modal-title",style:{fontSize:"18px"},id:"modal1Title",children:W.jsx(Nt,{id:e})})}),W.jsxs("div",{className:"modal-body",children:[W.jsx("div",{className:"container",children:W.jsx("div",{className:"row",children:W.jsx("input",{type:"text",className:"form-control",id:`${n}-input-value`,onChange:h,placeholder:t?f1(navigator.language)[`${t}`]:"",style:{fontSize:"14px"}})})}),W.jsx("div",{className:"collapse row",id:`${n}-invalid-input-collapse`,children:W.jsx("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",style:{fontSize:"14px"},children:W.jsx(Nt,{id:l||"invalid_input_value"})})})]}),W.jsxs("div",{className:"modal-footer",children:[W.jsx("button",{className:"btn btn-outline-primary btn-sm",type:"button","data-bs-dismiss":"modal",onClick:o,"data-testid":"modal-dismiss-button",children:W.jsx(Nt,{id:r})}),i&&W.jsx("button",{className:"btn btn-primary btn-sm",type:"button",onClick:g,"data-testid":"modal-accept-button",children:W.jsx(Nt,{id:i})})]})]})})})},ihe=({showTCButton:n,onSessionSave:e,onExport:t,onTCCopy:r,onEntityAdd:i})=>W.jsxs("div",{style:{zIndex:9,position:"absolute",top:15,right:15,padding:1,color:"white"},children:[W.jsx("button",{className:`btn btn-primary btn-sm py-1 px-2 mt-2 ${Nu.headerText}`,style:{display:"block",width:"100%"},onClick:i,"data-testid":"add-entity-button",children:W.jsxs("div",{className:"row align-items-start",children:[W.jsx("div",{className:"col-3",children:W.jsx(Ir,{iconID:"#it-plus",className:"icon-sm icon-white",isRounded:!1})}),W.jsx("div",{className:"col-md-auto",children:W.jsx("span",{className:"titillium-web-bold",style:{fontSize:"14px"},children:W.jsx(Nt,{id:"add_entity"})})})]})}),W.jsx(Al,{className:"nav-link",to:"/restoreSession",children:W.jsx("button",{className:`btn btn-primary btn-sm py-1 px-2 mt-2 ${Nu.headerText}`,style:{display:"block",width:"100%"},"data-testid":"upload-button",children:W.jsxs("div",{className:"row",children:[W.jsx("div",{className:"col-3",children:W.jsx(Ir,{iconID:"#it-upload",className:"icon-sm icon-white",isRounded:!1})}),W.jsx("div",{className:"col-md-auto",children:W.jsx("span",{className:"titillium-web-bold",style:{fontSize:"14px"},children:W.jsx(Nt,{id:"upload_view"})})})]})})}),W.jsx("button",{className:`btn btn-primary btn-sm py-1 px-2 mt-2 ${Nu.headerText}`,style:{display:"block",width:"100%"},onClick:t,"data-testid":"export-button",children:W.jsxs("div",{className:"row align-items-start",children:[W.jsx("div",{className:"col-3",children:W.jsx(Ir,{iconID:"#it-download",className:"icon-sm icon-white",isRounded:!1})}),W.jsx("div",{className:"col-md-auto",children:W.jsx("span",{className:"titillium-web-bold",style:{fontSize:"14px"},children:W.jsx(Nt,{id:"export"})})})]})}),W.jsx("button",{className:`btn btn-primary btn-sm py-1 px-2 mt-2 ${Nu.headerText}`,style:{display:"block",width:"100%"},onClick:e,"data-testid":"save-button",children:W.jsxs("div",{className:"row",children:[W.jsx("div",{className:"col-3",children:W.jsx(Ir,{iconID:"#it-bookmark",className:"icon-sm icon-white",isRounded:!1})}),W.jsx("div",{className:"col-md-auto",children:W.jsx("span",{className:"titillium-web-bold",style:{fontSize:"14px"},children:W.jsx(Nt,{id:"save_view"})})})]})}),n&&W.jsx("button",{className:`btn btn-primary btn-sm py-1 px-2 mt-2 ${Nu.headerText}`,style:{display:"block",width:"100%"},onClick:r,"data-testid":"export-tc-button",children:W.jsxs("div",{className:"row",children:[W.jsx("div",{className:"col-3",children:W.jsx(Ir,{iconID:"#it-plug",className:"icon-sm icon-white",isRounded:!1})}),W.jsx("div",{className:"col-md-auto",children:W.jsx("span",{className:"titillium-web-bold",style:{fontSize:"14px"},children:W.jsx(Nt,{id:"export_tc"})})})]})})]}),she=()=>{const n=Z.useRef(null),[e,t]=Z.useState(!1),[r,i]=Z.useState([]),[s,o]=Z.useState([]),[a,l]=Z.useState([]),[u,c]=Z.useState([]),[d,h]=Z.useState(!1),[g,y]=Z.useState(void 0),[E,_]=Z.useState(""),[m,v]=Z.useState([]),[S,T]=Z.useState(void 0),[M,A]=Z.useState(new Error),[R,O]=Z.useState(void 0),[I,k]=Z.useState([]),[G,$]=Z.useState([]),[U,ee]=Z.useState(!1),[,re]=yk(),ne=zl(),X=({nodes:ie,edges:se})=>{i(ie),o(se),sessionStorage.setItem("currentSession",JSON.stringify({nodes:ie,edges:se}))},q=ie=>m.includes(ie),K=ie=>r.some(se=>se.id===ie),F=(ie,se)=>J9({edges:s},ie,se),L=()=>{const ie=document.getElementById("notification");ie&&(ie.style.display="block",setTimeout(()=>{ie.style.display="none"},5e3))},z=ie=>{var se;_(`Saved: ${ie.replace("session-","")}`),lR((se=n.current)==null?void 0:se.exportCanvas()),L()},Y=()=>{const ie=sessionStorage.getItem("currentSessionName");ie?z(ie):Nh("save-title-modal")},B=()=>Nh("add-entity-modal"),J=()=>Nh("export-modal"),le=()=>{g&&(navigator.clipboard.writeText(g),_("Trust Chain copied to clipboard"),L())},pe=ie=>{const se=K9({nodes:r,edges:s},ie);X(se)},he=ie=>{if(oR("error-modal")){const se=[...ie||[],...R||[]];A(new Error(`Failed to discover ${se.length} entities`)),O(se);return}A(new Error(`Failed to discover ${(ie||[]).length} entities`)),O(ie),Nh("error-modal")},Ee=(ie,se)=>{var be;const Ae=r.find(Ye=>er(Ye.id)===er(ie)),we=r.find(Ye=>er(Ye.id)===er(se));if(!Ae||!we)return;const Re=(be=Ae.info.ec.payload.authority_hints)==null?void 0:be.some(Ye=>er(Ye)===er(se)),Le={nodes:r,edges:[...s,Re?Gg(we.info,Ae.info):Gg(Ae.info,we.info)]};X(Le)},_e=ie=>{const se=s.filter(Ae=>Ae.id!==ie);X({nodes:r,edges:se})},te=ie=>{if(ie.length!==0)if(ie.length==1){k([...I,...ie]);return}else $(ie),Nh("warning-modal")},j=ie=>{h(!0),l([er(ie)]),c([er(ie)]),T(r.find(se=>er(se.id)===er(ie))),setTimeout(()=>{h(!1),c([]),l([])},2e3)},ce=ie=>{const se=r.find(Ae=>er(Ae.id)===er(ie));se&&(T(se),ee(!0))},fe=ie=>{const se=s.find(Ae=>Ae.id===ie);se&&(T(se),ee(!0))};return Z.useEffect(()=>{if(ne.pathname!=="/graphView")return;const ie=ne.search.replace("?","").split("&"),se=ie.find(we=>we.startsWith("node="));se&&ce(decodeURIComponent(se.split("=")[1]));const Ae=ie.find(we=>we.startsWith("edge="));Ae&&fe(decodeURIComponent(Ae.split("=")[1]))},[ne,r,s]),Z.useEffect(()=>y(hq({nodes:r,edges:s},u)),[u]),Z.useEffect(()=>{window.addEventListener("trustAnchorUrl",()=>{t(!0)}),window.addEventListener("currentSession",()=>{t(!0)})},[]),Z.useEffect(()=>{const ie=sessionStorage.getItem("currentSession");if(ie){pq(ie).then(({graph:Le,errors:be})=>{t(!1),be.length>0&&!oR("error-modal")&&(A(new Error("Failed to load some entities")),O(be.map(Ye=>`${Ye[0]} - ${JSON.stringify(Ye[1])}`)),Nh("error-modal")),X(Le)}).catch(()=>he(["Failed to load the current session"]));return}const se=sessionStorage.getItem("trustAnchorUrl");if(!se)return;const{url:Ae,searchType:we}=JSON.parse(se);(we==="entity"?P3(Ae):py(Ae)).then(X).catch(Le=>he([`${Ae} - ${Le.message}`])),t(!1)},[e]),Z.useEffect(()=>{if(I.length===0)return;const[ie,...se]=I;dq([ie],{nodes:r,edges:s}).then(Ae=>{var Ye;Ae.failed.find(ue=>ue.entity===ie)&&(v([...m,ie]),he(Ae.failed.map(ue=>`${ue.entity} - ${ue.error.message}`)),k(se));const we=S,Re=Ae.graph.nodes.find(ue=>ue.id===ie);if(!Re){k(se);return}Re.info.istanciatedFrom=S==null?void 0:S.id;const Le=(Ye=we.info.ec.payload.authority_hints)==null?void 0:Ye.some(ue=>ue.startsWith(ie)||ie.startsWith(ue)),be={nodes:Ae.graph.nodes,edges:[...Ae.graph.edges,Le?Gg(Ae.graph.nodes.find(ue=>ue.id===ie).info,we.info):Gg(we.info,Ae.graph.nodes.find(ue=>ue.id===ie).info)]};X(be),k(se)})},[I]),W.jsxs(W.Fragment,{children:[W.jsx(rhe,{visible:U,onClose:()=>ee(!1),currentVisualizedData:S,onNodesAdd:te,onNodesRemove:pe,isFailed:q,onEdgeAdd:Ee,onEdgeRemove:_e,onModalError:he,isDisconnected:F,isDiscovered:K,isInDiscoveryQueue:ie=>I.includes(ie),onSelection:j}),W.jsx(Cb,{modalID:"error-modal",headerID:"error_modal_title",details:R,description:M.message,dismissActionID:"modal_cancel"}),W.jsx(Cb,{modalID:"export-modal",headerID:"static_dynamic_title",descriptionID:"static_dynamic_choice_message",dismissActionID:"dynamic",acceptActionID:"static",onAccept:()=>aR(PP({nodes:r,edges:s},!0)),onDismiss:()=>aR(PP({nodes:r,edges:s},!1))}),W.jsx(TD,{modalID:"save-title-modal",headerID:"save_name_title",placeorderID:"save_name_message",dismissActionID:"modal_cancel",acceptActionID:"save",inputVerifyFn:ie=>ie==="",onAccept:ie=>{var se;sessionStorage.setItem("currentSessionName",`session-${ie}`),_(`Saved: ${ie.replace("session-","")}`),lR((se=n.current)==null?void 0:se.exportCanvas()),L()}}),W.jsx(Cb,{modalID:"warning-modal",headerID:"warning_modal_title",descriptionID:"warning_modal_message",dismissActionID:"modal_cancel",acceptActionID:"modal_confirm",onAccept:()=>k([...I,...G]),onDismiss:()=>$([])}),W.jsx(TD,{modalID:"add-entity-modal",headerID:"save_name_title",placeorderID:"insert_entity_url_label",dismissActionID:"modal_cancel",acceptActionID:"add",invalidInputMessageID:"invalid_url_error_message",inputVerifyFn:ie=>!r3(ie),onAccept:ie=>{py(ie,{nodes:r,edges:s}).then(X).catch(se=>he([`${ie} - ${se.message}`]))}}),W.jsx("div",{id:"content-body",className:rv.graphAtom,children:W.jsxs("div",{"data-testid":"graph-view",children:[W.jsx(ihe,{onSessionSave:Y,onExport:J,onTCCopy:le,showTCButton:g!==void 0,onEntityAdd:B}),W.jsx(dde,{ref:n,nodes:r,edges:s,selections:u,actives:a,onNodeClick:ie=>{u.includes(ie.id)?(c(u.filter(se=>se!==ie.id)),l(a.filter(se=>se!==ie.id))):(c([ie.id,...u]),l([ie.id,...a]))},onCanvasClick:()=>{d||S||(l([]),c([]))},lassoType:"node",onLassoEnd:ie=>c(ie),draggable:!0,onNodeContextMenu:ie=>{re({node:ie.id}),ce(ie.id)},onEdgeContextMenu:ie=>{const se=ie;re({edge:se.id}),fe(se.id)}})]})}),W.jsx("div",{id:"notification",style:{display:"none",zIndex:9,position:"absolute",bottom:20,right:15,padding:1,color:"white"},children:W.jsx("span",{className:"badge bg-success",children:E})}),W.jsx("div",{style:{zIndex:9,userSelect:"none",position:"absolute",bottom:0,right:0,background:"rgba(0, 0, 0, .5)",color:"white"},children:W.jsx("span",{className:Nu.headerText,style:{margin:5},children:W.jsx(Nt,{id:"drag_info"})})})]})},ohe=()=>{const[n,e]=Z.useState(!1);return Z.useEffect(()=>{if(Gb.length){const t=""+Gb[0].url+"/.well-known/openid-federation";fr.get(t).catch(r=>{r.request.status===0&&e(!0)})}}),W.jsx("div",{className:"App",children:W.jsxs(ek,{locale:navigator.language.split(",")[0],defaultLocale:"en-EN",messages:f1(navigator.language),children:[W.jsxs(Kj,{basename:"/openid-federation-browser/main/",children:[W.jsx(l6,{}),n&&W.jsxs("div",{className:"alert alert-warning",role:"alert",style:{fontSize:"14px"},children:[W.jsx(Nt,{id:"cors_warning"}),W.jsx("a",{href:"https://github.com/italia/openid-federation-browser/blob/main/SETUP.md#cors-restriction",className:"alert-link",style:{marginLeft:"10px"},children:W.jsx(Nt,{id:"read_more"})})]}),W.jsx("div",{className:rv.bodyContainer,children:W.jsxs(Tj,{children:[W.jsx(nd,{path:"/",Component:hS}),W.jsx(nd,{path:"/insertUrl",Component:hS}),W.jsx(nd,{path:"/listUrl",Component:YW}),W.jsx(nd,{path:"/restoreSession",Component:JW}),W.jsx(nd,{path:"/insertEntityUrl",Component:hS}),W.jsx(nd,{path:"/graphView",Component:she})]})})]}),W.jsx("canvas",{id:"canvas",style:{display:"none"}})]})})},ahe=U4.createRoot(document.getElementById("root"));ahe.render(W.jsx(hx.StrictMode,{children:W.jsx(ohe,{})}));
